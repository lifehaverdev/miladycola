var xp=Object.defineProperty;var _p=(n,e,t)=>e in n?xp(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var oe=(n,e,t)=>(_p(n,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();class kp{constructor(){this.listeners=new Map,this.debugMode=!1}setDebugMode(e){this.debugMode=e}on(e,t){return this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(t),this.debugMode&&console.log(`[EventBus] Listener added for "${e}"`),()=>this.off(e,t)}off(e,t){this.listeners.has(e)&&(this.listeners.get(e).delete(t),this.debugMode&&console.log(`[EventBus] Listener removed for "${e}"`),this.listeners.get(e).size===0&&this.listeners.delete(e))}removeAllListeners(e){e?(this.listeners.delete(e),this.debugMode&&console.log(`[EventBus] All listeners removed for "${e}"`)):(this.listeners.clear(),this.debugMode&&console.log("[EventBus] All listeners removed"))}emit(e,t){this.listeners.has(e)&&(this.debugMode&&console.log(`[EventBus] Emitting "${e}"`,t),this.listeners.get(e).forEach(r=>{try{r(t)}catch(i){console.error(`[EventBus] Error in listener for "${e}":`,i)}}))}once(e,t){const r=s=>{this.off(e,r);try{t(s)}catch(o){console.error(`[EventBus] Error in once callback for "${e}":`,o)}};return this.on(e,r)}}const ie=new kp;let Ii=null;function fs(n){if(typeof n=="string"||typeof n=="number")return document.createTextNode(String(n));if(typeof n.type=="function")return Sp(n);const e=document.createElement(n.type);return Ad(e,{},n.props),n.children.forEach(t=>{e.appendChild(fs(t))}),typeof n.props.ref=="function"&&n.props.ref(e),e}function Sp(n){var o,a;const e=n.type,t=new e(n.props);n._instance=t,t._parentVnode=n,t._parent=Ii,(o=t.willMount)==null||o.call(t);const r=Ii;Ii=t;const i=t.render();t._vnode=i;const s=fs(i);return t._el=s,Ii=r,typeof n.props.ref=="function"&&n.props.ref(t),(a=t.didMount)==null||a.call(t),s}function Ad(n,e,t){const r=new Set([...Object.keys(e),...Object.keys(t)]);for(const i of r){const s=e[i],o=t[i];if(s!==o&&!(i==="key"||i==="ref"))if(i.startsWith("on")){const a=i.slice(2).toLowerCase();s&&n.removeEventListener(a,s),o&&n.addEventListener(a,o)}else i==="className"?n.className=o??"":i==="style"&&typeof o=="object"?Object.assign(n.style,o):i in n&&typeof o!="object"?o==null?n.removeAttribute(i):n[i]=o:o==null||o===!1?n.removeAttribute(i):n.setAttribute(i,o===!0?"":o)}}function vs(n){var e,t,r,i;if(!(n==null||typeof n=="string"||typeof n=="number"))if(typeof((e=n.props)==null?void 0:e.ref)=="function"&&n.props.ref(null),typeof n.type=="function"){const s=n._instance;s&&((t=s.willUnmount)==null||t.call(s),(r=s._executeCleanup)==null||r.call(s),vs(s._vnode))}else(i=n.children)==null||i.forEach(s=>vs(s))}function Np(n,e,t,r){var u,g,x,A,E,I;const i=n._instance,s=i.props,o=e.props;if(e._instance=i,i._parentVnode=e,i.props=o,((u=n.props)==null?void 0:u.ref)!==((g=e.props)==null?void 0:g.ref)&&(typeof((x=n.props)==null?void 0:x.ref)=="function"&&n.props.ref(null),typeof((A=e.props)==null?void 0:A.ref)=="function"&&e.props.ref(i)),!i.shouldUpdate(s,o,i.state,i.state))return;(E=i.willUpdate)==null||E.call(i);const a=Ii;Ii=i;const l=i._vnode,h=i.render();Ha(t,l,h,r),Ii=a,i._vnode=h,i._el=t.childNodes[r],(I=i.didUpdate)==null||I.call(i)}function Ha(n,e,t,r=0){const i=n.childNodes[r];if(e==null){const s=fs(t);i?n.insertBefore(s,i):n.appendChild(s);return}if(t==null){vs(e),i&&i.remove();return}if(typeof e!="object"||typeof t!="object"){e!==t&&n.replaceChild(fs(t),i);return}if(e.type!==t.type){vs(e),n.replaceChild(fs(t),i);return}if(typeof t.type=="function"){Np(e,t,n,r);return}Ad(i,e.props,t.props),Cp(i,e.children,t.children)}function Cp(n,e,t){const r=new Map,i=[];e.forEach((a,l)=>{(a==null?void 0:a.key)!=null?r.set(a.key,{vnode:a,node:n.childNodes[l],index:l}):i.push({vnode:a,node:n.childNodes[l],index:l})});const s=new Set;let o=0;t.forEach((a,l)=>{let h=null;(a==null?void 0:a.key)!=null?(h=r.get(a.key),s.add(a.key)):o<i.length&&(h=i[o],o++);const u=n.childNodes[l];if(h)h.node!==u&&n.insertBefore(h.node,u),Ha(n,h.vnode,a,l);else{const g=fs(a);u?n.insertBefore(g,u):n.appendChild(g)}}),r.forEach((a,l)=>{!s.has(l)&&a.node.parentNode&&(vs(a.vnode),a.node.remove())});for(let a=o;a<i.length;a++)i[a].node.parentNode&&(vs(i[a].vnode),i[a].node.remove());for(;n.childNodes.length>t.length;)n.lastChild.remove()}class qt{constructor(e={}){this.props=e,this.state={},this._vnode=null,this._el=null,this._parentVnode=null,this._cleanupRegistry=new Set,this._boundHandlers=new Map,this._context=new Map,this._parent=null}setState(e){const t={...this.state};this.state={...this.state,...e},this.shouldUpdate(this.props,this.props,t,this.state)&&this._update()}shouldUpdate(e,t,r,i){return!0}_update(){var s,o;if(!this._el)return;const e=this._el.parentNode;if(!e)return;(s=this.willUpdate)==null||s.call(this);const t=this._vnode,r=this.render(),i=Array.from(e.childNodes).indexOf(this._el);Ha(e,t,r,i),this._el=e.childNodes[i],this._vnode=r,(o=this.didUpdate)==null||o.call(this)}render(){return null}willMount(){}didMount(){}willUpdate(){}didUpdate(){}willUnmount(){}registerCleanup(e){return typeof e!="function"?()=>{}:(this._cleanupRegistry.add(e),()=>this._cleanupRegistry.delete(e))}_executeCleanup(){this._cleanupRegistry.forEach(e=>{try{e()}catch(t){console.error("[Component] Cleanup error:",t)}}),this._cleanupRegistry.clear()}setTimeout(e,t){const r=window.setTimeout(e,t);return this.registerCleanup(()=>window.clearTimeout(r)),r}setInterval(e,t){const r=window.setInterval(e,t);return this.registerCleanup(()=>window.clearInterval(r)),r}subscribe(e,t){const r=ie.on(e,t);return this.registerCleanup(r),r}provideContext(e,t){this._context.set(e,t)}getContext(e){var r;if(this._context.has(e))return this._context.get(e);let t=this._parent;for(;t;){if((r=t._context)!=null&&r.has(e))return t._context.get(e);t=t._parent}}bind(e){return this._boundHandlers.has(e)||this._boundHandlers.set(e,e.bind(this)),this._boundHandlers.get(e)}}function b(n,e,...t){const r=t.flat(1/0).filter(i=>i!=null&&i!==!1&&i!==!0);return{type:n,props:e||{},children:r,key:(e==null?void 0:e.key)??null}}const Ch=new WeakMap;function Ih(n,e){const t=Ch.get(e)||null;t===null&&(e.innerHTML=""),Ha(e,t,n,0),Ch.set(e,n)}class Ip{constructor(){this.routes=new Map,this.currentRoute=null,this.currentHandler=null,this.notFoundHandler=null,this.handleRoute=this.handleRoute.bind(this),this.navigate=this.navigate.bind(this),window.addEventListener("popstate",async e=>{await this.handleRoute(window.location.pathname)})}on(e,t){this.routes.set(e,t)}notFound(e){this.notFoundHandler=e}async navigate(e,t=!1){e!==window.location.pathname&&(t?window.history.replaceState({path:e},"",e):window.history.pushState({path:e},"",e),await this.handleRoute(e))}_matchRoute(e,t){if(e===t)return{};const r=e.split("/").filter(o=>o),i=t.split("/").filter(o=>o);if(r.length!==i.length)return null;const s={};for(let o=0;o<r.length;o++){const a=r[o],l=i[o];if(a.startsWith(":")){const h=a.slice(1);try{s[h]=decodeURIComponent(l)}catch{s[h]=l}}else if(a!==l)return null}return s}_findRoute(e){if(this.routes.has(e))return{handler:this.routes.get(e),params:{}};const t=[];for(const[r,i]of this.routes.entries())if(r!==e&&r.includes(":")){const s=(r.match(/:/g)||[]).length,o=r.split("/").filter(a=>a&&!a.startsWith(":")).length;t.push({pattern:r,handler:i,paramCount:s,literalCount:o})}t.sort((r,i)=>i.literalCount!==r.literalCount?i.literalCount-r.literalCount:i.paramCount-r.paramCount);for(const{pattern:r,handler:i}of t){const s=this._matchRoute(r,e);if(s!==null)return{handler:i,params:s}}return null}async handleRoute(e){this.currentHandler&&typeof this.currentHandler.cleanup=="function"&&this.currentHandler.cleanup();const t=this._findRoute(e);if(t){this.currentRoute=e;const r=await Promise.resolve(t.handler(t.params));this.currentHandler=r||null}else this.notFoundHandler?(this.currentRoute=null,this.currentHandler=null,this.notFoundHandler(e)):console.warn(`No route handler for: ${e}`)}async start(){await this.handleRoute(window.location.pathname)}getCurrentRoute(){return this.currentRoute||window.location.pathname}_encodeTitle(e){return e?e.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""):""}_decodeTitle(e){return e?e.split("-").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "):""}generateURL(e,t,r,i=null){const s=String(e||"1"),o=this._encodeTitle(t),a=this._encodeTitle(r);if(i){const l=this._encodeTitle(i);return`/${s}/${o}/${a}/${l}`}return`/${s}/${o}/${a}`}}var Pp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof{}<"u"?{}:typeof self<"u"?self:{};function ks(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ph,ul={exports:{}},Mp=(Ph||(Ph=1,function(n,e){function t(y,S){if(!y)throw new Error(S||"Assertion failed")}function r(y,S){y.super_=S;var C=function(){};C.prototype=S.prototype,y.prototype=new C,y.prototype.constructor=y}function i(y,S,C){if(i.isBN(y))return y;this.negative=0,this.words=null,this.length=0,this.red=null,y!==null&&(S!=="le"&&S!=="be"||(C=S,S=10),this._init(y||0,S||10,C||"be"))}var s;typeof n=="object"?n.exports=i:e.BN=i,i.BN=i,i.wordSize=26;try{s=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:require("buffer").Buffer}catch{}function o(y,S){var C=y.charCodeAt(S);return C>=48&&C<=57?C-48:C>=65&&C<=70?C-55:C>=97&&C<=102?C-87:void t(!1,"Invalid character in "+y)}function a(y,S,C){var p=o(y,C);return C-1>=S&&(p|=o(y,C-1)<<4),p}function l(y,S,C,p){for(var c=0,d=0,f=Math.min(y.length,C),N=S;N<f;N++){var v=y.charCodeAt(N)-48;c*=p,d=v>=49?v-49+10:v>=17?v-17+10:v,t(v>=0&&d<p,"Invalid character"),c+=d}return c}function h(y,S){y.words=S.words,y.length=S.length,y.negative=S.negative,y.red=S.red}if(i.isBN=function(y){return y instanceof i||y!==null&&typeof y=="object"&&y.constructor.wordSize===i.wordSize&&Array.isArray(y.words)},i.max=function(y,S){return y.cmp(S)>0?y:S},i.min=function(y,S){return y.cmp(S)<0?y:S},i.prototype._init=function(y,S,C){if(typeof y=="number")return this._initNumber(y,S,C);if(typeof y=="object")return this._initArray(y,S,C);S==="hex"&&(S=16),t(S===(0|S)&&S>=2&&S<=36);var p=0;(y=y.toString().replace(/\s+/g,""))[0]==="-"&&(p++,this.negative=1),p<y.length&&(S===16?this._parseHex(y,p,C):(this._parseBase(y,S,p),C==="le"&&this._initArray(this.toArray(),S,C)))},i.prototype._initNumber=function(y,S,C){y<0&&(this.negative=1,y=-y),y<67108864?(this.words=[67108863&y],this.length=1):y<4503599627370496?(this.words=[67108863&y,y/67108864&67108863],this.length=2):(t(y<9007199254740992),this.words=[67108863&y,y/67108864&67108863,1],this.length=3),C==="le"&&this._initArray(this.toArray(),S,C)},i.prototype._initArray=function(y,S,C){if(t(typeof y.length=="number"),y.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(y.length/3),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var c,d,f=0;if(C==="be")for(p=y.length-1,c=0;p>=0;p-=3)d=y[p]|y[p-1]<<8|y[p-2]<<16,this.words[c]|=d<<f&67108863,this.words[c+1]=d>>>26-f&67108863,(f+=24)>=26&&(f-=26,c++);else if(C==="le")for(p=0,c=0;p<y.length;p+=3)d=y[p]|y[p+1]<<8|y[p+2]<<16,this.words[c]|=d<<f&67108863,this.words[c+1]=d>>>26-f&67108863,(f+=24)>=26&&(f-=26,c++);return this._strip()},i.prototype._parseHex=function(y,S,C){this.length=Math.ceil((y.length-S)/6),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var c,d=0,f=0;if(C==="be")for(p=y.length-1;p>=S;p-=2)c=a(y,S,p)<<d,this.words[f]|=67108863&c,d>=18?(d-=18,f+=1,this.words[f]|=c>>>26):d+=8;else for(p=(y.length-S)%2==0?S+1:S;p<y.length;p+=2)c=a(y,S,p)<<d,this.words[f]|=67108863&c,d>=18?(d-=18,f+=1,this.words[f]|=c>>>26):d+=8;this._strip()},i.prototype._parseBase=function(y,S,C){this.words=[0],this.length=1;for(var p=0,c=1;c<=67108863;c*=S)p++;p--,c=c/S|0;for(var d=y.length-C,f=d%p,N=Math.min(d,d-f)+C,v=0,w=C;w<N;w+=p)v=l(y,w,w+p,S),this.imuln(c),this.words[0]+v<67108864?this.words[0]+=v:this._iaddn(v);if(f!==0){var P=1;for(v=l(y,w,y.length,S),w=0;w<f;w++)P*=S;this.imuln(P),this.words[0]+v<67108864?this.words[0]+=v:this._iaddn(v)}this._strip()},i.prototype.copy=function(y){y.words=new Array(this.length);for(var S=0;S<this.length;S++)y.words[S]=this.words[S];y.length=this.length,y.negative=this.negative,y.red=this.red},i.prototype._move=function(y){h(y,this)},i.prototype.clone=function(){var y=new i(null);return this.copy(y),y},i.prototype._expand=function(y){for(;this.length<y;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=u}catch{i.prototype.inspect=u}else i.prototype.inspect=u;function u(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var g=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],x=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],A=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function E(y,S,C){C.negative=S.negative^y.negative;var p=y.length+S.length|0;C.length=p,p=p-1|0;var c=0|y.words[0],d=0|S.words[0],f=c*d,N=67108863&f,v=f/67108864|0;C.words[0]=N;for(var w=1;w<p;w++){for(var P=v>>>26,_=67108863&v,m=Math.min(w,S.length-1),M=Math.max(0,w-y.length+1);M<=m;M++){var L=w-M|0;P+=(f=(c=0|y.words[L])*(d=0|S.words[M])+_)/67108864|0,_=67108863&f}C.words[w]=0|_,v=0|P}return v!==0?C.words[w]=0|v:C.length--,C._strip()}i.prototype.toString=function(y,S){var C;if(S=0|S||1,(y=y||10)===16||y==="hex"){C="";for(var p=0,c=0,d=0;d<this.length;d++){var f=this.words[d],N=(16777215&(f<<p|c)).toString(16);c=f>>>24-p&16777215,(p+=2)>=26&&(p-=26,d--),C=c!==0||d!==this.length-1?g[6-N.length]+N+C:N+C}for(c!==0&&(C=c.toString(16)+C);C.length%S!==0;)C="0"+C;return this.negative!==0&&(C="-"+C),C}if(y===(0|y)&&y>=2&&y<=36){var v=x[y],w=A[y];C="";var P=this.clone();for(P.negative=0;!P.isZero();){var _=P.modrn(w).toString(y);C=(P=P.idivn(w)).isZero()?_+C:g[v-_.length]+_+C}for(this.isZero()&&(C="0"+C);C.length%S!==0;)C="0"+C;return this.negative!==0&&(C="-"+C),C}t(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var y=this.words[0];return this.length===2?y+=67108864*this.words[1]:this.length===3&&this.words[2]===1?y+=4503599627370496+67108864*this.words[1]:this.length>2&&t(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-y:y},i.prototype.toJSON=function(){return this.toString(16,2)},s&&(i.prototype.toBuffer=function(y,S){return this.toArrayLike(s,y,S)}),i.prototype.toArray=function(y,S){return this.toArrayLike(Array,y,S)},i.prototype.toArrayLike=function(y,S,C){this._strip();var p=this.byteLength(),c=C||Math.max(1,p);t(p<=c,"byte array longer than desired length"),t(c>0,"Requested array length <= 0");var d=function(f,N){return f.allocUnsafe?f.allocUnsafe(N):new f(N)}(y,c);return this["_toArrayLike"+(S==="le"?"LE":"BE")](d,p),d},i.prototype._toArrayLikeLE=function(y,S){for(var C=0,p=0,c=0,d=0;c<this.length;c++){var f=this.words[c]<<d|p;y[C++]=255&f,C<y.length&&(y[C++]=f>>8&255),C<y.length&&(y[C++]=f>>16&255),d===6?(C<y.length&&(y[C++]=f>>24&255),p=0,d=0):(p=f>>>24,d+=2)}if(C<y.length)for(y[C++]=p;C<y.length;)y[C++]=0},i.prototype._toArrayLikeBE=function(y,S){for(var C=y.length-1,p=0,c=0,d=0;c<this.length;c++){var f=this.words[c]<<d|p;y[C--]=255&f,C>=0&&(y[C--]=f>>8&255),C>=0&&(y[C--]=f>>16&255),d===6?(C>=0&&(y[C--]=f>>24&255),p=0,d=0):(p=f>>>24,d+=2)}if(C>=0)for(y[C--]=p;C>=0;)y[C--]=0},Math.clz32?i.prototype._countBits=function(y){return 32-Math.clz32(y)}:i.prototype._countBits=function(y){var S=y,C=0;return S>=4096&&(C+=13,S>>>=13),S>=64&&(C+=7,S>>>=7),S>=8&&(C+=4,S>>>=4),S>=2&&(C+=2,S>>>=2),C+S},i.prototype._zeroBits=function(y){if(y===0)return 26;var S=y,C=0;return 8191&S||(C+=13,S>>>=13),127&S||(C+=7,S>>>=7),15&S||(C+=4,S>>>=4),3&S||(C+=2,S>>>=2),1&S||C++,C},i.prototype.bitLength=function(){var y=this.words[this.length-1],S=this._countBits(y);return 26*(this.length-1)+S},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var y=0,S=0;S<this.length;S++){var C=this._zeroBits(this.words[S]);if(y+=C,C!==26)break}return y},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(y){return this.negative!==0?this.abs().inotn(y).iaddn(1):this.clone()},i.prototype.fromTwos=function(y){return this.testn(y-1)?this.notn(y).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(y){for(;this.length<y.length;)this.words[this.length++]=0;for(var S=0;S<y.length;S++)this.words[S]=this.words[S]|y.words[S];return this._strip()},i.prototype.ior=function(y){return t((this.negative|y.negative)===0),this.iuor(y)},i.prototype.or=function(y){return this.length>y.length?this.clone().ior(y):y.clone().ior(this)},i.prototype.uor=function(y){return this.length>y.length?this.clone().iuor(y):y.clone().iuor(this)},i.prototype.iuand=function(y){var S;S=this.length>y.length?y:this;for(var C=0;C<S.length;C++)this.words[C]=this.words[C]&y.words[C];return this.length=S.length,this._strip()},i.prototype.iand=function(y){return t((this.negative|y.negative)===0),this.iuand(y)},i.prototype.and=function(y){return this.length>y.length?this.clone().iand(y):y.clone().iand(this)},i.prototype.uand=function(y){return this.length>y.length?this.clone().iuand(y):y.clone().iuand(this)},i.prototype.iuxor=function(y){var S,C;this.length>y.length?(S=this,C=y):(S=y,C=this);for(var p=0;p<C.length;p++)this.words[p]=S.words[p]^C.words[p];if(this!==S)for(;p<S.length;p++)this.words[p]=S.words[p];return this.length=S.length,this._strip()},i.prototype.ixor=function(y){return t((this.negative|y.negative)===0),this.iuxor(y)},i.prototype.xor=function(y){return this.length>y.length?this.clone().ixor(y):y.clone().ixor(this)},i.prototype.uxor=function(y){return this.length>y.length?this.clone().iuxor(y):y.clone().iuxor(this)},i.prototype.inotn=function(y){t(typeof y=="number"&&y>=0);var S=0|Math.ceil(y/26),C=y%26;this._expand(S),C>0&&S--;for(var p=0;p<S;p++)this.words[p]=67108863&~this.words[p];return C>0&&(this.words[p]=~this.words[p]&67108863>>26-C),this._strip()},i.prototype.notn=function(y){return this.clone().inotn(y)},i.prototype.setn=function(y,S){t(typeof y=="number"&&y>=0);var C=y/26|0,p=y%26;return this._expand(C+1),this.words[C]=S?this.words[C]|1<<p:this.words[C]&~(1<<p),this._strip()},i.prototype.iadd=function(y){var S,C,p;if(this.negative!==0&&y.negative===0)return this.negative=0,S=this.isub(y),this.negative^=1,this._normSign();if(this.negative===0&&y.negative!==0)return y.negative=0,S=this.isub(y),y.negative=1,S._normSign();this.length>y.length?(C=this,p=y):(C=y,p=this);for(var c=0,d=0;d<p.length;d++)S=(0|C.words[d])+(0|p.words[d])+c,this.words[d]=67108863&S,c=S>>>26;for(;c!==0&&d<C.length;d++)S=(0|C.words[d])+c,this.words[d]=67108863&S,c=S>>>26;if(this.length=C.length,c!==0)this.words[this.length]=c,this.length++;else if(C!==this)for(;d<C.length;d++)this.words[d]=C.words[d];return this},i.prototype.add=function(y){var S;return y.negative!==0&&this.negative===0?(y.negative=0,S=this.sub(y),y.negative^=1,S):y.negative===0&&this.negative!==0?(this.negative=0,S=y.sub(this),this.negative=1,S):this.length>y.length?this.clone().iadd(y):y.clone().iadd(this)},i.prototype.isub=function(y){if(y.negative!==0){y.negative=0;var S=this.iadd(y);return y.negative=1,S._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(y),this.negative=1,this._normSign();var C,p,c=this.cmp(y);if(c===0)return this.negative=0,this.length=1,this.words[0]=0,this;c>0?(C=this,p=y):(C=y,p=this);for(var d=0,f=0;f<p.length;f++)d=(S=(0|C.words[f])-(0|p.words[f])+d)>>26,this.words[f]=67108863&S;for(;d!==0&&f<C.length;f++)d=(S=(0|C.words[f])+d)>>26,this.words[f]=67108863&S;if(d===0&&f<C.length&&C!==this)for(;f<C.length;f++)this.words[f]=C.words[f];return this.length=Math.max(this.length,f),C!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(y){return this.clone().isub(y)};var I=function(y,S,C){var p,c,d,f=y.words,N=S.words,v=C.words,w=0,P=0|f[0],_=8191&P,m=P>>>13,M=0|f[1],L=8191&M,k=M>>>13,D=0|f[2],G=8191&D,H=D>>>13,V=0|f[3],re=8191&V,$=V>>>13,ne=0|f[4],de=8191&ne,Q=ne>>>13,he=0|f[5],Re=8191&he,pe=he>>>13,De=0|f[6],Le=8191&De,me=De>>>13,Ue=0|f[7],ze=8191&Ue,ue=Ue>>>13,Be=0|f[8],qe=8191&Be,ge=Be>>>13,Ve=0|f[9],Je=8191&Ve,ye=Ve>>>13,$e=0|N[0],Qe=8191&$e,ve=$e>>>13,Ye=0|N[1],Xe=8191&Ye,we=Ye>>>13,Ze=0|N[2],et=8191&Ze,be=Ze>>>13,tt=0|N[3],rt=8191&tt,Ae=tt>>>13,nt=0|N[4],it=8191&nt,Ee=nt>>>13,st=0|N[5],ot=8191&st,xe=st>>>13,at=0|N[6],lt=8191&at,_e=at>>>13,ct=0|N[7],ht=8191&ct,ke=ct>>>13,ut=0|N[8],ft=8191&ut,Se=ut>>>13,dt=0|N[9],pt=8191&dt,Ne=dt>>>13;C.negative=y.negative^S.negative,C.length=19;var vt=(w+(p=Math.imul(_,Qe))|0)+((8191&(c=(c=Math.imul(_,ve))+Math.imul(m,Qe)|0))<<13)|0;w=((d=Math.imul(m,ve))+(c>>>13)|0)+(vt>>>26)|0,vt&=67108863,p=Math.imul(L,Qe),c=(c=Math.imul(L,ve))+Math.imul(k,Qe)|0,d=Math.imul(k,ve);var Vr=(w+(p=p+Math.imul(_,Xe)|0)|0)+((8191&(c=(c=c+Math.imul(_,we)|0)+Math.imul(m,Xe)|0))<<13)|0;w=((d=d+Math.imul(m,we)|0)+(c>>>13)|0)+(Vr>>>26)|0,Vr&=67108863,p=Math.imul(G,Qe),c=(c=Math.imul(G,ve))+Math.imul(H,Qe)|0,d=Math.imul(H,ve),p=p+Math.imul(L,Xe)|0,c=(c=c+Math.imul(L,we)|0)+Math.imul(k,Xe)|0,d=d+Math.imul(k,we)|0;var wt=(w+(p=p+Math.imul(_,et)|0)|0)+((8191&(c=(c=c+Math.imul(_,be)|0)+Math.imul(m,et)|0))<<13)|0;w=((d=d+Math.imul(m,be)|0)+(c>>>13)|0)+(wt>>>26)|0,wt&=67108863,p=Math.imul(re,Qe),c=(c=Math.imul(re,ve))+Math.imul($,Qe)|0,d=Math.imul($,ve),p=p+Math.imul(G,Xe)|0,c=(c=c+Math.imul(G,we)|0)+Math.imul(H,Xe)|0,d=d+Math.imul(H,we)|0,p=p+Math.imul(L,et)|0,c=(c=c+Math.imul(L,be)|0)+Math.imul(k,et)|0,d=d+Math.imul(k,be)|0;var bt=(w+(p=p+Math.imul(_,rt)|0)|0)+((8191&(c=(c=c+Math.imul(_,Ae)|0)+Math.imul(m,rt)|0))<<13)|0;w=((d=d+Math.imul(m,Ae)|0)+(c>>>13)|0)+(bt>>>26)|0,bt&=67108863,p=Math.imul(de,Qe),c=(c=Math.imul(de,ve))+Math.imul(Q,Qe)|0,d=Math.imul(Q,ve),p=p+Math.imul(re,Xe)|0,c=(c=c+Math.imul(re,we)|0)+Math.imul($,Xe)|0,d=d+Math.imul($,we)|0,p=p+Math.imul(G,et)|0,c=(c=c+Math.imul(G,be)|0)+Math.imul(H,et)|0,d=d+Math.imul(H,be)|0,p=p+Math.imul(L,rt)|0,c=(c=c+Math.imul(L,Ae)|0)+Math.imul(k,rt)|0,d=d+Math.imul(k,Ae)|0;var Pr=(w+(p=p+Math.imul(_,it)|0)|0)+((8191&(c=(c=c+Math.imul(_,Ee)|0)+Math.imul(m,it)|0))<<13)|0;w=((d=d+Math.imul(m,Ee)|0)+(c>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,p=Math.imul(Re,Qe),c=(c=Math.imul(Re,ve))+Math.imul(pe,Qe)|0,d=Math.imul(pe,ve),p=p+Math.imul(de,Xe)|0,c=(c=c+Math.imul(de,we)|0)+Math.imul(Q,Xe)|0,d=d+Math.imul(Q,we)|0,p=p+Math.imul(re,et)|0,c=(c=c+Math.imul(re,be)|0)+Math.imul($,et)|0,d=d+Math.imul($,be)|0,p=p+Math.imul(G,rt)|0,c=(c=c+Math.imul(G,Ae)|0)+Math.imul(H,rt)|0,d=d+Math.imul(H,Ae)|0,p=p+Math.imul(L,it)|0,c=(c=c+Math.imul(L,Ee)|0)+Math.imul(k,it)|0,d=d+Math.imul(k,Ee)|0;var Mr=(w+(p=p+Math.imul(_,ot)|0)|0)+((8191&(c=(c=c+Math.imul(_,xe)|0)+Math.imul(m,ot)|0))<<13)|0;w=((d=d+Math.imul(m,xe)|0)+(c>>>13)|0)+(Mr>>>26)|0,Mr&=67108863,p=Math.imul(Le,Qe),c=(c=Math.imul(Le,ve))+Math.imul(me,Qe)|0,d=Math.imul(me,ve),p=p+Math.imul(Re,Xe)|0,c=(c=c+Math.imul(Re,we)|0)+Math.imul(pe,Xe)|0,d=d+Math.imul(pe,we)|0,p=p+Math.imul(de,et)|0,c=(c=c+Math.imul(de,be)|0)+Math.imul(Q,et)|0,d=d+Math.imul(Q,be)|0,p=p+Math.imul(re,rt)|0,c=(c=c+Math.imul(re,Ae)|0)+Math.imul($,rt)|0,d=d+Math.imul($,Ae)|0,p=p+Math.imul(G,it)|0,c=(c=c+Math.imul(G,Ee)|0)+Math.imul(H,it)|0,d=d+Math.imul(H,Ee)|0,p=p+Math.imul(L,ot)|0,c=(c=c+Math.imul(L,xe)|0)+Math.imul(k,ot)|0,d=d+Math.imul(k,xe)|0;var Tr=(w+(p=p+Math.imul(_,lt)|0)|0)+((8191&(c=(c=c+Math.imul(_,_e)|0)+Math.imul(m,lt)|0))<<13)|0;w=((d=d+Math.imul(m,_e)|0)+(c>>>13)|0)+(Tr>>>26)|0,Tr&=67108863,p=Math.imul(ze,Qe),c=(c=Math.imul(ze,ve))+Math.imul(ue,Qe)|0,d=Math.imul(ue,ve),p=p+Math.imul(Le,Xe)|0,c=(c=c+Math.imul(Le,we)|0)+Math.imul(me,Xe)|0,d=d+Math.imul(me,we)|0,p=p+Math.imul(Re,et)|0,c=(c=c+Math.imul(Re,be)|0)+Math.imul(pe,et)|0,d=d+Math.imul(pe,be)|0,p=p+Math.imul(de,rt)|0,c=(c=c+Math.imul(de,Ae)|0)+Math.imul(Q,rt)|0,d=d+Math.imul(Q,Ae)|0,p=p+Math.imul(re,it)|0,c=(c=c+Math.imul(re,Ee)|0)+Math.imul($,it)|0,d=d+Math.imul($,Ee)|0,p=p+Math.imul(G,ot)|0,c=(c=c+Math.imul(G,xe)|0)+Math.imul(H,ot)|0,d=d+Math.imul(H,xe)|0,p=p+Math.imul(L,lt)|0,c=(c=c+Math.imul(L,_e)|0)+Math.imul(k,lt)|0,d=d+Math.imul(k,_e)|0;var Rr=(w+(p=p+Math.imul(_,ht)|0)|0)+((8191&(c=(c=c+Math.imul(_,ke)|0)+Math.imul(m,ht)|0))<<13)|0;w=((d=d+Math.imul(m,ke)|0)+(c>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,p=Math.imul(qe,Qe),c=(c=Math.imul(qe,ve))+Math.imul(ge,Qe)|0,d=Math.imul(ge,ve),p=p+Math.imul(ze,Xe)|0,c=(c=c+Math.imul(ze,we)|0)+Math.imul(ue,Xe)|0,d=d+Math.imul(ue,we)|0,p=p+Math.imul(Le,et)|0,c=(c=c+Math.imul(Le,be)|0)+Math.imul(me,et)|0,d=d+Math.imul(me,be)|0,p=p+Math.imul(Re,rt)|0,c=(c=c+Math.imul(Re,Ae)|0)+Math.imul(pe,rt)|0,d=d+Math.imul(pe,Ae)|0,p=p+Math.imul(de,it)|0,c=(c=c+Math.imul(de,Ee)|0)+Math.imul(Q,it)|0,d=d+Math.imul(Q,Ee)|0,p=p+Math.imul(re,ot)|0,c=(c=c+Math.imul(re,xe)|0)+Math.imul($,ot)|0,d=d+Math.imul($,xe)|0,p=p+Math.imul(G,lt)|0,c=(c=c+Math.imul(G,_e)|0)+Math.imul(H,lt)|0,d=d+Math.imul(H,_e)|0,p=p+Math.imul(L,ht)|0,c=(c=c+Math.imul(L,ke)|0)+Math.imul(k,ht)|0,d=d+Math.imul(k,ke)|0;var Br=(w+(p=p+Math.imul(_,ft)|0)|0)+((8191&(c=(c=c+Math.imul(_,Se)|0)+Math.imul(m,ft)|0))<<13)|0;w=((d=d+Math.imul(m,Se)|0)+(c>>>13)|0)+(Br>>>26)|0,Br&=67108863,p=Math.imul(Je,Qe),c=(c=Math.imul(Je,ve))+Math.imul(ye,Qe)|0,d=Math.imul(ye,ve),p=p+Math.imul(qe,Xe)|0,c=(c=c+Math.imul(qe,we)|0)+Math.imul(ge,Xe)|0,d=d+Math.imul(ge,we)|0,p=p+Math.imul(ze,et)|0,c=(c=c+Math.imul(ze,be)|0)+Math.imul(ue,et)|0,d=d+Math.imul(ue,be)|0,p=p+Math.imul(Le,rt)|0,c=(c=c+Math.imul(Le,Ae)|0)+Math.imul(me,rt)|0,d=d+Math.imul(me,Ae)|0,p=p+Math.imul(Re,it)|0,c=(c=c+Math.imul(Re,Ee)|0)+Math.imul(pe,it)|0,d=d+Math.imul(pe,Ee)|0,p=p+Math.imul(de,ot)|0,c=(c=c+Math.imul(de,xe)|0)+Math.imul(Q,ot)|0,d=d+Math.imul(Q,xe)|0,p=p+Math.imul(re,lt)|0,c=(c=c+Math.imul(re,_e)|0)+Math.imul($,lt)|0,d=d+Math.imul($,_e)|0,p=p+Math.imul(G,ht)|0,c=(c=c+Math.imul(G,ke)|0)+Math.imul(H,ht)|0,d=d+Math.imul(H,ke)|0,p=p+Math.imul(L,ft)|0,c=(c=c+Math.imul(L,Se)|0)+Math.imul(k,ft)|0,d=d+Math.imul(k,Se)|0;var pi=(w+(p=p+Math.imul(_,pt)|0)|0)+((8191&(c=(c=c+Math.imul(_,Ne)|0)+Math.imul(m,pt)|0))<<13)|0;w=((d=d+Math.imul(m,Ne)|0)+(c>>>13)|0)+(pi>>>26)|0,pi&=67108863,p=Math.imul(Je,Xe),c=(c=Math.imul(Je,we))+Math.imul(ye,Xe)|0,d=Math.imul(ye,we),p=p+Math.imul(qe,et)|0,c=(c=c+Math.imul(qe,be)|0)+Math.imul(ge,et)|0,d=d+Math.imul(ge,be)|0,p=p+Math.imul(ze,rt)|0,c=(c=c+Math.imul(ze,Ae)|0)+Math.imul(ue,rt)|0,d=d+Math.imul(ue,Ae)|0,p=p+Math.imul(Le,it)|0,c=(c=c+Math.imul(Le,Ee)|0)+Math.imul(me,it)|0,d=d+Math.imul(me,Ee)|0,p=p+Math.imul(Re,ot)|0,c=(c=c+Math.imul(Re,xe)|0)+Math.imul(pe,ot)|0,d=d+Math.imul(pe,xe)|0,p=p+Math.imul(de,lt)|0,c=(c=c+Math.imul(de,_e)|0)+Math.imul(Q,lt)|0,d=d+Math.imul(Q,_e)|0,p=p+Math.imul(re,ht)|0,c=(c=c+Math.imul(re,ke)|0)+Math.imul($,ht)|0,d=d+Math.imul($,ke)|0,p=p+Math.imul(G,ft)|0,c=(c=c+Math.imul(G,Se)|0)+Math.imul(H,ft)|0,d=d+Math.imul(H,Se)|0;var mi=(w+(p=p+Math.imul(L,pt)|0)|0)+((8191&(c=(c=c+Math.imul(L,Ne)|0)+Math.imul(k,pt)|0))<<13)|0;w=((d=d+Math.imul(k,Ne)|0)+(c>>>13)|0)+(mi>>>26)|0,mi&=67108863,p=Math.imul(Je,et),c=(c=Math.imul(Je,be))+Math.imul(ye,et)|0,d=Math.imul(ye,be),p=p+Math.imul(qe,rt)|0,c=(c=c+Math.imul(qe,Ae)|0)+Math.imul(ge,rt)|0,d=d+Math.imul(ge,Ae)|0,p=p+Math.imul(ze,it)|0,c=(c=c+Math.imul(ze,Ee)|0)+Math.imul(ue,it)|0,d=d+Math.imul(ue,Ee)|0,p=p+Math.imul(Le,ot)|0,c=(c=c+Math.imul(Le,xe)|0)+Math.imul(me,ot)|0,d=d+Math.imul(me,xe)|0,p=p+Math.imul(Re,lt)|0,c=(c=c+Math.imul(Re,_e)|0)+Math.imul(pe,lt)|0,d=d+Math.imul(pe,_e)|0,p=p+Math.imul(de,ht)|0,c=(c=c+Math.imul(de,ke)|0)+Math.imul(Q,ht)|0,d=d+Math.imul(Q,ke)|0,p=p+Math.imul(re,ft)|0,c=(c=c+Math.imul(re,Se)|0)+Math.imul($,ft)|0,d=d+Math.imul($,Se)|0;var gi=(w+(p=p+Math.imul(G,pt)|0)|0)+((8191&(c=(c=c+Math.imul(G,Ne)|0)+Math.imul(H,pt)|0))<<13)|0;w=((d=d+Math.imul(H,Ne)|0)+(c>>>13)|0)+(gi>>>26)|0,gi&=67108863,p=Math.imul(Je,rt),c=(c=Math.imul(Je,Ae))+Math.imul(ye,rt)|0,d=Math.imul(ye,Ae),p=p+Math.imul(qe,it)|0,c=(c=c+Math.imul(qe,Ee)|0)+Math.imul(ge,it)|0,d=d+Math.imul(ge,Ee)|0,p=p+Math.imul(ze,ot)|0,c=(c=c+Math.imul(ze,xe)|0)+Math.imul(ue,ot)|0,d=d+Math.imul(ue,xe)|0,p=p+Math.imul(Le,lt)|0,c=(c=c+Math.imul(Le,_e)|0)+Math.imul(me,lt)|0,d=d+Math.imul(me,_e)|0,p=p+Math.imul(Re,ht)|0,c=(c=c+Math.imul(Re,ke)|0)+Math.imul(pe,ht)|0,d=d+Math.imul(pe,ke)|0,p=p+Math.imul(de,ft)|0,c=(c=c+Math.imul(de,Se)|0)+Math.imul(Q,ft)|0,d=d+Math.imul(Q,Se)|0;var yi=(w+(p=p+Math.imul(re,pt)|0)|0)+((8191&(c=(c=c+Math.imul(re,Ne)|0)+Math.imul($,pt)|0))<<13)|0;w=((d=d+Math.imul($,Ne)|0)+(c>>>13)|0)+(yi>>>26)|0,yi&=67108863,p=Math.imul(Je,it),c=(c=Math.imul(Je,Ee))+Math.imul(ye,it)|0,d=Math.imul(ye,Ee),p=p+Math.imul(qe,ot)|0,c=(c=c+Math.imul(qe,xe)|0)+Math.imul(ge,ot)|0,d=d+Math.imul(ge,xe)|0,p=p+Math.imul(ze,lt)|0,c=(c=c+Math.imul(ze,_e)|0)+Math.imul(ue,lt)|0,d=d+Math.imul(ue,_e)|0,p=p+Math.imul(Le,ht)|0,c=(c=c+Math.imul(Le,ke)|0)+Math.imul(me,ht)|0,d=d+Math.imul(me,ke)|0,p=p+Math.imul(Re,ft)|0,c=(c=c+Math.imul(Re,Se)|0)+Math.imul(pe,ft)|0,d=d+Math.imul(pe,Se)|0;var vi=(w+(p=p+Math.imul(de,pt)|0)|0)+((8191&(c=(c=c+Math.imul(de,Ne)|0)+Math.imul(Q,pt)|0))<<13)|0;w=((d=d+Math.imul(Q,Ne)|0)+(c>>>13)|0)+(vi>>>26)|0,vi&=67108863,p=Math.imul(Je,ot),c=(c=Math.imul(Je,xe))+Math.imul(ye,ot)|0,d=Math.imul(ye,xe),p=p+Math.imul(qe,lt)|0,c=(c=c+Math.imul(qe,_e)|0)+Math.imul(ge,lt)|0,d=d+Math.imul(ge,_e)|0,p=p+Math.imul(ze,ht)|0,c=(c=c+Math.imul(ze,ke)|0)+Math.imul(ue,ht)|0,d=d+Math.imul(ue,ke)|0,p=p+Math.imul(Le,ft)|0,c=(c=c+Math.imul(Le,Se)|0)+Math.imul(me,ft)|0,d=d+Math.imul(me,Se)|0;var wi=(w+(p=p+Math.imul(Re,pt)|0)|0)+((8191&(c=(c=c+Math.imul(Re,Ne)|0)+Math.imul(pe,pt)|0))<<13)|0;w=((d=d+Math.imul(pe,Ne)|0)+(c>>>13)|0)+(wi>>>26)|0,wi&=67108863,p=Math.imul(Je,lt),c=(c=Math.imul(Je,_e))+Math.imul(ye,lt)|0,d=Math.imul(ye,_e),p=p+Math.imul(qe,ht)|0,c=(c=c+Math.imul(qe,ke)|0)+Math.imul(ge,ht)|0,d=d+Math.imul(ge,ke)|0,p=p+Math.imul(ze,ft)|0,c=(c=c+Math.imul(ze,Se)|0)+Math.imul(ue,ft)|0,d=d+Math.imul(ue,Se)|0;var bi=(w+(p=p+Math.imul(Le,pt)|0)|0)+((8191&(c=(c=c+Math.imul(Le,Ne)|0)+Math.imul(me,pt)|0))<<13)|0;w=((d=d+Math.imul(me,Ne)|0)+(c>>>13)|0)+(bi>>>26)|0,bi&=67108863,p=Math.imul(Je,ht),c=(c=Math.imul(Je,ke))+Math.imul(ye,ht)|0,d=Math.imul(ye,ke),p=p+Math.imul(qe,ft)|0,c=(c=c+Math.imul(qe,Se)|0)+Math.imul(ge,ft)|0,d=d+Math.imul(ge,Se)|0;var Ai=(w+(p=p+Math.imul(ze,pt)|0)|0)+((8191&(c=(c=c+Math.imul(ze,Ne)|0)+Math.imul(ue,pt)|0))<<13)|0;w=((d=d+Math.imul(ue,Ne)|0)+(c>>>13)|0)+(Ai>>>26)|0,Ai&=67108863,p=Math.imul(Je,ft),c=(c=Math.imul(Je,Se))+Math.imul(ye,ft)|0,d=Math.imul(ye,Se);var Ei=(w+(p=p+Math.imul(qe,pt)|0)|0)+((8191&(c=(c=c+Math.imul(qe,Ne)|0)+Math.imul(ge,pt)|0))<<13)|0;w=((d=d+Math.imul(ge,Ne)|0)+(c>>>13)|0)+(Ei>>>26)|0,Ei&=67108863;var xi=(w+(p=Math.imul(Je,pt))|0)+((8191&(c=(c=Math.imul(Je,Ne))+Math.imul(ye,pt)|0))<<13)|0;return w=((d=Math.imul(ye,Ne))+(c>>>13)|0)+(xi>>>26)|0,xi&=67108863,v[0]=vt,v[1]=Vr,v[2]=wt,v[3]=bt,v[4]=Pr,v[5]=Mr,v[6]=Tr,v[7]=Rr,v[8]=Br,v[9]=pi,v[10]=mi,v[11]=gi,v[12]=yi,v[13]=vi,v[14]=wi,v[15]=bi,v[16]=Ai,v[17]=Ei,v[18]=xi,w!==0&&(v[19]=w,C.length++),C};function T(y,S,C){C.negative=S.negative^y.negative,C.length=y.length+S.length;for(var p=0,c=0,d=0;d<C.length-1;d++){var f=c;c=0;for(var N=67108863&p,v=Math.min(d,S.length-1),w=Math.max(0,d-y.length+1);w<=v;w++){var P=d-w,_=(0|y.words[P])*(0|S.words[w]),m=67108863&_;N=67108863&(m=m+N|0),c+=(f=(f=f+(_/67108864|0)|0)+(m>>>26)|0)>>>26,f&=67108863}C.words[d]=N,p=f,f=c}return p!==0?C.words[d]=p:C.length--,C._strip()}function R(y,S,C){return T(y,S,C)}Math.imul||(I=E),i.prototype.mulTo=function(y,S){var C=this.length+y.length;return this.length===10&&y.length===10?I(this,y,S):C<63?E(this,y,S):C<1024?T(this,y,S):R(this,y,S)},i.prototype.mul=function(y){var S=new i(null);return S.words=new Array(this.length+y.length),this.mulTo(y,S)},i.prototype.mulf=function(y){var S=new i(null);return S.words=new Array(this.length+y.length),R(this,y,S)},i.prototype.imul=function(y){return this.clone().mulTo(y,this)},i.prototype.imuln=function(y){var S=y<0;S&&(y=-y),t(typeof y=="number"),t(y<67108864);for(var C=0,p=0;p<this.length;p++){var c=(0|this.words[p])*y,d=(67108863&c)+(67108863&C);C>>=26,C+=c/67108864|0,C+=d>>>26,this.words[p]=67108863&d}return C!==0&&(this.words[p]=C,this.length++),this.length=y===0?1:this.length,S?this.ineg():this},i.prototype.muln=function(y){return this.clone().imuln(y)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(y){var S=function(d){for(var f=new Array(d.bitLength()),N=0;N<f.length;N++){var v=N/26|0,w=N%26;f[N]=d.words[v]>>>w&1}return f}(y);if(S.length===0)return new i(1);for(var C=this,p=0;p<S.length&&S[p]===0;p++,C=C.sqr());if(++p<S.length)for(var c=C.sqr();p<S.length;p++,c=c.sqr())S[p]!==0&&(C=C.mul(c));return C},i.prototype.iushln=function(y){t(typeof y=="number"&&y>=0);var S,C=y%26,p=(y-C)/26,c=67108863>>>26-C<<26-C;if(C!==0){var d=0;for(S=0;S<this.length;S++){var f=this.words[S]&c,N=(0|this.words[S])-f<<C;this.words[S]=N|d,d=f>>>26-C}d&&(this.words[S]=d,this.length++)}if(p!==0){for(S=this.length-1;S>=0;S--)this.words[S+p]=this.words[S];for(S=0;S<p;S++)this.words[S]=0;this.length+=p}return this._strip()},i.prototype.ishln=function(y){return t(this.negative===0),this.iushln(y)},i.prototype.iushrn=function(y,S,C){var p;t(typeof y=="number"&&y>=0),p=S?(S-S%26)/26:0;var c=y%26,d=Math.min((y-c)/26,this.length),f=67108863^67108863>>>c<<c,N=C;if(p-=d,p=Math.max(0,p),N){for(var v=0;v<d;v++)N.words[v]=this.words[v];N.length=d}if(d!==0)if(this.length>d)for(this.length-=d,v=0;v<this.length;v++)this.words[v]=this.words[v+d];else this.words[0]=0,this.length=1;var w=0;for(v=this.length-1;v>=0&&(w!==0||v>=p);v--){var P=0|this.words[v];this.words[v]=w<<26-c|P>>>c,w=P&f}return N&&w!==0&&(N.words[N.length++]=w),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(y,S,C){return t(this.negative===0),this.iushrn(y,S,C)},i.prototype.shln=function(y){return this.clone().ishln(y)},i.prototype.ushln=function(y){return this.clone().iushln(y)},i.prototype.shrn=function(y){return this.clone().ishrn(y)},i.prototype.ushrn=function(y){return this.clone().iushrn(y)},i.prototype.testn=function(y){t(typeof y=="number"&&y>=0);var S=y%26,C=(y-S)/26,p=1<<S;return!(this.length<=C||!(this.words[C]&p))},i.prototype.imaskn=function(y){t(typeof y=="number"&&y>=0);var S=y%26,C=(y-S)/26;if(t(this.negative===0,"imaskn works only with positive numbers"),this.length<=C)return this;if(S!==0&&C++,this.length=Math.min(C,this.length),S!==0){var p=67108863^67108863>>>S<<S;this.words[this.length-1]&=p}return this._strip()},i.prototype.maskn=function(y){return this.clone().imaskn(y)},i.prototype.iaddn=function(y){return t(typeof y=="number"),t(y<67108864),y<0?this.isubn(-y):this.negative!==0?this.length===1&&(0|this.words[0])<=y?(this.words[0]=y-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(y),this.negative=1,this):this._iaddn(y)},i.prototype._iaddn=function(y){this.words[0]+=y;for(var S=0;S<this.length&&this.words[S]>=67108864;S++)this.words[S]-=67108864,S===this.length-1?this.words[S+1]=1:this.words[S+1]++;return this.length=Math.max(this.length,S+1),this},i.prototype.isubn=function(y){if(t(typeof y=="number"),t(y<67108864),y<0)return this.iaddn(-y);if(this.negative!==0)return this.negative=0,this.iaddn(y),this.negative=1,this;if(this.words[0]-=y,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var S=0;S<this.length&&this.words[S]<0;S++)this.words[S]+=67108864,this.words[S+1]-=1;return this._strip()},i.prototype.addn=function(y){return this.clone().iaddn(y)},i.prototype.subn=function(y){return this.clone().isubn(y)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(y,S,C){var p,c,d=y.length+C;this._expand(d);var f=0;for(p=0;p<y.length;p++){c=(0|this.words[p+C])+f;var N=(0|y.words[p])*S;f=((c-=67108863&N)>>26)-(N/67108864|0),this.words[p+C]=67108863&c}for(;p<this.length-C;p++)f=(c=(0|this.words[p+C])+f)>>26,this.words[p+C]=67108863&c;if(f===0)return this._strip();for(t(f===-1),f=0,p=0;p<this.length;p++)f=(c=-(0|this.words[p])+f)>>26,this.words[p]=67108863&c;return this.negative=1,this._strip()},i.prototype._wordDiv=function(y,S){var C=(this.length,y.length),p=this.clone(),c=y,d=0|c.words[c.length-1];(C=26-this._countBits(d))!=0&&(c=c.ushln(C),p.iushln(C),d=0|c.words[c.length-1]);var f,N=p.length-c.length;if(S!=="mod"){(f=new i(null)).length=N+1,f.words=new Array(f.length);for(var v=0;v<f.length;v++)f.words[v]=0}var w=p.clone()._ishlnsubmul(c,1,N);w.negative===0&&(p=w,f&&(f.words[N]=1));for(var P=N-1;P>=0;P--){var _=67108864*(0|p.words[c.length+P])+(0|p.words[c.length+P-1]);for(_=Math.min(_/d|0,67108863),p._ishlnsubmul(c,_,P);p.negative!==0;)_--,p.negative=0,p._ishlnsubmul(c,1,P),p.isZero()||(p.negative^=1);f&&(f.words[P]=_)}return f&&f._strip(),p._strip(),S!=="div"&&C!==0&&p.iushrn(C),{div:f||null,mod:p}},i.prototype.divmod=function(y,S,C){return t(!y.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:this.negative!==0&&y.negative===0?(d=this.neg().divmod(y,S),S!=="mod"&&(p=d.div.neg()),S!=="div"&&(c=d.mod.neg(),C&&c.negative!==0&&c.iadd(y)),{div:p,mod:c}):this.negative===0&&y.negative!==0?(d=this.divmod(y.neg(),S),S!=="mod"&&(p=d.div.neg()),{div:p,mod:d.mod}):this.negative&y.negative?(d=this.neg().divmod(y.neg(),S),S!=="div"&&(c=d.mod.neg(),C&&c.negative!==0&&c.isub(y)),{div:d.div,mod:c}):y.length>this.length||this.cmp(y)<0?{div:new i(0),mod:this}:y.length===1?S==="div"?{div:this.divn(y.words[0]),mod:null}:S==="mod"?{div:null,mod:new i(this.modrn(y.words[0]))}:{div:this.divn(y.words[0]),mod:new i(this.modrn(y.words[0]))}:this._wordDiv(y,S);var p,c,d},i.prototype.div=function(y){return this.divmod(y,"div",!1).div},i.prototype.mod=function(y){return this.divmod(y,"mod",!1).mod},i.prototype.umod=function(y){return this.divmod(y,"mod",!0).mod},i.prototype.divRound=function(y){var S=this.divmod(y);if(S.mod.isZero())return S.div;var C=S.div.negative!==0?S.mod.isub(y):S.mod,p=y.ushrn(1),c=y.andln(1),d=C.cmp(p);return d<0||c===1&&d===0?S.div:S.div.negative!==0?S.div.isubn(1):S.div.iaddn(1)},i.prototype.modrn=function(y){var S=y<0;S&&(y=-y),t(y<=67108863);for(var C=(1<<26)%y,p=0,c=this.length-1;c>=0;c--)p=(C*p+(0|this.words[c]))%y;return S?-p:p},i.prototype.modn=function(y){return this.modrn(y)},i.prototype.idivn=function(y){var S=y<0;S&&(y=-y),t(y<=67108863);for(var C=0,p=this.length-1;p>=0;p--){var c=(0|this.words[p])+67108864*C;this.words[p]=c/y|0,C=c%y}return this._strip(),S?this.ineg():this},i.prototype.divn=function(y){return this.clone().idivn(y)},i.prototype.egcd=function(y){t(y.negative===0),t(!y.isZero());var S=this,C=y.clone();S=S.negative!==0?S.umod(y):S.clone();for(var p=new i(1),c=new i(0),d=new i(0),f=new i(1),N=0;S.isEven()&&C.isEven();)S.iushrn(1),C.iushrn(1),++N;for(var v=C.clone(),w=S.clone();!S.isZero();){for(var P=0,_=1;!(S.words[0]&_)&&P<26;++P,_<<=1);if(P>0)for(S.iushrn(P);P-- >0;)(p.isOdd()||c.isOdd())&&(p.iadd(v),c.isub(w)),p.iushrn(1),c.iushrn(1);for(var m=0,M=1;!(C.words[0]&M)&&m<26;++m,M<<=1);if(m>0)for(C.iushrn(m);m-- >0;)(d.isOdd()||f.isOdd())&&(d.iadd(v),f.isub(w)),d.iushrn(1),f.iushrn(1);S.cmp(C)>=0?(S.isub(C),p.isub(d),c.isub(f)):(C.isub(S),d.isub(p),f.isub(c))}return{a:d,b:f,gcd:C.iushln(N)}},i.prototype._invmp=function(y){t(y.negative===0),t(!y.isZero());var S=this,C=y.clone();S=S.negative!==0?S.umod(y):S.clone();for(var p,c=new i(1),d=new i(0),f=C.clone();S.cmpn(1)>0&&C.cmpn(1)>0;){for(var N=0,v=1;!(S.words[0]&v)&&N<26;++N,v<<=1);if(N>0)for(S.iushrn(N);N-- >0;)c.isOdd()&&c.iadd(f),c.iushrn(1);for(var w=0,P=1;!(C.words[0]&P)&&w<26;++w,P<<=1);if(w>0)for(C.iushrn(w);w-- >0;)d.isOdd()&&d.iadd(f),d.iushrn(1);S.cmp(C)>=0?(S.isub(C),c.isub(d)):(C.isub(S),d.isub(c))}return(p=S.cmpn(1)===0?c:d).cmpn(0)<0&&p.iadd(y),p},i.prototype.gcd=function(y){if(this.isZero())return y.abs();if(y.isZero())return this.abs();var S=this.clone(),C=y.clone();S.negative=0,C.negative=0;for(var p=0;S.isEven()&&C.isEven();p++)S.iushrn(1),C.iushrn(1);for(;;){for(;S.isEven();)S.iushrn(1);for(;C.isEven();)C.iushrn(1);var c=S.cmp(C);if(c<0){var d=S;S=C,C=d}else if(c===0||C.cmpn(1)===0)break;S.isub(C)}return C.iushln(p)},i.prototype.invm=function(y){return this.egcd(y).a.umod(y)},i.prototype.isEven=function(){return!(1&this.words[0])},i.prototype.isOdd=function(){return!(1&~this.words[0])},i.prototype.andln=function(y){return this.words[0]&y},i.prototype.bincn=function(y){t(typeof y=="number");var S=y%26,C=(y-S)/26,p=1<<S;if(this.length<=C)return this._expand(C+1),this.words[C]|=p,this;for(var c=p,d=C;c!==0&&d<this.length;d++){var f=0|this.words[d];c=(f+=c)>>>26,f&=67108863,this.words[d]=f}return c!==0&&(this.words[d]=c,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(y){var S,C=y<0;if(this.negative!==0&&!C)return-1;if(this.negative===0&&C)return 1;if(this._strip(),this.length>1)S=1;else{C&&(y=-y),t(y<=67108863,"Number is too big");var p=0|this.words[0];S=p===y?0:p<y?-1:1}return this.negative!==0?0|-S:S},i.prototype.cmp=function(y){if(this.negative!==0&&y.negative===0)return-1;if(this.negative===0&&y.negative!==0)return 1;var S=this.ucmp(y);return this.negative!==0?0|-S:S},i.prototype.ucmp=function(y){if(this.length>y.length)return 1;if(this.length<y.length)return-1;for(var S=0,C=this.length-1;C>=0;C--){var p=0|this.words[C],c=0|y.words[C];if(p!==c){p<c?S=-1:p>c&&(S=1);break}}return S},i.prototype.gtn=function(y){return this.cmpn(y)===1},i.prototype.gt=function(y){return this.cmp(y)===1},i.prototype.gten=function(y){return this.cmpn(y)>=0},i.prototype.gte=function(y){return this.cmp(y)>=0},i.prototype.ltn=function(y){return this.cmpn(y)===-1},i.prototype.lt=function(y){return this.cmp(y)===-1},i.prototype.lten=function(y){return this.cmpn(y)<=0},i.prototype.lte=function(y){return this.cmp(y)<=0},i.prototype.eqn=function(y){return this.cmpn(y)===0},i.prototype.eq=function(y){return this.cmp(y)===0},i.red=function(y){return new K(y)},i.prototype.toRed=function(y){return t(!this.red,"Already a number in reduction context"),t(this.negative===0,"red works only with positives"),y.convertTo(this)._forceRed(y)},i.prototype.fromRed=function(){return t(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(y){return this.red=y,this},i.prototype.forceRed=function(y){return t(!this.red,"Already a number in reduction context"),this._forceRed(y)},i.prototype.redAdd=function(y){return t(this.red,"redAdd works only with red numbers"),this.red.add(this,y)},i.prototype.redIAdd=function(y){return t(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,y)},i.prototype.redSub=function(y){return t(this.red,"redSub works only with red numbers"),this.red.sub(this,y)},i.prototype.redISub=function(y){return t(this.red,"redISub works only with red numbers"),this.red.isub(this,y)},i.prototype.redShl=function(y){return t(this.red,"redShl works only with red numbers"),this.red.shl(this,y)},i.prototype.redMul=function(y){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,y),this.red.mul(this,y)},i.prototype.redIMul=function(y){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,y),this.red.imul(this,y)},i.prototype.redSqr=function(){return t(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return t(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return t(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return t(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return t(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(y){return t(this.red&&!y.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,y)};var O={k256:null,p224:null,p192:null,p25519:null};function B(y,S){this.name=y,this.p=new i(S,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function U(){B.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function q(){B.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function W(){B.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function Z(){B.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function K(y){if(typeof y=="string"){var S=i._prime(y);this.m=S.p,this.prime=S}else t(y.gtn(1),"modulus must be greater than 1"),this.m=y,this.prime=null}function se(y){K.call(this,y),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}B.prototype._tmp=function(){var y=new i(null);return y.words=new Array(Math.ceil(this.n/13)),y},B.prototype.ireduce=function(y){var S,C=y;do this.split(C,this.tmp),S=(C=(C=this.imulK(C)).iadd(this.tmp)).bitLength();while(S>this.n);var p=S<this.n?-1:C.ucmp(this.p);return p===0?(C.words[0]=0,C.length=1):p>0?C.isub(this.p):C.strip!==void 0?C.strip():C._strip(),C},B.prototype.split=function(y,S){y.iushrn(this.n,0,S)},B.prototype.imulK=function(y){return y.imul(this.k)},r(U,B),U.prototype.split=function(y,S){for(var C=4194303,p=Math.min(y.length,9),c=0;c<p;c++)S.words[c]=y.words[c];if(S.length=p,y.length<=9)return y.words[0]=0,void(y.length=1);var d=y.words[9];for(S.words[S.length++]=d&C,c=10;c<y.length;c++){var f=0|y.words[c];y.words[c-10]=(f&C)<<4|d>>>22,d=f}d>>>=22,y.words[c-10]=d,d===0&&y.length>10?y.length-=10:y.length-=9},U.prototype.imulK=function(y){y.words[y.length]=0,y.words[y.length+1]=0,y.length+=2;for(var S=0,C=0;C<y.length;C++){var p=0|y.words[C];S+=977*p,y.words[C]=67108863&S,S=64*p+(S/67108864|0)}return y.words[y.length-1]===0&&(y.length--,y.words[y.length-1]===0&&y.length--),y},r(q,B),r(W,B),r(Z,B),Z.prototype.imulK=function(y){for(var S=0,C=0;C<y.length;C++){var p=19*(0|y.words[C])+S,c=67108863&p;p>>>=26,y.words[C]=c,S=p}return S!==0&&(y.words[y.length++]=S),y},i._prime=function(y){if(O[y])return O[y];var S;if(y==="k256")S=new U;else if(y==="p224")S=new q;else if(y==="p192")S=new W;else{if(y!=="p25519")throw new Error("Unknown prime "+y);S=new Z}return O[y]=S,S},K.prototype._verify1=function(y){t(y.negative===0,"red works only with positives"),t(y.red,"red works only with red numbers")},K.prototype._verify2=function(y,S){t((y.negative|S.negative)===0,"red works only with positives"),t(y.red&&y.red===S.red,"red works only with red numbers")},K.prototype.imod=function(y){return this.prime?this.prime.ireduce(y)._forceRed(this):(h(y,y.umod(this.m)._forceRed(this)),y)},K.prototype.neg=function(y){return y.isZero()?y.clone():this.m.sub(y)._forceRed(this)},K.prototype.add=function(y,S){this._verify2(y,S);var C=y.add(S);return C.cmp(this.m)>=0&&C.isub(this.m),C._forceRed(this)},K.prototype.iadd=function(y,S){this._verify2(y,S);var C=y.iadd(S);return C.cmp(this.m)>=0&&C.isub(this.m),C},K.prototype.sub=function(y,S){this._verify2(y,S);var C=y.sub(S);return C.cmpn(0)<0&&C.iadd(this.m),C._forceRed(this)},K.prototype.isub=function(y,S){this._verify2(y,S);var C=y.isub(S);return C.cmpn(0)<0&&C.iadd(this.m),C},K.prototype.shl=function(y,S){return this._verify1(y),this.imod(y.ushln(S))},K.prototype.imul=function(y,S){return this._verify2(y,S),this.imod(y.imul(S))},K.prototype.mul=function(y,S){return this._verify2(y,S),this.imod(y.mul(S))},K.prototype.isqr=function(y){return this.imul(y,y.clone())},K.prototype.sqr=function(y){return this.mul(y,y)},K.prototype.sqrt=function(y){if(y.isZero())return y.clone();var S=this.m.andln(3);if(t(S%2==1),S===3){var C=this.m.add(new i(1)).iushrn(2);return this.pow(y,C)}for(var p=this.m.subn(1),c=0;!p.isZero()&&p.andln(1)===0;)c++,p.iushrn(1);t(!p.isZero());var d=new i(1).toRed(this),f=d.redNeg(),N=this.m.subn(1).iushrn(1),v=this.m.bitLength();for(v=new i(2*v*v).toRed(this);this.pow(v,N).cmp(f)!==0;)v.redIAdd(f);for(var w=this.pow(v,p),P=this.pow(y,p.addn(1).iushrn(1)),_=this.pow(y,p),m=c;_.cmp(d)!==0;){for(var M=_,L=0;M.cmp(d)!==0;L++)M=M.redSqr();t(L<m);var k=this.pow(w,new i(1).iushln(m-L-1));P=P.redMul(k),w=k.redSqr(),_=_.redMul(w),m=L}return P},K.prototype.invm=function(y){var S=y._invmp(this.m);return S.negative!==0?(S.negative=0,this.imod(S).redNeg()):this.imod(S)},K.prototype.pow=function(y,S){if(S.isZero())return new i(1).toRed(this);if(S.cmpn(1)===0)return y.clone();var C=new Array(16);C[0]=new i(1).toRed(this),C[1]=y;for(var p=2;p<C.length;p++)C[p]=this.mul(C[p-1],y);var c=C[0],d=0,f=0,N=S.bitLength()%26;for(N===0&&(N=26),p=S.length-1;p>=0;p--){for(var v=S.words[p],w=N-1;w>=0;w--){var P=v>>w&1;c!==C[0]&&(c=this.sqr(c)),P!==0||d!==0?(d<<=1,d|=P,(++f===4||p===0&&w===0)&&(c=this.mul(c,C[d]),f=0,d=0)):f=0}N=26}return c},K.prototype.convertTo=function(y){var S=y.umod(this.m);return S===y?S.clone():S},K.prototype.convertFrom=function(y){var S=y.clone();return S.red=null,S},i.mont=function(y){return new se(y)},r(se,K),se.prototype.convertTo=function(y){return this.imod(y.ushln(this.shift))},se.prototype.convertFrom=function(y){var S=this.imod(y.mul(this.rinv));return S.red=null,S},se.prototype.imul=function(y,S){if(y.isZero()||S.isZero())return y.words[0]=0,y.length=1,y;var C=y.imul(S),p=C.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),c=C.isub(p).iushrn(this.shift),d=c;return c.cmp(this.m)>=0?d=c.isub(this.m):c.cmpn(0)<0&&(d=c.iadd(this.m)),d._forceRed(this)},se.prototype.mul=function(y,S){if(y.isZero()||S.isZero())return new i(0)._forceRed(this);var C=y.mul(S),p=C.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),c=C.isub(p).iushrn(this.shift),d=c;return c.cmp(this.m)>=0?d=c.isub(this.m):c.cmpn(0)<0&&(d=c.iadd(this.m)),d._forceRed(this)},se.prototype.invm=function(y){return this.imod(y._invmp(this.m).mul(this.r2))._forceRed(this)}}(ul,ul.exports)),ul.exports),Ce=ks(Mp);let Mh=!1,Th=!1;const ra={debug:1,default:2,info:2,warning:3,error:4,off:5};let Rh=ra.default,fl=null;const Bh=function(){try{const n=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{n.push(e)}}),n.length)throw new Error("missing "+n.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(n){return n.message}return null}();var fc,Gr;(function(n){n.DEBUG="DEBUG",n.INFO="INFO",n.WARNING="WARNING",n.ERROR="ERROR",n.OFF="OFF"})(fc||(fc={})),function(n){n.UNKNOWN_ERROR="UNKNOWN_ERROR",n.NOT_IMPLEMENTED="NOT_IMPLEMENTED",n.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",n.NETWORK_ERROR="NETWORK_ERROR",n.SERVER_ERROR="SERVER_ERROR",n.TIMEOUT="TIMEOUT",n.BUFFER_OVERRUN="BUFFER_OVERRUN",n.NUMERIC_FAULT="NUMERIC_FAULT",n.MISSING_NEW="MISSING_NEW",n.INVALID_ARGUMENT="INVALID_ARGUMENT",n.MISSING_ARGUMENT="MISSING_ARGUMENT",n.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",n.CALL_EXCEPTION="CALL_EXCEPTION",n.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",n.NONCE_EXPIRED="NONCE_EXPIRED",n.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",n.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",n.TRANSACTION_REPLACED="TRANSACTION_REPLACED",n.ACTION_REJECTED="ACTION_REJECTED"}(Gr||(Gr={}));const Oh="0123456789abcdef";class F{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const r=e.toLowerCase();ra[r]==null&&this.throwArgumentError("invalid log level name","logLevel",e),Rh>ra[r]||console.log.apply(console,t)}debug(...e){this._log(F.levels.DEBUG,e)}info(...e){this._log(F.levels.INFO,e)}warn(...e){this._log(F.levels.WARNING,e)}makeError(e,t,r){if(Th)return this.makeError("censored error",t,{});t||(t=F.errors.UNKNOWN_ERROR),r||(r={});const i=[];Object.keys(r).forEach(l=>{const h=r[l];try{if(h instanceof Uint8Array){let u="";for(let g=0;g<h.length;g++)u+=Oh[h[g]>>4],u+=Oh[15&h[g]];i.push(l+"=Uint8Array(0x"+u+")")}else i.push(l+"="+JSON.stringify(h))}catch{i.push(l+"="+JSON.stringify(r[l].toString()))}}),i.push(`code=${t}`),i.push(`version=${this.version}`);const s=e;let o="";switch(t){case Gr.NUMERIC_FAULT:{o="NUMERIC_FAULT";const l=e;switch(l){case"overflow":case"underflow":case"division-by-zero":o+="-"+l;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result"}break}case Gr.CALL_EXCEPTION:case Gr.INSUFFICIENT_FUNDS:case Gr.MISSING_NEW:case Gr.NONCE_EXPIRED:case Gr.REPLACEMENT_UNDERPRICED:case Gr.TRANSACTION_REPLACED:case Gr.UNPREDICTABLE_GAS_LIMIT:o=t}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),i.length&&(e+=" ("+i.join(", ")+")");const a=new Error(e);return a.reason=s,a.code=t,Object.keys(r).forEach(function(l){a[l]=r[l]}),a}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,F.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,i){e||this.throwError(t,r,i)}assertArgument(e,t,r,i){e||this.throwArgumentError(t,r,i)}checkNormalize(e){Bh&&this.throwError("platform missing String.prototype.normalize",F.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Bh})}checkSafeUint53(e,t){typeof e=="number"&&(t==null&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,F.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,F.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r=r?": "+r:"",e<t&&this.throwError("missing argument"+r,F.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,F.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){e!==Object&&e!=null||this.throwError("missing new",F.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",F.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):e!==Object&&e!=null||this.throwError("missing new",F.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return fl||(fl=new F("logger/5.8.0")),fl}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",F.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Mh){if(!e)return;this.globalLogger().throwError("error censorship permanent",F.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}Th=!!e,Mh=!!t}static setLogLevel(e){const t=ra[e.toLowerCase()];t!=null?Rh=t:F.globalLogger().warn("invalid log level - "+e)}static from(e){return new F(e)}}F.errors=Gr,F.levels=fc;const Rt=new F("bytes/5.8.0");function Ed(n){return!!n.toHexString}function ds(n){return n.slice||(n.slice=function(){const e=Array.prototype.slice.call(arguments);return ds(new Uint8Array(Array.prototype.slice.apply(n,e)))}),n}function ko(n){return Te(n)&&!(n.length%2)||li(n)}function Fh(n){return typeof n=="number"&&n==n&&n%1==0}function li(n){if(n==null)return!1;if(n.constructor===Uint8Array)return!0;if(typeof n=="string"||!Fh(n.length)||n.length<0)return!1;for(let e=0;e<n.length;e++){const t=n[e];if(!Fh(t)||t<0||t>=256)return!1}return!0}function Y(n,e){if(e||(e={}),typeof n=="number"){Rt.checkSafeUint53(n,"invalid arrayify value");const t=[];for(;n;)t.unshift(255&n),n=parseInt(String(n/256));return t.length===0&&t.push(0),ds(new Uint8Array(t))}if(e.allowMissingPrefix&&typeof n=="string"&&n.substring(0,2)!=="0x"&&(n="0x"+n),Ed(n)&&(n=n.toHexString()),Te(n)){let t=n.substring(2);t.length%2&&(e.hexPad==="left"?t="0"+t:e.hexPad==="right"?t+="0":Rt.throwArgumentError("hex data is odd-length","value",n));const r=[];for(let i=0;i<t.length;i+=2)r.push(parseInt(t.substring(i,i+2),16));return ds(new Uint8Array(r))}return li(n)?ds(new Uint8Array(n)):Rt.throwArgumentError("invalid arrayify value","value",n)}function kt(n){const e=n.map(i=>Y(i)),t=e.reduce((i,s)=>i+s.length,0),r=new Uint8Array(t);return e.reduce((i,s)=>(r.set(s,i),i+s.length),0),ds(r)}function xn(n){let e=Y(n);if(e.length===0)return e;let t=0;for(;t<e.length&&e[t]===0;)t++;return t&&(e=e.slice(t)),e}function $s(n,e){(n=Y(n)).length>e&&Rt.throwArgumentError("value out of range","value",arguments[0]);const t=new Uint8Array(e);return t.set(n,e-n.length),ds(t)}function Te(n,e){return!(typeof n!="string"||!n.match(/^0x[0-9A-Fa-f]*$/))&&(!e||n.length===2+2*e)}const dl="0123456789abcdef";function te(n,e){if(e||(e={}),typeof n=="number"){Rt.checkSafeUint53(n,"invalid hexlify value");let t="";for(;n;)t=dl[15&n]+t,n=Math.floor(n/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if(typeof n=="bigint")return(n=n.toString(16)).length%2?"0x0"+n:"0x"+n;if(e.allowMissingPrefix&&typeof n=="string"&&n.substring(0,2)!=="0x"&&(n="0x"+n),Ed(n))return n.toHexString();if(Te(n))return n.length%2&&(e.hexPad==="left"?n="0x0"+n.substring(2):e.hexPad==="right"?n+="0":Rt.throwArgumentError("hex data is odd-length","value",n)),n.toLowerCase();if(li(n)){let t="0x";for(let r=0;r<n.length;r++){let i=n[r];t+=dl[(240&i)>>4]+dl[15&i]}return t}return Rt.throwArgumentError("invalid hexlify value","value",n)}function _n(n){if(typeof n!="string")n=te(n);else if(!Te(n)||n.length%2)return null;return(n.length-2)/2}function Lt(n,e,t){return typeof n!="string"?n=te(n):(!Te(n)||n.length%2)&&Rt.throwArgumentError("invalid hexData","value",n),e=2+2*e,t!=null?"0x"+n.substring(e,2+2*t):"0x"+n.substring(e)}function fr(n){let e="0x";return n.forEach(t=>{e+=te(t).substring(2)}),e}function So(n){const e=xd(te(n,{hexPad:"left"}));return e==="0x"?"0x0":e}function xd(n){typeof n!="string"&&(n=te(n)),Te(n)||Rt.throwArgumentError("invalid hex string","value",n),n=n.substring(2);let e=0;for(;e<n.length&&n[e]==="0";)e++;return"0x"+n.substring(e)}function St(n,e){for(typeof n!="string"?n=te(n):Te(n)||Rt.throwArgumentError("invalid hex string","value",n),n.length>2*e+2&&Rt.throwArgumentError("value out of range","value",arguments[1]);n.length<2*e+2;)n="0x0"+n.substring(2);return n}function ji(n){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(ko(n)){let t=Y(n);t.length===64?(e.v=27+(t[32]>>7),t[32]&=127,e.r=te(t.slice(0,32)),e.s=te(t.slice(32,64))):t.length===65?(e.r=te(t.slice(0,32)),e.s=te(t.slice(32,64)),e.v=t[64]):Rt.throwArgumentError("invalid signature string","signature",n),e.v<27&&(e.v===0||e.v===1?e.v+=27:Rt.throwArgumentError("signature invalid v byte","signature",n)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(t[32]|=128),e._vs=te(t.slice(32,64))}else{if(e.r=n.r,e.s=n.s,e.v=n.v,e.recoveryParam=n.recoveryParam,e._vs=n._vs,e._vs!=null){const i=$s(Y(e._vs),32);e._vs=te(i);const s=i[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=s:e.recoveryParam!==s&&Rt.throwArgumentError("signature recoveryParam mismatch _vs","signature",n),i[0]&=127;const o=te(i);e.s==null?e.s=o:e.s!==o&&Rt.throwArgumentError("signature v mismatch _vs","signature",n)}if(e.recoveryParam==null)e.v==null?Rt.throwArgumentError("signature missing v and recoveryParam","signature",n):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const i=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==i&&Rt.throwArgumentError("signature recoveryParam mismatch v","signature",n)}e.r!=null&&Te(e.r)?e.r=St(e.r,32):Rt.throwArgumentError("signature missing or invalid r","signature",n),e.s!=null&&Te(e.s)?e.s=St(e.s,32):Rt.throwArgumentError("signature missing or invalid s","signature",n);const t=Y(e.s);t[0]>=128&&Rt.throwArgumentError("signature s out of range","signature",n),e.recoveryParam&&(t[0]|=128);const r=te(t);e._vs&&(Te(e._vs)||Rt.throwArgumentError("signature invalid _vs","signature",n),e._vs=St(e._vs,32)),e._vs==null?e._vs=r:e._vs!==r&&Rt.throwArgumentError("signature _vs mismatch v and s","signature",n)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}function dc(n){return te(kt([(n=ji(n)).r,n.s,n.recoveryParam?"0x1c":"0x1b"]))}const _d="bignumber/5.8.0";var ao=Ce.BN;const Dn=new F(_d),pl={},Dh=9007199254740991;let Lh=!1;class X{constructor(e,t){e!==pl&&Dn.throwError("cannot call constructor directly; use BigNumber.from",F.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=t,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return yr(Ge(this).fromTwos(e))}toTwos(e){return yr(Ge(this).toTwos(e))}abs(){return this._hex[0]==="-"?X.from(this._hex.substring(1)):this}add(e){return yr(Ge(this).add(Ge(e)))}sub(e){return yr(Ge(this).sub(Ge(e)))}div(e){return X.from(e).isZero()&&Or("division-by-zero","div"),yr(Ge(this).div(Ge(e)))}mul(e){return yr(Ge(this).mul(Ge(e)))}mod(e){const t=Ge(e);return t.isNeg()&&Or("division-by-zero","mod"),yr(Ge(this).umod(t))}pow(e){const t=Ge(e);return t.isNeg()&&Or("negative-power","pow"),yr(Ge(this).pow(t))}and(e){const t=Ge(e);return(this.isNegative()||t.isNeg())&&Or("unbound-bitwise-result","and"),yr(Ge(this).and(t))}or(e){const t=Ge(e);return(this.isNegative()||t.isNeg())&&Or("unbound-bitwise-result","or"),yr(Ge(this).or(t))}xor(e){const t=Ge(e);return(this.isNegative()||t.isNeg())&&Or("unbound-bitwise-result","xor"),yr(Ge(this).xor(t))}mask(e){return(this.isNegative()||e<0)&&Or("negative-width","mask"),yr(Ge(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&Or("negative-width","shl"),yr(Ge(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&Or("negative-width","shr"),yr(Ge(this).shrn(e))}eq(e){return Ge(this).eq(Ge(e))}lt(e){return Ge(this).lt(Ge(e))}lte(e){return Ge(this).lte(Ge(e))}gt(e){return Ge(this).gt(Ge(e))}gte(e){return Ge(this).gte(Ge(e))}isNegative(){return this._hex[0]==="-"}isZero(){return Ge(this).isZero()}toNumber(){try{return Ge(this).toNumber()}catch{Or("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return Dn.throwError("this platform does not support BigInt",F.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?Lh||(Lh=!0,Dn.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?Dn.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",F.errors.UNEXPECTED_ARGUMENT,{}):Dn.throwError("BigNumber.toString does not accept parameters",F.errors.UNEXPECTED_ARGUMENT,{})),Ge(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof X)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new X(pl,lo(e)):e.match(/^-?[0-9]+$/)?new X(pl,lo(new ao(e))):Dn.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&Or("underflow","BigNumber.from",e),(e>=Dh||e<=-Dh)&&Or("overflow","BigNumber.from",e),X.from(String(e));const t=e;if(typeof t=="bigint")return X.from(t.toString());if(li(t))return X.from(te(t));if(t)if(t.toHexString){const r=t.toHexString();if(typeof r=="string")return X.from(r)}else{let r=t._hex;if(r==null&&t.type==="BigNumber"&&(r=t.hex),typeof r=="string"&&(Te(r)||r[0]==="-"&&Te(r.substring(1))))return X.from(r)}return Dn.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!(!e||!e._isBigNumber)}}function lo(n){if(typeof n!="string")return lo(n.toString(16));if(n[0]==="-")return(n=n.substring(1))[0]==="-"&&Dn.throwArgumentError("invalid hex","value",n),(n=lo(n))==="0x00"?n:"-"+n;if(n.substring(0,2)!=="0x"&&(n="0x"+n),n==="0x")return"0x00";for(n.length%2&&(n="0x0"+n.substring(2));n.length>4&&n.substring(0,4)==="0x00";)n="0x"+n.substring(4);return n}function yr(n){return X.from(lo(n))}function Ge(n){const e=X.from(n).toHexString();return e[0]==="-"?new ao("-"+e.substring(3),16):new ao(e.substring(2),16)}function Or(n,e,t){const r={fault:n,operation:e};return t!=null&&(r.value=t),Dn.throwError(n,F.errors.NUMERIC_FAULT,r)}const dr=new F(_d),Qs={},kd=X.from(0),Sd=X.from(-1);function Nd(n,e,t,r){const i={fault:e,operation:t};return r!==void 0&&(i.value=r),dr.throwError(n,F.errors.NUMERIC_FAULT,i)}let Ys="0";for(;Ys.length<256;)Ys+=Ys;function Gc(n){if(typeof n!="number")try{n=X.from(n).toNumber()}catch{}return typeof n=="number"&&n>=0&&n<=256&&!(n%1)?"1"+Ys.substring(0,n):dr.throwArgumentError("invalid decimal size","decimals",n)}function na(n,e){e==null&&(e=0);const t=Gc(e),r=(n=X.from(n)).lt(kd);r&&(n=n.mul(Sd));let i=n.mod(t).toString();for(;i.length<t.length-1;)i="0"+i;i=i.match(/^([0-9]*[1-9]|0)(0*)/)[1];const s=n.div(t).toString();return n=t.length===1?s:s+"."+i,r&&(n="-"+n),n}function cn(n,e){e==null&&(e=0);const t=Gc(e);typeof n=="string"&&n.match(/^-?[0-9.]+$/)||dr.throwArgumentError("invalid decimal value","value",n);const r=n.substring(0,1)==="-";r&&(n=n.substring(1)),n==="."&&dr.throwArgumentError("missing value","value",n);const i=n.split(".");i.length>2&&dr.throwArgumentError("too many decimal points","value",n);let s=i[0],o=i[1];for(s||(s="0"),o||(o="0");o[o.length-1]==="0";)o=o.substring(0,o.length-1);for(o.length>t.length-1&&Nd("fractional component exceeds decimals","underflow","parseFixed"),o===""&&(o="0");o.length<t.length-1;)o+="0";const a=X.from(s),l=X.from(o);let h=a.mul(t).add(l);return r&&(h=h.mul(Sd)),h}class ps{constructor(e,t,r,i){e!==Qs&&dr.throwError("cannot use FixedFormat constructor; use FixedFormat.from",F.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=t,this.width=r,this.decimals=i,this.name=(t?"":"u")+"fixed"+String(r)+"x"+String(i),this._multiplier=Gc(i),Object.freeze(this)}static from(e){if(e instanceof ps)return e;typeof e=="number"&&(e=`fixed128x${e}`);let t=!0,r=128,i=18;if(typeof e=="string"){if(e!=="fixed")if(e==="ufixed")t=!1;else{const s=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);s||dr.throwArgumentError("invalid fixed format","format",e),t=s[1]!=="u",r=parseInt(s[2]),i=parseInt(s[3])}}else if(e){const s=(o,a,l)=>e[o]==null?l:(typeof e[o]!==a&&dr.throwArgumentError("invalid fixed format ("+o+" not "+a+")","format."+o,e[o]),e[o]);t=s("signed","boolean",t),r=s("width","number",r),i=s("decimals","number",i)}return r%8&&dr.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",r),i>80&&dr.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",i),new ps(Qs,t,r,i)}}class Jt{constructor(e,t,r,i){e!==Qs&&dr.throwError("cannot use FixedNumber constructor; use FixedNumber.from",F.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=i,this._hex=t,this._value=r,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(e){this.format.name!==e.format.name&&dr.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",e)}addUnsafe(e){this._checkFormat(e);const t=cn(this._value,this.format.decimals),r=cn(e._value,e.format.decimals);return Jt.fromValue(t.add(r),this.format.decimals,this.format)}subUnsafe(e){this._checkFormat(e);const t=cn(this._value,this.format.decimals),r=cn(e._value,e.format.decimals);return Jt.fromValue(t.sub(r),this.format.decimals,this.format)}mulUnsafe(e){this._checkFormat(e);const t=cn(this._value,this.format.decimals),r=cn(e._value,e.format.decimals);return Jt.fromValue(t.mul(r).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(e){this._checkFormat(e);const t=cn(this._value,this.format.decimals),r=cn(e._value,e.format.decimals);return Jt.fromValue(t.mul(this.format._multiplier).div(r),this.format.decimals,this.format)}floor(){const e=this.toString().split(".");e.length===1&&e.push("0");let t=Jt.from(e[0],this.format);const r=!e[1].match(/^(0*)$/);return this.isNegative()&&r&&(t=t.subUnsafe(Uh.toFormat(t.format))),t}ceiling(){const e=this.toString().split(".");e.length===1&&e.push("0");let t=Jt.from(e[0],this.format);const r=!e[1].match(/^(0*)$/);return!this.isNegative()&&r&&(t=t.addUnsafe(Uh.toFormat(t.format))),t}round(e){e==null&&(e=0);const t=this.toString().split(".");if(t.length===1&&t.push("0"),(e<0||e>80||e%1)&&dr.throwArgumentError("invalid decimal count","decimals",e),t[1].length<=e)return this;const r=Jt.from("1"+Ys.substring(0,e),this.format),i=Tp.toFormat(this.format);return this.mulUnsafe(r).addUnsafe(i).floor().divUnsafe(r)}isZero(){return this._value==="0.0"||this._value==="0"}isNegative(){return this._value[0]==="-"}toString(){return this._value}toHexString(e){return e==null?this._hex:(e%8&&dr.throwArgumentError("invalid byte width","width",e),St(X.from(this._hex).fromTwos(this.format.width).toTwos(e).toHexString(),e/8))}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Jt.fromString(this._value,e)}static fromValue(e,t,r){return r!=null||t==null||function(i){return i!=null&&(X.isBigNumber(i)||typeof i=="number"&&i%1==0||typeof i=="string"&&!!i.match(/^-?[0-9]+$/)||Te(i)||typeof i=="bigint"||li(i))}(t)||(r=t,t=null),t==null&&(t=0),r==null&&(r="fixed"),Jt.fromString(na(e,t),ps.from(r))}static fromString(e,t){t==null&&(t="fixed");const r=ps.from(t),i=cn(e,r.decimals);!r.signed&&i.lt(kd)&&Nd("unsigned value cannot be negative","overflow","value",e);let s=null;r.signed?s=i.toTwos(r.width).toHexString():(s=i.toHexString(),s=St(s,r.width/8));const o=na(i,r.decimals);return new Jt(Qs,s,o,r)}static fromBytes(e,t){t==null&&(t="fixed");const r=ps.from(t);if(Y(e).length>r.width/8)throw new Error("overflow");let i=X.from(e);r.signed&&(i=i.fromTwos(r.width));const s=i.toTwos((r.signed?0:1)+r.width).toHexString(),o=na(i,r.decimals);return new Jt(Qs,s,o,r)}static from(e,t){if(typeof e=="string")return Jt.fromString(e,t);if(li(e))return Jt.fromBytes(e,t);try{return Jt.fromValue(e,0,t)}catch(r){if(r.code!==F.errors.INVALID_ARGUMENT)throw r}return dr.throwArgumentError("invalid FixedNumber value","value",e)}static isFixedNumber(e){return!(!e||!e._isFixedNumber)}}const Uh=Jt.from(1),Tp=Jt.from("0.5");var Rp=function(n,e,t,r){return new(t||(t=Promise))(function(i,s){function o(h){try{l(r.next(h))}catch(u){s(u)}}function a(h){try{l(r.throw(h))}catch(u){s(u)}}function l(h){var u;h.done?i(h.value):(u=h.value,u instanceof t?u:new t(function(g){g(u)})).then(o,a)}l((r=r.apply(n,e||[])).next())})};const _a=new F("properties/5.8.0");function j(n,e,t){Object.defineProperty(n,e,{enumerable:!0,value:t,writable:!1})}function tr(n,e){for(let t=0;t<32;t++){if(n[e])return n[e];if(!n.prototype||typeof n.prototype!="object")break;n=Object.getPrototypeOf(n.prototype).constructor}return null}function Ot(n){return Rp(this,void 0,void 0,function*(){const e=Object.keys(n).map(t=>{const r=n[t];return Promise.resolve(r).then(i=>({key:t,value:i}))});return(yield Promise.all(e)).reduce((t,r)=>(t[r.key]=r.value,t),{})})}function Hc(n,e){n&&typeof n=="object"||_a.throwArgumentError("invalid object","object",n),Object.keys(n).forEach(t=>{e[t]||_a.throwArgumentError("invalid object key - "+t,"transaction:"+t,n)})}function Nt(n){const e={};for(const t in n)e[t]=n[t];return e}const Bp={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function Cd(n){if(n==null||Bp[typeof n])return!0;if(Array.isArray(n)||typeof n=="object"){if(!Object.isFrozen(n))return!1;const e=Object.keys(n);for(let t=0;t<e.length;t++){let r=null;try{r=n[e[t]]}catch{continue}if(!Cd(r))return!1}return!0}return _a.throwArgumentError("Cannot deepCopy "+typeof n,"object",n)}function Op(n){if(Cd(n))return n;if(Array.isArray(n))return Object.freeze(n.map(e=>gr(e)));if(typeof n=="object"){const e={};for(const t in n){const r=n[t];r!==void 0&&j(e,t,gr(r))}return e}return _a.throwArgumentError("Cannot deepCopy "+typeof n,"object",n)}function gr(n){return Op(n)}class Wi{constructor(e){for(const t in e)this[t]=gr(e[t])}}const No="abi/5.8.0",We=new F(No),Bi={};let zh={calldata:!0,memory:!0,storage:!0},Fp={calldata:!0,memory:!0};function Oo(n,e){if(n==="bytes"||n==="string"){if(zh[e])return!0}else if(n==="address"){if(e==="payable")return!0}else if((n.indexOf("[")>=0||n==="tuple")&&Fp[e])return!0;return(zh[e]||e==="payable")&&We.throwArgumentError("invalid modifier","name",e),!1}function pc(n,e){for(let t in e)j(n,t,e[t])}const mt=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),Dp=new RegExp(/^(.*)\[([0-9]*)\]$/);class Wt{constructor(e,t){e!==Bi&&We.throwError("use fromString",F.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),pc(this,t);let r=this.type.match(Dp);pc(this,r?{arrayLength:parseInt(r[2]||"-1"),arrayChildren:Wt.fromObject({type:r[1],components:this.components}),baseType:"array"}:{arrayLength:null,arrayChildren:null,baseType:this.components!=null?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=mt.sighash),mt[e]||We.throwArgumentError("invalid format type","format",e),e===mt.json){let r={type:this.baseType==="tuple"?"tuple":this.type,name:this.name||void 0};return typeof this.indexed=="boolean"&&(r.indexed=this.indexed),this.components&&(r.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(r)}let t="";return this.baseType==="array"?(t+=this.arrayChildren.format(e),t+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):this.baseType==="tuple"?(e!==mt.sighash&&(t+=this.type),t+="("+this.components.map(r=>r.format(e)).join(e===mt.full?", ":",")+")"):t+=this.type,e!==mt.sighash&&(this.indexed===!0&&(t+=" indexed"),e===mt.full&&this.name&&(t+=" "+this.name)),t}static from(e,t){return typeof e=="string"?Wt.fromString(e,t):Wt.fromObject(e)}static fromObject(e){return Wt.isParamType(e)?e:new Wt(Bi,{name:e.name||null,type:Qi(e.type),indexed:e.indexed==null?null:!!e.indexed,components:e.components?e.components.map(Wt.fromObject):null})}static fromString(e,t){return r=function(i,s){let o=i;function a(g){We.throwArgumentError(`unexpected character at position ${g}`,"param",i)}function l(g){let x={type:"",name:"",parent:g,state:{allowType:!0}};return s&&(x.indexed=!1),x}i=i.replace(/\s/g," ");let h={type:"",name:"",state:{allowType:!0}},u=h;for(let g=0;g<i.length;g++){let x=i[g];switch(x){case"(":u.state.allowType&&u.type===""?u.type="tuple":u.state.allowParams||a(g),u.state.allowType=!1,u.type=Qi(u.type),u.components=[l(u)],u=u.components[0];break;case")":delete u.state,u.name==="indexed"&&(s||a(g),u.indexed=!0,u.name=""),Oo(u.type,u.name)&&(u.name=""),u.type=Qi(u.type);let A=u;u=u.parent,u||a(g),delete A.parent,u.state.allowParams=!1,u.state.allowName=!0,u.state.allowArray=!0;break;case",":delete u.state,u.name==="indexed"&&(s||a(g),u.indexed=!0,u.name=""),Oo(u.type,u.name)&&(u.name=""),u.type=Qi(u.type);let E=l(u.parent);u.parent.components.push(E),delete u.parent,u=E;break;case" ":u.state.allowType&&u.type!==""&&(u.type=Qi(u.type),delete u.state.allowType,u.state.allowName=!0,u.state.allowParams=!0),u.state.allowName&&u.name!==""&&(u.name==="indexed"?(s||a(g),u.indexed&&a(g),u.indexed=!0,u.name=""):Oo(u.type,u.name)?u.name="":u.state.allowName=!1);break;case"[":u.state.allowArray||a(g),u.type+=x,u.state.allowArray=!1,u.state.allowName=!1,u.state.readArray=!0;break;case"]":u.state.readArray||a(g),u.type+=x,u.state.readArray=!1,u.state.allowArray=!0,u.state.allowName=!0;break;default:u.state.allowType?(u.type+=x,u.state.allowParams=!0,u.state.allowArray=!0):u.state.allowName?(u.name+=x,delete u.state.allowArray):u.state.readArray?u.type+=x:a(g)}}return u.parent&&We.throwArgumentError("unexpected eof","param",i),delete h.state,u.name==="indexed"?(s||a(o.length-7),u.indexed&&a(o.length-7),u.indexed=!0,u.name=""):Oo(u.type,u.name)&&(u.name=""),h.type=Qi(h.type),h}(e,!!t),Wt.fromObject({name:r.name,type:r.type,indexed:r.indexed,components:r.components});var r}static isParamType(e){return!(e==null||!e._isParamType)}}function co(n,e){return function(t){t=t.trim();let r=[],i="",s=0;for(let o=0;o<t.length;o++){let a=t[o];a===","&&s===0?(r.push(i),i=""):(i+=a,a==="("?s++:a===")"&&(s--,s===-1&&We.throwArgumentError("unbalanced parenthesis","value",t)))}return i&&r.push(i),r}(n).map(t=>Wt.fromString(t,e))}class bn{constructor(e,t){e!==Bi&&We.throwError("use a static from method",F.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),pc(this,t),this._isFragment=!0,Object.freeze(this)}static from(e){return bn.isFragment(e)?e:typeof e=="string"?bn.fromString(e):bn.fromObject(e)}static fromObject(e){if(bn.isFragment(e))return e;switch(e.type){case"function":return nn.fromObject(e);case"event":return yn.fromObject(e);case"constructor":return rn.fromObject(e);case"error":return qn.fromObject(e);case"fallback":case"receive":return null}return We.throwArgumentError("invalid fragment object","value",e)}static fromString(e){return(e=(e=(e=e.replace(/\s/g," ")).replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," ")).trim()).split(" ")[0]==="event"?yn.fromString(e.substring(5).trim()):e.split(" ")[0]==="function"?nn.fromString(e.substring(8).trim()):e.split("(")[0].trim()==="constructor"?rn.fromString(e.trim()):e.split(" ")[0]==="error"?qn.fromString(e.substring(5).trim()):We.throwArgumentError("unsupported fragment","value",e)}static isFragment(e){return!(!e||!e._isFragment)}}class yn extends bn{format(e){if(e||(e=mt.sighash),mt[e]||We.throwArgumentError("invalid format type","format",e),e===mt.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});let t="";return e!==mt.sighash&&(t+="event "),t+=this.name+"("+this.inputs.map(r=>r.format(e)).join(e===mt.full?", ":",")+") ",e!==mt.sighash&&this.anonymous&&(t+="anonymous "),t.trim()}static from(e){return typeof e=="string"?yn.fromString(e):yn.fromObject(e)}static fromObject(e){if(yn.isEventFragment(e))return e;e.type!=="event"&&We.throwArgumentError("invalid event object","value",e);const t={name:ho(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map(Wt.fromObject):[],type:"event"};return new yn(Bi,t)}static fromString(e){let t=e.match(uo);t||We.throwArgumentError("invalid event string","value",e);let r=!1;return t[3].split(" ").forEach(i=>{switch(i.trim()){case"anonymous":r=!0;break;case"":break;default:We.warn("unknown modifier: "+i)}}),yn.fromObject({name:t[1].trim(),anonymous:r,inputs:co(t[2],!0),type:"event"})}static isEventFragment(e){return e&&e._isFragment&&e.type==="event"}}function Id(n,e){e.gas=null;let t=n.split("@");return t.length!==1?(t.length>2&&We.throwArgumentError("invalid human-readable ABI signature","value",n),t[1].match(/^[0-9]+$/)||We.throwArgumentError("invalid human-readable ABI signature gas","value",n),e.gas=X.from(t[1]),t[0]):n}function Pd(n,e){e.constant=!1,e.payable=!1,e.stateMutability="nonpayable",n.split(" ").forEach(t=>{switch(t.trim()){case"constant":e.constant=!0;break;case"payable":e.payable=!0,e.stateMutability="payable";break;case"nonpayable":e.payable=!1,e.stateMutability="nonpayable";break;case"pure":e.constant=!0,e.stateMutability="pure";break;case"view":e.constant=!0,e.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+t)}})}function Md(n){let e={constant:!1,payable:!0,stateMutability:"payable"};return n.stateMutability!=null?(e.stateMutability=n.stateMutability,e.constant=e.stateMutability==="view"||e.stateMutability==="pure",n.constant!=null&&!!n.constant!==e.constant&&We.throwArgumentError("cannot have constant function with mutability "+e.stateMutability,"value",n),e.payable=e.stateMutability==="payable",n.payable!=null&&!!n.payable!==e.payable&&We.throwArgumentError("cannot have payable function with mutability "+e.stateMutability,"value",n)):n.payable!=null?(e.payable=!!n.payable,n.constant!=null||e.payable||n.type==="constructor"||We.throwArgumentError("unable to determine stateMutability","value",n),e.constant=!!n.constant,e.constant?e.stateMutability="view":e.stateMutability=e.payable?"payable":"nonpayable",e.payable&&e.constant&&We.throwArgumentError("cannot have constant payable function","value",n)):n.constant!=null?(e.constant=!!n.constant,e.payable=!e.constant,e.stateMutability=e.constant?"view":"payable"):n.type!=="constructor"&&We.throwArgumentError("unable to determine stateMutability","value",n),e}class rn extends bn{format(e){if(e||(e=mt.sighash),mt[e]||We.throwArgumentError("invalid format type","format",e),e===mt.json)return JSON.stringify({type:"constructor",stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});e===mt.sighash&&We.throwError("cannot format a constructor for sighash",F.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let t="constructor("+this.inputs.map(r=>r.format(e)).join(e===mt.full?", ":",")+") ";return this.stateMutability&&this.stateMutability!=="nonpayable"&&(t+=this.stateMutability+" "),t.trim()}static from(e){return typeof e=="string"?rn.fromString(e):rn.fromObject(e)}static fromObject(e){if(rn.isConstructorFragment(e))return e;e.type!=="constructor"&&We.throwArgumentError("invalid constructor object","value",e);let t=Md(e);t.constant&&We.throwArgumentError("constructor cannot be constant","value",e);const r={name:null,type:e.type,inputs:e.inputs?e.inputs.map(Wt.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?X.from(e.gas):null};return new rn(Bi,r)}static fromString(e){let t={type:"constructor"},r=(e=Id(e,t)).match(uo);return r&&r[1].trim()==="constructor"||We.throwArgumentError("invalid constructor string","value",e),t.inputs=co(r[2].trim(),!1),Pd(r[3].trim(),t),rn.fromObject(t)}static isConstructorFragment(e){return e&&e._isFragment&&e.type==="constructor"}}class nn extends rn{format(e){if(e||(e=mt.sighash),mt[e]||We.throwArgumentError("invalid format type","format",e),e===mt.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(r=>JSON.parse(r.format(e))),outputs:this.outputs.map(r=>JSON.parse(r.format(e)))});let t="";return e!==mt.sighash&&(t+="function "),t+=this.name+"("+this.inputs.map(r=>r.format(e)).join(e===mt.full?", ":",")+") ",e!==mt.sighash&&(this.stateMutability?this.stateMutability!=="nonpayable"&&(t+=this.stateMutability+" "):this.constant&&(t+="view "),this.outputs&&this.outputs.length&&(t+="returns ("+this.outputs.map(r=>r.format(e)).join(", ")+") "),this.gas!=null&&(t+="@"+this.gas.toString()+" ")),t.trim()}static from(e){return typeof e=="string"?nn.fromString(e):nn.fromObject(e)}static fromObject(e){if(nn.isFunctionFragment(e))return e;e.type!=="function"&&We.throwArgumentError("invalid function object","value",e);let t=Md(e);const r={type:e.type,name:ho(e.name),constant:t.constant,inputs:e.inputs?e.inputs.map(Wt.fromObject):[],outputs:e.outputs?e.outputs.map(Wt.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?X.from(e.gas):null};return new nn(Bi,r)}static fromString(e){let t={type:"function"},r=(e=Id(e,t)).split(" returns ");r.length>2&&We.throwArgumentError("invalid function string","value",e);let i=r[0].match(uo);if(i||We.throwArgumentError("invalid function signature","value",e),t.name=i[1].trim(),t.name&&ho(t.name),t.inputs=co(i[2],!1),Pd(i[3].trim(),t),r.length>1){let s=r[1].match(uo);s[1].trim()==""&&s[3].trim()==""||We.throwArgumentError("unexpected tokens","value",e),t.outputs=co(s[2],!1)}else t.outputs=[];return nn.fromObject(t)}static isFunctionFragment(e){return e&&e._isFragment&&e.type==="function"}}function qh(n){const e=n.format();return e!=="Error(string)"&&e!=="Panic(uint256)"||We.throwArgumentError(`cannot specify user defined ${e} error`,"fragment",n),n}class qn extends bn{format(e){if(e||(e=mt.sighash),mt[e]||We.throwArgumentError("invalid format type","format",e),e===mt.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});let t="";return e!==mt.sighash&&(t+="error "),t+=this.name+"("+this.inputs.map(r=>r.format(e)).join(e===mt.full?", ":",")+") ",t.trim()}static from(e){return typeof e=="string"?qn.fromString(e):qn.fromObject(e)}static fromObject(e){if(qn.isErrorFragment(e))return e;e.type!=="error"&&We.throwArgumentError("invalid error object","value",e);const t={type:e.type,name:ho(e.name),inputs:e.inputs?e.inputs.map(Wt.fromObject):[]};return qh(new qn(Bi,t))}static fromString(e){let t={type:"error"},r=e.match(uo);return r||We.throwArgumentError("invalid error signature","value",e),t.name=r[1].trim(),t.name&&ho(t.name),t.inputs=co(r[2],!1),qh(qn.fromObject(t))}static isErrorFragment(e){return e&&e._isFragment&&e.type==="error"}}function Qi(n){return n.match(/^uint($|[^1-9])/)?n="uint256"+n.substring(4):n.match(/^int($|[^1-9])/)&&(n="int256"+n.substring(3)),n}const Lp=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function ho(n){return n&&n.match(Lp)||We.throwArgumentError(`invalid identifier "${n}"`,"value",n),n}const uo=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$"),jc=new F(No);function Td(n){const e=[],t=function(r,i){if(Array.isArray(i))for(let s in i){const o=r.slice();o.push(s);try{t(o,i[s])}catch(a){e.push({path:o,error:a})}}};return t([],n),e}class Jn{constructor(e,t,r,i){this.name=e,this.type=t,this.localName=r,this.dynamic=i}_throwError(e,t){jc.throwArgumentError(e,this.localName,t)}}class mc{constructor(e){j(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return fr(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData(kt(e._data))}writeBytes(e){let t=Y(e);const r=t.length%this.wordSize;return r&&(t=kt([t,this._padding.slice(r)])),this._writeData(t)}_getValue(e){let t=Y(X.from(e));return t.length>this.wordSize&&jc.throwError("value out-of-bounds",F.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:t.length}),t.length%this.wordSize&&(t=kt([this._padding.slice(t.length%this.wordSize),t])),t}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,t=>{this._data[e]=this._getValue(t)}}}class ka{constructor(e,t,r,i){j(this,"_data",Y(e)),j(this,"wordSize",t||32),j(this,"_coerceFunc",r),j(this,"allowLoose",i),this._offset=0}get data(){return te(this._data)}get consumed(){return this._offset}static coerce(e,t){let r=e.match("^u?int([0-9]+)$");return r&&parseInt(r[1])<=48&&(t=t.toNumber()),t}coerce(e,t){return this._coerceFunc?this._coerceFunc(e,t):ka.coerce(e,t)}_peekBytes(e,t,r){let i=Math.ceil(t/this.wordSize)*this.wordSize;return this._offset+i>this._data.length&&(this.allowLoose&&r&&this._offset+t<=this._data.length?i=t:jc.throwError("data out-of-bounds",F.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+i})),this._data.slice(this._offset,this._offset+i)}subReader(e){return new ka(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,t){let r=this._peekBytes(0,e,!!t);return this._offset+=r.length,r.slice(0,e)}readValue(){return X.from(this.readBytes(this.wordSize))}}var Gh,Hh={exports:{}};/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */var ml,Up=(Gh||(Gh=1,ml=Hh,function(){var n="input is invalid type",e=typeof window=="object",t=e?window:{};t.JS_SHA3_NO_WINDOW&&(e=!1);var r=!e&&typeof self=="object";!t.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node?t=Pp:r&&(t=self);var i=!t.JS_SHA3_NO_COMMON_JS&&ml.exports,s=!t.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",o="0123456789abcdef".split(""),a=[4,1024,262144,67108864],l=[0,8,16,24],h=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],u=[224,256,384,512],g=[128,256],x=["hex","buffer","arrayBuffer","array","digest"],A={128:168,256:136};!t.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(f){return Object.prototype.toString.call(f)==="[object Array]"}),!s||!t.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(f){return typeof f=="object"&&f.buffer&&f.buffer.constructor===ArrayBuffer});for(var E=function(f,N,v){return function(w){return new p(f,N,f).update(w)[v]()}},I=function(f,N,v){return function(w,P){return new p(f,N,P).update(w)[v]()}},T=function(f,N,v){return function(w,P,_,m){return q["cshake"+f].update(w,P,_,m)[v]()}},R=function(f,N,v){return function(w,P,_,m){return q["kmac"+f].update(w,P,_,m)[v]()}},O=function(f,N,v,w){for(var P=0;P<x.length;++P){var _=x[P];f[_]=N(v,w,_)}return f},B=function(f,N){var v=E(f,N,"hex");return v.create=function(){return new p(f,N,f)},v.update=function(w){return v.create().update(w)},O(v,E,f,N)},U=[{name:"keccak",padding:[1,256,65536,16777216],bits:u,createMethod:B},{name:"sha3",padding:[6,1536,393216,100663296],bits:u,createMethod:B},{name:"shake",padding:[31,7936,2031616,520093696],bits:g,createMethod:function(f,N){var v=I(f,N,"hex");return v.create=function(w){return new p(f,N,w)},v.update=function(w,P){return v.create(P).update(w)},O(v,I,f,N)}},{name:"cshake",padding:a,bits:g,createMethod:function(f,N){var v=A[f],w=T(f,0,"hex");return w.create=function(P,_,m){return _||m?new p(f,N,P).bytepad([_,m],v):q["shake"+f].create(P)},w.update=function(P,_,m,M){return w.create(_,m,M).update(P)},O(w,T,f,N)}},{name:"kmac",padding:a,bits:g,createMethod:function(f,N){var v=A[f],w=R(f,0,"hex");return w.create=function(P,_,m){return new c(f,N,_).bytepad(["KMAC",m],v).bytepad([P],v)},w.update=function(P,_,m,M){return w.create(P,m,M).update(_)},O(w,R,f,N)}}],q={},W=[],Z=0;Z<U.length;++Z)for(var K=U[Z],se=K.bits,y=0;y<se.length;++y){var S=K.name+"_"+se[y];if(W.push(S),q[S]=K.createMethod(se[y],K.padding),K.name!=="sha3"){var C=K.name+se[y];W.push(C),q[C]=q[S]}}function p(f,N,v){this.blocks=[],this.s=[],this.padding=N,this.outputBits=v,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(f<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=v>>5,this.extraBytes=(31&v)>>3;for(var w=0;w<50;++w)this.s[w]=0}function c(f,N,v){p.call(this,f,N,v)}p.prototype.update=function(f){if(this.finalized)throw new Error("finalize already called");var N,v=typeof f;if(v!=="string"){if(v!=="object")throw new Error(n);if(f===null)throw new Error(n);if(s&&f.constructor===ArrayBuffer)f=new Uint8Array(f);else if(!(Array.isArray(f)||s&&ArrayBuffer.isView(f)))throw new Error(n);N=!0}for(var w,P,_=this.blocks,m=this.byteCount,M=f.length,L=this.blockCount,k=0,D=this.s;k<M;){if(this.reset)for(this.reset=!1,_[0]=this.block,w=1;w<L+1;++w)_[w]=0;if(N)for(w=this.start;k<M&&w<m;++k)_[w>>2]|=f[k]<<l[3&w++];else for(w=this.start;k<M&&w<m;++k)(P=f.charCodeAt(k))<128?_[w>>2]|=P<<l[3&w++]:P<2048?(_[w>>2]|=(192|P>>6)<<l[3&w++],_[w>>2]|=(128|63&P)<<l[3&w++]):P<55296||P>=57344?(_[w>>2]|=(224|P>>12)<<l[3&w++],_[w>>2]|=(128|P>>6&63)<<l[3&w++],_[w>>2]|=(128|63&P)<<l[3&w++]):(P=65536+((1023&P)<<10|1023&f.charCodeAt(++k)),_[w>>2]|=(240|P>>18)<<l[3&w++],_[w>>2]|=(128|P>>12&63)<<l[3&w++],_[w>>2]|=(128|P>>6&63)<<l[3&w++],_[w>>2]|=(128|63&P)<<l[3&w++]);if(this.lastByteIndex=w,w>=m){for(this.start=w-m,this.block=_[L],w=0;w<L;++w)D[w]^=_[w];d(D),this.reset=!0}else this.start=w}return this},p.prototype.encode=function(f,N){var v=255&f,w=1,P=[v];for(v=255&(f>>=8);v>0;)P.unshift(v),v=255&(f>>=8),++w;return N?P.push(w):P.unshift(w),this.update(P),P.length},p.prototype.encodeString=function(f){var N,v=typeof f;if(v!=="string"){if(v!=="object")throw new Error(n);if(f===null)throw new Error(n);if(s&&f.constructor===ArrayBuffer)f=new Uint8Array(f);else if(!(Array.isArray(f)||s&&ArrayBuffer.isView(f)))throw new Error(n);N=!0}var w=0,P=f.length;if(N)w=P;else for(var _=0;_<f.length;++_){var m=f.charCodeAt(_);m<128?w+=1:m<2048?w+=2:m<55296||m>=57344?w+=3:(m=65536+((1023&m)<<10|1023&f.charCodeAt(++_)),w+=4)}return w+=this.encode(8*w),this.update(f),w},p.prototype.bytepad=function(f,N){for(var v=this.encode(N),w=0;w<f.length;++w)v+=this.encodeString(f[w]);var P=N-v%N,_=[];return _.length=P,this.update(_),this},p.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var f=this.blocks,N=this.lastByteIndex,v=this.blockCount,w=this.s;if(f[N>>2]|=this.padding[3&N],this.lastByteIndex===this.byteCount)for(f[0]=f[v],N=1;N<v+1;++N)f[N]=0;for(f[v-1]|=2147483648,N=0;N<v;++N)w[N]^=f[N];d(w)}},p.prototype.toString=p.prototype.hex=function(){this.finalize();for(var f,N=this.blockCount,v=this.s,w=this.outputBlocks,P=this.extraBytes,_=0,m=0,M="";m<w;){for(_=0;_<N&&m<w;++_,++m)f=v[_],M+=o[f>>4&15]+o[15&f]+o[f>>12&15]+o[f>>8&15]+o[f>>20&15]+o[f>>16&15]+o[f>>28&15]+o[f>>24&15];m%N===0&&(d(v),_=0)}return P&&(f=v[_],M+=o[f>>4&15]+o[15&f],P>1&&(M+=o[f>>12&15]+o[f>>8&15]),P>2&&(M+=o[f>>20&15]+o[f>>16&15])),M},p.prototype.arrayBuffer=function(){this.finalize();var f,N=this.blockCount,v=this.s,w=this.outputBlocks,P=this.extraBytes,_=0,m=0,M=this.outputBits>>3;f=P?new ArrayBuffer(w+1<<2):new ArrayBuffer(M);for(var L=new Uint32Array(f);m<w;){for(_=0;_<N&&m<w;++_,++m)L[m]=v[_];m%N===0&&d(v)}return P&&(L[_]=v[_],f=f.slice(0,M)),f},p.prototype.buffer=p.prototype.arrayBuffer,p.prototype.digest=p.prototype.array=function(){this.finalize();for(var f,N,v=this.blockCount,w=this.s,P=this.outputBlocks,_=this.extraBytes,m=0,M=0,L=[];M<P;){for(m=0;m<v&&M<P;++m,++M)f=M<<2,N=w[m],L[f]=255&N,L[f+1]=N>>8&255,L[f+2]=N>>16&255,L[f+3]=N>>24&255;M%v===0&&d(w)}return _&&(f=M<<2,N=w[m],L[f]=255&N,_>1&&(L[f+1]=N>>8&255),_>2&&(L[f+2]=N>>16&255)),L},c.prototype=new p,c.prototype.finalize=function(){return this.encode(this.outputBits,!0),p.prototype.finalize.call(this)};var d=function(f){var N,v,w,P,_,m,M,L,k,D,G,H,V,re,$,ne,de,Q,he,Re,pe,De,Le,me,Ue,ze,ue,Be,qe,ge,Ve,Je,ye,$e,Qe,ve,Ye,Xe,we,Ze,et,be,tt,rt,Ae,nt,it,Ee,st,ot,xe,at,lt,_e,ct,ht,ke,ut,ft,Se,dt,pt,Ne;for(w=0;w<48;w+=2)P=f[0]^f[10]^f[20]^f[30]^f[40],_=f[1]^f[11]^f[21]^f[31]^f[41],m=f[2]^f[12]^f[22]^f[32]^f[42],M=f[3]^f[13]^f[23]^f[33]^f[43],L=f[4]^f[14]^f[24]^f[34]^f[44],k=f[5]^f[15]^f[25]^f[35]^f[45],D=f[6]^f[16]^f[26]^f[36]^f[46],G=f[7]^f[17]^f[27]^f[37]^f[47],N=(H=f[8]^f[18]^f[28]^f[38]^f[48])^(m<<1|M>>>31),v=(V=f[9]^f[19]^f[29]^f[39]^f[49])^(M<<1|m>>>31),f[0]^=N,f[1]^=v,f[10]^=N,f[11]^=v,f[20]^=N,f[21]^=v,f[30]^=N,f[31]^=v,f[40]^=N,f[41]^=v,N=P^(L<<1|k>>>31),v=_^(k<<1|L>>>31),f[2]^=N,f[3]^=v,f[12]^=N,f[13]^=v,f[22]^=N,f[23]^=v,f[32]^=N,f[33]^=v,f[42]^=N,f[43]^=v,N=m^(D<<1|G>>>31),v=M^(G<<1|D>>>31),f[4]^=N,f[5]^=v,f[14]^=N,f[15]^=v,f[24]^=N,f[25]^=v,f[34]^=N,f[35]^=v,f[44]^=N,f[45]^=v,N=L^(H<<1|V>>>31),v=k^(V<<1|H>>>31),f[6]^=N,f[7]^=v,f[16]^=N,f[17]^=v,f[26]^=N,f[27]^=v,f[36]^=N,f[37]^=v,f[46]^=N,f[47]^=v,N=D^(P<<1|_>>>31),v=G^(_<<1|P>>>31),f[8]^=N,f[9]^=v,f[18]^=N,f[19]^=v,f[28]^=N,f[29]^=v,f[38]^=N,f[39]^=v,f[48]^=N,f[49]^=v,re=f[0],$=f[1],nt=f[11]<<4|f[10]>>>28,it=f[10]<<4|f[11]>>>28,Be=f[20]<<3|f[21]>>>29,qe=f[21]<<3|f[20]>>>29,Se=f[31]<<9|f[30]>>>23,dt=f[30]<<9|f[31]>>>23,be=f[40]<<18|f[41]>>>14,tt=f[41]<<18|f[40]>>>14,$e=f[2]<<1|f[3]>>>31,Qe=f[3]<<1|f[2]>>>31,ne=f[13]<<12|f[12]>>>20,de=f[12]<<12|f[13]>>>20,Ee=f[22]<<10|f[23]>>>22,st=f[23]<<10|f[22]>>>22,ge=f[33]<<13|f[32]>>>19,Ve=f[32]<<13|f[33]>>>19,pt=f[42]<<2|f[43]>>>30,Ne=f[43]<<2|f[42]>>>30,_e=f[5]<<30|f[4]>>>2,ct=f[4]<<30|f[5]>>>2,ve=f[14]<<6|f[15]>>>26,Ye=f[15]<<6|f[14]>>>26,Q=f[25]<<11|f[24]>>>21,he=f[24]<<11|f[25]>>>21,ot=f[34]<<15|f[35]>>>17,xe=f[35]<<15|f[34]>>>17,Je=f[45]<<29|f[44]>>>3,ye=f[44]<<29|f[45]>>>3,me=f[6]<<28|f[7]>>>4,Ue=f[7]<<28|f[6]>>>4,ht=f[17]<<23|f[16]>>>9,ke=f[16]<<23|f[17]>>>9,Xe=f[26]<<25|f[27]>>>7,we=f[27]<<25|f[26]>>>7,Re=f[36]<<21|f[37]>>>11,pe=f[37]<<21|f[36]>>>11,at=f[47]<<24|f[46]>>>8,lt=f[46]<<24|f[47]>>>8,rt=f[8]<<27|f[9]>>>5,Ae=f[9]<<27|f[8]>>>5,ze=f[18]<<20|f[19]>>>12,ue=f[19]<<20|f[18]>>>12,ut=f[29]<<7|f[28]>>>25,ft=f[28]<<7|f[29]>>>25,Ze=f[38]<<8|f[39]>>>24,et=f[39]<<8|f[38]>>>24,De=f[48]<<14|f[49]>>>18,Le=f[49]<<14|f[48]>>>18,f[0]=re^~ne&Q,f[1]=$^~de&he,f[10]=me^~ze&Be,f[11]=Ue^~ue&qe,f[20]=$e^~ve&Xe,f[21]=Qe^~Ye&we,f[30]=rt^~nt&Ee,f[31]=Ae^~it&st,f[40]=_e^~ht&ut,f[41]=ct^~ke&ft,f[2]=ne^~Q&Re,f[3]=de^~he&pe,f[12]=ze^~Be&ge,f[13]=ue^~qe&Ve,f[22]=ve^~Xe&Ze,f[23]=Ye^~we&et,f[32]=nt^~Ee&ot,f[33]=it^~st&xe,f[42]=ht^~ut&Se,f[43]=ke^~ft&dt,f[4]=Q^~Re&De,f[5]=he^~pe&Le,f[14]=Be^~ge&Je,f[15]=qe^~Ve&ye,f[24]=Xe^~Ze&be,f[25]=we^~et&tt,f[34]=Ee^~ot&at,f[35]=st^~xe&lt,f[44]=ut^~Se&pt,f[45]=ft^~dt&Ne,f[6]=Re^~De&re,f[7]=pe^~Le&$,f[16]=ge^~Je&me,f[17]=Ve^~ye&Ue,f[26]=Ze^~be&$e,f[27]=et^~tt&Qe,f[36]=ot^~at&rt,f[37]=xe^~lt&Ae,f[46]=Se^~pt&_e,f[47]=dt^~Ne&ct,f[8]=De^~re&ne,f[9]=Le^~$&de,f[18]=Je^~me&ze,f[19]=ye^~Ue&ue,f[28]=be^~$e&ve,f[29]=tt^~Qe&Ye,f[38]=at^~rt&nt,f[39]=lt^~Ae&it,f[48]=pt^~_e&ht,f[49]=Ne^~ct&ke,f[0]^=h[w],f[1]^=h[w+1]};if(i)ml.exports=q;else for(Z=0;Z<W.length;++Z)t[W[Z]]=q[W[Z]]}()),Hh.exports),zp=ks(Up);function _t(n){return"0x"+zp.keccak_256(Y(n))}const dn=new F("rlp/5.8.0");function jh(n){const e=[];for(;n;)e.unshift(255&n),n>>=8;return e}function Wh(n,e,t){let r=0;for(let i=0;i<t;i++)r=256*r+n[e+i];return r}function Rd(n){if(Array.isArray(n)){let r=[];if(n.forEach(function(s){r=r.concat(Rd(s))}),r.length<=55)return r.unshift(192+r.length),r;const i=jh(r.length);return i.unshift(247+i.length),i.concat(r)}ko(n)||dn.throwArgumentError("RLP object must be BytesLike","object",n);const e=Array.prototype.slice.call(Y(n));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const t=jh(e.length);return t.unshift(183+t.length),t.concat(e)}function Oi(n){return te(Rd(n))}function Kh(n,e,t,r){const i=[];for(;t<e+1+r;){const s=Bd(n,t);i.push(s.result),(t+=s.consumed)>e+1+r&&dn.throwError("child data too short",F.errors.BUFFER_OVERRUN,{})}return{consumed:1+r,result:i}}function Bd(n,e){if(n.length===0&&dn.throwError("data too short",F.errors.BUFFER_OVERRUN,{}),n[e]>=248){const t=n[e]-247;e+1+t>n.length&&dn.throwError("data short segment too short",F.errors.BUFFER_OVERRUN,{});const r=Wh(n,e+1,t);return e+1+t+r>n.length&&dn.throwError("data long segment too short",F.errors.BUFFER_OVERRUN,{}),Kh(n,e,e+1+t,t+r)}if(n[e]>=192){const t=n[e]-192;return e+1+t>n.length&&dn.throwError("data array too short",F.errors.BUFFER_OVERRUN,{}),Kh(n,e,e+1,t)}if(n[e]>=184){const t=n[e]-183;e+1+t>n.length&&dn.throwError("data array too short",F.errors.BUFFER_OVERRUN,{});const r=Wh(n,e+1,t);return e+1+t+r>n.length&&dn.throwError("data array too short",F.errors.BUFFER_OVERRUN,{}),{consumed:1+t+r,result:te(n.slice(e+1+t,e+1+t+r))}}if(n[e]>=128){const t=n[e]-128;return e+1+t>n.length&&dn.throwError("data too short",F.errors.BUFFER_OVERRUN,{}),{consumed:1+t,result:te(n.slice(e+1,e+1+t))}}return{consumed:1,result:te(n[e])}}function ia(n){const e=Y(n),t=Bd(e,0);return t.consumed!==e.length&&dn.throwArgumentError("invalid rlp data","data",n),t.result}var qp=Object.freeze({__proto__:null,decode:ia,encode:Oi});const ii=new F("address/5.8.0");function Vh(n){Te(n,20)||ii.throwArgumentError("invalid address","address",n);const e=(n=n.toLowerCase()).substring(2).split(""),t=new Uint8Array(40);for(let i=0;i<40;i++)t[i]=e[i].charCodeAt(0);const r=Y(_t(t));for(let i=0;i<40;i+=2)r[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(15&r[i>>1])>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const Wc={};for(let n=0;n<10;n++)Wc[String(n)]=String(n);for(let n=0;n<26;n++)Wc[String.fromCharCode(65+n)]=String(10+n);const Jh=Math.floor((gl=9007199254740991,Math.log10?Math.log10(gl):Math.log(gl)/Math.LN10));var gl;function Od(n){let e=(n=(n=n.toUpperCase()).substring(4)+n.substring(0,2)+"00").split("").map(r=>Wc[r]).join("");for(;e.length>=Jh;){let r=e.substring(0,Jh);e=parseInt(r,10)%97+e.substring(r.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}function At(n){let e=null;if(typeof n!="string"&&ii.throwArgumentError("invalid address","address",n),n.match(/^(0x)?[0-9a-fA-F]{40}$/))n.substring(0,2)!=="0x"&&(n="0x"+n),e=Vh(n),n.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==n&&ii.throwArgumentError("bad address checksum","address",n);else if(n.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(n.substring(2,4)!==Od(n)&&ii.throwArgumentError("bad icap checksum","address",n),t=n.substring(4),e=new ao(t,36).toString(16);e.length<40;)e="0"+e;e=Vh("0x"+e)}else ii.throwArgumentError("invalid address","address",n);var t;return e}function ja(n){let e=null;try{e=At(n.from)}catch{ii.throwArgumentError("missing from address","transaction",n)}return At(Lt(_t(Oi([e,xn(Y(X.from(n.nonce).toHexString()))])),12))}class Gp extends Jn{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){try{t=At(t)}catch(r){this._throwError(r.message,t)}return e.writeValue(t)}decode(e){return At(St(e.readValue().toHexString(),20))}}class Hp extends Jn{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}const os=new F(No);function Fd(n,e,t){let r=null;if(Array.isArray(t))r=t;else if(t&&typeof t=="object"){let l={};r=e.map(h=>{const u=h.localName;return u||os.throwError("cannot encode object for signature with missing names",F.errors.INVALID_ARGUMENT,{argument:"values",coder:h,value:t}),l[u]&&os.throwError("cannot encode object for signature with duplicate names",F.errors.INVALID_ARGUMENT,{argument:"values",coder:h,value:t}),l[u]=!0,t[u]})}else os.throwArgumentError("invalid tuple value","tuple",t);e.length!==r.length&&os.throwArgumentError("types/value length mismatch","tuple",t);let i=new mc(n.wordSize),s=new mc(n.wordSize),o=[];e.forEach((l,h)=>{let u=r[h];if(l.dynamic){let g=s.length;l.encode(s,u);let x=i.writeUpdatableValue();o.push(A=>{x(A+g)})}else l.encode(i,u)}),o.forEach(l=>{l(i.length)});let a=n.appendWriter(i);return a+=n.appendWriter(s),a}function Dd(n,e){let t=[],r=n.subReader(0);e.forEach(s=>{let o=null;if(s.dynamic){let a=n.readValue(),l=r.subReader(a.toNumber());try{o=s.decode(l)}catch(h){if(h.code===F.errors.BUFFER_OVERRUN)throw h;o=h,o.baseType=s.name,o.name=s.localName,o.type=s.type}}else try{o=s.decode(n)}catch(a){if(a.code===F.errors.BUFFER_OVERRUN)throw a;o=a,o.baseType=s.name,o.name=s.localName,o.type=s.type}o!=null&&t.push(o)});const i=e.reduce((s,o)=>{const a=o.localName;return a&&(s[a]||(s[a]=0),s[a]++),s},{});e.forEach((s,o)=>{let a=s.localName;if(!a||i[a]!==1||(a==="length"&&(a="_length"),t[a]!=null))return;const l=t[o];l instanceof Error?Object.defineProperty(t,a,{enumerable:!0,get:()=>{throw l}}):t[a]=l});for(let s=0;s<t.length;s++){const o=t[s];o instanceof Error&&Object.defineProperty(t,s,{enumerable:!0,get:()=>{throw o}})}return Object.freeze(t)}class jp extends Jn{constructor(e,t,r){super("array",e.type+"["+(t>=0?t:"")+"]",r,t===-1||e.dynamic),this.coder=e,this.length=t}defaultValue(){const e=this.coder.defaultValue(),t=[];for(let r=0;r<this.length;r++)t.push(e);return t}encode(e,t){Array.isArray(t)||this._throwError("expected array value",t);let r=this.length;r===-1&&(r=t.length,e.writeValue(t.length)),os.checkArgumentCount(t.length,r,"coder array"+(this.localName?" "+this.localName:""));let i=[];for(let s=0;s<t.length;s++)i.push(this.coder);return Fd(e,i,t)}decode(e){let t=this.length;t===-1&&(t=e.readValue().toNumber(),32*t>e._data.length&&os.throwError("insufficient data length",F.errors.BUFFER_OVERRUN,{length:e._data.length,count:t}));let r=[];for(let i=0;i<t;i++)r.push(new Hp(this.coder));return e.coerce(this.name,Dd(e,r))}}class Wp extends Jn{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){return e.writeValue(t?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class Ld extends Jn{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=Y(t);let r=e.writeValue(t.length);return r+=e.writeBytes(t),r}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}}class Kp extends Ld{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,te(super.decode(e)))}}class Vp extends Jn{constructor(e,t){let r="bytes"+String(e);super(r,r,t,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(e,t){let r=Y(t);return r.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(r)}decode(e){return e.coerce(this.name,te(e.readBytes(this.size)))}}class Jp extends Jn{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return t!=null&&this._throwError("not null",t),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}}const Ud="0x0000000000000000000000000000000000000000",zd=X.from(-1),Kc=X.from(0),qd=X.from(1),$p=X.from(2),Qp=X.from("1000000000000000000"),Gd=X.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Yp=X.from("-0x8000000000000000000000000000000000000000000000000000000000000000"),Xp=X.from("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Vc="0x0000000000000000000000000000000000000000000000000000000000000000";var Zp=Object.freeze({__proto__:null,AddressZero:Ud,EtherSymbol:"",HashZero:Vc,MaxInt256:Xp,MaxUint256:Gd,MinInt256:Yp,NegativeOne:zd,One:qd,Two:$p,WeiPerEther:Qp,Zero:Kc});class em extends Jn{constructor(e,t,r){const i=(t?"int":"uint")+8*e;super(i,i,r,!1),this.size=e,this.signed=t}defaultValue(){return 0}encode(e,t){let r=X.from(t),i=Gd.mask(8*e.wordSize);if(this.signed){let s=i.mask(8*this.size-1);(r.gt(s)||r.lt(s.add(qd).mul(zd)))&&this._throwError("value out-of-bounds",t)}else(r.lt(Kc)||r.gt(i.mask(8*this.size)))&&this._throwError("value out-of-bounds",t);return r=r.toTwos(8*this.size).mask(8*this.size),this.signed&&(r=r.fromTwos(8*this.size).toTwos(8*e.wordSize)),e.writeValue(r)}decode(e){let t=e.readValue().mask(8*this.size);return this.signed&&(t=t.fromTwos(8*this.size)),e.coerce(this.name,t)}}const Hd=new F("strings/5.8.0");var Pn,br;function $h(n,e,t,r,i){if(n===br.BAD_PREFIX||n===br.UNEXPECTED_CONTINUE){let s=0;for(let o=e+1;o<t.length&&t[o]>>6==2;o++)s++;return s}return n===br.OVERRUN?t.length-e-1:0}(function(n){n.current="",n.NFC="NFC",n.NFD="NFD",n.NFKC="NFKC",n.NFKD="NFKD"})(Pn||(Pn={})),function(n){n.UNEXPECTED_CONTINUE="unexpected continuation byte",n.BAD_PREFIX="bad codepoint prefix",n.OVERRUN="string overrun",n.MISSING_CONTINUE="missing continuation byte",n.OUT_OF_RANGE="out of UTF-8 range",n.UTF16_SURROGATE="UTF-16 surrogate",n.OVERLONG="overlong representation"}(br||(br={}));const jd=Object.freeze({error:function(n,e,t,r,i){return Hd.throwArgumentError(`invalid codepoint at offset ${e}; ${n}`,"bytes",t)},ignore:$h,replace:function(n,e,t,r,i){return n===br.OVERLONG?(r.push(i),0):(r.push(65533),$h(n,e,t))}});function Jc(n,e){e==null&&(e=jd.error),n=Y(n);const t=[];let r=0;for(;r<n.length;){const i=n[r++];if(!(i>>7)){t.push(i);continue}let s=null,o=null;if((224&i)==192)s=1,o=127;else if((240&i)==224)s=2,o=2047;else{if((248&i)!=240){r+=e((192&i)==128?br.UNEXPECTED_CONTINUE:br.BAD_PREFIX,r-1,n,t);continue}s=3,o=65535}if(r-1+s>=n.length){r+=e(br.OVERRUN,r-1,n,t);continue}let a=i&(1<<8-s-1)-1;for(let l=0;l<s;l++){let h=n[r];if((192&h)!=128){r+=e(br.MISSING_CONTINUE,r,n,t),a=null;break}a=a<<6|63&h,r++}a!==null&&(a>1114111?r+=e(br.OUT_OF_RANGE,r-1-s,n,t,a):a>=55296&&a<=57343?r+=e(br.UTF16_SURROGATE,r-1-s,n,t,a):a<=o?r+=e(br.OVERLONG,r-1-s,n,t,a):t.push(a))}return t}function zt(n,e=Pn.current){e!=Pn.current&&(Hd.checkNormalize(),n=n.normalize(e));let t=[];for(let r=0;r<n.length;r++){const i=n.charCodeAt(r);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192),t.push(63&i|128);else if((64512&i)==55296){r++;const s=n.charCodeAt(r);if(r>=n.length||(64512&s)!=56320)throw new Error("invalid utf-8 string");const o=65536+((1023&i)<<10)+(1023&s);t.push(o>>18|240),t.push(o>>12&63|128),t.push(o>>6&63|128),t.push(63&o|128)}else t.push(i>>12|224),t.push(i>>6&63|128),t.push(63&i|128)}return Y(t)}function yl(n){const e="0000"+n.toString(16);return"\\u"+e.substring(e.length-4)}function gc(n){return n.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10&1023),56320+(1023&e)))).join("")}function Fi(n,e){return gc(Jc(n,e))}function sa(n,e=Pn.current){return Jc(zt(n,e))}function $c(n,e){e||(e=function(i){return[parseInt(i,16)]});let t=0,r={};return n.split(",").forEach(i=>{let s=i.split(":");t+=parseInt(s[0],16),r[t]=e(s[1])}),r}function Wd(n){let e=0;return n.split(",").map(t=>{let r=t.split("-");r.length===1?r[1]="0":r[1]===""&&(r[1]="1");let i=e+parseInt(r[0],16);return e=parseInt(r[1],16),{l:i,h:e}})}function vl(n,e){let t=0;for(let r=0;r<e.length;r++){let i=e[r];if(t+=i.l,n>=t&&n<=t+i.h&&(n-t)%(i.d||1)===0){if(i.e&&i.e.indexOf(n-t)!==-1)continue;return i}}return null}const tm=Wd("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),rm="ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map(n=>parseInt(n,16)),nm=[{h:25,s:32,l:65},{h:30,s:32,e:[23],l:127},{h:54,s:1,e:[48],l:64,d:2},{h:14,s:1,l:57,d:2},{h:44,s:1,l:17,d:2},{h:10,s:1,e:[2,6,8],l:61,d:2},{h:16,s:1,l:68,d:2},{h:84,s:1,e:[18,24,66],l:19,d:2},{h:26,s:32,e:[17],l:435},{h:22,s:1,l:71,d:2},{h:15,s:80,l:40},{h:31,s:32,l:16},{h:32,s:1,l:80,d:2},{h:52,s:1,l:42,d:2},{h:12,s:1,l:55,d:2},{h:40,s:1,e:[38],l:15,d:2},{h:14,s:1,l:48,d:2},{h:37,s:48,l:49},{h:148,s:1,l:6351,d:2},{h:88,s:1,l:160,d:2},{h:15,s:16,l:704},{h:25,s:26,l:854},{h:25,s:32,l:55915},{h:37,s:40,l:1247},{h:25,s:-119711,l:53248},{h:25,s:-119763,l:52},{h:25,s:-119815,l:52},{h:25,s:-119867,e:[1,4,5,7,8,11,12,17],l:52},{h:25,s:-119919,l:52},{h:24,s:-119971,e:[2,7,8,17],l:52},{h:24,s:-120023,e:[2,7,13,15,16,17],l:52},{h:25,s:-120075,l:52},{h:25,s:-120127,l:52},{h:25,s:-120179,l:52},{h:25,s:-120231,l:52},{h:25,s:-120283,l:52},{h:25,s:-120335,l:52},{h:24,s:-119543,e:[17],l:56},{h:24,s:-119601,e:[17],l:58},{h:24,s:-119659,e:[17],l:58},{h:24,s:-119717,e:[17],l:58},{h:24,s:-119775,e:[17],l:58}],im=$c("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),sm=$c("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),om=$c("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",function(n){if(n.length%4!=0)throw new Error("bad data");let e=[];for(let t=0;t<n.length;t+=4)e.push(parseInt(n.substring(t,t+4),16));return e}),am=Wd("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");class lm extends Ld{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,zt(t))}decode(e){return Fi(super.decode(e))}}class Fo extends Jn{constructor(e,t){let r=!1;const i=[];e.forEach(s=>{s.dynamic&&(r=!0),i.push(s.type)}),super("tuple","tuple("+i.join(",")+")",t,r),this.coders=e}defaultValue(){const e=[];this.coders.forEach(r=>{e.push(r.defaultValue())});const t=this.coders.reduce((r,i)=>{const s=i.localName;return s&&(r[s]||(r[s]=0),r[s]++),r},{});return this.coders.forEach((r,i)=>{let s=r.localName;s&&t[s]===1&&(s==="length"&&(s="_length"),e[s]==null&&(e[s]=e[i]))}),Object.freeze(e)}encode(e,t){return Fd(e,this.coders,t)}decode(e){return e.coerce(this.name,Dd(e,this.coders))}}const Do=new F(No),cm=new RegExp(/^bytes([0-9]*)$/),hm=new RegExp(/^(u?int)([0-9]*)$/);class Kd{constructor(e){j(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new Gp(e.name);case"bool":return new Wp(e.name);case"string":return new lm(e.name);case"bytes":return new Kp(e.name);case"array":return new jp(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new Fo((e.components||[]).map(r=>this._getCoder(r)),e.name);case"":return new Jp(e.name)}let t=e.type.match(hm);if(t){let r=parseInt(t[2]||"256");return(r===0||r>256||r%8!=0)&&Do.throwArgumentError("invalid "+t[1]+" bit length","param",e),new em(r/8,t[1]==="int",e.name)}if(t=e.type.match(cm),t){let r=parseInt(t[1]);return(r===0||r>32)&&Do.throwArgumentError("invalid bytes length","param",e),new Vp(r,e.name)}return Do.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,t){return new ka(e,this._getWordSize(),this.coerceFunc,t)}_getWriter(){return new mc(this._getWordSize())}getDefaultValue(e){const t=e.map(r=>this._getCoder(Wt.from(r)));return new Fo(t,"_").defaultValue()}encode(e,t){e.length!==t.length&&Do.throwError("types/values length mismatch",F.errors.INVALID_ARGUMENT,{count:{types:e.length,values:t.length},value:{types:e,values:t}});const r=e.map(o=>this._getCoder(Wt.from(o))),i=new Fo(r,"_"),s=this._getWriter();return i.encode(s,t),s.data}decode(e,t,r){const i=e.map(s=>this._getCoder(Wt.from(s)));return new Fo(i,"_").decode(this._getReader(Y(t),r))}}const Vd=new Kd;function si(n){return _t(zt(n))}const Jd="hash/5.8.0";function Qc(n){n=atob(n);const e=[];for(let t=0;t<n.length;t++)e.push(n.charCodeAt(t));return Y(e)}function Yc(n){n=Y(n);let e="";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return btoa(e)}var um=Object.freeze({__proto__:null,decode:Qc,encode:Yc});function $d(n,e){e==null&&(e=1);const t=[],r=t.forEach,i=function(s,o){r.call(s,function(a){o>0&&Array.isArray(a)?i(a,o-1):t.push(a)})};return i(n,e),t}function fm(n){return function(e){let t=0;return()=>e[t++]}(function(e){let t=0;function r(){return e[t++]<<8|e[t++]}let i=r(),s=1,o=[0,1];for(let q=1;q<i;q++)o.push(s+=r());let a=r(),l=t;t+=a;let h=0,u=0;function g(){return h==0&&(u=u<<8|e[t++],h=8),u>>--h&1}const x=Math.pow(2,31),A=x>>>1,E=A>>1,I=x-1;let T=0;for(let q=0;q<31;q++)T=T<<1|g();let R=[],O=0,B=x;for(;;){let q=Math.floor(((T-O+1)*s-1)/B),W=0,Z=i;for(;Z-W>1;){let y=W+Z>>>1;q<o[y]?Z=y:W=y}if(W==0)break;R.push(W);let K=O+Math.floor(B*o[W]/s),se=O+Math.floor(B*o[W+1]/s)-1;for(;!((K^se)&A);)T=T<<1&I|g(),K=K<<1&I,se=se<<1&I|1;for(;K&~se&E;)T=T&A|T<<1&I>>>1|g(),K=K<<1^A,se=(se^A)<<1|A|1;O=K,B=1+se-K}let U=i-4;return R.map(q=>{switch(q-U){case 3:return U+65792+(e[l++]<<16|e[l++]<<8|e[l++]);case 2:return U+256+(e[l++]<<8|e[l++]);case 1:return U+e[l++];default:return q-1}})}(n))}function dm(n){return 1&n?~n>>1:n>>1}function Qh(n,e){let t=Array(n);for(let r=0,i=-1;r<n;r++)t[r]=i+=1+e();return t}function pm(n,e){let t=Array(n);for(let r=0,i=0;r<n;r++)t[r]=i+=dm(e());return t}function Sa(n,e){let t=Qh(n(),n),r=n(),i=Qh(r,n),s=function(o,a){let l=Array(o);for(let h=0;h<o;h++)l[h]=1+a();return l}(r,n);for(let o=0;o<r;o++)for(let a=0;a<s[o];a++)t.push(i[o]+a);return e?t.map(o=>e[o]):t}function Qd(n,e,t){let r=Array(n).fill(void 0).map(()=>[]);for(let i=0;i<e;i++)pm(n,t).forEach((s,o)=>r[o].push(s));return r}function mm(n,e){let t=1+e(),r=e(),i=function(s){let o=[];for(;;){let a=s();if(a==0)break;o.push(a)}return o}(e);return $d(Qd(i.length,1+n,e).map((s,o)=>{const a=s[0],l=s.slice(1);return Array(i[o]).fill(void 0).map((h,u)=>{let g=u*r;return[a+u*t,l.map(x=>x+g)]})}))}function gm(n,e){return Qd(1+e(),1+n,e).map(t=>[t[0],t.slice(1)])}const Wa=fm(Qc("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA==")),ym=new Set(Sa(Wa)),vm=new Set(Sa(Wa)),wm=function(n){let e=[];for(;;){let t=n();if(t==0)break;e.push(mm(t,n))}for(;;){let t=n()-1;if(t<0)break;e.push(gm(t,n))}return function(t){const r={};for(let i=0;i<t.length;i++){const s=t[i];r[s[0]]=s[1]}return r}($d(e))}(Wa),bm=function(n){let e=Sa(n).sort((t,r)=>t-r);return function t(){let r=[];for(;;){let a=Sa(n,e);if(a.length==0)break;r.push({set:new Set(a),node:t()})}r.sort((a,l)=>l.set.size-a.set.size);let i=n(),s=i%3;i=i/3|0;let o=!!(1&i);return i>>=1,{branches:r,valid:s,fe0f:o,save:i==1,check:i==2}}()}(Wa);function Yd(n){return sa(n)}function Am(n){return n.filter(e=>e!=65039)}function Yh(n){for(let e of n.split(".")){let t=Yd(e);try{for(let r=t.lastIndexOf(95)-1;r>=0;r--)if(t[r]!==95)throw new Error("underscore only allowed at start");if(t.length>=4&&t.every(r=>r<128)&&t[2]===45&&t[3]===45)throw new Error("invalid label extension")}catch(r){throw new Error(`Invalid label "${e}": ${r.message}`)}}return n}function Em(n){return Yh(function(e,t){let r=Yd(e).reverse(),i=[];for(;r.length;){let o=xm(r);if(o){i.push(...t(o));continue}let a=r.pop();if(ym.has(a)){i.push(a);continue}if(vm.has(a))continue;let l=wm[a];if(!l)throw new Error(`Disallowed codepoint: 0x${a.toString(16).toUpperCase()}`);i.push(...l)}return Yh((s=String.fromCodePoint(...i),s.normalize("NFC")));var s}(n,Am))}function xm(n,e){var t;let r,i,s=bm,o=[],a=n.length;for(;a;){let l=n[--a];if(s=(t=s.branches.find(h=>h.set.has(l)))===null||t===void 0?void 0:t.node,!s)break;if(s.save)i=l;else if(s.check&&l===i)break;o.push(l),s.fe0f&&(o.push(65039),a>0&&n[a-1]==65039&&a--),s.valid&&(r=o.slice(),s.valid==2&&r.splice(1,1),n.length=a)}return r}const _m=new F(Jd),Xd=new Uint8Array(32);function Xh(n){if(n.length===0)throw new Error("invalid ENS name; empty component");return n}function Xc(n){const e=zt(Em(n)),t=[];if(n.length===0)return t;let r=0;for(let i=0;i<e.length;i++)e[i]===46&&(t.push(Xh(e.slice(r,i))),r=i+1);if(r>=e.length)throw new Error("invalid ENS name; empty component");return t.push(Xh(e.slice(r))),t}function Xs(n){typeof n!="string"&&_m.throwArgumentError("invalid ENS name; not a string","name",n);let e=Xd;const t=Xc(n);for(;t.length;)e=_t(kt([e,_t(t.pop())]));return te(e)}function Zd(n){return te(kt(Xc(n).map(e=>{if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const t=new Uint8Array(e.length+1);return t.set(e,1),t[0]=t.length-1,t})))+"00"}Xd.fill(0);function yc(n){return typeof n=="string"&&(n=zt(n)),_t(kt([zt(`Ethereum Signed Message:
`),zt(String(n.length)),n]))}var km=function(n,e,t,r){return new(t||(t=Promise))(function(i,s){function o(h){try{l(r.next(h))}catch(u){s(u)}}function a(h){try{l(r.throw(h))}catch(u){s(u)}}function l(h){var u;h.done?i(h.value):(u=h.value,u instanceof t?u:new t(function(g){g(u)})).then(o,a)}l((r=r.apply(n,e||[])).next())})};const Mt=new F(Jd),e0=new Uint8Array(32);e0.fill(0);const Sm=X.from(-1),t0=X.from(0),r0=X.from(1),Nm=X.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Cm=St(r0.toHexString(),32),Im=St(t0.toHexString(),32),Zh={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},wl=["name","version","chainId","verifyingContract","salt"];function eu(n){return function(e){return typeof e!="string"&&Mt.throwArgumentError(`invalid domain value for ${JSON.stringify(n)}`,`domain.${n}`,e),e}}const Pm={name:eu("name"),version:eu("version"),chainId:function(n){try{return X.from(n).toString()}catch{}return Mt.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",n)},verifyingContract:function(n){try{return At(n).toLowerCase()}catch{}return Mt.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",n)},salt:function(n){try{const e=Y(n);if(e.length!==32)throw new Error("bad length");return te(e)}catch{}return Mt.throwArgumentError('invalid domain value "salt"',"domain.salt",n)}};function bl(n){{const e=n.match(/^(u?)int(\d*)$/);if(e){const t=e[1]==="",r=parseInt(e[2]||"256");(r%8!=0||r>256||e[2]&&e[2]!==String(r))&&Mt.throwArgumentError("invalid numeric width","type",n);const i=Nm.mask(t?r-1:r),s=t?i.add(r0).mul(Sm):t0;return function(o){const a=X.from(o);return(a.lt(s)||a.gt(i))&&Mt.throwArgumentError(`value out-of-bounds for ${n}`,"value",o),St(a.toTwos(256).toHexString(),32)}}}{const e=n.match(/^bytes(\d+)$/);if(e){const t=parseInt(e[1]);return(t===0||t>32||e[1]!==String(t))&&Mt.throwArgumentError("invalid bytes width","type",n),function(r){return Y(r).length!==t&&Mt.throwArgumentError(`invalid length for ${n}`,"value",r),function(i){const s=Y(i),o=s.length%32;return o?fr([s,e0.slice(o)]):te(s)}(r)}}}switch(n){case"address":return function(e){return St(At(e),32)};case"bool":return function(e){return e?Cm:Im};case"bytes":return function(e){return _t(e)};case"string":return function(e){return si(e)}}return null}function tu(n,e){return`${n}(${e.map(({name:t,type:r})=>r+" "+t).join(",")})`}class er{constructor(e){j(this,"types",Object.freeze(gr(e))),j(this,"_encoderCache",{}),j(this,"_types",{});const t={},r={},i={};Object.keys(e).forEach(o=>{t[o]={},r[o]=[],i[o]={}});for(const o in e){const a={};e[o].forEach(l=>{a[l.name]&&Mt.throwArgumentError(`duplicate variable name ${JSON.stringify(l.name)} in ${JSON.stringify(o)}`,"types",e),a[l.name]=!0;const h=l.type.match(/^([^\x5b]*)(\x5b|$)/)[1];h===o&&Mt.throwArgumentError(`circular type reference to ${JSON.stringify(h)}`,"types",e),bl(h)||(r[h]||Mt.throwArgumentError(`unknown type ${JSON.stringify(h)}`,"types",e),r[h].push(o),t[o][h]=!0)})}const s=Object.keys(r).filter(o=>r[o].length===0);s.length===0?Mt.throwArgumentError("missing primary type","types",e):s.length>1&&Mt.throwArgumentError(`ambiguous primary types or unused types: ${s.map(o=>JSON.stringify(o)).join(", ")}`,"types",e),j(this,"primaryType",s[0]),function o(a,l){l[a]&&Mt.throwArgumentError(`circular type reference to ${JSON.stringify(a)}`,"types",e),l[a]=!0,Object.keys(t[a]).forEach(h=>{r[h]&&(o(h,l),Object.keys(l).forEach(u=>{i[u][h]=!0}))}),delete l[a]}(this.primaryType,{});for(const o in i){const a=Object.keys(i[o]);a.sort(),this._types[o]=tu(o,e[o])+a.map(l=>tu(l,e[l])).join("")}}getEncoder(e){let t=this._encoderCache[e];return t||(t=this._encoderCache[e]=this._getEncoder(e)),t}_getEncoder(e){{const i=bl(e);if(i)return i}const t=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(t){const i=t[1],s=this.getEncoder(i),o=parseInt(t[3]);return a=>{o>=0&&a.length!==o&&Mt.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",a);let l=a.map(s);return this._types[i]&&(l=l.map(_t)),_t(fr(l))}}const r=this.types[e];if(r){const i=si(this._types[e]);return s=>{const o=r.map(({name:a,type:l})=>{const h=this.getEncoder(l)(s[a]);return this._types[l]?_t(h):h});return o.unshift(i),fr(o)}}return Mt.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const t=this._types[e];return t||Mt.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return _t(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,r){if(bl(e))return r(e,t);const i=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(i){const o=i[1],a=parseInt(i[3]);return a>=0&&t.length!==a&&Mt.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t),t.map(l=>this._visit(o,l,r))}const s=this.types[e];return s?s.reduce((o,{name:a,type:l})=>(o[a]=this._visit(l,t[a],r),o),{}):Mt.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new er(e)}static getPrimaryType(e){return er.from(e).primaryType}static hashStruct(e,t,r){return er.from(t).hashStruct(e,r)}static hashDomain(e){const t=[];for(const r in e){const i=Zh[r];i||Mt.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),t.push({name:r,type:i})}return t.sort((r,i)=>wl.indexOf(r.name)-wl.indexOf(i.name)),er.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,r){return fr(["0x1901",er.hashDomain(e),er.from(t).hash(r)])}static hash(e,t,r){return _t(er.encode(e,t,r))}static resolveNames(e,t,r,i){return km(this,void 0,void 0,function*(){e=Nt(e);const s={};e.verifyingContract&&!Te(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const o=er.from(t);o.visit(r,(a,l)=>(a!=="address"||Te(l,20)||(s[l]="0x"),l));for(const a in s)s[a]=yield i(a);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),r=o.visit(r,(a,l)=>a==="address"&&s[l]?s[l]:l),{domain:e,value:r}})}static getPayload(e,t,r){er.hashDomain(e);const i={},s=[];wl.forEach(l=>{const h=e[l];h!=null&&(i[l]=Pm[l](h),s.push({name:l,type:Zh[l]}))});const o=er.from(t),a=Nt(t);return a.EIP712Domain?Mt.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",t):a.EIP712Domain=s,o.encode(r),{types:a,domain:i,primaryType:o.primaryType,message:o.visit(r,(l,h)=>{if(l.match(/^bytes(\d*)/))return te(Y(h));if(l.match(/^u?int/))return X.from(h).toString();switch(l){case"address":return h.toLowerCase();case"bool":return!!h;case"string":return typeof h!="string"&&Mt.throwArgumentError("invalid string","value",h),h}return Mt.throwArgumentError("unsupported type","type",l)})}}}const It=new F(No);class n0 extends Wi{}class i0 extends Wi{}class Mm extends Wi{}class Na extends Wi{static isIndexed(e){return!(!e||!e._isIndexed)}}const Tm={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function ru(n,e){const t=new Error(`deferred error during ABI decoding triggered accessing ${n}`);return t.error=e,t}class vc{constructor(e){let t=[];t=typeof e=="string"?JSON.parse(e):e,j(this,"fragments",t.map(r=>bn.from(r)).filter(r=>r!=null)),j(this,"_abiCoder",tr(new.target,"getAbiCoder")()),j(this,"functions",{}),j(this,"errors",{}),j(this,"events",{}),j(this,"structs",{}),this.fragments.forEach(r=>{let i=null;switch(r.type){case"constructor":return this.deploy?void It.warn("duplicate definition - constructor"):void j(this,"deploy",r);case"function":i=this.functions;break;case"event":i=this.events;break;case"error":i=this.errors;break;default:return}let s=r.format();i[s]?It.warn("duplicate definition - "+s):i[s]=r}),this.deploy||j(this,"deploy",rn.from({payable:!1,type:"constructor"})),j(this,"_isInterface",!0)}format(e){e||(e=mt.full),e===mt.sighash&&It.throwArgumentError("interface does not support formatting sighash","format",e);const t=this.fragments.map(r=>r.format(e));return e===mt.json?JSON.stringify(t.map(r=>JSON.parse(r))):t}static getAbiCoder(){return Vd}static getAddress(e){return At(e)}static getSighash(e){return Lt(si(e.format()),0,4)}static getEventTopic(e){return si(e.format())}getFunction(e){if(Te(e)){for(const r in this.functions)if(e===this.getSighash(r))return this.functions[r];It.throwArgumentError("no matching function","sighash",e)}if(e.indexOf("(")===-1){const r=e.trim(),i=Object.keys(this.functions).filter(s=>s.split("(")[0]===r);return i.length===0?It.throwArgumentError("no matching function","name",r):i.length>1&&It.throwArgumentError("multiple matching functions","name",r),this.functions[i[0]]}const t=this.functions[nn.fromString(e).format()];return t||It.throwArgumentError("no matching function","signature",e),t}getEvent(e){if(Te(e)){const r=e.toLowerCase();for(const i in this.events)if(r===this.getEventTopic(i))return this.events[i];It.throwArgumentError("no matching event","topichash",r)}if(e.indexOf("(")===-1){const r=e.trim(),i=Object.keys(this.events).filter(s=>s.split("(")[0]===r);return i.length===0?It.throwArgumentError("no matching event","name",r):i.length>1&&It.throwArgumentError("multiple matching events","name",r),this.events[i[0]]}const t=this.events[yn.fromString(e).format()];return t||It.throwArgumentError("no matching event","signature",e),t}getError(e){if(Te(e)){const r=tr(this.constructor,"getSighash");for(const i in this.errors)if(e===r(this.errors[i]))return this.errors[i];It.throwArgumentError("no matching error","sighash",e)}if(e.indexOf("(")===-1){const r=e.trim(),i=Object.keys(this.errors).filter(s=>s.split("(")[0]===r);return i.length===0?It.throwArgumentError("no matching error","name",r):i.length>1&&It.throwArgumentError("multiple matching errors","name",r),this.errors[i[0]]}const t=this.errors[nn.fromString(e).format()];return t||It.throwArgumentError("no matching error","signature",e),t}getSighash(e){if(typeof e=="string")try{e=this.getFunction(e)}catch(t){try{e=this.getError(e)}catch{throw t}}return tr(this.constructor,"getSighash")(e)}getEventTopic(e){return typeof e=="string"&&(e=this.getEvent(e)),tr(this.constructor,"getEventTopic")(e)}_decodeParams(e,t){return this._abiCoder.decode(e,t)}_encodeParams(e,t){return this._abiCoder.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){typeof e=="string"&&(e=this.getError(e));const r=Y(t);return te(r.slice(0,4))!==this.getSighash(e)&&It.throwArgumentError(`data signature does not match error ${e.name}.`,"data",te(r)),this._decodeParams(e.inputs,r.slice(4))}encodeErrorResult(e,t){return typeof e=="string"&&(e=this.getError(e)),te(kt([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionData(e,t){typeof e=="string"&&(e=this.getFunction(e));const r=Y(t);return te(r.slice(0,4))!==this.getSighash(e)&&It.throwArgumentError(`data signature does not match function ${e.name}.`,"data",te(r)),this._decodeParams(e.inputs,r.slice(4))}encodeFunctionData(e,t){return typeof e=="string"&&(e=this.getFunction(e)),te(kt([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionResult(e,t){typeof e=="string"&&(e=this.getFunction(e));let r=Y(t),i=null,s="",o=null,a=null,l=null;switch(r.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,r)}catch{}break;case 4:{const h=te(r.slice(0,4)),u=Tm[h];if(u)o=this._abiCoder.decode(u.inputs,r.slice(4)),a=u.name,l=u.signature,u.reason&&(i=o[0]),a==="Error"?s=`; VM Exception while processing transaction: reverted with reason string ${JSON.stringify(o[0])}`:a==="Panic"&&(s=`; VM Exception while processing transaction: reverted with panic code ${o[0]}`);else try{const g=this.getError(h);o=this._abiCoder.decode(g.inputs,r.slice(4)),a=g.name,l=g.format()}catch{}break}}return It.throwError("call revert exception"+s,F.errors.CALL_EXCEPTION,{method:e.format(),data:te(t),errorArgs:o,errorName:a,errorSignature:l,reason:i})}encodeFunctionResult(e,t){return typeof e=="string"&&(e=this.getFunction(e)),te(this._abiCoder.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){typeof e=="string"&&(e=this.getEvent(e)),t.length>e.inputs.length&&It.throwError("too many arguments for "+e.format(),F.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:t});let r=[];e.anonymous||r.push(this.getEventTopic(e));const i=(s,o)=>s.type==="string"?si(o):s.type==="bytes"?_t(te(o)):(s.type==="bool"&&typeof o=="boolean"&&(o=o?"0x01":"0x00"),s.type.match(/^u?int/)&&(o=X.from(o).toHexString()),s.type==="address"&&this._abiCoder.encode(["address"],[o]),St(te(o),32));for(t.forEach((s,o)=>{let a=e.inputs[o];a.indexed?s==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?It.throwArgumentError("filtering with tuples or arrays not supported","contract."+a.name,s):Array.isArray(s)?r.push(s.map(l=>i(a,l))):r.push(i(a,s)):s!=null&&It.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+a.name,s)});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,t){typeof e=="string"&&(e=this.getEvent(e));const r=[],i=[],s=[];return e.anonymous||r.push(this.getEventTopic(e)),t.length!==e.inputs.length&&It.throwArgumentError("event arguments/values mismatch","values",t),e.inputs.forEach((o,a)=>{const l=t[a];if(o.indexed)if(o.type==="string")r.push(si(l));else if(o.type==="bytes")r.push(_t(l));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(this._abiCoder.encode([o.type],[l]))}else i.push(o),s.push(l)}),{data:this._abiCoder.encode(i,s),topics:r}}decodeEventLog(e,t,r){if(typeof e=="string"&&(e=this.getEvent(e)),r!=null&&!e.anonymous){let x=this.getEventTopic(e);Te(r[0],32)&&r[0].toLowerCase()===x||It.throwError("fragment/topic mismatch",F.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:x,value:r[0]}),r=r.slice(1)}let i=[],s=[],o=[];e.inputs.forEach((x,A)=>{x.indexed?x.type==="string"||x.type==="bytes"||x.baseType==="tuple"||x.baseType==="array"?(i.push(Wt.fromObject({type:"bytes32",name:x.name})),o.push(!0)):(i.push(x),o.push(!1)):(s.push(x),o.push(!1))});let a=r!=null?this._abiCoder.decode(i,kt(r)):null,l=this._abiCoder.decode(s,t,!0),h=[],u=0,g=0;e.inputs.forEach((x,A)=>{if(x.indexed)if(a==null)h[A]=new Na({_isIndexed:!0,hash:null});else if(o[A])h[A]=new Na({_isIndexed:!0,hash:a[g++]});else try{h[A]=a[g++]}catch(E){h[A]=E}else try{h[A]=l[u++]}catch(E){h[A]=E}if(x.name&&h[x.name]==null){const E=h[A];E instanceof Error?Object.defineProperty(h,x.name,{enumerable:!0,get:()=>{throw ru(`property ${JSON.stringify(x.name)}`,E)}}):h[x.name]=E}});for(let x=0;x<h.length;x++){const A=h[x];A instanceof Error&&Object.defineProperty(h,x,{enumerable:!0,get:()=>{throw ru(`index ${x}`,A)}})}return Object.freeze(h)}parseTransaction(e){let t=this.getFunction(e.data.substring(0,10).toLowerCase());return t?new i0({args:this._abiCoder.decode(t.inputs,"0x"+e.data.substring(10)),functionFragment:t,name:t.name,signature:t.format(),sighash:this.getSighash(t),value:X.from(e.value||"0")}):null}parseLog(e){let t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new n0({eventFragment:t,name:t.name,signature:t.format(),topic:this.getEventTopic(t),args:this.decodeEventLog(t,e.data,e.topics)})}parseError(e){const t=te(e);let r=this.getError(t.substring(0,10).toLowerCase());return r?new Mm({args:this._abiCoder.decode(r.inputs,"0x"+t.substring(10)),errorFragment:r,name:r.name,signature:r.format(),sighash:this.getSighash(r)}):null}static isInterface(e){return!(!e||!e._isInterface)}}var Rm=function(n,e,t,r){return new(t||(t=Promise))(function(i,s){function o(h){try{l(r.next(h))}catch(u){s(u)}}function a(h){try{l(r.throw(h))}catch(u){s(u)}}function l(h){var u;h.done?i(h.value):(u=h.value,u instanceof t?u:new t(function(g){g(u)})).then(o,a)}l((r=r.apply(n,e||[])).next())})};const Bm=new F("abstract-provider/5.8.0");class Om extends Wi{static isForkEvent(e){return!(!e||!e._isForkEvent)}}class Ki{constructor(){Bm.checkAbstract(new.target,Ki),j(this,"_isProvider",!0)}getFeeData(){return Rm(this,void 0,void 0,function*(){const{block:e,gasPrice:t}=yield Ot({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(o=>null)});let r=null,i=null,s=null;return e&&e.baseFeePerGas&&(r=e.baseFeePerGas,s=X.from("1500000000"),i=e.baseFeePerGas.mul(2).add(s)),{lastBaseFeePerGas:r,maxFeePerGas:i,maxPriorityFeePerGas:s,gasPrice:t}})}addListener(e,t){return this.on(e,t)}removeListener(e,t){return this.off(e,t)}static isProvider(e){return!(!e||!e._isProvider)}}var Jr=function(n,e,t,r){return new(t||(t=Promise))(function(i,s){function o(h){try{l(r.next(h))}catch(u){s(u)}}function a(h){try{l(r.throw(h))}catch(u){s(u)}}function l(h){var u;h.done?i(h.value):(u=h.value,u instanceof t?u:new t(function(g){g(u)})).then(o,a)}l((r=r.apply(n,e||[])).next())})};const Lr=new F("abstract-signer/5.8.0"),Fm=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],Dm=[F.errors.INSUFFICIENT_FUNDS,F.errors.NONCE_EXPIRED,F.errors.REPLACEMENT_UNDERPRICED];class ci{constructor(){Lr.checkAbstract(new.target,ci),j(this,"_isSigner",!0)}getBalance(e){return Jr(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return Jr(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return Jr(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const t=yield Ot(this.checkTransaction(e));return yield this.provider.estimateGas(t)})}call(e,t){return Jr(this,void 0,void 0,function*(){this._checkProvider("call");const r=yield Ot(this.checkTransaction(e));return yield this.provider.call(r,t)})}sendTransaction(e){return Jr(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const t=yield this.populateTransaction(e),r=yield this.signTransaction(t);return yield this.provider.sendTransaction(r)})}getChainId(){return Jr(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return Jr(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return Jr(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return Jr(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(const r in e)Fm.indexOf(r)===-1&&Lr.throwArgumentError("invalid transaction key: "+r,"transaction",e);const t=Nt(e);return t.from==null?t.from=this.getAddress():t.from=Promise.all([Promise.resolve(t.from),this.getAddress()]).then(r=>(r[0].toLowerCase()!==r[1].toLowerCase()&&Lr.throwArgumentError("from address mismatch","transaction",e),r[0])),t}populateTransaction(e){return Jr(this,void 0,void 0,function*(){const t=yield Ot(this.checkTransaction(e));t.to!=null&&(t.to=Promise.resolve(t.to).then(i=>Jr(this,void 0,void 0,function*(){if(i==null)return null;const s=yield this.resolveName(i);return s==null&&Lr.throwArgumentError("provided ENS name resolves to null","tx.to",i),s})),t.to.catch(i=>{}));const r=t.maxFeePerGas!=null||t.maxPriorityFeePerGas!=null;if(t.gasPrice==null||t.type!==2&&!r?t.type!==0&&t.type!==1||!r||Lr.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e):Lr.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e),t.type!==2&&t.type!=null||t.maxFeePerGas==null||t.maxPriorityFeePerGas==null)if(t.type===0||t.type===1)t.gasPrice==null&&(t.gasPrice=this.getGasPrice());else{const i=yield this.getFeeData();if(t.type==null)if(i.maxFeePerGas!=null&&i.maxPriorityFeePerGas!=null)if(t.type=2,t.gasPrice!=null){const s=t.gasPrice;delete t.gasPrice,t.maxFeePerGas=s,t.maxPriorityFeePerGas=s}else t.maxFeePerGas==null&&(t.maxFeePerGas=i.maxFeePerGas),t.maxPriorityFeePerGas==null&&(t.maxPriorityFeePerGas=i.maxPriorityFeePerGas);else i.gasPrice!=null?(r&&Lr.throwError("network does not support EIP-1559",F.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),t.gasPrice==null&&(t.gasPrice=i.gasPrice),t.type=0):Lr.throwError("failed to get consistent fee data",F.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else t.type===2&&(t.maxFeePerGas==null&&(t.maxFeePerGas=i.maxFeePerGas),t.maxPriorityFeePerGas==null&&(t.maxPriorityFeePerGas=i.maxPriorityFeePerGas))}else t.type=2;return t.nonce==null&&(t.nonce=this.getTransactionCount("pending")),t.gasLimit==null&&(t.gasLimit=this.estimateGas(t).catch(i=>{if(Dm.indexOf(i.code)>=0)throw i;return Lr.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",F.errors.UNPREDICTABLE_GAS_LIMIT,{error:i,tx:t})})),t.chainId==null?t.chainId=this.getChainId():t.chainId=Promise.all([Promise.resolve(t.chainId),this.getChainId()]).then(i=>(i[1]!==0&&i[0]!==i[1]&&Lr.throwArgumentError("chainId address mismatch","transaction",e),i[0])),yield Ot(t)})}_checkProvider(e){this.provider||Lr.throwError("missing provider",F.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!(!e||!e._isSigner)}}class Ka extends ci{constructor(e,t){super(),j(this,"address",e),j(this,"provider",t||null)}getAddress(){return Promise.resolve(this.address)}_fail(e,t){return Promise.resolve().then(()=>{Lr.throwError(e,F.errors.UNSUPPORTED_OPERATION,{operation:t})})}signMessage(e){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(e){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(e,t,r){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(e){return new Ka(this.address,e)}}var Al,nu,iu={},Et={};function Co(){if(nu)return Al;function n(e,t){if(!e)throw new Error(t||"Assertion failed")}return nu=1,Al=n,n.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)},Al}var su,ou,au,Lo={exports:{}},El={exports:{}};function Lm(){if(ou)return Lo.exports;ou=1;try{var n=require("util");if(typeof n.inherits!="function")throw"";Lo.exports=n.inherits}catch{Lo.exports=(su||(su=1,typeof Object.create=="function"?El.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:El.exports=function(t,r){if(r){t.super_=r;var i=function(){};i.prototype=r.prototype,t.prototype=new i,t.prototype.constructor=t}}),El.exports)}return Lo.exports}function kn(){if(au)return Et;au=1;var n=Co(),e=Lm();function t(o,a){return(64512&o.charCodeAt(a))==55296&&!(a<0||a+1>=o.length)&&(64512&o.charCodeAt(a+1))==56320}function r(o){return(o>>>24|o>>>8&65280|o<<8&16711680|(255&o)<<24)>>>0}function i(o){return o.length===1?"0"+o:o}function s(o){return o.length===7?"0"+o:o.length===6?"00"+o:o.length===5?"000"+o:o.length===4?"0000"+o:o.length===3?"00000"+o:o.length===2?"000000"+o:o.length===1?"0000000"+o:o}return Et.inherits=e,Et.toArray=function(o,a){if(Array.isArray(o))return o.slice();if(!o)return[];var l=[];if(typeof o=="string")if(a){if(a==="hex")for((o=o.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(o="0"+o),u=0;u<o.length;u+=2)l.push(parseInt(o[u]+o[u+1],16))}else for(var h=0,u=0;u<o.length;u++){var g=o.charCodeAt(u);g<128?l[h++]=g:g<2048?(l[h++]=g>>6|192,l[h++]=63&g|128):t(o,u)?(g=65536+((1023&g)<<10)+(1023&o.charCodeAt(++u)),l[h++]=g>>18|240,l[h++]=g>>12&63|128,l[h++]=g>>6&63|128,l[h++]=63&g|128):(l[h++]=g>>12|224,l[h++]=g>>6&63|128,l[h++]=63&g|128)}else for(u=0;u<o.length;u++)l[u]=0|o[u];return l},Et.toHex=function(o){for(var a="",l=0;l<o.length;l++)a+=i(o[l].toString(16));return a},Et.htonl=r,Et.toHex32=function(o,a){for(var l="",h=0;h<o.length;h++){var u=o[h];a==="little"&&(u=r(u)),l+=s(u.toString(16))}return l},Et.zero2=i,Et.zero8=s,Et.join32=function(o,a,l,h){var u=l-a;n(u%4==0);for(var g=new Array(u/4),x=0,A=a;x<g.length;x++,A+=4){var E;E=h==="big"?o[A]<<24|o[A+1]<<16|o[A+2]<<8|o[A+3]:o[A+3]<<24|o[A+2]<<16|o[A+1]<<8|o[A],g[x]=E>>>0}return g},Et.split32=function(o,a){for(var l=new Array(4*o.length),h=0,u=0;h<o.length;h++,u+=4){var g=o[h];a==="big"?(l[u]=g>>>24,l[u+1]=g>>>16&255,l[u+2]=g>>>8&255,l[u+3]=255&g):(l[u+3]=g>>>24,l[u+2]=g>>>16&255,l[u+1]=g>>>8&255,l[u]=255&g)}return l},Et.rotr32=function(o,a){return o>>>a|o<<32-a},Et.rotl32=function(o,a){return o<<a|o>>>32-a},Et.sum32=function(o,a){return o+a>>>0},Et.sum32_3=function(o,a,l){return o+a+l>>>0},Et.sum32_4=function(o,a,l,h){return o+a+l+h>>>0},Et.sum32_5=function(o,a,l,h,u){return o+a+l+h+u>>>0},Et.sum64=function(o,a,l,h){var u=o[a],g=h+o[a+1]>>>0,x=(g<h?1:0)+l+u;o[a]=x>>>0,o[a+1]=g},Et.sum64_hi=function(o,a,l,h){return(a+h>>>0<a?1:0)+o+l>>>0},Et.sum64_lo=function(o,a,l,h){return a+h>>>0},Et.sum64_4_hi=function(o,a,l,h,u,g,x,A){var E=0,I=a;return E+=(I=I+h>>>0)<a?1:0,E+=(I=I+g>>>0)<g?1:0,o+l+u+x+(E+=(I=I+A>>>0)<A?1:0)>>>0},Et.sum64_4_lo=function(o,a,l,h,u,g,x,A){return a+h+g+A>>>0},Et.sum64_5_hi=function(o,a,l,h,u,g,x,A,E,I){var T=0,R=a;return T+=(R=R+h>>>0)<a?1:0,T+=(R=R+g>>>0)<g?1:0,T+=(R=R+A>>>0)<A?1:0,o+l+u+x+E+(T+=(R=R+I>>>0)<I?1:0)>>>0},Et.sum64_5_lo=function(o,a,l,h,u,g,x,A,E,I){return a+h+g+A+I>>>0},Et.rotr64_hi=function(o,a,l){return(a<<32-l|o>>>l)>>>0},Et.rotr64_lo=function(o,a,l){return(o<<32-l|a>>>l)>>>0},Et.shr64_hi=function(o,a,l){return o>>>l},Et.shr64_lo=function(o,a,l){return(o<<32-l|a>>>l)>>>0},Et}var lu,xl={};function fo(){if(lu)return xl;lu=1;var n=kn(),e=Co();function t(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return xl.BlockHash=t,t.prototype.update=function(r,i){if(r=n.toArray(r,i),this.pending?this.pending=this.pending.concat(r):this.pending=r,this.pendingTotal+=r.length,this.pending.length>=this._delta8){var s=(r=this.pending).length%this._delta8;this.pending=r.slice(r.length-s,r.length),this.pending.length===0&&(this.pending=null),r=n.join32(r,0,r.length-s,this.endian);for(var o=0;o<r.length;o+=this._delta32)this._update(r,o,o+this._delta32)}return this},t.prototype.digest=function(r){return this.update(this._pad()),e(this.pending===null),this._digest(r)},t.prototype._pad=function(){var r=this.pendingTotal,i=this._delta8,s=i-(r+this.padLength)%i,o=new Array(s+this.padLength);o[0]=128;for(var a=1;a<s;a++)o[a]=0;if(r<<=3,this.endian==="big"){for(var l=8;l<this.padLength;l++)o[a++]=0;o[a++]=0,o[a++]=0,o[a++]=0,o[a++]=0,o[a++]=r>>>24&255,o[a++]=r>>>16&255,o[a++]=r>>>8&255,o[a++]=255&r}else for(o[a++]=255&r,o[a++]=r>>>8&255,o[a++]=r>>>16&255,o[a++]=r>>>24&255,o[a++]=0,o[a++]=0,o[a++]=0,o[a++]=0,l=8;l<this.padLength;l++)o[a++]=0;return o},xl}var cu,_l,hu,kl,uu,Sl,fu,Nl,du,Cl,pu,mu,Yi={},ln={};function s0(){if(cu)return ln;cu=1;var n=kn().rotr32;function e(i,s,o){return i&s^~i&o}function t(i,s,o){return i&s^i&o^s&o}function r(i,s,o){return i^s^o}return ln.ft_1=function(i,s,o,a){return i===0?e(s,o,a):i===1||i===3?r(s,o,a):i===2?t(s,o,a):void 0},ln.ch32=e,ln.maj32=t,ln.p32=r,ln.s0_256=function(i){return n(i,2)^n(i,13)^n(i,22)},ln.s1_256=function(i){return n(i,6)^n(i,11)^n(i,25)},ln.g0_256=function(i){return n(i,7)^n(i,18)^i>>>3},ln.g1_256=function(i){return n(i,17)^n(i,19)^i>>>10},ln}function gu(){if(uu)return kl;uu=1;var n=kn(),e=fo(),t=s0(),r=Co(),i=n.sum32,s=n.sum32_4,o=n.sum32_5,a=t.ch32,l=t.maj32,h=t.s0_256,u=t.s1_256,g=t.g0_256,x=t.g1_256,A=e.BlockHash,E=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function I(){if(!(this instanceof I))return new I;A.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=E,this.W=new Array(64)}return n.inherits(I,A),kl=I,I.blockSize=512,I.outSize=256,I.hmacStrength=192,I.padLength=64,I.prototype._update=function(T,R){for(var O=this.W,B=0;B<16;B++)O[B]=T[R+B];for(;B<O.length;B++)O[B]=s(x(O[B-2]),O[B-7],g(O[B-15]),O[B-16]);var U=this.h[0],q=this.h[1],W=this.h[2],Z=this.h[3],K=this.h[4],se=this.h[5],y=this.h[6],S=this.h[7];for(r(this.k.length===O.length),B=0;B<O.length;B++){var C=o(S,u(K),a(K,se,y),this.k[B],O[B]),p=i(h(U),l(U,q,W));S=y,y=se,se=K,K=i(Z,C),Z=W,W=q,q=U,U=i(C,p)}this.h[0]=i(this.h[0],U),this.h[1]=i(this.h[1],q),this.h[2]=i(this.h[2],W),this.h[3]=i(this.h[3],Z),this.h[4]=i(this.h[4],K),this.h[5]=i(this.h[5],se),this.h[6]=i(this.h[6],y),this.h[7]=i(this.h[7],S)},I.prototype._digest=function(T){return T==="hex"?n.toHex32(this.h,"big"):n.split32(this.h,"big")},kl}function yu(){if(du)return Nl;du=1;var n=kn(),e=fo(),t=Co(),r=n.rotr64_hi,i=n.rotr64_lo,s=n.shr64_hi,o=n.shr64_lo,a=n.sum64,l=n.sum64_hi,h=n.sum64_lo,u=n.sum64_4_hi,g=n.sum64_4_lo,x=n.sum64_5_hi,A=n.sum64_5_lo,E=e.BlockHash,I=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function T(){if(!(this instanceof T))return new T;E.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=I,this.W=new Array(160)}function R(p,c,d,f,N){var v=p&d^~p&N;return v<0&&(v+=4294967296),v}function O(p,c,d,f,N,v){var w=c&f^~c&v;return w<0&&(w+=4294967296),w}function B(p,c,d,f,N){var v=p&d^p&N^d&N;return v<0&&(v+=4294967296),v}function U(p,c,d,f,N,v){var w=c&f^c&v^f&v;return w<0&&(w+=4294967296),w}function q(p,c){var d=r(p,c,28)^r(c,p,2)^r(c,p,7);return d<0&&(d+=4294967296),d}function W(p,c){var d=i(p,c,28)^i(c,p,2)^i(c,p,7);return d<0&&(d+=4294967296),d}function Z(p,c){var d=r(p,c,14)^r(p,c,18)^r(c,p,9);return d<0&&(d+=4294967296),d}function K(p,c){var d=i(p,c,14)^i(p,c,18)^i(c,p,9);return d<0&&(d+=4294967296),d}function se(p,c){var d=r(p,c,1)^r(p,c,8)^s(p,c,7);return d<0&&(d+=4294967296),d}function y(p,c){var d=i(p,c,1)^i(p,c,8)^o(p,c,7);return d<0&&(d+=4294967296),d}function S(p,c){var d=r(p,c,19)^r(c,p,29)^s(p,c,6);return d<0&&(d+=4294967296),d}function C(p,c){var d=i(p,c,19)^i(c,p,29)^o(p,c,6);return d<0&&(d+=4294967296),d}return n.inherits(T,E),Nl=T,T.blockSize=1024,T.outSize=512,T.hmacStrength=192,T.padLength=128,T.prototype._prepareBlock=function(p,c){for(var d=this.W,f=0;f<32;f++)d[f]=p[c+f];for(;f<d.length;f+=2){var N=S(d[f-4],d[f-3]),v=C(d[f-4],d[f-3]),w=d[f-14],P=d[f-13],_=se(d[f-30],d[f-29]),m=y(d[f-30],d[f-29]),M=d[f-32],L=d[f-31];d[f]=u(N,v,w,P,_,m,M,L),d[f+1]=g(N,v,w,P,_,m,M,L)}},T.prototype._update=function(p,c){this._prepareBlock(p,c);var d=this.W,f=this.h[0],N=this.h[1],v=this.h[2],w=this.h[3],P=this.h[4],_=this.h[5],m=this.h[6],M=this.h[7],L=this.h[8],k=this.h[9],D=this.h[10],G=this.h[11],H=this.h[12],V=this.h[13],re=this.h[14],$=this.h[15];t(this.k.length===d.length);for(var ne=0;ne<d.length;ne+=2){var de=re,Q=$,he=Z(L,k),Re=K(L,k),pe=R(L,k,D,G,H),De=O(L,k,D,G,H,V),Le=this.k[ne],me=this.k[ne+1],Ue=d[ne],ze=d[ne+1],ue=x(de,Q,he,Re,pe,De,Le,me,Ue,ze),Be=A(de,Q,he,Re,pe,De,Le,me,Ue,ze);de=q(f,N),Q=W(f,N),he=B(f,N,v,w,P),Re=U(f,N,v,w,P,_);var qe=l(de,Q,he,Re),ge=h(de,Q,he,Re);re=H,$=V,H=D,V=G,D=L,G=k,L=l(m,M,ue,Be),k=h(M,M,ue,Be),m=P,M=_,P=v,_=w,v=f,w=N,f=l(ue,Be,qe,ge),N=h(ue,Be,qe,ge)}a(this.h,0,f,N),a(this.h,2,v,w),a(this.h,4,P,_),a(this.h,6,m,M),a(this.h,8,L,k),a(this.h,10,D,G),a(this.h,12,H,V),a(this.h,14,re,$)},T.prototype._digest=function(p){return p==="hex"?n.toHex32(this.h,"big"):n.split32(this.h,"big")},Nl}function Um(){return mu||(mu=1,Yi.sha1=function(){if(hu)return _l;hu=1;var n=kn(),e=fo(),t=s0(),r=n.rotl32,i=n.sum32,s=n.sum32_5,o=t.ft_1,a=e.BlockHash,l=[1518500249,1859775393,2400959708,3395469782];function h(){if(!(this instanceof h))return new h;a.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return n.inherits(h,a),_l=h,h.blockSize=512,h.outSize=160,h.hmacStrength=80,h.padLength=64,h.prototype._update=function(u,g){for(var x=this.W,A=0;A<16;A++)x[A]=u[g+A];for(;A<x.length;A++)x[A]=r(x[A-3]^x[A-8]^x[A-14]^x[A-16],1);var E=this.h[0],I=this.h[1],T=this.h[2],R=this.h[3],O=this.h[4];for(A=0;A<x.length;A++){var B=~~(A/20),U=s(r(E,5),o(B,I,T,R),O,x[A],l[B]);O=R,R=T,T=r(I,30),I=E,E=U}this.h[0]=i(this.h[0],E),this.h[1]=i(this.h[1],I),this.h[2]=i(this.h[2],T),this.h[3]=i(this.h[3],R),this.h[4]=i(this.h[4],O)},h.prototype._digest=function(u){return u==="hex"?n.toHex32(this.h,"big"):n.split32(this.h,"big")},_l}(),Yi.sha224=function(){if(fu)return Sl;fu=1;var n=kn(),e=gu();function t(){if(!(this instanceof t))return new t;e.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return n.inherits(t,e),Sl=t,t.blockSize=512,t.outSize=224,t.hmacStrength=192,t.padLength=64,t.prototype._digest=function(r){return r==="hex"?n.toHex32(this.h.slice(0,7),"big"):n.split32(this.h.slice(0,7),"big")},Sl}(),Yi.sha256=gu(),Yi.sha384=function(){if(pu)return Cl;pu=1;var n=kn(),e=yu();function t(){if(!(this instanceof t))return new t;e.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return n.inherits(t,e),Cl=t,t.blockSize=1024,t.outSize=384,t.hmacStrength=192,t.padLength=128,t.prototype._digest=function(r){return r==="hex"?n.toHex32(this.h.slice(0,12),"big"):n.split32(this.h.slice(0,12),"big")},Cl}(),Yi.sha512=yu()),Yi}var vu,Il,wu,bu,Pl={},zm=(bu||(bu=1,function(){var n=iu;n.utils=kn(),n.common=fo(),n.sha=Um(),n.ripemd=function(){if(vu)return Pl;vu=1;var e=kn(),t=fo(),r=e.rotl32,i=e.sum32,s=e.sum32_3,o=e.sum32_4,a=t.BlockHash;function l(){if(!(this instanceof l))return new l;a.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function h(T,R,O,B){return T<=15?R^O^B:T<=31?R&O|~R&B:T<=47?(R|~O)^B:T<=63?R&B|O&~B:R^(O|~B)}function u(T){return T<=15?0:T<=31?1518500249:T<=47?1859775393:T<=63?2400959708:2840853838}function g(T){return T<=15?1352829926:T<=31?1548603684:T<=47?1836072691:T<=63?2053994217:0}e.inherits(l,a),Pl.ripemd160=l,l.blockSize=512,l.outSize=160,l.hmacStrength=192,l.padLength=64,l.prototype._update=function(T,R){for(var O=this.h[0],B=this.h[1],U=this.h[2],q=this.h[3],W=this.h[4],Z=O,K=B,se=U,y=q,S=W,C=0;C<80;C++){var p=i(r(o(O,h(C,B,U,q),T[x[C]+R],u(C)),E[C]),W);O=W,W=q,q=r(U,10),U=B,B=p,p=i(r(o(Z,h(79-C,K,se,y),T[A[C]+R],g(C)),I[C]),S),Z=S,S=y,y=r(se,10),se=K,K=p}p=s(this.h[1],U,y),this.h[1]=s(this.h[2],q,S),this.h[2]=s(this.h[3],W,Z),this.h[3]=s(this.h[4],O,K),this.h[4]=s(this.h[0],B,se),this.h[0]=p},l.prototype._digest=function(T){return T==="hex"?e.toHex32(this.h,"little"):e.split32(this.h,"little")};var x=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],A=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],E=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],I=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return Pl}(),n.hmac=function(){if(wu)return Il;wu=1;var e=kn(),t=Co();function r(i,s,o){if(!(this instanceof r))return new r(i,s,o);this.Hash=i,this.blockSize=i.blockSize/8,this.outSize=i.outSize/8,this.inner=null,this.outer=null,this._init(e.toArray(s,o))}return Il=r,r.prototype._init=function(i){i.length>this.blockSize&&(i=new this.Hash().update(i).digest()),t(i.length<=this.blockSize);for(var s=i.length;s<this.blockSize;s++)i.push(0);for(s=0;s<i.length;s++)i[s]^=54;for(this.inner=new this.Hash().update(i),s=0;s<i.length;s++)i[s]^=106;this.outer=new this.Hash().update(i)},r.prototype.update=function(i,s){return this.inner.update(i,s),this},r.prototype.digest=function(i){return this.outer.update(this.inner.digest()),this.outer.digest(i)},Il}(),n.sha1=n.sha.sha1,n.sha256=n.sha.sha256,n.sha224=n.sha.sha224,n.sha384=n.sha.sha384,n.sha512=n.sha.sha512,n.ripemd160=n.ripemd.ripemd160}()),iu),wr=ks(zm);function Ss(n,e,t){return t={path:e,exports:{},require:function(r,i){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(i==null&&t.path)}},n(t,t.exports),t.exports}var Zc=o0;function o0(n,e){if(!n)throw new Error(e||"Assertion failed")}o0.equal=function(n,e,t){if(n!=e)throw new Error(t||"Assertion failed: "+n+" != "+e)};var sn=Ss(function(n,e){var t=e;function r(s){return s.length===1?"0"+s:s}function i(s){for(var o="",a=0;a<s.length;a++)o+=r(s[a].toString(16));return o}t.toArray=function(s,o){if(Array.isArray(s))return s.slice();if(!s)return[];var a=[];if(typeof s!="string"){for(var l=0;l<s.length;l++)a[l]=0|s[l];return a}if(o==="hex")for((s=s.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(s="0"+s),l=0;l<s.length;l+=2)a.push(parseInt(s[l]+s[l+1],16));else for(l=0;l<s.length;l++){var h=s.charCodeAt(l),u=h>>8,g=255&h;u?a.push(u,g):a.push(g)}return a},t.zero2=r,t.toHex=i,t.encode=function(s,o){return o==="hex"?i(s):s}}),Cr=Ss(function(n,e){var t=e;t.assert=Zc,t.toArray=sn.toArray,t.zero2=sn.zero2,t.toHex=sn.toHex,t.encode=sn.encode,t.getNAF=function(r,i,s){var o,a=new Array(Math.max(r.bitLength(),s)+1);for(o=0;o<a.length;o+=1)a[o]=0;var l=1<<i+1,h=r.clone();for(o=0;o<a.length;o++){var u,g=h.andln(l-1);h.isOdd()?(u=g>(l>>1)-1?(l>>1)-g:g,h.isubn(u)):u=0,a[o]=u,h.iushrn(1)}return a},t.getJSF=function(r,i){var s=[[],[]];r=r.clone(),i=i.clone();for(var o,a=0,l=0;r.cmpn(-a)>0||i.cmpn(-l)>0;){var h,u,g=r.andln(3)+a&3,x=i.andln(3)+l&3;g===3&&(g=-1),x===3&&(x=-1),h=1&g?(o=r.andln(7)+a&7)!==3&&o!==5||x!==2?g:-g:0,s[0].push(h),u=1&x?(o=i.andln(7)+l&7)!==3&&o!==5||g!==2?x:-x:0,s[1].push(u),2*a===h+1&&(a=1-a),2*l===u+1&&(l=1-l),r.iushrn(1),i.iushrn(1)}return s},t.cachedProperty=function(r,i,s){var o="_"+i;r.prototype[i]=function(){return this[o]!==void 0?this[o]:this[o]=s.call(this)}},t.parseBytes=function(r){return typeof r=="string"?t.toArray(r,"hex"):r},t.intFromLE=function(r){return new Ce(r,"hex","le")}}),Uo=Cr.getNAF,qm=Cr.getJSF,zo=Cr.assert;function ei(n,e){this.type=n,this.p=new Ce(e.p,16),this.red=e.prime?Ce.red(e.prime):Ce.mont(this.p),this.zero=new Ce(0).toRed(this.red),this.one=new Ce(1).toRed(this.red),this.two=new Ce(2).toRed(this.red),this.n=e.n&&new Ce(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var t=this.n&&this.p.div(this.n);!t||t.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Di=ei;function Fr(n,e){this.curve=n,this.type=e,this.precomputed=null}ei.prototype.point=function(){throw new Error("Not implemented")},ei.prototype.validate=function(){throw new Error("Not implemented")},ei.prototype._fixedNafMul=function(n,e){zo(n.precomputed);var t=n._getDoubles(),r=Uo(e,1,this._bitLength),i=(1<<t.step+1)-(t.step%2==0?2:1);i/=3;var s,o,a=[];for(s=0;s<r.length;s+=t.step){o=0;for(var l=s+t.step-1;l>=s;l--)o=(o<<1)+r[l];a.push(o)}for(var h=this.jpoint(null,null,null),u=this.jpoint(null,null,null),g=i;g>0;g--){for(s=0;s<a.length;s++)(o=a[s])===g?u=u.mixedAdd(t.points[s]):o===-g&&(u=u.mixedAdd(t.points[s].neg()));h=h.add(u)}return h.toP()},ei.prototype._wnafMul=function(n,e){var t=4,r=n._getNAFPoints(t);t=r.wnd;for(var i=r.points,s=Uo(e,t,this._bitLength),o=this.jpoint(null,null,null),a=s.length-1;a>=0;a--){for(var l=0;a>=0&&s[a]===0;a--)l++;if(a>=0&&l++,o=o.dblp(l),a<0)break;var h=s[a];zo(h!==0),o=n.type==="affine"?h>0?o.mixedAdd(i[h-1>>1]):o.mixedAdd(i[-h-1>>1].neg()):h>0?o.add(i[h-1>>1]):o.add(i[-h-1>>1].neg())}return n.type==="affine"?o.toP():o},ei.prototype._wnafMulAdd=function(n,e,t,r,i){var s,o,a,l=this._wnafT1,h=this._wnafT2,u=this._wnafT3,g=0;for(s=0;s<r;s++){var x=(a=e[s])._getNAFPoints(n);l[s]=x.wnd,h[s]=x.points}for(s=r-1;s>=1;s-=2){var A=s-1,E=s;if(l[A]===1&&l[E]===1){var I=[e[A],null,null,e[E]];e[A].y.cmp(e[E].y)===0?(I[1]=e[A].add(e[E]),I[2]=e[A].toJ().mixedAdd(e[E].neg())):e[A].y.cmp(e[E].y.redNeg())===0?(I[1]=e[A].toJ().mixedAdd(e[E]),I[2]=e[A].add(e[E].neg())):(I[1]=e[A].toJ().mixedAdd(e[E]),I[2]=e[A].toJ().mixedAdd(e[E].neg()));var T=[-3,-1,-5,-7,0,7,5,1,3],R=qm(t[A],t[E]);for(g=Math.max(R[0].length,g),u[A]=new Array(g),u[E]=new Array(g),o=0;o<g;o++){var O=0|R[0][o],B=0|R[1][o];u[A][o]=T[3*(O+1)+(B+1)],u[E][o]=0,h[A]=I}}else u[A]=Uo(t[A],l[A],this._bitLength),u[E]=Uo(t[E],l[E],this._bitLength),g=Math.max(u[A].length,g),g=Math.max(u[E].length,g)}var U=this.jpoint(null,null,null),q=this._wnafT4;for(s=g;s>=0;s--){for(var W=0;s>=0;){var Z=!0;for(o=0;o<r;o++)q[o]=0|u[o][s],q[o]!==0&&(Z=!1);if(!Z)break;W++,s--}if(s>=0&&W++,U=U.dblp(W),s<0)break;for(o=0;o<r;o++){var K=q[o];K!==0&&(K>0?a=h[o][K-1>>1]:K<0&&(a=h[o][-K-1>>1].neg()),U=a.type==="affine"?U.mixedAdd(a):U.add(a))}}for(s=0;s<r;s++)h[s]=null;return i?U:U.toP()},ei.BasePoint=Fr,Fr.prototype.eq=function(){throw new Error("Not implemented")},Fr.prototype.validate=function(){return this.curve.validate(this)},ei.prototype.decodePoint=function(n,e){n=Cr.toArray(n,e);var t=this.p.byteLength();if((n[0]===4||n[0]===6||n[0]===7)&&n.length-1==2*t)return n[0]===6?zo(n[n.length-1]%2==0):n[0]===7&&zo(n[n.length-1]%2==1),this.point(n.slice(1,1+t),n.slice(1+t,1+2*t));if((n[0]===2||n[0]===3)&&n.length-1===t)return this.pointFromX(n.slice(1,1+t),n[0]===3);throw new Error("Unknown point format")},Fr.prototype.encodeCompressed=function(n){return this.encode(n,!0)},Fr.prototype._encode=function(n){var e=this.curve.p.byteLength(),t=this.getX().toArray("be",e);return n?[this.getY().isEven()?2:3].concat(t):[4].concat(t,this.getY().toArray("be",e))},Fr.prototype.encode=function(n,e){return Cr.encode(this._encode(e),n)},Fr.prototype.precompute=function(n){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,n),e.beta=this._getBeta(),this.precomputed=e,this},Fr.prototype._hasDoubles=function(n){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((n.bitLength()+1)/e.step)},Fr.prototype._getDoubles=function(n,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var t=[this],r=this,i=0;i<e;i+=n){for(var s=0;s<n;s++)r=r.dbl();t.push(r)}return{step:n,points:t}},Fr.prototype._getNAFPoints=function(n){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],t=(1<<n)-1,r=t===1?null:this.dbl(),i=1;i<t;i++)e[i]=e[i-1].add(r);return{wnd:n,points:e}},Fr.prototype._getBeta=function(){return null},Fr.prototype.dblp=function(n){for(var e=this,t=0;t<n;t++)e=e.dbl();return e};var wc=Ss(function(n){typeof Object.create=="function"?n.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:n.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}}),Gm=Cr.assert;function zr(n){Di.call(this,"short",n),this.a=new Ce(n.a,16).toRed(this.red),this.b=new Ce(n.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(n),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}wc(zr,Di);var Hm=zr;function Vt(n,e,t,r){Di.BasePoint.call(this,n,"affine"),e===null&&t===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new Ce(e,16),this.y=new Ce(t,16),r&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function Yt(n,e,t,r){Di.BasePoint.call(this,n,"jacobian"),e===null&&t===null&&r===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Ce(0)):(this.x=new Ce(e,16),this.y=new Ce(t,16),this.z=new Ce(r,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}zr.prototype._getEndomorphism=function(n){if(this.zeroA&&this.g&&this.n&&this.p.modn(3)===1){var e,t;if(n.beta)e=new Ce(n.beta,16).toRed(this.red);else{var r=this._getEndoRoots(this.p);e=(e=r[0].cmp(r[1])<0?r[0]:r[1]).toRed(this.red)}if(n.lambda)t=new Ce(n.lambda,16);else{var i=this._getEndoRoots(this.n);this.g.mul(i[0]).x.cmp(this.g.x.redMul(e))===0?t=i[0]:(t=i[1],Gm(this.g.mul(t).x.cmp(this.g.x.redMul(e))===0))}return{beta:e,lambda:t,basis:n.basis?n.basis.map(function(s){return{a:new Ce(s.a,16),b:new Ce(s.b,16)}}):this._getEndoBasis(t)}}},zr.prototype._getEndoRoots=function(n){var e=n===this.p?this.red:Ce.mont(n),t=new Ce(2).toRed(e).redInvm(),r=t.redNeg(),i=new Ce(3).toRed(e).redNeg().redSqrt().redMul(t);return[r.redAdd(i).fromRed(),r.redSub(i).fromRed()]},zr.prototype._getEndoBasis=function(n){for(var e,t,r,i,s,o,a,l,h,u=this.n.ushrn(Math.floor(this.n.bitLength()/2)),g=n,x=this.n.clone(),A=new Ce(1),E=new Ce(0),I=new Ce(0),T=new Ce(1),R=0;g.cmpn(0)!==0;){var O=x.div(g);l=x.sub(O.mul(g)),h=I.sub(O.mul(A));var B=T.sub(O.mul(E));if(!r&&l.cmp(u)<0)e=a.neg(),t=A,r=l.neg(),i=h;else if(r&&++R===2)break;a=l,x=g,g=l,I=A,A=h,T=E,E=B}s=l.neg(),o=h;var U=r.sqr().add(i.sqr());return s.sqr().add(o.sqr()).cmp(U)>=0&&(s=e,o=t),r.negative&&(r=r.neg(),i=i.neg()),s.negative&&(s=s.neg(),o=o.neg()),[{a:r,b:i},{a:s,b:o}]},zr.prototype._endoSplit=function(n){var e=this.endo.basis,t=e[0],r=e[1],i=r.b.mul(n).divRound(this.n),s=t.b.neg().mul(n).divRound(this.n),o=i.mul(t.a),a=s.mul(r.a),l=i.mul(t.b),h=s.mul(r.b);return{k1:n.sub(o).sub(a),k2:l.add(h).neg()}},zr.prototype.pointFromX=function(n,e){(n=new Ce(n,16)).red||(n=n.toRed(this.red));var t=n.redSqr().redMul(n).redIAdd(n.redMul(this.a)).redIAdd(this.b),r=t.redSqrt();if(r.redSqr().redSub(t).cmp(this.zero)!==0)throw new Error("invalid point");var i=r.fromRed().isOdd();return(e&&!i||!e&&i)&&(r=r.redNeg()),this.point(n,r)},zr.prototype.validate=function(n){if(n.inf)return!0;var e=n.x,t=n.y,r=this.a.redMul(e),i=e.redSqr().redMul(e).redIAdd(r).redIAdd(this.b);return t.redSqr().redISub(i).cmpn(0)===0},zr.prototype._endoWnafMulAdd=function(n,e,t){for(var r=this._endoWnafT1,i=this._endoWnafT2,s=0;s<n.length;s++){var o=this._endoSplit(e[s]),a=n[s],l=a._getBeta();o.k1.negative&&(o.k1.ineg(),a=a.neg(!0)),o.k2.negative&&(o.k2.ineg(),l=l.neg(!0)),r[2*s]=a,r[2*s+1]=l,i[2*s]=o.k1,i[2*s+1]=o.k2}for(var h=this._wnafMulAdd(1,r,i,2*s,t),u=0;u<2*s;u++)r[u]=null,i[u]=null;return h},wc(Vt,Di.BasePoint),zr.prototype.point=function(n,e,t){return new Vt(this,n,e,t)},zr.prototype.pointFromJSON=function(n,e){return Vt.fromJSON(this,n,e)},Vt.prototype._getBeta=function(){if(this.curve.endo){var n=this.precomputed;if(n&&n.beta)return n.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(n){var t=this.curve,r=function(i){return t.point(i.x.redMul(t.endo.beta),i.y)};n.beta=e,e.precomputed={beta:null,naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(r)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(r)}}}return e}},Vt.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},Vt.fromJSON=function(n,e,t){typeof e=="string"&&(e=JSON.parse(e));var r=n.point(e[0],e[1],t);if(!e[2])return r;function i(o){return n.point(o[0],o[1],t)}var s=e[2];return r.precomputed={beta:null,doubles:s.doubles&&{step:s.doubles.step,points:[r].concat(s.doubles.points.map(i))},naf:s.naf&&{wnd:s.naf.wnd,points:[r].concat(s.naf.points.map(i))}},r},Vt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},Vt.prototype.isInfinity=function(){return this.inf},Vt.prototype.add=function(n){if(this.inf)return n;if(n.inf)return this;if(this.eq(n))return this.dbl();if(this.neg().eq(n))return this.curve.point(null,null);if(this.x.cmp(n.x)===0)return this.curve.point(null,null);var e=this.y.redSub(n.y);e.cmpn(0)!==0&&(e=e.redMul(this.x.redSub(n.x).redInvm()));var t=e.redSqr().redISub(this.x).redISub(n.x),r=e.redMul(this.x.redSub(t)).redISub(this.y);return this.curve.point(t,r)},Vt.prototype.dbl=function(){if(this.inf)return this;var n=this.y.redAdd(this.y);if(n.cmpn(0)===0)return this.curve.point(null,null);var e=this.curve.a,t=this.x.redSqr(),r=n.redInvm(),i=t.redAdd(t).redIAdd(t).redIAdd(e).redMul(r),s=i.redSqr().redISub(this.x.redAdd(this.x)),o=i.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,o)},Vt.prototype.getX=function(){return this.x.fromRed()},Vt.prototype.getY=function(){return this.y.fromRed()},Vt.prototype.mul=function(n){return n=new Ce(n,16),this.isInfinity()?this:this._hasDoubles(n)?this.curve._fixedNafMul(this,n):this.curve.endo?this.curve._endoWnafMulAdd([this],[n]):this.curve._wnafMul(this,n)},Vt.prototype.mulAdd=function(n,e,t){var r=[this,e],i=[n,t];return this.curve.endo?this.curve._endoWnafMulAdd(r,i):this.curve._wnafMulAdd(1,r,i,2)},Vt.prototype.jmulAdd=function(n,e,t){var r=[this,e],i=[n,t];return this.curve.endo?this.curve._endoWnafMulAdd(r,i,!0):this.curve._wnafMulAdd(1,r,i,2,!0)},Vt.prototype.eq=function(n){return this===n||this.inf===n.inf&&(this.inf||this.x.cmp(n.x)===0&&this.y.cmp(n.y)===0)},Vt.prototype.neg=function(n){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(n&&this.precomputed){var t=this.precomputed,r=function(i){return i.neg()};e.precomputed={naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(r)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(r)}}}return e},Vt.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},wc(Yt,Di.BasePoint),zr.prototype.jpoint=function(n,e,t){return new Yt(this,n,e,t)},Yt.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var n=this.z.redInvm(),e=n.redSqr(),t=this.x.redMul(e),r=this.y.redMul(e).redMul(n);return this.curve.point(t,r)},Yt.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},Yt.prototype.add=function(n){if(this.isInfinity())return n;if(n.isInfinity())return this;var e=n.z.redSqr(),t=this.z.redSqr(),r=this.x.redMul(e),i=n.x.redMul(t),s=this.y.redMul(e.redMul(n.z)),o=n.y.redMul(t.redMul(this.z)),a=r.redSub(i),l=s.redSub(o);if(a.cmpn(0)===0)return l.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var h=a.redSqr(),u=h.redMul(a),g=r.redMul(h),x=l.redSqr().redIAdd(u).redISub(g).redISub(g),A=l.redMul(g.redISub(x)).redISub(s.redMul(u)),E=this.z.redMul(n.z).redMul(a);return this.curve.jpoint(x,A,E)},Yt.prototype.mixedAdd=function(n){if(this.isInfinity())return n.toJ();if(n.isInfinity())return this;var e=this.z.redSqr(),t=this.x,r=n.x.redMul(e),i=this.y,s=n.y.redMul(e).redMul(this.z),o=t.redSub(r),a=i.redSub(s);if(o.cmpn(0)===0)return a.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var l=o.redSqr(),h=l.redMul(o),u=t.redMul(l),g=a.redSqr().redIAdd(h).redISub(u).redISub(u),x=a.redMul(u.redISub(g)).redISub(i.redMul(h)),A=this.z.redMul(o);return this.curve.jpoint(g,x,A)},Yt.prototype.dblp=function(n){if(n===0)return this;if(this.isInfinity())return this;if(!n)return this.dbl();var e;if(this.curve.zeroA||this.curve.threeA){var t=this;for(e=0;e<n;e++)t=t.dbl();return t}var r=this.curve.a,i=this.curve.tinv,s=this.x,o=this.y,a=this.z,l=a.redSqr().redSqr(),h=o.redAdd(o);for(e=0;e<n;e++){var u=s.redSqr(),g=h.redSqr(),x=g.redSqr(),A=u.redAdd(u).redIAdd(u).redIAdd(r.redMul(l)),E=s.redMul(g),I=A.redSqr().redISub(E.redAdd(E)),T=E.redISub(I),R=A.redMul(T);R=R.redIAdd(R).redISub(x);var O=h.redMul(a);e+1<n&&(l=l.redMul(x)),s=I,a=O,h=R}return this.curve.jpoint(s,h.redMul(i),a)},Yt.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},Yt.prototype._zeroDbl=function(){var n,e,t;if(this.zOne){var r=this.x.redSqr(),i=this.y.redSqr(),s=i.redSqr(),o=this.x.redAdd(i).redSqr().redISub(r).redISub(s);o=o.redIAdd(o);var a=r.redAdd(r).redIAdd(r),l=a.redSqr().redISub(o).redISub(o),h=s.redIAdd(s);h=(h=h.redIAdd(h)).redIAdd(h),n=l,e=a.redMul(o.redISub(l)).redISub(h),t=this.y.redAdd(this.y)}else{var u=this.x.redSqr(),g=this.y.redSqr(),x=g.redSqr(),A=this.x.redAdd(g).redSqr().redISub(u).redISub(x);A=A.redIAdd(A);var E=u.redAdd(u).redIAdd(u),I=E.redSqr(),T=x.redIAdd(x);T=(T=T.redIAdd(T)).redIAdd(T),n=I.redISub(A).redISub(A),e=E.redMul(A.redISub(n)).redISub(T),t=(t=this.y.redMul(this.z)).redIAdd(t)}return this.curve.jpoint(n,e,t)},Yt.prototype._threeDbl=function(){var n,e,t;if(this.zOne){var r=this.x.redSqr(),i=this.y.redSqr(),s=i.redSqr(),o=this.x.redAdd(i).redSqr().redISub(r).redISub(s);o=o.redIAdd(o);var a=r.redAdd(r).redIAdd(r).redIAdd(this.curve.a),l=a.redSqr().redISub(o).redISub(o);n=l;var h=s.redIAdd(s);h=(h=h.redIAdd(h)).redIAdd(h),e=a.redMul(o.redISub(l)).redISub(h),t=this.y.redAdd(this.y)}else{var u=this.z.redSqr(),g=this.y.redSqr(),x=this.x.redMul(g),A=this.x.redSub(u).redMul(this.x.redAdd(u));A=A.redAdd(A).redIAdd(A);var E=x.redIAdd(x),I=(E=E.redIAdd(E)).redAdd(E);n=A.redSqr().redISub(I),t=this.y.redAdd(this.z).redSqr().redISub(g).redISub(u);var T=g.redSqr();T=(T=(T=T.redIAdd(T)).redIAdd(T)).redIAdd(T),e=A.redMul(E.redISub(n)).redISub(T)}return this.curve.jpoint(n,e,t)},Yt.prototype._dbl=function(){var n=this.curve.a,e=this.x,t=this.y,r=this.z,i=r.redSqr().redSqr(),s=e.redSqr(),o=t.redSqr(),a=s.redAdd(s).redIAdd(s).redIAdd(n.redMul(i)),l=e.redAdd(e),h=(l=l.redIAdd(l)).redMul(o),u=a.redSqr().redISub(h.redAdd(h)),g=h.redISub(u),x=o.redSqr();x=(x=(x=x.redIAdd(x)).redIAdd(x)).redIAdd(x);var A=a.redMul(g).redISub(x),E=t.redAdd(t).redMul(r);return this.curve.jpoint(u,A,E)},Yt.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var n=this.x.redSqr(),e=this.y.redSqr(),t=this.z.redSqr(),r=e.redSqr(),i=n.redAdd(n).redIAdd(n),s=i.redSqr(),o=this.x.redAdd(e).redSqr().redISub(n).redISub(r),a=(o=(o=(o=o.redIAdd(o)).redAdd(o).redIAdd(o)).redISub(s)).redSqr(),l=r.redIAdd(r);l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l);var h=i.redIAdd(o).redSqr().redISub(s).redISub(a).redISub(l),u=e.redMul(h);u=(u=u.redIAdd(u)).redIAdd(u);var g=this.x.redMul(a).redISub(u);g=(g=g.redIAdd(g)).redIAdd(g);var x=this.y.redMul(h.redMul(l.redISub(h)).redISub(o.redMul(a)));x=(x=(x=x.redIAdd(x)).redIAdd(x)).redIAdd(x);var A=this.z.redAdd(o).redSqr().redISub(t).redISub(a);return this.curve.jpoint(g,x,A)},Yt.prototype.mul=function(n,e){return n=new Ce(n,e),this.curve._wnafMul(this,n)},Yt.prototype.eq=function(n){if(n.type==="affine")return this.eq(n.toJ());if(this===n)return!0;var e=this.z.redSqr(),t=n.z.redSqr();if(this.x.redMul(t).redISub(n.x.redMul(e)).cmpn(0)!==0)return!1;var r=e.redMul(this.z),i=t.redMul(n.z);return this.y.redMul(i).redISub(n.y.redMul(r)).cmpn(0)===0},Yt.prototype.eqXToP=function(n){var e=this.z.redSqr(),t=n.toRed(this.curve.red).redMul(e);if(this.x.cmp(t)===0)return!0;for(var r=n.clone(),i=this.curve.redN.redMul(e);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(i),this.x.cmp(t)===0)return!0}},Yt.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},Yt.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var oa=Ss(function(n,e){var t=e;t.base=Di,t.short=Hm,t.mont=null,t.edwards=null}),aa=Ss(function(n,e){var t,r=e,i=Cr.assert;function s(a){a.type==="short"?this.curve=new oa.short(a):a.type==="edwards"?this.curve=new oa.edwards(a):this.curve=new oa.mont(a),this.g=this.curve.g,this.n=this.curve.n,this.hash=a.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function o(a,l){Object.defineProperty(r,a,{configurable:!0,enumerable:!0,get:function(){var h=new s(l);return Object.defineProperty(r,a,{configurable:!0,enumerable:!0,value:h}),h}})}r.PresetCurve=s,o("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:wr.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),o("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:wr.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),o("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:wr.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),o("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:wr.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),o("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:wr.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),o("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:wr.sha256,gRed:!1,g:["9"]}),o("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:wr.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{t=null.crash()}catch{t=void 0}o("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:wr.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",t]})});function ti(n){if(!(this instanceof ti))return new ti(n);this.hash=n.hash,this.predResist=!!n.predResist,this.outLen=this.hash.outSize,this.minEntropy=n.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=sn.toArray(n.entropy,n.entropyEnc||"hex"),t=sn.toArray(n.nonce,n.nonceEnc||"hex"),r=sn.toArray(n.pers,n.persEnc||"hex");Zc(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,t,r)}var Au=ti;ti.prototype._init=function(n,e,t){var r=n.concat(e).concat(t);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(r),this._reseed=1,this.reseedInterval=281474976710656},ti.prototype._hmac=function(){return new wr.hmac(this.hash,this.K)},ti.prototype._update=function(n){var e=this._hmac().update(this.V).update([0]);n&&(e=e.update(n)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),n&&(this.K=this._hmac().update(this.V).update([1]).update(n).digest(),this.V=this._hmac().update(this.V).digest())},ti.prototype.reseed=function(n,e,t,r){typeof e!="string"&&(r=t,t=e,e=null),n=sn.toArray(n,e),t=sn.toArray(t,r),Zc(n.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(n.concat(t||[])),this._reseed=1},ti.prototype.generate=function(n,e,t,r){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof e!="string"&&(r=t,t=e,e=null),t&&(t=sn.toArray(t,r||"hex"),this._update(t));for(var i=[];i.length<n;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var s=i.slice(0,n);return this._update(t),this._reseed++,sn.encode(s,e)};var Ml=Cr.assert;function sr(n,e){this.ec=n,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var Tl=sr;sr.fromPublic=function(n,e,t){return e instanceof sr?e:new sr(n,{pub:e,pubEnc:t})},sr.fromPrivate=function(n,e,t){return e instanceof sr?e:new sr(n,{priv:e,privEnc:t})},sr.prototype.validate=function(){var n=this.getPublic();return n.isInfinity()?{result:!1,reason:"Invalid public key"}:n.validate()?n.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},sr.prototype.getPublic=function(n,e){return typeof n=="string"&&(e=n,n=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,n):this.pub},sr.prototype.getPrivate=function(n){return n==="hex"?this.priv.toString(16,2):this.priv},sr.prototype._importPrivate=function(n,e){this.priv=new Ce(n,e||16),this.priv=this.priv.umod(this.ec.curve.n)},sr.prototype._importPublic=function(n,e){if(n.x||n.y)return this.ec.curve.type==="mont"?Ml(n.x,"Need x coordinate"):this.ec.curve.type!=="short"&&this.ec.curve.type!=="edwards"||Ml(n.x&&n.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(n.x,n.y));this.pub=this.ec.curve.decodePoint(n,e)},sr.prototype.derive=function(n){return n.validate()||Ml(n.validate(),"public point not validated"),n.mul(this.priv).getX()},sr.prototype.sign=function(n,e,t){return this.ec.sign(n,this,e,t)},sr.prototype.verify=function(n,e,t){return this.ec.verify(n,e,this,void 0,t)},sr.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var jm=Cr.assert;function Ca(n,e){if(n instanceof Ca)return n;this._importDER(n,e)||(jm(n.r&&n.s,"Signature without r or s"),this.r=new Ce(n.r,16),this.s=new Ce(n.s,16),n.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=n.recoveryParam)}var qo=Ca;function Wm(){this.place=0}function Rl(n,e){var t=n[e.place++];if(!(128&t))return t;var r=15&t;if(r===0||r>4||n[e.place]===0)return!1;for(var i=0,s=0,o=e.place;s<r;s++,o++)i<<=8,i|=n[o],i>>>=0;return!(i<=127)&&(e.place=o,i)}function Eu(n){for(var e=0,t=n.length-1;!n[e]&&!(128&n[e+1])&&e<t;)e++;return e===0?n:n.slice(e)}function Bl(n,e){if(e<128)n.push(e);else{var t=1+(Math.log(e)/Math.LN2>>>3);for(n.push(128|t);--t;)n.push(e>>>(t<<3)&255);n.push(e)}}Ca.prototype._importDER=function(n,e){n=Cr.toArray(n,e);var t=new Wm;if(n[t.place++]!==48)return!1;var r=Rl(n,t);if(r===!1||r+t.place!==n.length||n[t.place++]!==2)return!1;var i=Rl(n,t);if(i===!1||128&n[t.place])return!1;var s=n.slice(t.place,i+t.place);if(t.place+=i,n[t.place++]!==2)return!1;var o=Rl(n,t);if(o===!1||n.length!==o+t.place||128&n[t.place])return!1;var a=n.slice(t.place,o+t.place);if(s[0]===0){if(!(128&s[1]))return!1;s=s.slice(1)}if(a[0]===0){if(!(128&a[1]))return!1;a=a.slice(1)}return this.r=new Ce(s),this.s=new Ce(a),this.recoveryParam=null,!0},Ca.prototype.toDER=function(n){var e=this.r.toArray(),t=this.s.toArray();for(128&e[0]&&(e=[0].concat(e)),128&t[0]&&(t=[0].concat(t)),e=Eu(e),t=Eu(t);!(t[0]||128&t[1]);)t=t.slice(1);var r=[2];Bl(r,e.length),(r=r.concat(e)).push(2),Bl(r,t.length);var i=r.concat(t),s=[48];return Bl(s,i.length),s=s.concat(i),Cr.encode(s,n)};var Km=function(){throw new Error("unsupported")},_i=Cr.assert;function qr(n){if(!(this instanceof qr))return new qr(n);typeof n=="string"&&(_i(Object.prototype.hasOwnProperty.call(aa,n),"Unknown curve "+n),n=aa[n]),n instanceof aa.PresetCurve&&(n={curve:n}),this.curve=n.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=n.curve.g,this.g.precompute(n.curve.n.bitLength()+1),this.hash=n.hash||n.curve.hash}var Vm=qr;qr.prototype.keyPair=function(n){return new Tl(this,n)},qr.prototype.keyFromPrivate=function(n,e){return Tl.fromPrivate(this,n,e)},qr.prototype.keyFromPublic=function(n,e){return Tl.fromPublic(this,n,e)},qr.prototype.genKeyPair=function(n){n||(n={});for(var e=new Au({hash:this.hash,pers:n.pers,persEnc:n.persEnc||"utf8",entropy:n.entropy||Km(this.hash.hmacStrength),entropyEnc:n.entropy&&n.entropyEnc||"utf8",nonce:this.n.toArray()}),t=this.n.byteLength(),r=this.n.sub(new Ce(2));;){var i=new Ce(e.generate(t));if(!(i.cmp(r)>0))return i.iaddn(1),this.keyFromPrivate(i)}},qr.prototype._truncateToN=function(n,e,t){var r;if(Ce.isBN(n)||typeof n=="number")r=(n=new Ce(n,16)).byteLength();else if(typeof n=="object")r=n.length,n=new Ce(n,16);else{var i=n.toString();r=i.length+1>>>1,n=new Ce(i,16)}typeof t!="number"&&(t=8*r);var s=t-this.n.bitLength();return s>0&&(n=n.ushrn(s)),!e&&n.cmp(this.n)>=0?n.sub(this.n):n},qr.prototype.sign=function(n,e,t,r){if(typeof t=="object"&&(r=t,t=null),r||(r={}),typeof n!="string"&&typeof n!="number"&&!Ce.isBN(n)){_i(typeof n=="object"&&n&&typeof n.length=="number","Expected message to be an array-like, a hex string, or a BN instance"),_i(n.length>>>0===n.length);for(var i=0;i<n.length;i++)_i((255&n[i])===n[i])}e=this.keyFromPrivate(e,t),n=this._truncateToN(n,!1,r.msgBitLength),_i(!n.isNeg(),"Can not sign a negative message");var s=this.n.byteLength(),o=e.getPrivate().toArray("be",s),a=n.toArray("be",s);_i(new Ce(a).eq(n),"Can not sign message");for(var l=new Au({hash:this.hash,entropy:o,nonce:a,pers:r.pers,persEnc:r.persEnc||"utf8"}),h=this.n.sub(new Ce(1)),u=0;;u++){var g=r.k?r.k(u):new Ce(l.generate(this.n.byteLength()));if(!((g=this._truncateToN(g,!0)).cmpn(1)<=0||g.cmp(h)>=0)){var x=this.g.mul(g);if(!x.isInfinity()){var A=x.getX(),E=A.umod(this.n);if(E.cmpn(0)!==0){var I=g.invm(this.n).mul(E.mul(e.getPrivate()).iadd(n));if((I=I.umod(this.n)).cmpn(0)!==0){var T=(x.getY().isOdd()?1:0)|(A.cmp(E)!==0?2:0);return r.canonical&&I.cmp(this.nh)>0&&(I=this.n.sub(I),T^=1),new qo({r:E,s:I,recoveryParam:T})}}}}}},qr.prototype.verify=function(n,e,t,r,i){i||(i={}),n=this._truncateToN(n,!1,i.msgBitLength),t=this.keyFromPublic(t,r);var s=(e=new qo(e,"hex")).r,o=e.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a,l=o.invm(this.n),h=l.mul(n).umod(this.n),u=l.mul(s).umod(this.n);return this.curve._maxwellTrick?!(a=this.g.jmulAdd(h,t.getPublic(),u)).isInfinity()&&a.eqXToP(s):!(a=this.g.mulAdd(h,t.getPublic(),u)).isInfinity()&&a.getX().umod(this.n).cmp(s)===0},qr.prototype.recoverPubKey=function(n,e,t,r){_i((3&t)===t,"The recovery param is more than two bits"),e=new qo(e,r);var i=this.n,s=new Ce(n),o=e.r,a=e.s,l=1&t,h=t>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&h)throw new Error("Unable to find sencond key candinate");o=h?this.curve.pointFromX(o.add(this.curve.n),l):this.curve.pointFromX(o,l);var u=e.r.invm(i),g=i.sub(s).mul(u).umod(i),x=a.mul(u).umod(i);return this.g.mulAdd(g,o,x)},qr.prototype.getKeyRecoveryParam=function(n,e,t,r){if((e=new qo(e,r)).recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(n,e,i)}catch{continue}if(s.eq(t))return i}throw new Error("Unable to find valid recovery factor")};var Jm=Ss(function(n,e){var t=e;t.version="6.6.1",t.utils=Cr,t.rand=function(){throw new Error("unsupported")},t.curve=oa,t.curves=aa,t.ec=Vm,t.eddsa=null}).ec;const bc=new F("signing-key/5.8.0");let Ol=null;function mn(){return Ol||(Ol=new Jm("secp256k1")),Ol}class Ti{constructor(e){j(this,"curve","secp256k1"),j(this,"privateKey",te(e)),_n(this.privateKey)!==32&&bc.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const t=mn().keyFromPrivate(Y(this.privateKey));j(this,"publicKey","0x"+t.getPublic(!1,"hex")),j(this,"compressedPublicKey","0x"+t.getPublic(!0,"hex")),j(this,"_isSigningKey",!0)}_addPoint(e){const t=mn().keyFromPublic(Y(this.publicKey)),r=mn().keyFromPublic(Y(e));return"0x"+t.pub.add(r.pub).encodeCompressed("hex")}signDigest(e){const t=mn().keyFromPrivate(Y(this.privateKey)),r=Y(e);r.length!==32&&bc.throwArgumentError("bad digest length","digest",e);const i=t.sign(r,{canonical:!0});return ji({recoveryParam:i.recoveryParam,r:St("0x"+i.r.toString(16),32),s:St("0x"+i.s.toString(16),32)})}computeSharedSecret(e){const t=mn().keyFromPrivate(Y(this.privateKey)),r=mn().keyFromPublic(Y(eh(e)));return St("0x"+t.derive(r.getPublic()).toString(16),32)}static isSigningKey(e){return!(!e||!e._isSigningKey)}}function a0(n,e){const t=ji(e),r={r:Y(t.r),s:Y(t.s)};return"0x"+mn().recoverPubKey(Y(n),r,t.recoveryParam).encode("hex",!1)}function eh(n,e){const t=Y(n);if(t.length===32){const r=new Ti(t);return e?"0x"+mn().keyFromPrivate(t).getPublic(!0,"hex"):r.publicKey}return t.length===33?e?te(t):"0x"+mn().keyFromPublic(t).getPublic(!1,"hex"):t.length===65?e?"0x"+mn().keyFromPublic(t).getPublic(!0,"hex"):te(t):bc.throwArgumentError("invalid public or private key","key","[REDACTED]")}const lr=new F("transactions/5.8.0");var Ac;function Fl(n){return n==="0x"?null:At(n)}function or(n){return n==="0x"?Kc:X.from(n)}(function(n){n[n.legacy=0]="legacy",n[n.eip2930=1]="eip2930",n[n.eip1559=2]="eip1559"})(Ac||(Ac={}));const $m=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],Qm={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,type:!0,value:!0};function oi(n){return At(Lt(_t(Lt(eh(n),1)),12))}function Zs(n,e){return oi(a0(Y(n),e))}function _r(n,e){const t=xn(X.from(n).toHexString());return t.length>32&&lr.throwArgumentError("invalid length for "+e,"transaction:"+e,n),t}function Dl(n,e){return{address:At(n),storageKeys:(e||[]).map((t,r)=>(_n(t)!==32&&lr.throwArgumentError("invalid access list storageKey",`accessList[${n}:${r}]`,t),t.toLowerCase()))}}function hi(n){if(Array.isArray(n))return n.map((t,r)=>Array.isArray(t)?(t.length>2&&lr.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${r}]`,t),Dl(t[0],t[1])):Dl(t.address,t.storageKeys));const e=Object.keys(n).map(t=>{const r=n[t].reduce((i,s)=>(i[s]=!0,i),{});return Dl(t,Object.keys(r).sort())});return e.sort((t,r)=>t.address.localeCompare(r.address)),e}function l0(n){return hi(n).map(e=>[e.address,e.storageKeys])}function c0(n,e){if(n.gasPrice!=null){const r=X.from(n.gasPrice),i=X.from(n.maxFeePerGas||0);r.eq(i)||lr.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:r,maxFeePerGas:i})}const t=[_r(n.chainId||0,"chainId"),_r(n.nonce||0,"nonce"),_r(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),_r(n.maxFeePerGas||0,"maxFeePerGas"),_r(n.gasLimit||0,"gasLimit"),n.to!=null?At(n.to):"0x",_r(n.value||0,"value"),n.data||"0x",l0(n.accessList||[])];if(e){const r=ji(e);t.push(_r(r.recoveryParam,"recoveryParam")),t.push(xn(r.r)),t.push(xn(r.s))}return fr(["0x02",Oi(t)])}function h0(n,e){const t=[_r(n.chainId||0,"chainId"),_r(n.nonce||0,"nonce"),_r(n.gasPrice||0,"gasPrice"),_r(n.gasLimit||0,"gasLimit"),n.to!=null?At(n.to):"0x",_r(n.value||0,"value"),n.data||"0x",l0(n.accessList||[])];if(e){const r=ji(e);t.push(_r(r.recoveryParam,"recoveryParam")),t.push(xn(r.r)),t.push(xn(r.s))}return fr(["0x01",Oi(t)])}function Ec(n,e){if(n.type==null||n.type===0)return n.accessList!=null&&lr.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",n),function(t,r){Hc(t,Qm);const i=[];$m.forEach(function(l){let h=t[l.name]||[];const u={};l.numeric&&(u.hexPad="left"),h=Y(te(h,u)),l.length&&h.length!==l.length&&h.length>0&&lr.throwArgumentError("invalid length for "+l.name,"transaction:"+l.name,h),l.maxLength&&(h=xn(h),h.length>l.maxLength&&lr.throwArgumentError("invalid length for "+l.name,"transaction:"+l.name,h)),i.push(te(h))});let s=0;if(t.chainId!=null?(s=t.chainId,typeof s!="number"&&lr.throwArgumentError("invalid transaction.chainId","transaction",t)):r&&!ko(r)&&r.v>28&&(s=Math.floor((r.v-35)/2)),s!==0&&(i.push(te(s)),i.push("0x"),i.push("0x")),!r)return Oi(i);const o=ji(r);let a=27+o.recoveryParam;return s!==0?(i.pop(),i.pop(),i.pop(),a+=2*s+8,o.v>28&&o.v!==a&&lr.throwArgumentError("transaction.chainId/signature.v mismatch","signature",r)):o.v!==a&&lr.throwArgumentError("transaction.chainId/signature.v mismatch","signature",r),i.push(te(a)),i.push(xn(Y(o.r))),i.push(xn(Y(o.s))),Oi(i)}(n,e);switch(n.type){case 1:return h0(n,e);case 2:return c0(n,e)}return lr.throwError(`unsupported transaction type: ${n.type}`,F.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:n.type})}function xu(n,e,t){try{const r=or(e[0]).toNumber();if(r!==0&&r!==1)throw new Error("bad recid");n.v=r}catch{lr.throwArgumentError("invalid v for transaction type: 1","v",e[0])}n.r=St(e[1],32),n.s=St(e[2],32);try{const r=_t(t(n));n.from=Zs(r,{r:n.r,s:n.s,recoveryParam:n.v})}catch{}}function u0(n){const e=Y(n);if(e[0]>127)return function(t){const r=ia(t);r.length!==9&&r.length!==6&&lr.throwArgumentError("invalid raw transaction","rawTransaction",t);const i={nonce:or(r[0]).toNumber(),gasPrice:or(r[1]),gasLimit:or(r[2]),to:Fl(r[3]),value:or(r[4]),data:r[5],chainId:0};if(r.length===6)return i;try{i.v=X.from(r[6]).toNumber()}catch{return i}if(i.r=St(r[7],32),i.s=St(r[8],32),X.from(i.r).isZero()&&X.from(i.s).isZero())i.chainId=i.v,i.v=0;else{i.chainId=Math.floor((i.v-35)/2),i.chainId<0&&(i.chainId=0);let s=i.v-27;const o=r.slice(0,6);i.chainId!==0&&(o.push(te(i.chainId)),o.push("0x"),o.push("0x"),s-=2*i.chainId+8);const a=_t(Oi(o));try{i.from=Zs(a,{r:te(i.r),s:te(i.s),recoveryParam:s})}catch{}i.hash=_t(t)}return i.type=null,i}(e);switch(e[0]){case 1:return function(t){const r=ia(t.slice(1));r.length!==8&&r.length!==11&&lr.throwArgumentError("invalid component count for transaction type: 1","payload",te(t));const i={type:1,chainId:or(r[0]).toNumber(),nonce:or(r[1]).toNumber(),gasPrice:or(r[2]),gasLimit:or(r[3]),to:Fl(r[4]),value:or(r[5]),data:r[6],accessList:hi(r[7])};return r.length===8||(i.hash=_t(t),xu(i,r.slice(8),h0)),i}(e);case 2:return function(t){const r=ia(t.slice(1));r.length!==9&&r.length!==12&&lr.throwArgumentError("invalid component count for transaction type: 2","payload",te(t));const i=or(r[2]),s=or(r[3]),o={type:2,chainId:or(r[0]).toNumber(),nonce:or(r[1]).toNumber(),maxPriorityFeePerGas:i,maxFeePerGas:s,gasPrice:null,gasLimit:or(r[4]),to:Fl(r[5]),value:or(r[6]),data:r[7],accessList:hi(r[8])};return r.length===9||(o.hash=_t(t),xu(o,r.slice(9),c0)),o}(e)}return lr.throwError(`unsupported transaction type: ${e[0]}`,F.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:e[0]})}var ui=function(n,e,t,r){return new(t||(t=Promise))(function(i,s){function o(h){try{l(r.next(h))}catch(u){s(u)}}function a(h){try{l(r.throw(h))}catch(u){s(u)}}function l(h){var u;h.done?i(h.value):(u=h.value,u instanceof t?u:new t(function(g){g(u)})).then(o,a)}l((r=r.apply(n,e||[])).next())})};const xt=new F("contracts/5.8.0"),Ym={chainId:!0,data:!0,from:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0,customData:!0,ccipReadEnabled:!0};function Ia(n,e){return ui(this,void 0,void 0,function*(){const t=yield e;typeof t!="string"&&xt.throwArgumentError("invalid address or ENS name","name",t);try{return At(t)}catch{}n||xt.throwError("a provider or signer is needed to resolve ENS names",F.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const r=yield n.resolveName(t);return r==null&&xt.throwArgumentError("resolver or addr is not configured for ENS name","name",t),r})}function eo(n,e,t){return ui(this,void 0,void 0,function*(){return Array.isArray(t)?yield Promise.all(t.map((r,i)=>eo(n,Array.isArray(e)?e[i]:e[r.name],r))):t.type==="address"?yield Ia(n,e):t.type==="tuple"?yield eo(n,e,t.components):t.baseType==="array"?Array.isArray(e)?yield Promise.all(e.map(r=>eo(n,r,t.arrayChildren))):Promise.reject(xt.makeError("invalid value for array",F.errors.INVALID_ARGUMENT,{argument:"value",value:e})):e})}function Pa(n,e,t){return ui(this,void 0,void 0,function*(){let r={};t.length===e.inputs.length+1&&typeof t[t.length-1]=="object"&&(r=Nt(t.pop())),xt.checkArgumentCount(t.length,e.inputs.length,"passed to contract"),n.signer?r.from?r.from=Ot({override:Ia(n.signer,r.from),signer:n.signer.getAddress()}).then(h=>ui(this,void 0,void 0,function*(){return At(h.signer)!==h.override&&xt.throwError("Contract with a Signer cannot override from",F.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),h.override})):r.from=n.signer.getAddress():r.from&&(r.from=Ia(n.provider,r.from));const i=yield Ot({args:eo(n.signer||n.provider,t,e.inputs),address:n.resolvedAddress,overrides:Ot(r)||{}}),s=n.interface.encodeFunctionData(e,i.args),o={data:s,to:i.address},a=i.overrides;if(a.nonce!=null&&(o.nonce=X.from(a.nonce).toNumber()),a.gasLimit!=null&&(o.gasLimit=X.from(a.gasLimit)),a.gasPrice!=null&&(o.gasPrice=X.from(a.gasPrice)),a.maxFeePerGas!=null&&(o.maxFeePerGas=X.from(a.maxFeePerGas)),a.maxPriorityFeePerGas!=null&&(o.maxPriorityFeePerGas=X.from(a.maxPriorityFeePerGas)),a.from!=null&&(o.from=a.from),a.type!=null&&(o.type=a.type),a.accessList!=null&&(o.accessList=hi(a.accessList)),o.gasLimit==null&&e.gas!=null){let h=21e3;const u=Y(s);for(let g=0;g<u.length;g++)h+=4,u[g]&&(h+=64);o.gasLimit=X.from(e.gas).add(h)}if(a.value){const h=X.from(a.value);h.isZero()||e.payable||xt.throwError("non-payable method cannot override value",F.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:r.value}),o.value=h}a.customData&&(o.customData=Nt(a.customData)),a.ccipReadEnabled&&(o.ccipReadEnabled=!!a.ccipReadEnabled),delete r.nonce,delete r.gasLimit,delete r.gasPrice,delete r.from,delete r.value,delete r.type,delete r.accessList,delete r.maxFeePerGas,delete r.maxPriorityFeePerGas,delete r.customData,delete r.ccipReadEnabled;const l=Object.keys(r).filter(h=>r[h]!=null);return l.length&&xt.throwError(`cannot override ${l.map(h=>JSON.stringify(h)).join(",")}`,F.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:l}),o})}function f0(n,e){const t=e.wait.bind(e);e.wait=r=>t(r).then(i=>(i.events=i.logs.map(s=>{let o=gr(s),a=null;try{a=n.interface.parseLog(s)}catch{}return a&&(o.args=a.args,o.decode=(l,h)=>n.interface.decodeEventLog(a.eventFragment,l,h),o.event=a.name,o.eventSignature=a.signature),o.removeListener=()=>n.provider,o.getBlock=()=>n.provider.getBlock(i.blockHash),o.getTransaction=()=>n.provider.getTransaction(i.transactionHash),o.getTransactionReceipt=()=>Promise.resolve(i),o}),i))}function d0(n,e,t){const r=n.signer||n.provider;return function(...i){return ui(this,void 0,void 0,function*(){let s;if(i.length===e.inputs.length+1&&typeof i[i.length-1]=="object"){const l=Nt(i.pop());l.blockTag!=null&&(s=yield l.blockTag),delete l.blockTag,i.push(l)}n.deployTransaction!=null&&(yield n._deployed(s));const o=yield Pa(n,e,i),a=yield r.call(o,s);try{let l=n.interface.decodeFunctionResult(e,a);return t&&e.outputs.length===1&&(l=l[0]),l}catch(l){throw l.code===F.errors.CALL_EXCEPTION&&(l.address=n.address,l.args=i,l.transaction=o),l}})}}function _u(n,e,t){return e.constant?d0(n,e,t):function(r,i){return function(...s){return ui(this,void 0,void 0,function*(){r.signer||xt.throwError("sending a transaction requires a signer",F.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),r.deployTransaction!=null&&(yield r._deployed());const o=yield Pa(r,i,s),a=yield r.signer.sendTransaction(o);return f0(r,a),a})}}(n,e)}function p0(n){return!n.address||n.topics!=null&&n.topics.length!==0?(n.address||"*")+"@"+(n.topics?n.topics.map(e=>Array.isArray(e)?e.join("|"):e).join(":"):""):"*"}class po{constructor(e,t){j(this,"tag",e),j(this,"filter",t),this._listeners=[]}addListener(e,t){this._listeners.push({listener:e,once:t})}removeListener(e){let t=!1;this._listeners=this._listeners.filter(r=>!(!t&&r.listener===e)||(t=!0,!1))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map(e=>e.listener)}listenerCount(){return this._listeners.length}run(e){const t=this.listenerCount();return this._listeners=this._listeners.filter(r=>{const i=e.slice();return setTimeout(()=>{r.listener.apply(this,i)},0),!r.once}),t}prepareEvent(e){}getEmit(e){return[e]}}class Xm extends po{constructor(){super("error",null)}}class ku extends po{constructor(e,t,r,i){const s={address:e};let o=t.getEventTopic(r);i?(o!==i[0]&&xt.throwArgumentError("topic mismatch","topics",i),s.topics=i.slice()):s.topics=[o],super(p0(s),s),j(this,"address",e),j(this,"interface",t),j(this,"fragment",r)}prepareEvent(e){super.prepareEvent(e),e.event=this.fragment.name,e.eventSignature=this.fragment.format(),e.decode=(t,r)=>this.interface.decodeEventLog(this.fragment,t,r);try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(t){e.args=null,e.decodeError=t}}getEmit(e){const t=Td(e.args);if(t.length)throw t[0].error;const r=(e.args||[]).slice();return r.push(e),r}}class Su extends po{constructor(e,t){super("*",{address:e}),j(this,"address",e),j(this,"interface",t)}prepareEvent(e){super.prepareEvent(e);try{const t=this.interface.parseLog(e);e.event=t.name,e.eventSignature=t.signature,e.decode=(r,i)=>this.interface.decodeEventLog(t.eventFragment,r,i),e.args=t.args}catch{}}}class m0{constructor(e,t,r){j(this,"interface",tr(new.target,"getInterface")(t)),r==null?(j(this,"provider",null),j(this,"signer",null)):ci.isSigner(r)?(j(this,"provider",r.provider||null),j(this,"signer",r)):Ki.isProvider(r)?(j(this,"provider",r),j(this,"signer",null)):xt.throwArgumentError("invalid signer or provider","signerOrProvider",r),j(this,"callStatic",{}),j(this,"estimateGas",{}),j(this,"functions",{}),j(this,"populateTransaction",{}),j(this,"filters",{});{const o={};Object.keys(this.interface.events).forEach(a=>{const l=this.interface.events[a];j(this.filters,a,(...h)=>({address:this.address,topics:this.interface.encodeFilterTopics(l,h)})),o[l.name]||(o[l.name]=[]),o[l.name].push(a)}),Object.keys(o).forEach(a=>{const l=o[a];l.length===1?j(this.filters,a,this.filters[l[0]]):xt.warn(`Duplicate definition of ${a} (${l.join(", ")})`)})}if(j(this,"_runningEvents",{}),j(this,"_wrappedEmits",{}),e==null&&xt.throwArgumentError("invalid contract address or ENS name","addressOrName",e),j(this,"address",e),this.provider)j(this,"resolvedAddress",Ia(this.provider,e));else try{j(this,"resolvedAddress",Promise.resolve(At(e)))}catch{xt.throwError("provider is required to use ENS name as contract address",F.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}this.resolvedAddress.catch(o=>{});const i={},s={};Object.keys(this.interface.functions).forEach(o=>{const a=this.interface.functions[o];if(s[o])xt.warn(`Duplicate ABI entry for ${JSON.stringify(o)}`);else{s[o]=!0;{const l=a.name;i[`%${l}`]||(i[`%${l}`]=[]),i[`%${l}`].push(o)}this[o]==null&&j(this,o,_u(this,a,!0)),this.functions[o]==null&&j(this.functions,o,_u(this,a,!1)),this.callStatic[o]==null&&j(this.callStatic,o,d0(this,a,!0)),this.populateTransaction[o]==null&&j(this.populateTransaction,o,function(l,h){return function(...u){return Pa(l,h,u)}}(this,a)),this.estimateGas[o]==null&&j(this.estimateGas,o,function(l,h){const u=l.signer||l.provider;return function(...g){return ui(this,void 0,void 0,function*(){u||xt.throwError("estimate require a provider or signer",F.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const x=yield Pa(l,h,g);return yield u.estimateGas(x)})}}(this,a))}}),Object.keys(i).forEach(o=>{const a=i[o];if(a.length>1)return;o=o.substring(1);const l=a[0];try{this[o]==null&&j(this,o,this[l])}catch{}this.functions[o]==null&&j(this.functions,o,this.functions[l]),this.callStatic[o]==null&&j(this.callStatic,o,this.callStatic[l]),this.populateTransaction[o]==null&&j(this.populateTransaction,o,this.populateTransaction[l]),this.estimateGas[o]==null&&j(this.estimateGas,o,this.estimateGas[l])})}static getContractAddress(e){return ja(e)}static getInterface(e){return vc.isInterface(e)?e:new vc(e)}deployed(){return this._deployed()}_deployed(e){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then(()=>this):this._deployedPromise=this.provider.getCode(this.address,e).then(t=>(t==="0x"&&xt.throwError("contract not deployed",F.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this))),this._deployedPromise}fallback(e){this.signer||xt.throwError("sending a transactions require a signer",F.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const t=Nt(e||{});return["from","to"].forEach(function(r){t[r]!=null&&xt.throwError("cannot override "+r,F.errors.UNSUPPORTED_OPERATION,{operation:r})}),t.to=this.resolvedAddress,this.deployed().then(()=>this.signer.sendTransaction(t))}connect(e){typeof e=="string"&&(e=new Ka(e,this.provider));const t=new this.constructor(this.address,this.interface,e);return this.deployTransaction&&j(t,"deployTransaction",this.deployTransaction),t}attach(e){return new this.constructor(e,this.interface,this.signer||this.provider)}static isIndexed(e){return Na.isIndexed(e)}_normalizeRunningEvent(e){return this._runningEvents[e.tag]?this._runningEvents[e.tag]:e}_getRunningEvent(e){if(typeof e=="string"){if(e==="error")return this._normalizeRunningEvent(new Xm);if(e==="event")return this._normalizeRunningEvent(new po("event",null));if(e==="*")return this._normalizeRunningEvent(new Su(this.address,this.interface));const t=this.interface.getEvent(e);return this._normalizeRunningEvent(new ku(this.address,this.interface,t))}if(e.topics&&e.topics.length>0){try{const r=e.topics[0];if(typeof r!="string")throw new Error("invalid topic");const i=this.interface.getEvent(r);return this._normalizeRunningEvent(new ku(this.address,this.interface,i,e.topics))}catch{}const t={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new po(p0(t),t))}return this._normalizeRunningEvent(new Su(this.address,this.interface))}_checkRunningEvents(e){if(e.listenerCount()===0){delete this._runningEvents[e.tag];const t=this._wrappedEmits[e.tag];t&&e.filter&&(this.provider.off(e.filter,t),delete this._wrappedEmits[e.tag])}}_wrapEvent(e,t,r){const i=gr(t);return i.removeListener=()=>{r&&(e.removeListener(r),this._checkRunningEvents(e))},i.getBlock=()=>this.provider.getBlock(t.blockHash),i.getTransaction=()=>this.provider.getTransaction(t.transactionHash),i.getTransactionReceipt=()=>this.provider.getTransactionReceipt(t.transactionHash),e.prepareEvent(i),i}_addEventListener(e,t,r){if(this.provider||xt.throwError("events require a provider or a signer with a provider",F.errors.UNSUPPORTED_OPERATION,{operation:"once"}),e.addListener(t,r),this._runningEvents[e.tag]=e,!this._wrappedEmits[e.tag]){const i=s=>{let o=this._wrapEvent(e,s,t);if(o.decodeError==null)try{const a=e.getEmit(o);this.emit(e.filter,...a)}catch(a){o.decodeError=a.error}e.filter!=null&&this.emit("event",o),o.decodeError!=null&&this.emit("error",o.decodeError,o)};this._wrappedEmits[e.tag]=i,e.filter!=null&&this.provider.on(e.filter,i)}}queryFilter(e,t,r){const i=this._getRunningEvent(e),s=Nt(i.filter);return typeof t=="string"&&Te(t,32)?(r!=null&&xt.throwArgumentError("cannot specify toBlock with blockhash","toBlock",r),s.blockHash=t):(s.fromBlock=t??0,s.toBlock=r??"latest"),this.provider.getLogs(s).then(o=>o.map(a=>this._wrapEvent(i,a,null)))}on(e,t){return this._addEventListener(this._getRunningEvent(e),t,!1),this}once(e,t){return this._addEventListener(this._getRunningEvent(e),t,!0),this}emit(e,...t){if(!this.provider)return!1;const r=this._getRunningEvent(e),i=r.run(t)>0;return this._checkRunningEvents(r),i}listenerCount(e){return this.provider?e==null?Object.keys(this._runningEvents).reduce((t,r)=>t+this._runningEvents[r].listenerCount(),0):this._getRunningEvent(e).listenerCount():0}listeners(e){if(!this.provider)return[];if(e==null){const t=[];for(let r in this._runningEvents)this._runningEvents[r].listeners().forEach(i=>{t.push(i)});return t}return this._getRunningEvent(e).listeners()}removeAllListeners(e){if(!this.provider)return this;if(e==null){for(const r in this._runningEvents){const i=this._runningEvents[r];i.removeAllListeners(),this._checkRunningEvents(i)}return this}const t=this._getRunningEvent(e);return t.removeAllListeners(),this._checkRunningEvents(t),this}off(e,t){if(!this.provider)return this;const r=this._getRunningEvent(e);return r.removeListener(t),this._checkRunningEvents(r),this}removeListener(e,t){return this.off(e,t)}}class la extends m0{}class g0{constructor(e){j(this,"alphabet",e),j(this,"base",e.length),j(this,"_alphabetMap",{}),j(this,"_leader",e.charAt(0));for(let t=0;t<e.length;t++)this._alphabetMap[e.charAt(t)]=t}encode(e){let t=Y(e);if(t.length===0)return"";let r=[0];for(let s=0;s<t.length;++s){let o=t[s];for(let a=0;a<r.length;++a)o+=r[a]<<8,r[a]=o%this.base,o=o/this.base|0;for(;o>0;)r.push(o%this.base),o=o/this.base|0}let i="";for(let s=0;t[s]===0&&s<t.length-1;++s)i+=this._leader;for(let s=r.length-1;s>=0;--s)i+=this.alphabet[r[s]];return i}decode(e){if(typeof e!="string")throw new TypeError("Expected String");let t=[];if(e.length===0)return new Uint8Array(t);t.push(0);for(let r=0;r<e.length;r++){let i=this._alphabetMap[e[r]];if(i===void 0)throw new Error("Non-base"+this.base+" character");let s=i;for(let o=0;o<t.length;++o)s+=t[o]*this.base,t[o]=255&s,s>>=8;for(;s>0;)t.push(255&s),s>>=8}for(let r=0;e[r]===this._leader&&r<e.length-1;++r)t.push(0);return Y(new Uint8Array(t.reverse()))}}new g0("abcdefghijklmnopqrstuvwxyz234567");const ws=new g0("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var bs;(function(n){n.sha256="sha256",n.sha512="sha512"})(bs||(bs={}));const Zm=new F("sha2/5.8.0");function y0(n){return"0x"+wr.ripemd160().update(Y(n)).digest("hex")}function jn(n){return"0x"+wr.sha256().update(Y(n)).digest("hex")}function mo(n,e,t){return bs[n]||Zm.throwError("unsupported algorithm "+n,F.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:n}),"0x"+wr.hmac(wr[n],Y(e)).update(Y(t)).digest("hex")}function th(n,e,t,r,i){let s;n=Y(n),e=Y(e);let o=1;const a=new Uint8Array(r),l=new Uint8Array(e.length+4);let h,u;l.set(e);for(let g=1;g<=o;g++){l[e.length]=g>>24&255,l[e.length+1]=g>>16&255,l[e.length+2]=g>>8&255,l[e.length+3]=255&g;let x=Y(mo(i,n,l));s||(s=x.length,u=new Uint8Array(s),o=Math.ceil(r/s),h=r-(o-1)*s),u.set(x);for(let I=1;I<t;I++){x=Y(mo(i,n,x));for(let T=0;T<s;T++)u[T]^=x[T]}const A=(g-1)*s,E=g===o?h:s;a.set(Y(u).slice(0,E),A)}return te(a)}const eg=new F("wordlists/5.8.0");class Ns{constructor(e){eg.checkAbstract(new.target,Ns),j(this,"locale",e)}split(e){return e.toLowerCase().split(/ +/g)}join(e){return e.join(" ")}static check(e){const t=[];for(let r=0;r<2048;r++){const i=e.getWord(r);if(r!==e.getWordIndex(i))return"0x";t.push(i)}return si(t.join(`
`)+`
`)}static register(e,t){t||(t=e.locale)}}let to=null;function Nu(n){if(to==null&&(to="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo".replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),Ns.check(n)!=="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"))throw to=null,new Error("BIP39 Wordlist for en (English) FAILED")}const v0=new class extends Ns{constructor(){super("en")}getWord(n){return Nu(this),to[n]}getWordIndex(n){return Nu(this),to.indexOf(n)}};Ns.register(v0);const xc={en:v0},go=new F("hdnode/5.8.0"),tg=X.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),rg=zt("Bitcoin seed"),Ws=2147483648;function w0(n){return(1<<n)-1<<8-n}function ng(n){return(1<<n)-1}function Go(n){return St(te(n),32)}function Cu(n){return ws.encode(kt([n,Lt(jn(jn(n)),0,4)]))}function rh(n){if(n==null)return xc.en;if(typeof n=="string"){const e=xc[n];return e==null&&go.throwArgumentError("unknown locale","wordlist",n),e}return n}const Xi={},as="m/44'/60'/0'/0/0";class kr{constructor(e,t,r,i,s,o,a,l){if(e!==Xi)throw new Error("HDNode constructor cannot be called directly");if(t){const h=new Ti(t);j(this,"privateKey",h.privateKey),j(this,"publicKey",h.compressedPublicKey)}else j(this,"privateKey",null),j(this,"publicKey",te(r));j(this,"parentFingerprint",i),j(this,"fingerprint",Lt(y0(jn(this.publicKey)),0,4)),j(this,"address",oi(this.publicKey)),j(this,"chainCode",s),j(this,"index",o),j(this,"depth",a),l==null?(j(this,"mnemonic",null),j(this,"path",null)):typeof l=="string"?(j(this,"mnemonic",null),j(this,"path",l)):(j(this,"mnemonic",l),j(this,"path",l.path))}get extendedKey(){if(this.depth>=256)throw new Error("Depth too large!");return Cu(kt([this.privateKey!=null?"0x0488ADE4":"0x0488B21E",te(this.depth),this.parentFingerprint,St(te(this.index),4),this.chainCode,this.privateKey!=null?kt(["0x00",this.privateKey]):this.publicKey]))}neuter(){return new kr(Xi,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,this.path)}_derive(e){if(e>4294967295)throw new Error("invalid index - "+String(e));let t=this.path;t&&(t+="/"+(2147483647&e));const r=new Uint8Array(37);if(e&Ws){if(!this.privateKey)throw new Error("cannot derive child of neutered node");r.set(Y(this.privateKey),1),t&&(t+="'")}else r.set(Y(this.publicKey));for(let g=24;g>=0;g-=8)r[33+(g>>3)]=e>>24-g&255;const i=Y(mo(bs.sha512,this.chainCode,r)),s=i.slice(0,32),o=i.slice(32);let a=null,l=null;this.privateKey?a=Go(X.from(s).add(this.privateKey).mod(tg)):l=new Ti(te(s))._addPoint(this.publicKey);let h=t;const u=this.mnemonic;return u&&(h=Object.freeze({phrase:u.phrase,path:t,locale:u.locale||"en"})),new kr(Xi,a,l,this.fingerprint,Go(o),e,this.depth+1,h)}derivePath(e){const t=e.split("/");if(t.length===0||t[0]==="m"&&this.depth!==0)throw new Error("invalid path - "+e);t[0]==="m"&&t.shift();let r=this;for(let i=0;i<t.length;i++){const s=t[i];if(s.match(/^[0-9]+'$/)){const o=parseInt(s.substring(0,s.length-1));if(o>=Ws)throw new Error("invalid path index - "+s);r=r._derive(Ws+o)}else{if(!s.match(/^[0-9]+$/))throw new Error("invalid path component - "+s);{const o=parseInt(s);if(o>=Ws)throw new Error("invalid path index - "+s);r=r._derive(o)}}}return r}static _fromSeed(e,t){const r=Y(e);if(r.length<16||r.length>64)throw new Error("invalid seed");const i=Y(mo(bs.sha512,rg,r));return new kr(Xi,Go(i.slice(0,32)),null,"0x00000000",Go(i.slice(32)),0,0,t)}static fromMnemonic(e,t,r){return e=Va(Ma(e,r=rh(r)),r),kr._fromSeed(b0(e,t),{phrase:e,path:"m",locale:r.locale})}static fromSeed(e){return kr._fromSeed(e,null)}static fromExtendedKey(e){const t=ws.decode(e);t.length===82&&Cu(t.slice(0,78))===e||go.throwArgumentError("invalid extended key","extendedKey","[REDACTED]");const r=t[4],i=te(t.slice(5,9)),s=parseInt(te(t.slice(9,13)).substring(2),16),o=te(t.slice(13,45)),a=t.slice(45,78);switch(te(t.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new kr(Xi,null,te(a),i,o,s,r,null);case"0x0488ade4":case"0x04358394 ":if(a[0]!==0)break;return new kr(Xi,te(a.slice(1)),null,i,o,s,r,null)}return go.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}}function b0(n,e){e||(e="");const t=zt("mnemonic"+e,Pn.NFKD);return th(zt(n,Pn.NFKD),t,2048,64,"sha512")}function Ma(n,e){e=rh(e),go.checkNormalize();const t=e.split(n);if(t.length%3!=0)throw new Error("invalid mnemonic");const r=Y(new Uint8Array(Math.ceil(11*t.length/8)));let i=0;for(let a=0;a<t.length;a++){let l=e.getWordIndex(t[a].normalize("NFKD"));if(l===-1)throw new Error("invalid mnemonic");for(let h=0;h<11;h++)l&1<<10-h&&(r[i>>3]|=1<<7-i%8),i++}const s=32*t.length/3,o=w0(t.length/3);if((Y(jn(r.slice(0,s/8)))[0]&o)!==(r[r.length-1]&o))throw new Error("invalid checksum");return te(r.slice(0,s/8))}function Va(n,e){if(e=rh(e),(n=Y(n)).length%4!=0||n.length<16||n.length>32)throw new Error("invalid entropy");const t=[0];let r=11;for(let o=0;o<n.length;o++)r>8?(t[t.length-1]<<=8,t[t.length-1]|=n[o],r-=8):(t[t.length-1]<<=r,t[t.length-1]|=n[o]>>8-r,t.push(n[o]&ng(8-r)),r+=3);const i=n.length/4,s=Y(jn(n))[0]&w0(i);return t[t.length-1]<<=i,t[t.length-1]|=s>>8-i,e.join(t.map(o=>e.getWord(o)))}const _c=new F("random/5.8.0"),Iu=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof{}<"u")return{};throw new Error("unable to locate {} object")}();let ca=Iu.crypto||Iu.msCrypto;function rs(n){(n<=0||n>1024||n%1||n!=n)&&_c.throwArgumentError("invalid length","length",n);const e=new Uint8Array(n);return ca.getRandomValues(e),Y(e)}function A0(n){for(let e=(n=n.slice()).length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1)),r=n[e];n[e]=n[t],n[t]=r}return n}ca&&ca.getRandomValues||(_c.warn("WARNING: Missing strong random number source"),ca={getRandomValues:function(n){return _c.throwError("no secure random source avaialble",F.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}});var Pu,Mu={exports:{}},ig=(Pu||(Pu=1,function(n){(function(){function e(v){return parseInt(v)===v}function t(v){if(!e(v.length))return!1;for(var w=0;w<v.length;w++)if(!e(v[w])||v[w]<0||v[w]>255)return!1;return!0}function r(v,w){if(v.buffer&&ArrayBuffer.isView(v)&&v.name==="Uint8Array")return w&&(v=v.slice?v.slice():Array.prototype.slice.call(v)),v;if(Array.isArray(v)){if(!t(v))throw new Error("Array contains invalid value: "+v);return new Uint8Array(v)}if(e(v.length)&&t(v))return new Uint8Array(v);throw new Error("unsupported array-like object")}function i(v){return new Uint8Array(v)}function s(v,w,P,_,m){_==null&&m==null||(v=v.slice?v.slice(_,m):Array.prototype.slice.call(v,_,m)),w.set(v,P)}var o,a={toBytes:function(v){var w=[],P=0;for(v=encodeURI(v);P<v.length;){var _=v.charCodeAt(P++);_===37?(w.push(parseInt(v.substr(P,2),16)),P+=2):w.push(_)}return r(w)},fromBytes:function(v){for(var w=[],P=0;P<v.length;){var _=v[P];_<128?(w.push(String.fromCharCode(_)),P++):_>191&&_<224?(w.push(String.fromCharCode((31&_)<<6|63&v[P+1])),P+=2):(w.push(String.fromCharCode((15&_)<<12|(63&v[P+1])<<6|63&v[P+2])),P+=3)}return w.join("")}},l=(o="0123456789abcdef",{toBytes:function(v){for(var w=[],P=0;P<v.length;P+=2)w.push(parseInt(v.substr(P,2),16));return w},fromBytes:function(v){for(var w=[],P=0;P<v.length;P++){var _=v[P];w.push(o[(240&_)>>4]+o[15&_])}return w.join("")}}),h={16:10,24:12,32:14},u=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],g=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],x=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],A=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],E=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],I=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],T=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],R=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],O=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],B=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],U=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],q=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],W=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],Z=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],K=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function se(v){for(var w=[],P=0;P<v.length;P+=4)w.push(v[P]<<24|v[P+1]<<16|v[P+2]<<8|v[P+3]);return w}var y=function(v){if(!(this instanceof y))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:r(v,!0)}),this._prepare()};y.prototype._prepare=function(){var v=h[this.key.length];if(v==null)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var w=0;w<=v;w++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);var P,_=4*(v+1),m=this.key.length/4,M=se(this.key);for(w=0;w<m;w++)P=w>>2,this._Ke[P][w%4]=M[w],this._Kd[v-P][w%4]=M[w];for(var L,k=0,D=m;D<_;){if(L=M[m-1],M[0]^=g[L>>16&255]<<24^g[L>>8&255]<<16^g[255&L]<<8^g[L>>24&255]^u[k]<<24,k+=1,m!=8)for(w=1;w<m;w++)M[w]^=M[w-1];else{for(w=1;w<m/2;w++)M[w]^=M[w-1];for(L=M[m/2-1],M[m/2]^=g[255&L]^g[L>>8&255]<<8^g[L>>16&255]<<16^g[L>>24&255]<<24,w=m/2+1;w<m;w++)M[w]^=M[w-1]}for(w=0;w<m&&D<_;)G=D>>2,H=D%4,this._Ke[G][H]=M[w],this._Kd[v-G][H]=M[w++],D++}for(var G=1;G<v;G++)for(var H=0;H<4;H++)L=this._Kd[G][H],this._Kd[G][H]=q[L>>24&255]^W[L>>16&255]^Z[L>>8&255]^K[255&L]},y.prototype.encrypt=function(v){if(v.length!=16)throw new Error("invalid plaintext size (must be 16 bytes)");for(var w=this._Ke.length-1,P=[0,0,0,0],_=se(v),m=0;m<4;m++)_[m]^=this._Ke[0][m];for(var M=1;M<w;M++){for(m=0;m<4;m++)P[m]=A[_[m]>>24&255]^E[_[(m+1)%4]>>16&255]^I[_[(m+2)%4]>>8&255]^T[255&_[(m+3)%4]]^this._Ke[M][m];_=P.slice()}var L,k=i(16);for(m=0;m<4;m++)L=this._Ke[w][m],k[4*m]=255&(g[_[m]>>24&255]^L>>24),k[4*m+1]=255&(g[_[(m+1)%4]>>16&255]^L>>16),k[4*m+2]=255&(g[_[(m+2)%4]>>8&255]^L>>8),k[4*m+3]=255&(g[255&_[(m+3)%4]]^L);return k},y.prototype.decrypt=function(v){if(v.length!=16)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var w=this._Kd.length-1,P=[0,0,0,0],_=se(v),m=0;m<4;m++)_[m]^=this._Kd[0][m];for(var M=1;M<w;M++){for(m=0;m<4;m++)P[m]=R[_[m]>>24&255]^O[_[(m+3)%4]>>16&255]^B[_[(m+2)%4]>>8&255]^U[255&_[(m+1)%4]]^this._Kd[M][m];_=P.slice()}var L,k=i(16);for(m=0;m<4;m++)L=this._Kd[w][m],k[4*m]=255&(x[_[m]>>24&255]^L>>24),k[4*m+1]=255&(x[_[(m+3)%4]>>16&255]^L>>16),k[4*m+2]=255&(x[_[(m+2)%4]>>8&255]^L>>8),k[4*m+3]=255&(x[255&_[(m+1)%4]]^L);return k};var S=function(v){if(!(this instanceof S))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new y(v)};S.prototype.encrypt=function(v){if((v=r(v)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var w=i(v.length),P=i(16),_=0;_<v.length;_+=16)s(v,P,0,_,_+16),s(P=this._aes.encrypt(P),w,_);return w},S.prototype.decrypt=function(v){if((v=r(v)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var w=i(v.length),P=i(16),_=0;_<v.length;_+=16)s(v,P,0,_,_+16),s(P=this._aes.decrypt(P),w,_);return w};var C=function(v,w){if(!(this instanceof C))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",w){if(w.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)")}else w=i(16);this._lastCipherblock=r(w,!0),this._aes=new y(v)};C.prototype.encrypt=function(v){if((v=r(v)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var w=i(v.length),P=i(16),_=0;_<v.length;_+=16){s(v,P,0,_,_+16);for(var m=0;m<16;m++)P[m]^=this._lastCipherblock[m];this._lastCipherblock=this._aes.encrypt(P),s(this._lastCipherblock,w,_)}return w},C.prototype.decrypt=function(v){if((v=r(v)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var w=i(v.length),P=i(16),_=0;_<v.length;_+=16){s(v,P,0,_,_+16),P=this._aes.decrypt(P);for(var m=0;m<16;m++)w[_+m]=P[m]^this._lastCipherblock[m];s(v,this._lastCipherblock,0,_,_+16)}return w};var p=function(v,w,P){if(!(this instanceof p))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",w){if(w.length!=16)throw new Error("invalid initialation vector size (must be 16 size)")}else w=i(16);P||(P=1),this.segmentSize=P,this._shiftRegister=r(w,!0),this._aes=new y(v)};p.prototype.encrypt=function(v){if(v.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var w,P=r(v,!0),_=0;_<P.length;_+=this.segmentSize){w=this._aes.encrypt(this._shiftRegister);for(var m=0;m<this.segmentSize;m++)P[_+m]^=w[m];s(this._shiftRegister,this._shiftRegister,0,this.segmentSize),s(P,this._shiftRegister,16-this.segmentSize,_,_+this.segmentSize)}return P},p.prototype.decrypt=function(v){if(v.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var w,P=r(v,!0),_=0;_<P.length;_+=this.segmentSize){w=this._aes.encrypt(this._shiftRegister);for(var m=0;m<this.segmentSize;m++)P[_+m]^=w[m];s(this._shiftRegister,this._shiftRegister,0,this.segmentSize),s(v,this._shiftRegister,16-this.segmentSize,_,_+this.segmentSize)}return P};var c=function(v,w){if(!(this instanceof c))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",w){if(w.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)")}else w=i(16);this._lastPrecipher=r(w,!0),this._lastPrecipherIndex=16,this._aes=new y(v)};c.prototype.encrypt=function(v){for(var w=r(v,!0),P=0;P<w.length;P++)this._lastPrecipherIndex===16&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),w[P]^=this._lastPrecipher[this._lastPrecipherIndex++];return w},c.prototype.decrypt=c.prototype.encrypt;var d=function(v){if(!(this instanceof d))throw Error("Counter must be instanitated with `new`");v===0||v||(v=1),typeof v=="number"?(this._counter=i(16),this.setValue(v)):this.setBytes(v)};d.prototype.setValue=function(v){if(typeof v!="number"||parseInt(v)!=v)throw new Error("invalid counter value (must be an integer)");for(var w=15;w>=0;--w)this._counter[w]=v%256,v>>=8},d.prototype.setBytes=function(v){if((v=r(v,!0)).length!=16)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=v},d.prototype.increment=function(){for(var v=15;v>=0;v--){if(this._counter[v]!==255){this._counter[v]++;break}this._counter[v]=0}};var f=function(v,w){if(!(this instanceof f))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",w instanceof d||(w=new d(w)),this._counter=w,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new y(v)};f.prototype.encrypt=function(v){for(var w=r(v,!0),P=0;P<w.length;P++)this._remainingCounterIndex===16&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),w[P]^=this._remainingCounter[this._remainingCounterIndex++];return w},f.prototype.decrypt=f.prototype.encrypt;var N={AES:y,Counter:d,ModeOfOperation:{ecb:S,cbc:C,cfb:p,ofb:c,ctr:f},utils:{hex:l,utf8:a},padding:{pkcs7:{pad:function(v){var w=16-(v=r(v,!0)).length%16,P=i(v.length+w);s(v,P);for(var _=v.length;_<P.length;_++)P[_]=w;return P},strip:function(v){if((v=r(v,!0)).length<16)throw new Error("PKCS#7 invalid length");var w=v[v.length-1];if(w>16)throw new Error("PKCS#7 padding byte out of range");for(var P=v.length-w,_=0;_<w;_++)if(v[P+_]!==w)throw new Error("PKCS#7 invalid padding byte");var m=i(P);return s(v,m,0,0,P),m}}},_arrayTest:{coerceArray:r,createArray:i,copyArray:s}};n.exports=N})()}(Mu)),Mu.exports),An=ks(ig);const E0="json-wallets/5.8.0";function Pi(n){return typeof n=="string"&&n.substring(0,2)!=="0x"&&(n="0x"+n),Y(n)}function Os(n,e){for(n=String(n);n.length<e;)n="0"+n;return n}function nh(n){return typeof n=="string"?zt(n,Pn.NFKC):Y(n)}function Ft(n,e){let t=n;const r=e.toLowerCase().split("/");for(let i=0;i<r.length;i++){let s=null;for(const o in t)if(o.toLowerCase()===r[i]){s=t[o];break}if(s===null)return null;t=s}return t}function sg(n){const e=Y(n);e[6]=15&e[6]|64,e[8]=63&e[8]|128;const t=te(e);return[t.substring(2,10),t.substring(10,14),t.substring(14,18),t.substring(18,22),t.substring(22,34)].join("-")}const og=new F(E0);class ag extends Wi{isCrowdsaleAccount(e){return!(!e||!e._isCrowdsaleAccount)}}function x0(n,e){const t=JSON.parse(n);e=nh(e);const r=At(Ft(t,"ethaddr")),i=Pi(Ft(t,"encseed"));i&&i.length%16==0||og.throwArgumentError("invalid encseed","json",n);const s=Y(th(e,e,2e3,32,"sha256")).slice(0,16),o=i.slice(0,16),a=i.slice(16),l=new An.ModeOfOperation.cbc(s,o),h=An.padding.pkcs7.strip(Y(l.decrypt(a)));let u="";for(let x=0;x<h.length;x++)u+=String.fromCharCode(h[x]);const g=_t(zt(u));return new ag({_isCrowdsaleAccount:!0,address:r,privateKey:g})}function ih(n){let e=null;try{e=JSON.parse(n)}catch{return!1}return e.encseed&&e.ethaddr}function sh(n){let e=null;try{e=JSON.parse(n)}catch{return!1}return!(!e.version||parseInt(e.version)!==e.version||parseInt(e.version)!==3)}var Tu,Ru={exports:{}},lg=(Tu||(Tu=1,function(n){(function(){function t(A){const E=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);let I=1779033703,T=3144134277,R=1013904242,O=2773480762,B=1359893119,U=2600822924,q=528734635,W=1541459225;const Z=new Uint32Array(64);function K(d){let f=0,N=d.length;for(;N>=64;){let v,w,P,_,m,M=I,L=T,k=R,D=O,G=B,H=U,V=q,re=W;for(w=0;w<16;w++)P=f+4*w,Z[w]=(255&d[P])<<24|(255&d[P+1])<<16|(255&d[P+2])<<8|255&d[P+3];for(w=16;w<64;w++)v=Z[w-2],_=(v>>>17|v<<15)^(v>>>19|v<<13)^v>>>10,v=Z[w-15],m=(v>>>7|v<<25)^(v>>>18|v<<14)^v>>>3,Z[w]=(_+Z[w-7]|0)+(m+Z[w-16]|0)|0;for(w=0;w<64;w++)_=(((G>>>6|G<<26)^(G>>>11|G<<21)^(G>>>25|G<<7))+(G&H^~G&V)|0)+(re+(E[w]+Z[w]|0)|0)|0,m=((M>>>2|M<<30)^(M>>>13|M<<19)^(M>>>22|M<<10))+(M&L^M&k^L&k)|0,re=V,V=H,H=G,G=D+_|0,D=k,k=L,L=M,M=_+m|0;I=I+M|0,T=T+L|0,R=R+k|0,O=O+D|0,B=B+G|0,U=U+H|0,q=q+V|0,W=W+re|0,f+=64,N-=64}}K(A);let se,y=A.length%64,S=A.length/536870912|0,C=A.length<<3,p=y<56?56:120,c=A.slice(A.length-y,A.length);for(c.push(128),se=y+1;se<p;se++)c.push(0);return c.push(S>>>24&255),c.push(S>>>16&255),c.push(S>>>8&255),c.push(S>>>0&255),c.push(C>>>24&255),c.push(C>>>16&255),c.push(C>>>8&255),c.push(C>>>0&255),K(c),[I>>>24&255,I>>>16&255,I>>>8&255,I>>>0&255,T>>>24&255,T>>>16&255,T>>>8&255,T>>>0&255,R>>>24&255,R>>>16&255,R>>>8&255,R>>>0&255,O>>>24&255,O>>>16&255,O>>>8&255,O>>>0&255,B>>>24&255,B>>>16&255,B>>>8&255,B>>>0&255,U>>>24&255,U>>>16&255,U>>>8&255,U>>>0&255,q>>>24&255,q>>>16&255,q>>>8&255,q>>>0&255,W>>>24&255,W>>>16&255,W>>>8&255,W>>>0&255]}function r(A,E,I){A=A.length<=64?A:t(A);const T=64+E.length+4,R=new Array(T),O=new Array(64);let B,U=[];for(B=0;B<64;B++)R[B]=54;for(B=0;B<A.length;B++)R[B]^=A[B];for(B=0;B<E.length;B++)R[64+B]=E[B];for(B=T-4;B<T;B++)R[B]=0;for(B=0;B<64;B++)O[B]=92;for(B=0;B<A.length;B++)O[B]^=A[B];function q(){for(let W=T-1;W>=T-4;W--){if(R[W]++,R[W]<=255)return;R[W]=0}}for(;I>=32;)q(),U=U.concat(t(O.concat(t(R)))),I-=32;return I>0&&(q(),U=U.concat(t(O.concat(t(R))).slice(0,I))),U}function i(A,E,I,T,R){let O;for(l(A,16*(2*I-1),R,0,16),O=0;O<2*I;O++)a(A,16*O,R,16),o(R,T),l(R,0,A,E+16*O,16);for(O=0;O<I;O++)l(A,E+2*O*16,A,16*O,16);for(O=0;O<I;O++)l(A,E+16*(2*O+1),A,16*(O+I),16)}function s(A,E){return A<<E|A>>>32-E}function o(A,E){l(A,0,E,0,16);for(let I=8;I>0;I-=2)E[4]^=s(E[0]+E[12],7),E[8]^=s(E[4]+E[0],9),E[12]^=s(E[8]+E[4],13),E[0]^=s(E[12]+E[8],18),E[9]^=s(E[5]+E[1],7),E[13]^=s(E[9]+E[5],9),E[1]^=s(E[13]+E[9],13),E[5]^=s(E[1]+E[13],18),E[14]^=s(E[10]+E[6],7),E[2]^=s(E[14]+E[10],9),E[6]^=s(E[2]+E[14],13),E[10]^=s(E[6]+E[2],18),E[3]^=s(E[15]+E[11],7),E[7]^=s(E[3]+E[15],9),E[11]^=s(E[7]+E[3],13),E[15]^=s(E[11]+E[7],18),E[1]^=s(E[0]+E[3],7),E[2]^=s(E[1]+E[0],9),E[3]^=s(E[2]+E[1],13),E[0]^=s(E[3]+E[2],18),E[6]^=s(E[5]+E[4],7),E[7]^=s(E[6]+E[5],9),E[4]^=s(E[7]+E[6],13),E[5]^=s(E[4]+E[7],18),E[11]^=s(E[10]+E[9],7),E[8]^=s(E[11]+E[10],9),E[9]^=s(E[8]+E[11],13),E[10]^=s(E[9]+E[8],18),E[12]^=s(E[15]+E[14],7),E[13]^=s(E[12]+E[15],9),E[14]^=s(E[13]+E[12],13),E[15]^=s(E[14]+E[13],18);for(let I=0;I<16;++I)A[I]+=E[I]}function a(A,E,I,T){for(let R=0;R<T;R++)I[R]^=A[E+R]}function l(A,E,I,T,R){for(;R--;)I[T++]=A[E++]}function h(A){if(!A||typeof A.length!="number")return!1;for(let E=0;E<A.length;E++){const I=A[E];if(typeof I!="number"||I%1||I<0||I>=256)return!1}return!0}function u(A,E){if(typeof A!="number"||A%1)throw new Error("invalid "+E);return A}function g(A,E,I,T,R,O,B){if(I=u(I,"N"),T=u(T,"r"),R=u(R,"p"),O=u(O,"dkLen"),I===0||I&I-1)throw new Error("N must be power of 2");if(I>2147483647/128/T)throw new Error("N too large");if(T>2147483647/128/R)throw new Error("r too large");if(!h(A))throw new Error("password must be an array or buffer");if(A=Array.prototype.slice.call(A),!h(E))throw new Error("salt must be an array or buffer");E=Array.prototype.slice.call(E);let U=r(A,E,128*R*T);const q=new Uint32Array(32*R*T);for(let m=0;m<q.length;m++){const M=4*m;q[m]=(255&U[M+3])<<24|(255&U[M+2])<<16|(255&U[M+1])<<8|255&U[M+0]}const W=new Uint32Array(64*T),Z=new Uint32Array(32*T*I),K=32*T,se=new Uint32Array(16),y=new Uint32Array(16),S=R*I*2;let C,p,c=0,d=null,f=!1,N=0,v=0;const w=B?parseInt(1e3/T):4294967295,P=typeof setImmediate<"u"?setImmediate:setTimeout,_=function(){if(f)return B(new Error("cancelled"),c/S);let m;switch(N){case 0:p=32*v*T,l(q,p,W,0,K),N=1,C=0;case 1:m=I-C,m>w&&(m=w);for(let L=0;L<m;L++)l(W,0,Z,(C+L)*K,K),i(W,K,T,se,y);if(C+=m,c+=m,B){const L=parseInt(1e3*c/S);if(L!==d){if(f=B(null,c/S),f)break;d=L}}if(C<I)break;C=0,N=2;case 2:m=I-C,m>w&&(m=w);for(let L=0;L<m;L++){const k=W[16*(2*T-1)]&I-1;a(Z,k*K,W,K),i(W,K,T,se,y)}if(C+=m,c+=m,B){const L=parseInt(1e3*c/S);if(L!==d){if(f=B(null,c/S),f)break;d=L}}if(C<I)break;if(l(W,0,q,p,K),v++,v<R){N=0;break}U=[];for(let L=0;L<q.length;L++)U.push(255&q[L]),U.push(q[L]>>8&255),U.push(q[L]>>16&255),U.push(q[L]>>24&255);const M=r(A,U,O);return B&&B(null,1,M),M}B&&P(_)};if(!B)for(;;){const m=_();if(m!=null)return m}_()}const x={scrypt:function(A,E,I,T,R,O,B){return new Promise(function(U,q){let W=0;B&&B(0),g(A,E,I,T,R,O,function(Z,K,se){if(Z)q(Z);else if(se)B&&W!==1&&B(1),U(new Uint8Array(se));else if(B&&K!==W)return W=K,B(K)})})},syncScrypt:function(A,E,I,T,R,O){return new Uint8Array(g(A,E,I,T,R,O))}};n.exports=x})()}(Ru)),Ru.exports),oh=ks(lg),cg=function(n,e,t,r){return new(t||(t=Promise))(function(i,s){function o(h){try{l(r.next(h))}catch(u){s(u)}}function a(h){try{l(r.throw(h))}catch(u){s(u)}}function l(h){var u;h.done?i(h.value):(u=h.value,u instanceof t?u:new t(function(g){g(u)})).then(o,a)}l((r=r.apply(n,e||[])).next())})};const kc=new F(E0);function Bu(n){return n!=null&&n.mnemonic&&n.mnemonic.phrase}class hg extends Wi{isKeystoreAccount(e){return!(!e||!e._isKeystoreAccount)}}function _0(n,e){const t=Pi(Ft(n,"crypto/ciphertext"));if(te(_t(kt([e.slice(16,32),t]))).substring(2)!==Ft(n,"crypto/mac").toLowerCase())throw new Error("invalid password");const r=function(a,l,h){if(Ft(a,"crypto/cipher")==="aes-128-ctr"){const u=Pi(Ft(a,"crypto/cipherparams/iv")),g=new An.Counter(u);return Y(new An.ModeOfOperation.ctr(l,g).decrypt(h))}return null}(n,e.slice(0,16),t);r||kc.throwError("unsupported cipher",F.errors.UNSUPPORTED_OPERATION,{operation:"decrypt"});const i=e.slice(32,64),s=oi(r);if(n.address){let a=n.address.toLowerCase();if(a.substring(0,2)!=="0x"&&(a="0x"+a),At(a)!==s)throw new Error("address mismatch")}const o={_isKeystoreAccount:!0,address:s,privateKey:te(r)};if(Ft(n,"x-ethers/version")==="0.1"){const a=Pi(Ft(n,"x-ethers/mnemonicCiphertext")),l=Pi(Ft(n,"x-ethers/mnemonicCounter")),h=new An.Counter(l),u=new An.ModeOfOperation.ctr(i,h),g=Ft(n,"x-ethers/path")||as,x=Ft(n,"x-ethers/locale")||"en",A=Y(u.decrypt(a));try{const E=Va(A,x),I=kr.fromMnemonic(E,null,x).derivePath(g);if(I.privateKey!=o.privateKey)throw new Error("mnemonic mismatch");o.mnemonic=I.mnemonic}catch(E){if(E.code!==F.errors.INVALID_ARGUMENT||E.argument!=="wordlist")throw E}}return new hg(o)}function k0(n,e,t,r,i){return Y(th(n,e,t,r,i))}function ug(n,e,t,r,i){return Promise.resolve(k0(n,e,t,r,i))}function S0(n,e,t,r,i){const s=nh(e),o=Ft(n,"crypto/kdf");if(o&&typeof o=="string"){const a=function(l,h){return kc.throwArgumentError("invalid key-derivation function parameters",l,h)};if(o.toLowerCase()==="scrypt"){const l=Pi(Ft(n,"crypto/kdfparams/salt")),h=parseInt(Ft(n,"crypto/kdfparams/n")),u=parseInt(Ft(n,"crypto/kdfparams/r")),g=parseInt(Ft(n,"crypto/kdfparams/p"));h&&u&&g||a("kdf",o),h&h-1&&a("N",h);const x=parseInt(Ft(n,"crypto/kdfparams/dklen"));return x!==32&&a("dklen",x),r(s,l,h,u,g,64,i)}if(o.toLowerCase()==="pbkdf2"){const l=Pi(Ft(n,"crypto/kdfparams/salt"));let h=null;const u=Ft(n,"crypto/kdfparams/prf");u==="hmac-sha256"?h="sha256":u==="hmac-sha512"?h="sha512":a("prf",u);const g=parseInt(Ft(n,"crypto/kdfparams/c")),x=parseInt(Ft(n,"crypto/kdfparams/dklen"));return x!==32&&a("dklen",x),t(s,l,g,x,h)}}return kc.throwArgumentError("unsupported key-derivation function","kdf",o)}function fg(n,e,t){if(ih(n)){t&&t(0);const r=x0(n,e);return t&&t(1),Promise.resolve(r)}return sh(n)?function(r,i,s){return cg(this,void 0,void 0,function*(){const o=JSON.parse(r);return _0(o,yield S0(o,i,ug,oh.scrypt,s))})}(n,e,t):Promise.reject(new Error("invalid JSON wallet"))}function dg(n,e){if(ih(n))return x0(n,e);if(sh(n))return function(t,r){const i=JSON.parse(t);return _0(i,S0(i,r,k0,oh.syncScrypt))}(n,e);throw new Error("invalid JSON wallet")}var Ou=function(n,e,t,r){return new(t||(t=Promise))(function(i,s){function o(h){try{l(r.next(h))}catch(u){s(u)}}function a(h){try{l(r.throw(h))}catch(u){s(u)}}function l(h){var u;h.done?i(h.value):(u=h.value,u instanceof t?u:new t(function(g){g(u)})).then(o,a)}l((r=r.apply(n,e||[])).next())})};const Zi=new F("wallet/5.8.0");class ki extends ci{constructor(e,t){if(super(),(r=e)!=null&&Te(r.privateKey,32)&&r.address!=null){const i=new Ti(e.privateKey);if(j(this,"_signingKey",()=>i),j(this,"address",oi(this.publicKey)),this.address!==At(e.address)&&Zi.throwArgumentError("privateKey/address mismatch","privateKey","[REDACTED]"),function(s){const o=s.mnemonic;return o&&o.phrase}(e)){const s=e.mnemonic;j(this,"_mnemonic",()=>({phrase:s.phrase,path:s.path||as,locale:s.locale||"en"}));const o=this.mnemonic;oi(kr.fromMnemonic(o.phrase,null,o.locale).derivePath(o.path).privateKey)!==this.address&&Zi.throwArgumentError("mnemonic/address mismatch","privateKey","[REDACTED]")}else j(this,"_mnemonic",()=>null)}else{if(Ti.isSigningKey(e))e.curve!=="secp256k1"&&Zi.throwArgumentError("unsupported curve; must be secp256k1","privateKey","[REDACTED]"),j(this,"_signingKey",()=>e);else{typeof e=="string"&&e.match(/^[0-9a-f]*$/i)&&e.length===64&&(e="0x"+e);const i=new Ti(e);j(this,"_signingKey",()=>i)}j(this,"_mnemonic",()=>null),j(this,"address",oi(this.publicKey))}var r;t&&!Ki.isProvider(t)&&Zi.throwArgumentError("invalid provider","provider",t),j(this,"provider",t||null)}get mnemonic(){return this._mnemonic()}get privateKey(){return this._signingKey().privateKey}get publicKey(){return this._signingKey().publicKey}getAddress(){return Promise.resolve(this.address)}connect(e){return new ki(this,e)}signTransaction(e){return Ot(e).then(t=>{t.from!=null&&(At(t.from)!==this.address&&Zi.throwArgumentError("transaction from address mismatch","transaction.from",e.from),delete t.from);const r=this._signingKey().signDigest(_t(Ec(t)));return Ec(t,r)})}signMessage(e){return Ou(this,void 0,void 0,function*(){return dc(this._signingKey().signDigest(yc(e)))})}_signTypedData(e,t,r){return Ou(this,void 0,void 0,function*(){const i=yield er.resolveNames(e,t,r,s=>(this.provider==null&&Zi.throwError("cannot resolve ENS names without a provider",F.errors.UNSUPPORTED_OPERATION,{operation:"resolveName",value:s}),this.provider.resolveName(s)));return dc(this._signingKey().signDigest(er.hash(i.domain,t,i.value)))})}encrypt(e,t,r){if(typeof t!="function"||r||(r=t,t={}),r&&typeof r!="function")throw new Error("invalid callback");return t||(t={}),function(i,s,o,a){try{if(At(i.address)!==oi(i.privateKey))throw new Error("address/privateKey mismatch");if(Bu(i)){const U=i.mnemonic;if(kr.fromMnemonic(U.phrase,null,U.locale).derivePath(U.path||as).privateKey!=i.privateKey)throw new Error("mnemonic mismatch")}}catch(U){return Promise.reject(U)}typeof o!="function"||a||(a=o,o={}),o||(o={});const l=Y(i.privateKey),h=nh(s);let u=null,g=null,x=null;if(Bu(i)){const U=i.mnemonic;u=Y(Ma(U.phrase,U.locale||"en")),g=U.path||as,x=U.locale||"en"}let A=o.client;A||(A="ethers.js");let E=null;E=o.salt?Y(o.salt):rs(32);let I=null;if(o.iv){if(I=Y(o.iv),I.length!==16)throw new Error("invalid iv")}else I=rs(16);let T=null;if(o.uuid){if(T=Y(o.uuid),T.length!==16)throw new Error("invalid uuid")}else T=rs(16);let R=1<<17,O=8,B=1;return o.scrypt&&(o.scrypt.N&&(R=o.scrypt.N),o.scrypt.r&&(O=o.scrypt.r),o.scrypt.p&&(B=o.scrypt.p)),oh.scrypt(h,E,R,O,B,64,a).then(U=>{const q=(U=Y(U)).slice(0,16),W=U.slice(16,32),Z=U.slice(32,64),K=new An.Counter(I),se=Y(new An.ModeOfOperation.ctr(q,K).encrypt(l)),y=_t(kt([W,se])),S={address:i.address.substring(2).toLowerCase(),id:sg(T),version:3,crypto:{cipher:"aes-128-ctr",cipherparams:{iv:te(I).substring(2)},ciphertext:te(se).substring(2),kdf:"scrypt",kdfparams:{salt:te(E).substring(2),n:R,dklen:32,p:B,r:O},mac:y.substring(2)}};if(u){const C=rs(16),p=new An.Counter(C),c=Y(new An.ModeOfOperation.ctr(Z,p).encrypt(u)),d=new Date,f=d.getUTCFullYear()+"-"+Os(d.getUTCMonth()+1,2)+"-"+Os(d.getUTCDate(),2)+"T"+Os(d.getUTCHours(),2)+"-"+Os(d.getUTCMinutes(),2)+"-"+Os(d.getUTCSeconds(),2)+".0Z";S["x-ethers"]={client:A,gethFilename:"UTC--"+f+"--"+S.address,mnemonicCounter:te(C).substring(2),mnemonicCiphertext:te(c).substring(2),path:g,locale:x,version:"0.1"}}return JSON.stringify(S)})}(this,e,t,r)}static createRandom(e){let t=rs(16);e||(e={}),e.extraEntropy&&(t=Y(Lt(_t(kt([t,e.extraEntropy])),0,16)));const r=Va(t,e.locale);return ki.fromMnemonic(r,e.path,e.locale)}static fromEncryptedJson(e,t,r){return fg(e,t,r).then(i=>new ki(i))}static fromEncryptedJsonSync(e,t){return new ki(dg(e,t))}static fromMnemonic(e,t,r){return t||(t=as),new ki(kr.fromMnemonic(e,null,r).derivePath(t))}}const Fu=new F("networks/5.8.0");function Zr(n){const e=function(t,r){r==null&&(r={});const i=[];if(t.InfuraProvider&&r.infura!=="-")try{i.push(new t.InfuraProvider(n,r.infura))}catch{}if(t.EtherscanProvider&&r.etherscan!=="-")try{i.push(new t.EtherscanProvider(n,r.etherscan))}catch{}if(t.AlchemyProvider&&r.alchemy!=="-")try{i.push(new t.AlchemyProvider(n,r.alchemy))}catch{}if(t.PocketProvider&&r.pocket!=="-"){const s=["goerli","ropsten","rinkeby","sepolia"];try{const o=new t.PocketProvider(n,r.pocket);o.network&&s.indexOf(o.network.name)===-1&&i.push(o)}catch{}}if(t.CloudflareProvider&&r.cloudflare!=="-")try{i.push(new t.CloudflareProvider(n))}catch{}if(t.AnkrProvider&&r.ankr!=="-")try{const s=["ropsten"],o=new t.AnkrProvider(n,r.ankr);o.network&&s.indexOf(o.network.name)===-1&&i.push(o)}catch{}if(t.QuickNodeProvider&&r.quicknode!=="-")try{i.push(new t.QuickNodeProvider(n,r.quicknode))}catch{}if(i.length===0)return null;if(t.FallbackProvider){let s=1;return r.quorum!=null?s=r.quorum:n==="homestead"&&(s=2),new t.FallbackProvider(i,s)}return i[0]};return e.renetwork=function(t){return Zr(t)},e}function Ta(n,e){const t=function(r,i){return r.JsonRpcProvider?new r.JsonRpcProvider(n,e):null};return t.renetwork=function(r){return Ta(n,r)},t}const Du={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:Zr("homestead")},Lu={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:Zr("ropsten")},Uu={chainId:63,name:"classicMordor",_defaultProvider:Ta("https://www.ethercluster.com/mordor","classicMordor")},Ho={unspecified:{chainId:0,name:"unspecified"},homestead:Du,mainnet:Du,morden:{chainId:2,name:"morden"},ropsten:Lu,testnet:Lu,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:Zr("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:Zr("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:Zr("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"sepolia",_defaultProvider:Zr("sepolia")},holesky:{chainId:17e3,name:"holesky",_defaultProvider:Zr("holesky")},classic:{chainId:61,name:"classic",_defaultProvider:Ta("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:Uu,classicTestnet:Uu,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:Ta("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:Zr("matic")},maticmum:{chainId:80001,name:"maticmum",_defaultProvider:Zr("maticmum")},optimism:{chainId:10,name:"optimism",_defaultProvider:Zr("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},"optimism-sepolia":{chainId:11155420,name:"optimism-sepolia"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},"arbitrum-sepolia":{chainId:421614,name:"arbitrum-sepolia"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function ah(n){if(n==null)return null;if(typeof n=="number"){for(const i in Ho){const s=Ho[i];if(s.chainId===n)return{name:s.name,chainId:s.chainId,ensAddress:s.ensAddress||null,_defaultProvider:s._defaultProvider||null}}return{chainId:n,name:"unknown"}}if(typeof n=="string"){const i=Ho[n];return i==null?null:{name:i.name,chainId:i.chainId,ensAddress:i.ensAddress,_defaultProvider:i._defaultProvider||null}}const e=Ho[n.name];if(!e)return typeof n.chainId!="number"&&Fu.throwArgumentError("invalid network chainId","network",n),n;n.chainId!==0&&n.chainId!==e.chainId&&Fu.throwArgumentError("network chainId mismatch","network",n);let t=n._defaultProvider||null;var r;return t==null&&e._defaultProvider&&(t=(r=e._defaultProvider)&&typeof r.renetwork=="function"?e._defaultProvider.renetwork(n):e._defaultProvider),{name:n.name,chainId:e.chainId,ensAddress:n.ensAddress||e.ensAddress||null,_defaultProvider:t}}var pg=function(n,e,t,r){return new(t||(t=Promise))(function(i,s){function o(h){try{l(r.next(h))}catch(u){s(u)}}function a(h){try{l(r.throw(h))}catch(u){s(u)}}function l(h){var u;h.done?i(h.value):(u=h.value,u instanceof t?u:new t(function(g){g(u)})).then(o,a)}l((r=r.apply(n,e||[])).next())})};function mg(n,e){return pg(this,void 0,void 0,function*(){e==null&&(e={});const t={method:e.method||"GET",headers:e.headers||{},body:e.body||void 0};if(e.skipFetchSetup!==!0&&(t.mode="cors",t.cache="no-cache",t.credentials="same-origin",t.redirect="follow",t.referrer="client"),e.fetchOptions!=null){const o=e.fetchOptions;o.mode&&(t.mode=o.mode),o.cache&&(t.cache=o.cache),o.credentials&&(t.credentials=o.credentials),o.redirect&&(t.redirect=o.redirect),o.referrer&&(t.referrer=o.referrer)}const r=yield fetch(n,t),i=yield r.arrayBuffer(),s={};return r.headers.forEach?r.headers.forEach((o,a)=>{s[a.toLowerCase()]=o}):r.headers.keys().forEach(o=>{s[o.toLowerCase()]=r.headers.get(o)}),{headers:s,statusCode:r.status,statusMessage:r.statusText,body:Y(new Uint8Array(i))}})}var gg=function(n,e,t,r){return new(t||(t=Promise))(function(i,s){function o(h){try{l(r.next(h))}catch(u){s(u)}}function a(h){try{l(r.throw(h))}catch(u){s(u)}}function l(h){var u;h.done?i(h.value):(u=h.value,u instanceof t?u:new t(function(g){g(u)})).then(o,a)}l((r=r.apply(n,e||[])).next())})};const Yr=new F("web/5.8.0");function zu(n){return new Promise(e=>{setTimeout(e,n)})}function Yn(n,e){if(n==null)return null;if(typeof n=="string")return n;if(ko(n)){if(e&&(e.split("/")[0]==="text"||e.split(";")[0].trim()==="application/json"))try{return Fi(n)}catch{}return te(n)}return n}function N0(n,e,t){const r=typeof n=="object"&&n.throttleLimit!=null?n.throttleLimit:12;Yr.assertArgument(r>0&&r%1==0,"invalid connection throttle limit","connection.throttleLimit",r);const i=typeof n=="object"?n.throttleCallback:null,s=typeof n=="object"&&typeof n.throttleSlotInterval=="number"?n.throttleSlotInterval:100;Yr.assertArgument(s>0&&s%1==0,"invalid connection throttle slot interval","connection.throttleSlotInterval",s);const o=typeof n=="object"&&!!n.errorPassThrough,a={};let l=null;const h={method:"GET"};let u=!1,g=12e4;if(typeof n=="string")l=n;else if(typeof n=="object"){if(n!=null&&n.url!=null||Yr.throwArgumentError("missing URL","connection.url",n),l=n.url,typeof n.timeout=="number"&&n.timeout>0&&(g=n.timeout),n.headers)for(const O in n.headers)a[O.toLowerCase()]={key:O,value:String(n.headers[O])},["if-none-match","if-modified-since"].indexOf(O.toLowerCase())>=0&&(u=!0);if(h.allowGzip=!!n.allowGzip,n.user!=null&&n.password!=null){l.substring(0,6)!=="https:"&&n.allowInsecureAuthentication!==!0&&Yr.throwError("basic authentication requires a secure https url",F.errors.INVALID_ARGUMENT,{argument:"url",url:l,user:n.user,password:"[REDACTED]"});const O=n.user+":"+n.password;a.authorization={key:"Authorization",value:"Basic "+Yc(zt(O))}}n.skipFetchSetup!=null&&(h.skipFetchSetup=!!n.skipFetchSetup),n.fetchOptions!=null&&(h.fetchOptions=Nt(n.fetchOptions))}const x=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),A=l?l.match(x):null;if(A)try{const O={statusCode:200,statusMessage:"OK",headers:{"content-type":A[1]||"text/plain"},body:A[2]?Qc(A[3]):(E=A[3],zt(E.replace(/%([0-9a-f][0-9a-f])/gi,(U,q)=>String.fromCharCode(parseInt(q,16)))))};let B=O.body;return t&&(B=t(O.body,O)),Promise.resolve(B)}catch(O){Yr.throwError("processing response error",F.errors.SERVER_ERROR,{body:Yn(A[1],A[2]),error:O,requestBody:null,requestMethod:"GET",url:l})}var E;e&&(h.method="POST",h.body=e,a["content-type"]==null&&(a["content-type"]={key:"Content-Type",value:"application/octet-stream"}),a["content-length"]==null&&(a["content-length"]={key:"Content-Length",value:String(e.length)}));const I={};Object.keys(a).forEach(O=>{const B=a[O];I[B.key]=B.value}),h.headers=I;const T=function(){let O=null;return{promise:new Promise(function(B,U){g&&(O=setTimeout(()=>{O!=null&&(O=null,U(Yr.makeError("timeout",F.errors.TIMEOUT,{requestBody:Yn(h.body,I["content-type"]),requestMethod:h.method,timeout:g,url:l})))},g))}),cancel:function(){O!=null&&(clearTimeout(O),O=null)}}}(),R=function(){return gg(this,void 0,void 0,function*(){for(let O=0;O<r;O++){let B=null;try{if(B=yield mg(l,h),O<r){if(B.statusCode===301||B.statusCode===302){const q=B.headers.location||"";if(h.method==="GET"&&q.match(/^https:/)){l=B.headers.location;continue}}else if(B.statusCode===429){let q=!0;if(i&&(q=yield i(O,l)),q){let W=0;const Z=B.headers["retry-after"];W=typeof Z=="string"&&Z.match(/^[1-9][0-9]*$/)?1e3*parseInt(Z):s*parseInt(String(Math.random()*Math.pow(2,O))),yield zu(W);continue}}}}catch(q){B=q.response,B==null&&(T.cancel(),Yr.throwError("missing response",F.errors.SERVER_ERROR,{requestBody:Yn(h.body,I["content-type"]),requestMethod:h.method,serverError:q,url:l}))}let U=B.body;if(u&&B.statusCode===304?U=null:!o&&(B.statusCode<200||B.statusCode>=300)&&(T.cancel(),Yr.throwError("bad response",F.errors.SERVER_ERROR,{status:B.statusCode,headers:B.headers,body:Yn(U,B.headers?B.headers["content-type"]:null),requestBody:Yn(h.body,I["content-type"]),requestMethod:h.method,url:l})),t)try{const q=yield t(U,B);return T.cancel(),q}catch(q){if(q.throttleRetry&&O<r){let W=!0;if(i&&(W=yield i(O,l)),W){const Z=s*parseInt(String(Math.random()*Math.pow(2,O)));yield zu(Z);continue}}T.cancel(),Yr.throwError("processing response error",F.errors.SERVER_ERROR,{body:Yn(U,B.headers?B.headers["content-type"]:null),error:q,requestBody:Yn(h.body,I["content-type"]),requestMethod:h.method,url:l})}return T.cancel(),U}return Yr.throwError("failed response",F.errors.SERVER_ERROR,{requestBody:Yn(h.body,I["content-type"]),requestMethod:h.method,url:l})})}();return Promise.race([T.promise,R])}function Cs(n,e,t){let r=null;if(e!=null){r=zt(e);const i=typeof n=="string"?{url:n}:Nt(n);i.headers?Object.keys(i.headers).filter(s=>s.toLowerCase()==="content-type").length!==0||(i.headers=Nt(i.headers),i.headers["content-type"]="application/json"):i.headers={"content-type":"application/json"},n=i}return N0(n,r,(i,s)=>{let o=null;if(i!=null)try{o=JSON.parse(Fi(i))}catch(a){Yr.throwError("invalid JSON",F.errors.SERVER_ERROR,{body:i,error:a})}return t&&(o=t(o,s)),o})}function Mi(n,e){return e||(e={}),(e=Nt(e)).floor==null&&(e.floor=0),e.ceiling==null&&(e.ceiling=1e4),e.interval==null&&(e.interval=250),new Promise(function(t,r){let i=null,s=!1;const o=()=>!s&&(s=!0,i&&clearTimeout(i),!0);e.timeout&&(i=setTimeout(()=>{o()&&r(new Error("timeout"))},e.timeout));const a=e.retryLimit;let l=0;(function h(){return n().then(function(u){if(u!==void 0)o()&&t(u);else if(e.oncePoll)e.oncePoll.once("poll",h);else if(e.onceBlock)e.onceBlock.once("block",h);else if(!s){if(l++,l>a)return void(o()&&r(new Error("retry limit reached")));let g=e.interval*parseInt(String(Math.random()*Math.pow(2,l)));g<e.floor&&(g=e.floor),g>e.ceiling&&(g=e.ceiling),setTimeout(h,g)}return null},function(u){o()&&r(u)})})()})}var Ll,qu,yg=function(){if(qu)return Ll;qu=1;for(var n="qpzry9x8gf2tvdw0s3jn54khce6mua7l",e={},t=0;t<32;t++){var r=n.charAt(t);if(e[r]!==void 0)throw new TypeError(r+" is ambiguous");e[r]=t}function i(l){var h=l>>25;return(33554431&l)<<5^996825010&-(1&h)^642813549&-(h>>1&1)^513874426&-(h>>2&1)^1027748829&-(h>>3&1)^705979059&-(h>>4&1)}function s(l){for(var h=1,u=0;u<l.length;++u){var g=l.charCodeAt(u);if(g<33||g>126)return"Invalid prefix ("+l+")";h=i(h)^g>>5}for(h=i(h),u=0;u<l.length;++u){var x=l.charCodeAt(u);h=i(h)^31&x}return h}function o(l,h){if(h=h||90,l.length<8)return l+" too short";if(l.length>h)return"Exceeds length limit";var u=l.toLowerCase(),g=l.toUpperCase();if(l!==u&&l!==g)return"Mixed-case string "+l;var x=(l=u).lastIndexOf("1");if(x===-1)return"No separator character for "+l;if(x===0)return"Missing prefix for "+l;var A=l.slice(0,x),E=l.slice(x+1);if(E.length<6)return"Data too short";var I=s(A);if(typeof I=="string")return I;for(var T=[],R=0;R<E.length;++R){var O=E.charAt(R),B=e[O];if(B===void 0)return"Unknown character "+O;I=i(I)^B,R+6>=E.length||T.push(B)}return I!==1?"Invalid checksum for "+l:{prefix:A,words:T}}function a(l,h,u,g){for(var x=0,A=0,E=(1<<u)-1,I=[],T=0;T<l.length;++T)for(x=x<<h|l[T],A+=h;A>=u;)A-=u,I.push(x>>A&E);if(g)A>0&&I.push(x<<u-A&E);else{if(A>=h)return"Excess padding";if(x<<u-A&E)return"Non-zero padding"}return I}return Ll={decodeUnsafe:function(){var l=o.apply(null,arguments);if(typeof l=="object")return l},decode:function(l){var h=o.apply(null,arguments);if(typeof h=="object")return h;throw new Error(h)},encode:function(l,h,u){if(u=u||90,l.length+7+h.length>u)throw new TypeError("Exceeds length limit");var g=s(l=l.toLowerCase());if(typeof g=="string")throw new Error(g);for(var x=l+"1",A=0;A<h.length;++A){var E=h[A];if(E>>5)throw new Error("Non 5-bit word");g=i(g)^E,x+=n.charAt(E)}for(A=0;A<6;++A)g=i(g);for(g^=1,A=0;A<6;++A)x+=n.charAt(g>>5*(5-A)&31);return x},toWordsUnsafe:function(l){var h=a(l,8,5,!0);if(Array.isArray(h))return h},toWords:function(l){var h=a(l,8,5,!0);if(Array.isArray(h))return h;throw new Error(h)},fromWordsUnsafe:function(l){var h=a(l,5,8,!1);if(Array.isArray(h))return h},fromWords:function(l){var h=a(l,5,8,!1);if(Array.isArray(h))return h;throw new Error(h)}},Ll}(),Gu=ks(yg);const nr="providers/5.8.0",Fs=new F(nr);class ae{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={},t=this.address.bind(this),r=this.bigNumber.bind(this),i=this.blockTag.bind(this),s=this.data.bind(this),o=this.hash.bind(this),a=this.hex.bind(this),l=this.number.bind(this),h=this.type.bind(this);return e.transaction={hash:o,type:h,accessList:ae.allowNull(this.accessList.bind(this),null),blockHash:ae.allowNull(o,null),blockNumber:ae.allowNull(l,null),transactionIndex:ae.allowNull(l,null),confirmations:ae.allowNull(l,null),from:t,gasPrice:ae.allowNull(r),maxPriorityFeePerGas:ae.allowNull(r),maxFeePerGas:ae.allowNull(r),gasLimit:r,to:ae.allowNull(t,null),value:r,nonce:l,data:s,r:ae.allowNull(this.uint256),s:ae.allowNull(this.uint256),v:ae.allowNull(l),creates:ae.allowNull(t,null),raw:ae.allowNull(s)},e.transactionRequest={from:ae.allowNull(t),nonce:ae.allowNull(l),gasLimit:ae.allowNull(r),gasPrice:ae.allowNull(r),maxPriorityFeePerGas:ae.allowNull(r),maxFeePerGas:ae.allowNull(r),to:ae.allowNull(t),value:ae.allowNull(r),data:ae.allowNull(u=>this.data(u,!0)),type:ae.allowNull(l),accessList:ae.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:l,blockNumber:l,transactionHash:o,address:t,topics:ae.arrayOf(o),data:s,logIndex:l,blockHash:o},e.receipt={to:ae.allowNull(this.address,null),from:ae.allowNull(this.address,null),contractAddress:ae.allowNull(t,null),transactionIndex:l,root:ae.allowNull(a),gasUsed:r,logsBloom:ae.allowNull(s),blockHash:o,transactionHash:o,logs:ae.arrayOf(this.receiptLog.bind(this)),blockNumber:l,confirmations:ae.allowNull(l,null),cumulativeGasUsed:r,effectiveGasPrice:ae.allowNull(r),status:ae.allowNull(l),type:h},e.block={hash:ae.allowNull(o),parentHash:o,number:l,timestamp:l,nonce:ae.allowNull(a),difficulty:this.difficulty.bind(this),gasLimit:r,gasUsed:r,miner:ae.allowNull(t),extraData:s,transactions:ae.allowNull(ae.arrayOf(o)),baseFeePerGas:ae.allowNull(r)},e.blockWithTransactions=Nt(e.block),e.blockWithTransactions.transactions=ae.allowNull(ae.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:ae.allowNull(i,void 0),toBlock:ae.allowNull(i,void 0),blockHash:ae.allowNull(o,void 0),address:ae.allowNull(t,void 0),topics:ae.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:ae.allowNull(l),blockHash:ae.allowNull(o),transactionIndex:l,removed:ae.allowNull(this.boolean.bind(this)),address:t,data:ae.allowFalsish(s,"0x"),topics:ae.arrayOf(o),transactionHash:o,logIndex:l},e}accessList(e){return hi(e||[])}number(e){return e==="0x"?0:X.from(e).toNumber()}type(e){return e==="0x"||e==null?0:X.from(e).toNumber()}bigNumber(e){return X.from(e)}boolean(e){if(typeof e=="boolean")return e;if(typeof e=="string"){if((e=e.toLowerCase())==="true")return!0;if(e==="false")return!1}throw new Error("invalid boolean - "+e)}hex(e,t){return typeof e=="string"&&(t||e.substring(0,2)==="0x"||(e="0x"+e),Te(e))?e.toLowerCase():Fs.throwArgumentError("invalid hash","value",e)}data(e,t){const r=this.hex(e,t);if(r.length%2!=0)throw new Error("invalid data; odd-length - "+e);return r}address(e){return At(e)}callAddress(e){if(!Te(e,32))return null;const t=At(Lt(e,12));return t===Ud?null:t}contractAddress(e){return ja(e)}blockTag(e){if(e==null)return"latest";if(e==="earliest")return"0x0";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if(typeof e=="number"||Te(e))return So(e);throw new Error("invalid blockTag")}hash(e,t){const r=this.hex(e,t);return _n(r)!==32?Fs.throwArgumentError("invalid hash","value",e):r}difficulty(e){if(e==null)return null;const t=X.from(e);try{return t.toNumber()}catch{}return null}uint256(e){if(!Te(e))throw new Error("invalid uint256");return St(e,32)}_block(e,t){e.author!=null&&e.miner==null&&(e.miner=e.author);const r=e._difficulty!=null?e._difficulty:e.difficulty,i=ae.check(t,e);return i._difficulty=r==null?null:X.from(r),i}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return ae.check(this.formats.transactionRequest,e)}transactionResponse(e){e.gas!=null&&e.gasLimit==null&&(e.gasLimit=e.gas),e.to&&X.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),e.input!=null&&e.data==null&&(e.data=e.input),e.to==null&&e.creates==null&&(e.creates=this.contractAddress(e)),e.type!==1&&e.type!==2||e.accessList!=null||(e.accessList=[]);const t=ae.check(this.formats.transaction,e);if(e.chainId!=null){let r=e.chainId;Te(r)&&(r=X.from(r).toNumber()),t.chainId=r}else{let r=e.networkId;r==null&&t.v==null&&(r=e.chainId),Te(r)&&(r=X.from(r).toNumber()),typeof r!="number"&&t.v!=null&&(r=(t.v-35)/2,r<0&&(r=0),r=parseInt(r)),typeof r!="number"&&(r=0),t.chainId=r}return t.blockHash&&t.blockHash.replace(/0/g,"")==="x"&&(t.blockHash=null),t}transaction(e){return u0(e)}receiptLog(e){return ae.check(this.formats.receiptLog,e)}receipt(e){const t=ae.check(this.formats.receipt,e);if(t.root!=null)if(t.root.length<=4){const r=X.from(t.root).toNumber();r===0||r===1?(t.status!=null&&t.status!==r&&Fs.throwArgumentError("alt-root-status/status mismatch","value",{root:t.root,status:t.status}),t.status=r,delete t.root):Fs.throwArgumentError("invalid alt-root-status","value.root",t.root)}else t.root.length!==66&&Fs.throwArgumentError("invalid root hash","value.root",t.root);return t.status!=null&&(t.byzantium=!0),t}topics(e){return Array.isArray(e)?e.map(t=>this.topics(t)):e!=null?this.hash(e,!0):null}filter(e){return ae.check(this.formats.filter,e)}filterLog(e){return ae.check(this.formats.filterLog,e)}static check(e,t){const r={};for(const i in e)try{const s=e[i](t[i]);s!==void 0&&(r[i]=s)}catch(s){throw s.checkKey=i,s.checkValue=t[i],s}return r}static allowNull(e,t){return function(r){return r==null?t:e(r)}}static allowFalsish(e,t){return function(r){return r?e(r):t}}static arrayOf(e){return function(t){if(!Array.isArray(t))throw new Error("not an array");const r=[];return t.forEach(function(i){r.push(e(i))}),r}}}function C0(n){return n&&typeof n.isCommunityResource=="function"}function Sc(n){return C0(n)&&n.isCommunityResource()}let Hu=!1;function Io(){Hu||(Hu=!0,console.log("========= NOTICE ========="),console.log("Request-Rate Exceeded  (this message will not be repeated)"),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.io/api-keys/"),console.log("=========================="))}var Pe=function(n,e,t,r){return new(t||(t=Promise))(function(i,s){function o(h){try{l(r.next(h))}catch(u){s(u)}}function a(h){try{l(r.throw(h))}catch(u){s(u)}}function l(h){var u;h.done?i(h.value):(u=h.value,u instanceof t?u:new t(function(g){g(u)})).then(o,a)}l((r=r.apply(n,e||[])).next())})};const Oe=new F(nr);function ju(n){return n==null?"null":(_n(n)!==32&&Oe.throwArgumentError("invalid topic","topic",n),n.toLowerCase())}function Wu(n){for(n=n.slice();n.length>0&&n[n.length-1]==null;)n.pop();return n.map(e=>{if(Array.isArray(e)){const t={};e.forEach(i=>{t[ju(i)]=!0});const r=Object.keys(t);return r.sort(),r.join("|")}return ju(e)}).join("&")}function es(n){if(typeof n=="string"){if(_n(n=n.toLowerCase())===32)return"tx:"+n;if(n.indexOf(":")===-1)return n}else{if(Array.isArray(n))return"filter:*:"+Wu(n);if(Om.isForkEvent(n))throw Oe.warn("not implemented"),new Error("not implemented");if(n&&typeof n=="object")return"filter:"+(n.address||"*")+":"+Wu(n.topics||[])}throw new Error("invalid event - "+n)}function Ds(){return new Date().getTime()}function Ku(n){return new Promise(e=>{setTimeout(e,n)})}const vg=["block","network","pending","poll"];class wg{constructor(e,t,r){j(this,"tag",e),j(this,"listener",t),j(this,"once",r),this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");return e[0]!=="tx"?null:e[1]}get filter(){const e=this.tag.split(":");if(e[0]!=="filter")return null;const t=e[1],r=(i=e[2])===""?[]:i.split(/&/g).map(o=>{if(o==="")return[];const a=o.split("|").map(l=>l==="null"?null:l);return a.length===1?a[0]:a});var i;const s={};return r.length>0&&(s.topics=r),t&&t!=="*"&&(s.address=t),s}pollable(){return this.tag.indexOf(":")>=0||vg.indexOf(this.tag)>=0}}const bg={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function Ul(n){return St(X.from(n).toHexString(),32)}function Vu(n){return ws.encode(kt([n,Lt(jn(jn(n)),0,4)]))}const I0=new RegExp("^(ipfs)://(.*)$","i"),Ju=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),I0,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function ha(n,e){try{return Fi(yo(n,e))}catch{}return null}function yo(n,e){if(n==="0x")return null;const t=X.from(Lt(n,e,e+32)).toNumber(),r=X.from(Lt(n,t,t+32)).toNumber();return Lt(n,t+32,t+32+r)}function zl(n){return n.match(/^ipfs:\/\/ipfs\//i)?n=n.substring(12):n.match(/^ipfs:\/\//i)?n=n.substring(7):Oe.throwArgumentError("unsupported IPFS format","link",n),`https://gateway.ipfs.io/ipfs/${n}`}function $u(n){const e=Y(n);if(e.length>32)throw new Error("internal; should not happen");const t=new Uint8Array(32);return t.set(e,32-e.length),t}function Ag(n){if(n.length%32==0)return n;const e=new Uint8Array(32*Math.ceil(n.length/32));return e.set(n),e}function P0(n){const e=[];let t=0;for(let r=0;r<n.length;r++)e.push(null),t+=32;for(let r=0;r<n.length;r++){const i=Y(n[r]);e[r]=$u(t),e.push($u(i.length)),e.push(Ag(i)),t+=32+32*Math.ceil(i.length/32)}return fr(e)}class Nc{constructor(e,t,r,i){j(this,"provider",e),j(this,"name",r),j(this,"address",e.formatter.address(t)),j(this,"_resolvedAddress",i)}supportsWildcard(){return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then(e=>X.from(e).eq(1)).catch(e=>{if(e.code===F.errors.CALL_EXCEPTION)return!1;throw this._supportsEip2544=null,e})),this._supportsEip2544}_fetch(e,t){return Pe(this,void 0,void 0,function*(){const r={to:this.address,ccipReadEnabled:!0,data:fr([e,Xs(this.name),t||"0x"])};let i=!1;(yield this.supportsWildcard())&&(i=!0,r.data=fr(["0x9061b923",P0([Zd(this.name),r.data])]));try{let s=yield this.provider.call(r);return Y(s).length%32==4&&Oe.throwError("resolver threw error",F.errors.CALL_EXCEPTION,{transaction:r,data:s}),i&&(s=yo(s,0)),s}catch(s){if(s.code===F.errors.CALL_EXCEPTION)return null;throw s}})}_fetchBytes(e,t){return Pe(this,void 0,void 0,function*(){const r=yield this._fetch(e,t);return r!=null?yo(r,0):null})}_getAddress(e,t){const r=bg[String(e)];if(r==null&&Oe.throwError(`unsupported coin type: ${e}`,F.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),r.ilk==="eth")return this.provider.formatter.address(t);const i=Y(t);if(r.p2pkh!=null){const s=t.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(s){const o=parseInt(s[1],16);if(s[2].length===2*o&&o>=1&&o<=75)return Vu(kt([[r.p2pkh],"0x"+s[2]]))}}if(r.p2sh!=null){const s=t.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(s){const o=parseInt(s[1],16);if(s[2].length===2*o&&o>=1&&o<=75)return Vu(kt([[r.p2sh],"0x"+s[2]]))}}if(r.prefix!=null){const s=i[1];let o=i[0];if(o===0?s!==20&&s!==32&&(o=-1):o=-1,o>=0&&i.length===2+s&&s>=1&&s<=75){const a=Gu.toWords(i.slice(2));return a.unshift(o),Gu.encode(r.prefix,a)}}return null}getAddress(e){return Pe(this,void 0,void 0,function*(){if(e==null&&(e=60),e===60)try{const i=yield this._fetch("0x3b3b57de");return i==="0x"||i===Vc?null:this.provider.formatter.callAddress(i)}catch(i){if(i.code===F.errors.CALL_EXCEPTION)return null;throw i}const t=yield this._fetchBytes("0xf1cb7e06",Ul(e));if(t==null||t==="0x")return null;const r=this._getAddress(e,t);return r==null&&Oe.throwError("invalid or unsupported coin data",F.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:t}),r})}getAvatar(){return Pe(this,void 0,void 0,function*(){const e=[{type:"name",content:this.name}];try{const t=yield this.getText("avatar");if(t==null)return null;for(let r=0;r<Ju.length;r++){const i=t.match(Ju[r]);if(i==null)continue;const s=i[1].toLowerCase();switch(s){case"https":return e.push({type:"url",content:t}),{linkage:e,url:t};case"data":return e.push({type:"data",content:t}),{linkage:e,url:t};case"ipfs":return e.push({type:"ipfs",content:t}),{linkage:e,url:zl(t)};case"erc721":case"erc1155":{const o=s==="erc721"?"0xc87b56dd":"0x0e89341c";e.push({type:s,content:t});const a=this._resolvedAddress||(yield this.getAddress()),l=(i[2]||"").split("/");if(l.length!==2)return null;const h=yield this.provider.formatter.address(l[0]),u=St(X.from(l[1]).toHexString(),32);if(s==="erc721"){const I=this.provider.formatter.callAddress(yield this.provider.call({to:h,data:fr(["0x6352211e",u])}));if(a!==I)return null;e.push({type:"owner",content:I})}else if(s==="erc1155"){const I=X.from(yield this.provider.call({to:h,data:fr(["0x00fdd58e",St(a,32),u])}));if(I.isZero())return null;e.push({type:"balance",content:I.toString()})}const g={to:this.provider.formatter.address(l[0]),data:fr([o,u])};let x=ha(yield this.provider.call(g),0);if(x==null)return null;e.push({type:"metadata-url-base",content:x}),s==="erc1155"&&(x=x.replace("{id}",u.substring(2)),e.push({type:"metadata-url-expanded",content:x})),x.match(/^ipfs:/i)&&(x=zl(x)),e.push({type:"metadata-url",content:x});const A=yield Cs(x);if(!A)return null;e.push({type:"metadata",content:JSON.stringify(A)});let E=A.image;if(typeof E!="string")return null;if(!E.match(/^(https:\/\/|data:)/i)){if(E.match(I0)==null)return null;e.push({type:"url-ipfs",content:E}),E=zl(E)}return e.push({type:"url",content:E}),{linkage:e,url:E}}}}}catch{}return null})}getContentHash(){return Pe(this,void 0,void 0,function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(e==null||e==="0x")return null;const t=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const o=parseInt(t[3],16);if(t[4].length===2*o)return"ipfs://"+ws.encode("0x"+t[1])}const r=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(r){const o=parseInt(r[3],16);if(r[4].length===2*o)return"ipns://"+ws.encode("0x"+r[1])}const i=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(i&&i[1].length===64)return"bzz://"+i[1];const s=e.match(/^0x90b2c605([0-9a-f]*)$/);if(s&&s[1].length===68){const o={"=":"","+":"-","/":"_"};return"sia://"+Yc("0x"+s[1]).replace(/[=+\/]/g,a=>o[a])}return Oe.throwError("invalid or unsupported content hash data",F.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})})}getText(e){return Pe(this,void 0,void 0,function*(){let t=zt(e);t=kt([Ul(64),Ul(t.length),t]),t.length%32!=0&&(t=kt([t,St("0x",32-e.length%32)]));const r=yield this._fetchBytes("0x59d1d43c",te(t));return r==null||r==="0x"?null:Fi(r)})}}let ql=null,Eg=1;class Ja extends Ki{constructor(e){if(super(),this._events=[],this._emitted={block:-2},this.disableCcipRead=!1,this.formatter=new.target.getFormatter(),j(this,"anyNetwork",e==="any"),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch(t=>{}),this._ready().catch(t=>{});else{const t=tr(new.target,"getNetwork")(e);t?(j(this,"_network",t),this.emit("network",t,null)):Oe.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._maxFilterBlockRange=10,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return Pe(this,void 0,void 0,function*(){if(this._network==null){let e=null;if(this._networkPromise)try{e=yield this._networkPromise}catch{}e==null&&(e=yield this.detectNetwork()),e||Oe.throwError("no network detected",F.errors.UNKNOWN_ERROR,{}),this._network==null&&(this.anyNetwork?this._network=e:j(this,"_network",e),this.emit("network",e,null))}return this._network})}get ready(){return Mi(()=>this._ready().then(e=>e,e=>{if(e.code!==F.errors.NETWORK_ERROR||e.event!=="noNetwork")throw e}))}static getFormatter(){return ql==null&&(ql=new ae),ql}static getNetwork(e){return ah(e??"homestead")}ccipReadFetch(e,t,r){return Pe(this,void 0,void 0,function*(){if(this.disableCcipRead||r.length===0)return null;const i=e.to.toLowerCase(),s=t.toLowerCase(),o=[];for(let a=0;a<r.length;a++){const l=r[a],h=l.replace("{sender}",i).replace("{data}",s),u=l.indexOf("{data}")>=0?null:JSON.stringify({data:s,sender:i}),g=yield Cs({url:h,errorPassThrough:!0},u,(A,E)=>(A.status=E.statusCode,A));if(g.data)return g.data;const x=g.message||"unknown error";if(g.status>=400&&g.status<500)return Oe.throwError(`response not found during CCIP fetch: ${x}`,F.errors.SERVER_ERROR,{url:l,errorMessage:x});o.push(x)}return Oe.throwError(`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,F.errors.SERVER_ERROR,{urls:r,errorMessages:o})})}_getInternalBlockNumber(e){return Pe(this,void 0,void 0,function*(){if(yield this._ready(),e>0)for(;this._internalBlockNumber;){const i=this._internalBlockNumber;try{const s=yield i;if(Ds()-s.respTime<=e)return s.blockNumber;break}catch{if(this._internalBlockNumber===i)break}}const t=Ds(),r=Ot({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then(i=>null,i=>i)}).then(({blockNumber:i,networkError:s})=>{if(s)throw this._internalBlockNumber===r&&(this._internalBlockNumber=null),s;const o=Ds();return(i=X.from(i).toNumber())<this._maxInternalBlockNumber&&(i=this._maxInternalBlockNumber),this._maxInternalBlockNumber=i,this._setFastBlockNumber(i),{blockNumber:i,reqTime:t,respTime:o}});return this._internalBlockNumber=r,r.catch(i=>{this._internalBlockNumber===r&&(this._internalBlockNumber=null)}),(yield r).blockNumber})}poll(){return Pe(this,void 0,void 0,function*(){const e=Eg++,t=[];let r=null;try{r=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(i){return void this.emit("error",i)}if(this._setFastBlockNumber(r),this.emit("poll",e,r),r!==this._lastBlockNumber){if(this._emitted.block===-2&&(this._emitted.block=r-1),Math.abs(this._emitted.block-r)>1e3)Oe.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${r})`),this.emit("error",Oe.makeError("network block skew detected",F.errors.NETWORK_ERROR,{blockNumber:r,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",r);else for(let i=this._emitted.block+1;i<=r;i++)this.emit("block",i);this._emitted.block!==r&&(this._emitted.block=r,Object.keys(this._emitted).forEach(i=>{if(i==="block")return;const s=this._emitted[i];s!=="pending"&&r-s>12&&delete this._emitted[i]})),this._lastBlockNumber===-2&&(this._lastBlockNumber=r-1),this._events.forEach(i=>{switch(i.type){case"tx":{const s=i.hash;let o=this.getTransactionReceipt(s).then(a=>(a&&a.blockNumber!=null&&(this._emitted["t:"+s]=a.blockNumber,this.emit(s,a)),null)).catch(a=>{this.emit("error",a)});t.push(o);break}case"filter":if(!i._inflight){i._inflight=!0,i._lastBlockNumber===-2&&(i._lastBlockNumber=r-1);const s=i.filter;s.fromBlock=i._lastBlockNumber+1,s.toBlock=r;const o=s.toBlock-this._maxFilterBlockRange;o>s.fromBlock&&(s.fromBlock=o),s.fromBlock<0&&(s.fromBlock=0);const a=this.getLogs(s).then(l=>{i._inflight=!1,l.length!==0&&l.forEach(h=>{h.blockNumber>i._lastBlockNumber&&(i._lastBlockNumber=h.blockNumber),this._emitted["b:"+h.blockHash]=h.blockNumber,this._emitted["t:"+h.transactionHash]=h.blockNumber,this.emit(s,h)})}).catch(l=>{this.emit("error",l),i._inflight=!1});t.push(a)}}}),this._lastBlockNumber=r,Promise.all(t).then(()=>{this.emit("didPoll",e)}).catch(i=>{this.emit("error",i)})}else this.emit("didPoll",e)})}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return Pe(this,void 0,void 0,function*(){return Oe.throwError("provider does not support network detection",F.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})})}getNetwork(){return Pe(this,void 0,void 0,function*(){const e=yield this._ready(),t=yield this.detectNetwork();if(e.chainId!==t.chainId){if(this.anyNetwork)return this._network=t,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",t,e),yield Ku(0),this._network;const r=Oe.makeError("underlying network changed",F.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:t});throw this.emit("error",r),r}return e})}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then(e=>{this._setFastBlockNumber(e)},e=>{}),this._fastBlockNumber!=null?this._fastBlockNumber:-1}get polling(){return this._poller!=null}set polling(e){e&&!this._poller?(this._poller=setInterval(()=>{this.poll()},this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout(()=>{this.poll(),this._bootstrapPoll=setTimeout(()=>{this._poller||this.poll(),this._bootstrapPoll=null},this.pollingInterval)},0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if(typeof e!="number"||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval(()=>{this.poll()},this._pollingInterval))}_getFastBlockNumber(){const e=Ds();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then(t=>((this._fastBlockNumber==null||t>this._fastBlockNumber)&&(this._fastBlockNumber=t),this._fastBlockNumber))),this._fastBlockNumberPromise}_setFastBlockNumber(e){this._fastBlockNumber!=null&&e<this._fastBlockNumber||(this._fastQueryDate=Ds(),(this._fastBlockNumber==null||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,t,r){return Pe(this,void 0,void 0,function*(){return this._waitForTransaction(e,t??1,r||0,null)})}_waitForTransaction(e,t,r,i){return Pe(this,void 0,void 0,function*(){const s=yield this.getTransactionReceipt(e);return(s?s.confirmations:0)>=t?s:new Promise((o,a)=>{const l=[];let h=!1;const u=function(){return!!h||(h=!0,l.forEach(x=>{x()}),!1)},g=x=>{x.confirmations<t||u()||o(x)};if(this.on(e,g),l.push(()=>{this.removeListener(e,g)}),i){let x=i.startBlock,A=null;const E=I=>Pe(this,void 0,void 0,function*(){h||(yield Ku(1e3),this.getTransactionCount(i.from).then(T=>Pe(this,void 0,void 0,function*(){if(!h){if(T<=i.nonce)x=I;else{{const R=yield this.getTransaction(e);if(R&&R.blockNumber!=null)return}for(A==null&&(A=x-3,A<i.startBlock&&(A=i.startBlock));A<=I;){if(h)return;const R=yield this.getBlockWithTransactions(A);for(let O=0;O<R.transactions.length;O++){const B=R.transactions[O];if(B.hash===e)return;if(B.from===i.from&&B.nonce===i.nonce){if(h)return;const U=yield this.waitForTransaction(B.hash,t);if(u())return;let q="replaced";return B.data===i.data&&B.to===i.to&&B.value.eq(i.value)?q="repriced":B.data==="0x"&&B.from===B.to&&B.value.isZero()&&(q="cancelled"),void a(Oe.makeError("transaction was replaced",F.errors.TRANSACTION_REPLACED,{cancelled:q==="replaced"||q==="cancelled",reason:q,replacement:this._wrapTransaction(B),hash:e,receipt:U}))}}A++}}h||this.once("block",E)}}),T=>{h||this.once("block",E)}))});if(h)return;this.once("block",E),l.push(()=>{this.removeListener("block",E)})}if(typeof r=="number"&&r>0){const x=setTimeout(()=>{u()||a(Oe.makeError("timeout exceeded",F.errors.TIMEOUT,{timeout:r}))},r);x.unref&&x.unref(),l.push(()=>{clearTimeout(x)})}})})}getBlockNumber(){return Pe(this,void 0,void 0,function*(){return this._getInternalBlockNumber(0)})}getGasPrice(){return Pe(this,void 0,void 0,function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return X.from(e)}catch(t){return Oe.throwError("bad result from backend",F.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:t})}})}getBalance(e,t){return Pe(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Ot({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),i=yield this.perform("getBalance",r);try{return X.from(i)}catch(s){return Oe.throwError("bad result from backend",F.errors.SERVER_ERROR,{method:"getBalance",params:r,result:i,error:s})}})}getTransactionCount(e,t){return Pe(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Ot({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),i=yield this.perform("getTransactionCount",r);try{return X.from(i).toNumber()}catch(s){return Oe.throwError("bad result from backend",F.errors.SERVER_ERROR,{method:"getTransactionCount",params:r,result:i,error:s})}})}getCode(e,t){return Pe(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Ot({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),i=yield this.perform("getCode",r);try{return te(i)}catch(s){return Oe.throwError("bad result from backend",F.errors.SERVER_ERROR,{method:"getCode",params:r,result:i,error:s})}})}getStorageAt(e,t,r){return Pe(this,void 0,void 0,function*(){yield this.getNetwork();const i=yield Ot({address:this._getAddress(e),blockTag:this._getBlockTag(r),position:Promise.resolve(t).then(o=>So(o))}),s=yield this.perform("getStorageAt",i);try{return te(s)}catch(o){return Oe.throwError("bad result from backend",F.errors.SERVER_ERROR,{method:"getStorageAt",params:i,result:s,error:o})}})}_wrapTransaction(e,t,r){if(t!=null&&_n(t)!==32)throw new Error("invalid response - sendTransaction");const i=e;return t!=null&&e.hash!==t&&Oe.throwError("Transaction hash mismatch from Provider.sendTransaction.",F.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:t}),i.wait=(s,o)=>Pe(this,void 0,void 0,function*(){let a;s==null&&(s=1),o==null&&(o=0),s!==0&&r!=null&&(a={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:r});const l=yield this._waitForTransaction(e.hash,s,o,a);return l==null&&s===0?null:(this._emitted["t:"+e.hash]=l.blockNumber,l.status===0&&Oe.throwError("transaction failed",F.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:l}),l)}),i}sendTransaction(e){return Pe(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Promise.resolve(e).then(s=>te(s)),r=this.formatter.transaction(e);r.confirmations==null&&(r.confirmations=0);const i=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const s=yield this.perform("sendTransaction",{signedTransaction:t});return this._wrapTransaction(r,s,i)}catch(s){throw s.transaction=r,s.transactionHash=r.hash,s}})}_getTransactionRequest(e){return Pe(this,void 0,void 0,function*(){const t=yield e,r={};return["from","to"].forEach(i=>{t[i]!=null&&(r[i]=Promise.resolve(t[i]).then(s=>s?this._getAddress(s):null))}),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach(i=>{t[i]!=null&&(r[i]=Promise.resolve(t[i]).then(s=>s?X.from(s):null))}),["type"].forEach(i=>{t[i]!=null&&(r[i]=Promise.resolve(t[i]).then(s=>s??null))}),t.accessList&&(r.accessList=this.formatter.accessList(t.accessList)),["data"].forEach(i=>{t[i]!=null&&(r[i]=Promise.resolve(t[i]).then(s=>s?te(s):null))}),this.formatter.transactionRequest(yield Ot(r))})}_getFilter(e){return Pe(this,void 0,void 0,function*(){e=yield e;const t={};return e.address!=null&&(t.address=this._getAddress(e.address)),["blockHash","topics"].forEach(r=>{e[r]!=null&&(t[r]=e[r])}),["fromBlock","toBlock"].forEach(r=>{e[r]!=null&&(t[r]=this._getBlockTag(e[r]))}),this.formatter.filter(yield Ot(t))})}_call(e,t,r){return Pe(this,void 0,void 0,function*(){r>=10&&Oe.throwError("CCIP read exceeded maximum redirections",F.errors.SERVER_ERROR,{redirects:r,transaction:e});const i=e.to,s=yield this.perform("call",{transaction:e,blockTag:t});if(r>=0&&t==="latest"&&i!=null&&s.substring(0,10)==="0x556f1830"&&_n(s)%32==4)try{const o=Lt(s,4),a=Lt(o,0,32);X.from(a).eq(i)||Oe.throwError("CCIP Read sender did not match",F.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const l=[],h=X.from(Lt(o,32,64)).toNumber(),u=X.from(Lt(o,h,h+32)).toNumber(),g=Lt(o,h+32);for(let R=0;R<u;R++){const O=ha(g,32*R);O==null&&Oe.throwError("CCIP Read contained corrupt URL string",F.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s}),l.push(O)}const x=yo(o,64);X.from(Lt(o,100,128)).isZero()||Oe.throwError("CCIP Read callback selector included junk",F.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const A=Lt(o,96,100),E=yo(o,128),I=yield this.ccipReadFetch(e,x,l);I==null&&Oe.throwError("CCIP Read disabled or provided no URLs",F.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const T={to:i,data:fr([A,P0([I,E])])};return this._call(T,t,r+1)}catch(o){if(o.code===F.errors.SERVER_ERROR)throw o}try{return te(s)}catch(o){return Oe.throwError("bad result from backend",F.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:t},result:s,error:o})}})}call(e,t){return Pe(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Ot({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(t),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});return this._call(r.transaction,r.blockTag,r.ccipReadEnabled?0:-1)})}estimateGas(e){return Pe(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Ot({transaction:this._getTransactionRequest(e)}),r=yield this.perform("estimateGas",t);try{return X.from(r)}catch(i){return Oe.throwError("bad result from backend",F.errors.SERVER_ERROR,{method:"estimateGas",params:t,result:r,error:i})}})}_getAddress(e){return Pe(this,void 0,void 0,function*(){typeof(e=yield e)!="string"&&Oe.throwArgumentError("invalid address or ENS name","name",e);const t=yield this.resolveName(e);return t==null&&Oe.throwError("ENS name not configured",F.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),t})}_getBlock(e,t){return Pe(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;let r=-128;const i={includeTransactions:!!t};if(Te(e,32))i.blockHash=e;else try{i.blockTag=yield this._getBlockTag(e),Te(i.blockTag)&&(r=parseInt(i.blockTag.substring(2),16))}catch{Oe.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return Mi(()=>Pe(this,void 0,void 0,function*(){const s=yield this.perform("getBlock",i);if(s==null)return i.blockHash!=null&&this._emitted["b:"+i.blockHash]==null||i.blockTag!=null&&r>this._emitted.block?null:void 0;if(t){let o=null;for(let l=0;l<s.transactions.length;l++){const h=s.transactions[l];if(h.blockNumber==null)h.confirmations=0;else if(h.confirmations==null){o==null&&(o=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let u=o-h.blockNumber+1;u<=0&&(u=1),h.confirmations=u}}const a=this.formatter.blockWithTransactions(s);return a.transactions=a.transactions.map(l=>this._wrapTransaction(l)),a}return this.formatter.block(s)}),{oncePoll:this})})}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return Pe(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return Mi(()=>Pe(this,void 0,void 0,function*(){const r=yield this.perform("getTransaction",t);if(r==null)return this._emitted["t:"+e]==null?null:void 0;const i=this.formatter.transactionResponse(r);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let s=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;s<=0&&(s=1),i.confirmations=s}return this._wrapTransaction(i)}),{oncePoll:this})})}getTransactionReceipt(e){return Pe(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return Mi(()=>Pe(this,void 0,void 0,function*(){const r=yield this.perform("getTransactionReceipt",t);if(r==null)return this._emitted["t:"+e]==null?null:void 0;if(r.blockHash==null)return;const i=this.formatter.receipt(r);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let s=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;s<=0&&(s=1),i.confirmations=s}return i}),{oncePoll:this})})}getLogs(e){return Pe(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Ot({filter:this._getFilter(e)}),r=yield this.perform("getLogs",t);return r.forEach(i=>{i.removed==null&&(i.removed=!1)}),ae.arrayOf(this.formatter.filterLog.bind(this.formatter))(r)})}getEtherPrice(){return Pe(this,void 0,void 0,function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})})}_getBlockTag(e){return Pe(this,void 0,void 0,function*(){if(typeof(e=yield e)=="number"&&e<0){e%1&&Oe.throwArgumentError("invalid BlockTag","blockTag",e);let t=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return t+=e,t<0&&(t=0),this.formatter.blockTag(t)}return this.formatter.blockTag(e)})}getResolver(e){return Pe(this,void 0,void 0,function*(){let t=e;for(;;){if(t===""||t==="."||e!=="eth"&&t==="eth")return null;const r=yield this._getResolver(t,"getResolver");if(r!=null){const i=new Nc(this,r,e);return t===e||(yield i.supportsWildcard())?i:null}t=t.split(".").slice(1).join(".")}})}_getResolver(e,t){return Pe(this,void 0,void 0,function*(){t==null&&(t="ENS");const r=yield this.getNetwork();r.ensAddress||Oe.throwError("network does not support ENS",F.errors.UNSUPPORTED_OPERATION,{operation:t,network:r.name});try{const i=yield this.call({to:r.ensAddress,data:"0x0178b8bf"+Xs(e).substring(2)});return this.formatter.callAddress(i)}catch{}return null})}resolveName(e){return Pe(this,void 0,void 0,function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(r){if(Te(e))throw r}typeof e!="string"&&Oe.throwArgumentError("invalid ENS name","name",e);const t=yield this.getResolver(e);return t?yield t.getAddress():null})}lookupAddress(e){return Pe(this,void 0,void 0,function*(){e=yield e;const t=(e=this.formatter.address(e)).substring(2).toLowerCase()+".addr.reverse",r=yield this._getResolver(t,"lookupAddress");if(r==null)return null;const i=ha(yield this.call({to:r,data:"0x691f3431"+Xs(t).substring(2)}),0);return(yield this.resolveName(i))!=e?null:i})}getAvatar(e){return Pe(this,void 0,void 0,function*(){let t=null;if(Te(e)){const i=this.formatter.address(e).substring(2).toLowerCase()+".addr.reverse",s=yield this._getResolver(i,"getAvatar");if(!s)return null;t=new Nc(this,s,i);try{const o=yield t.getAvatar();if(o)return o.url}catch(o){if(o.code!==F.errors.CALL_EXCEPTION)throw o}try{const o=ha(yield this.call({to:s,data:"0x691f3431"+Xs(i).substring(2)}),0);t=yield this.getResolver(o)}catch(o){if(o.code!==F.errors.CALL_EXCEPTION)throw o;return null}}else if(t=yield this.getResolver(e),!t)return null;const r=yield t.getAvatar();return r==null?null:r.url})}perform(e,t){return Oe.throwError(e+" not implemented",F.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter(t=>t.pollable()).length>0}_stopEvent(e){this.polling=this._events.filter(t=>t.pollable()).length>0}_addEventListener(e,t,r){const i=new wg(es(e),t,r);return this._events.push(i),this._startEvent(i),this}on(e,t){return this._addEventListener(e,t,!1)}once(e,t){return this._addEventListener(e,t,!0)}emit(e,...t){let r=!1,i=[],s=es(e);return this._events=this._events.filter(o=>o.tag!==s||(setTimeout(()=>{o.listener.apply(this,t)},0),r=!0,!o.once||(i.push(o),!1))),i.forEach(o=>{this._stopEvent(o)}),r}listenerCount(e){if(!e)return this._events.length;let t=es(e);return this._events.filter(r=>r.tag===t).length}listeners(e){if(e==null)return this._events.map(r=>r.listener);let t=es(e);return this._events.filter(r=>r.tag===t).map(r=>r.listener)}off(e,t){if(t==null)return this.removeAllListeners(e);const r=[];let i=!1,s=es(e);return this._events=this._events.filter(o=>o.tag!==s||o.listener!=t||!!i||(i=!0,r.push(o),!1)),r.forEach(o=>{this._stopEvent(o)}),this}removeAllListeners(e){let t=[];if(e==null)t=this._events,this._events=[];else{const r=es(e);this._events=this._events.filter(i=>i.tag!==r||(t.push(i),!1))}return t.forEach(r=>{this._stopEvent(r)}),this}}var Ln=function(n,e,t,r){return new(t||(t=Promise))(function(i,s){function o(h){try{l(r.next(h))}catch(u){s(u)}}function a(h){try{l(r.throw(h))}catch(u){s(u)}}function l(h){var u;h.done?i(h.value):(u=h.value,u instanceof t?u:new t(function(g){g(u)})).then(o,a)}l((r=r.apply(n,e||[])).next())})};const Gt=new F(nr),xg=["call","estimateGas"];function ro(n,e){if(n==null)return null;if(typeof n.message=="string"&&n.message.match("reverted")){const t=Te(n.data)?n.data:null;if(!e||t)return{message:n.message,data:t}}if(typeof n=="object"){for(const t in n){const r=ro(n[t],e);if(r)return r}return null}if(typeof n=="string")try{return ro(JSON.parse(n),e)}catch{}return null}function M0(n,e,t){const r=t.transaction||t.signedTransaction;if(n==="call"){const s=ro(e,!0);if(s)return s.data;Gt.throwError("missing revert data in call exception; Transaction reverted without a reason string",F.errors.CALL_EXCEPTION,{data:"0x",transaction:r,error:e})}if(n==="estimateGas"){let s=ro(e.body,!1);s==null&&(s=ro(e,!1)),s&&Gt.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",F.errors.UNPREDICTABLE_GAS_LIMIT,{reason:s.message,method:n,transaction:r,error:e})}let i=e.message;throw e.code===F.errors.SERVER_ERROR&&e.error&&typeof e.error.message=="string"?i=e.error.message:typeof e.body=="string"?i=e.body:typeof e.responseText=="string"&&(i=e.responseText),i=(i||"").toLowerCase(),i.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)&&Gt.throwError("insufficient funds for intrinsic transaction cost",F.errors.INSUFFICIENT_FUNDS,{error:e,method:n,transaction:r}),i.match(/nonce (is )?too low/i)&&Gt.throwError("nonce has already been used",F.errors.NONCE_EXPIRED,{error:e,method:n,transaction:r}),i.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&Gt.throwError("replacement fee too low",F.errors.REPLACEMENT_UNDERPRICED,{error:e,method:n,transaction:r}),i.match(/only replay-protected/i)&&Gt.throwError("legacy pre-eip-155 transactions not supported",F.errors.UNSUPPORTED_OPERATION,{error:e,method:n,transaction:r}),xg.indexOf(n)>=0&&i.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)&&Gt.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",F.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:n,transaction:r}),e}function Qu(n){return new Promise(function(e){setTimeout(e,n)})}function _g(n){if(n.error){const e=new Error(n.error.message);throw e.code=n.error.code,e.data=n.error.data,e}return n.result}function Ls(n){return n&&n.toLowerCase()}const Cc={};class lh extends ci{constructor(e,t,r){if(super(),e!==Cc)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");j(this,"provider",t),r==null&&(r=0),typeof r=="string"?(j(this,"_address",this.provider.formatter.address(r)),j(this,"_index",null)):typeof r=="number"?(j(this,"_index",r),j(this,"_address",null)):Gt.throwArgumentError("invalid address or index","addressOrIndex",r)}connect(e){return Gt.throwError("cannot alter JSON-RPC Signer connection",F.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new kg(Cc,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then(e=>(e.length<=this._index&&Gt.throwError("unknown account #"+this._index,F.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index])))}sendUncheckedTransaction(e){e=Nt(e);const t=this.getAddress().then(r=>(r&&(r=r.toLowerCase()),r));if(e.gasLimit==null){const r=Nt(e);r.from=t,e.gasLimit=this.provider.estimateGas(r)}return e.to!=null&&(e.to=Promise.resolve(e.to).then(r=>Ln(this,void 0,void 0,function*(){if(r==null)return null;const i=yield this.provider.resolveName(r);return i==null&&Gt.throwArgumentError("provided ENS name resolves to null","tx.to",r),i}))),Ot({tx:Ot(e),sender:t}).then(({tx:r,sender:i})=>{r.from!=null?r.from.toLowerCase()!==i&&Gt.throwArgumentError("from address mismatch","transaction",e):r.from=i;const s=this.provider.constructor.hexlifyTransaction(r,{from:!0});return this.provider.send("eth_sendTransaction",[s]).then(o=>o,o=>(typeof o.message=="string"&&o.message.match(/user denied/i)&&Gt.throwError("user rejected transaction",F.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:r}),M0("sendTransaction",o,s)))})}signTransaction(e){return Gt.throwError("signing transactions is unsupported",F.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return Ln(this,void 0,void 0,function*(){const t=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),r=yield this.sendUncheckedTransaction(e);try{return yield Mi(()=>Ln(this,void 0,void 0,function*(){const i=yield this.provider.getTransaction(r);if(i!==null)return this.provider._wrapTransaction(i,r,t)}),{oncePoll:this.provider})}catch(i){throw i.transactionHash=r,i}})}signMessage(e){return Ln(this,void 0,void 0,function*(){const t=typeof e=="string"?zt(e):e,r=yield this.getAddress();try{return yield this.provider.send("personal_sign",[te(t),r.toLowerCase()])}catch(i){throw typeof i.message=="string"&&i.message.match(/user denied/i)&&Gt.throwError("user rejected signing",F.errors.ACTION_REJECTED,{action:"signMessage",from:r,messageData:e}),i}})}_legacySignMessage(e){return Ln(this,void 0,void 0,function*(){const t=typeof e=="string"?zt(e):e,r=yield this.getAddress();try{return yield this.provider.send("eth_sign",[r.toLowerCase(),te(t)])}catch(i){throw typeof i.message=="string"&&i.message.match(/user denied/i)&&Gt.throwError("user rejected signing",F.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:r,messageData:e}),i}})}_signTypedData(e,t,r){return Ln(this,void 0,void 0,function*(){const i=yield er.resolveNames(e,t,r,o=>this.provider.resolveName(o)),s=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[s.toLowerCase(),JSON.stringify(er.getPayload(i.domain,t,i.value))])}catch(o){throw typeof o.message=="string"&&o.message.match(/user denied/i)&&Gt.throwError("user rejected signing",F.errors.ACTION_REJECTED,{action:"_signTypedData",from:s,messageData:{domain:i.domain,types:t,value:i.value}}),o}})}unlock(e){return Ln(this,void 0,void 0,function*(){const t=this.provider,r=yield this.getAddress();return t.send("personal_unlockAccount",[r.toLowerCase(),e,null])})}}class kg extends lh{sendTransaction(e){return this.sendUncheckedTransaction(e).then(t=>({hash:t,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:r=>this.provider.waitForTransaction(t,r)}))}}const Sg={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class Li extends Ja{constructor(e,t){let r=t;r==null&&(r=new Promise((i,s)=>{setTimeout(()=>{this.detectNetwork().then(o=>{i(o)},o=>{s(o)})},0)})),super(r),e||(e=tr(this.constructor,"defaultUrl")()),j(this,"connection",Object.freeze(typeof e=="string"?{url:e}:Nt(e))),this._nextId=42}get _cache(){return this._eventLoopCache==null&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout(()=>{this._cache.detectNetwork=null},0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return Ln(this,void 0,void 0,function*(){yield Qu(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch{try{e=yield this.send("net_version",[])}catch{}}if(e!=null){const t=tr(this.constructor,"getNetwork");try{return t(X.from(e).toNumber())}catch(r){return Gt.throwError("could not detect network",F.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:r})}}return Gt.throwError("could not detect network",F.errors.NETWORK_ERROR,{event:"noNetwork"})})}getSigner(e){return new lh(Cc,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then(e=>e.map(t=>this.formatter.address(t)))}send(e,t){const r={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:gr(r),provider:this});const i=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(i&&this._cache[e])return this._cache[e];const s=Cs(this.connection,JSON.stringify(r),_g).then(o=>(this.emit("debug",{action:"response",request:r,response:o,provider:this}),o),o=>{throw this.emit("debug",{action:"response",error:o,request:r,provider:this}),o});return i&&(this._cache[e]=s,setTimeout(()=>{this._cache[e]=null},0)),s}prepareRequest(e,t){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[Ls(t.address),t.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[Ls(t.address),t.blockTag]];case"getCode":return["eth_getCode",[Ls(t.address),t.blockTag]];case"getStorageAt":return["eth_getStorageAt",[Ls(t.address),St(t.position,32),t.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[t.signedTransaction]];case"getBlock":return t.blockTag?["eth_getBlockByNumber",[t.blockTag,!!t.includeTransactions]]:t.blockHash?["eth_getBlockByHash",[t.blockHash,!!t.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[t.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[t.transactionHash]];case"call":return["eth_call",[tr(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0}),t.blockTag]];case"estimateGas":return["eth_estimateGas",[tr(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0})]];case"getLogs":return t.filter&&t.filter.address!=null&&(t.filter.address=Ls(t.filter.address)),["eth_getLogs",[t.filter]]}return null}perform(e,t){return Ln(this,void 0,void 0,function*(){if(e==="call"||e==="estimateGas"){const i=t.transaction;if(i&&i.type!=null&&X.from(i.type).isZero()&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const s=yield this.getFeeData();s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null&&((t=Nt(t)).transaction=Nt(i),delete t.transaction.type)}}const r=this.prepareRequest(e,t);r==null&&Gt.throwError(e+" not implemented",F.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(r[0],r[1])}catch(i){return M0(e,i,t)}})}_startEvent(e){e.tag==="pending"&&this._startPending(),super._startEvent(e)}_startPending(){if(this._pendingFilter!=null)return;const e=this,t=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=t,t.then(function(r){return function i(){e.send("eth_getFilterChanges",[r]).then(function(s){if(e._pendingFilter!=t)return null;let o=Promise.resolve();return s.forEach(function(a){e._emitted["t:"+a.toLowerCase()]="pending",o=o.then(function(){return e.getTransaction(a).then(function(l){return e.emit("pending",l),null})})}),o.then(function(){return Qu(1e3)})}).then(function(){if(e._pendingFilter==t)return setTimeout(function(){i()},0),null;e.send("eth_uninstallFilter",[r])}).catch(s=>{})}(),r}).catch(r=>{})}_stopEvent(e){e.tag==="pending"&&this.listenerCount("pending")===0&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,t){const r=Nt(Sg);if(t)for(const s in t)t[s]&&(r[s]=!0);Hc(e,r);const i={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(function(s){if(e[s]==null)return;const o=So(X.from(e[s]));s==="gasLimit"&&(s="gas"),i[s]=o}),["from","to","data"].forEach(function(s){e[s]!=null&&(i[s]=te(e[s]))}),e.accessList&&(i.accessList=hi(e.accessList)),i}}let no=null;try{if(no=WebSocket,no==null)throw new Error("inject please")}catch{const e=new F(nr);no=function(){e.throwError("WebSockets not supported in this environment",F.errors.UNSUPPORTED_OPERATION,{operation:"new WebSocket()"})}}var Gl=function(n,e,t,r){return new(t||(t=Promise))(function(i,s){function o(h){try{l(r.next(h))}catch(u){s(u)}}function a(h){try{l(r.throw(h))}catch(u){s(u)}}function l(h){var u;h.done?i(h.value):(u=h.value,u instanceof t?u:new t(function(g){g(u)})).then(o,a)}l((r=r.apply(n,e||[])).next())})};const jo=new F(nr);let Ng=1;class $a extends Li{constructor(e,t){t==="any"&&jo.throwError("WebSocketProvider does not support 'any' network yet",F.errors.UNSUPPORTED_OPERATION,{operation:"network:any"}),super(typeof e=="string"?e:"_websocket",t),this._pollingInterval=-1,this._wsReady=!1,j(this,"_websocket",typeof e=="string"?new no(this.connection.url):e),j(this,"_requests",{}),j(this,"_subs",{}),j(this,"_subIds",{}),j(this,"_detectNetwork",super.detectNetwork()),this.websocket.onopen=()=>{this._wsReady=!0,Object.keys(this._requests).forEach(i=>{this.websocket.send(this._requests[i].payload)})},this.websocket.onmessage=i=>{const s=i.data,o=JSON.parse(s);if(o.id!=null){const a=String(o.id),l=this._requests[a];if(delete this._requests[a],o.result!==void 0)l.callback(null,o.result),this.emit("debug",{action:"response",request:JSON.parse(l.payload),response:o.result,provider:this});else{let h=null;o.error?(h=new Error(o.error.message||"unknown error"),j(h,"code",o.error.code||null),j(h,"response",s)):h=new Error("unknown error"),l.callback(h,void 0),this.emit("debug",{action:"response",error:h,request:JSON.parse(l.payload),provider:this})}}else if(o.method==="eth_subscription"){const a=this._subs[o.params.subscription];a&&a.processFunc(o.params.result)}else console.warn("this should not happen")};const r=setInterval(()=>{this.emit("poll")},1e3);r.unref&&r.unref()}get websocket(){return this._websocket}detectNetwork(){return this._detectNetwork}get pollingInterval(){return 0}resetEventsBlock(e){jo.throwError("cannot reset events block on WebSocketProvider",F.errors.UNSUPPORTED_OPERATION,{operation:"resetEventBlock"})}set pollingInterval(e){jo.throwError("cannot set polling interval on WebSocketProvider",F.errors.UNSUPPORTED_OPERATION,{operation:"setPollingInterval"})}poll(){return Gl(this,void 0,void 0,function*(){return null})}set polling(e){e&&jo.throwError("cannot set polling on WebSocketProvider",F.errors.UNSUPPORTED_OPERATION,{operation:"setPolling"})}send(e,t){const r=Ng++;return new Promise((i,s)=>{const o=JSON.stringify({method:e,params:t,id:r,jsonrpc:"2.0"});this.emit("debug",{action:"request",request:JSON.parse(o),provider:this}),this._requests[String(r)]={callback:function(a,l){return a?s(a):i(l)},payload:o},this._wsReady&&this.websocket.send(o)})}static defaultUrl(){return"ws://localhost:8546"}_subscribe(e,t,r){return Gl(this,void 0,void 0,function*(){let i=this._subIds[e];i==null&&(i=Promise.all(t).then(o=>this.send("eth_subscribe",o)),this._subIds[e]=i);const s=yield i;this._subs[s]={tag:e,processFunc:r}})}_startEvent(e){switch(e.type){case"block":this._subscribe("block",["newHeads"],t=>{const r=X.from(t.number).toNumber();this._emitted.block=r,this.emit("block",r)});break;case"pending":this._subscribe("pending",["newPendingTransactions"],t=>{this.emit("pending",t)});break;case"filter":this._subscribe(e.tag,["logs",this._getFilter(e.filter)],t=>{t.removed==null&&(t.removed=!1),this.emit(e.filter,this.formatter.filterLog(t))});break;case"tx":{const t=r=>{const i=r.hash;this.getTransactionReceipt(i).then(s=>{s&&this.emit(i,s)})};t(e),this._subscribe("tx",["newHeads"],r=>{this._events.filter(i=>i.type==="tx").forEach(t)});break}case"debug":case"poll":case"willPoll":case"didPoll":case"error":break;default:console.log("unhandled:",e)}}_stopEvent(e){let t=e.tag;if(e.type==="tx"){if(this._events.filter(i=>i.type==="tx").length)return;t="tx"}else if(this.listenerCount(e.event))return;const r=this._subIds[t];r&&(delete this._subIds[t],r.then(i=>{this._subs[i]&&(delete this._subs[i],this.send("eth_unsubscribe",[i]))}))}destroy(){return Gl(this,void 0,void 0,function*(){this.websocket.readyState===no.CONNECTING&&(yield new Promise(e=>{this.websocket.onopen=function(){e(!0)},this.websocket.onerror=function(){e(!1)}})),this.websocket.close(1e3)})}}var Cg=function(n,e,t,r){return new(t||(t=Promise))(function(i,s){function o(h){try{l(r.next(h))}catch(u){s(u)}}function a(h){try{l(r.throw(h))}catch(u){s(u)}}function l(h){var u;h.done?i(h.value):(u=h.value,u instanceof t?u:new t(function(g){g(u)})).then(o,a)}l((r=r.apply(n,e||[])).next())})};const Ks=new F(nr);class T0 extends Li{detectNetwork(){const e=Object.create(null,{detectNetwork:{get:()=>super.detectNetwork}});return Cg(this,void 0,void 0,function*(){let t=this.network;return t==null&&(t=yield e.detectNetwork.call(this),t||Ks.throwError("no network detected",F.errors.UNKNOWN_ERROR,{}),this._network==null&&(j(this,"_network",t),this.emit("network",t,null))),t})}}class Bn extends T0{constructor(e,t){Ks.checkAbstract(new.target,Bn),e=tr(new.target,"getNetwork")(e),t=tr(new.target,"getApiKey")(t),super(tr(new.target,"getUrl")(e,t),e),typeof t=="string"?j(this,"apiKey",t):t!=null&&Object.keys(t).forEach(r=>{j(this,r,t[r])})}_startPending(){Ks.warn("WARNING: API provider does not support pending filters")}isCommunityResource(){return!1}getSigner(e){return Ks.throwError("API provider does not support signing",F.errors.UNSUPPORTED_OPERATION,{operation:"getSigner"})}listAccounts(){return Promise.resolve([])}static getApiKey(e){return e}static getUrl(e,t){return Ks.throwError("not implemented; sub-classes must override getUrl",F.errors.NOT_IMPLEMENTED,{operation:"getUrl"})}}const Yu=new F(nr),ua="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";class R0 extends $a{constructor(e,t){const r=new ch(e,t);super(r.connection.url.replace(/^http/i,"ws").replace(".alchemyapi.",".ws.alchemyapi."),r.network),j(this,"apiKey",r.apiKey)}isCommunityResource(){return this.apiKey===ua}}class ch extends Bn{static getWebSocketProvider(e,t){return new R0(e,t)}static getApiKey(e){return e==null?ua:(e&&typeof e!="string"&&Yu.throwArgumentError("invalid apiKey","apiKey",e),e)}static getUrl(e,t){let r=null;switch(e.name){case"homestead":r="eth-mainnet.alchemyapi.io/v2/";break;case"goerli":r="eth-goerli.g.alchemy.com/v2/";break;case"sepolia":r="eth-sepolia.g.alchemy.com/v2/";break;case"matic":r="polygon-mainnet.g.alchemy.com/v2/";break;case"maticmum":r="polygon-mumbai.g.alchemy.com/v2/";break;case"arbitrum":r="arb-mainnet.g.alchemy.com/v2/";break;case"arbitrum-goerli":r="arb-goerli.g.alchemy.com/v2/";break;case"arbitrum-sepolia":r="arb-sepolia.g.alchemy.com/v2/";break;case"optimism":r="opt-mainnet.g.alchemy.com/v2/";break;case"optimism-goerli":r="opt-goerli.g.alchemy.com/v2/";break;case"optimism-sepolia":r="opt-sepolia.g.alchemy.com/v2/";break;default:Yu.throwArgumentError("unsupported network","network",arguments[0])}return{allowGzip:!0,url:"https://"+r+t,throttleCallback:(i,s)=>(t===ua&&Io(),Promise.resolve(!0))}}isCommunityResource(){return this.apiKey===ua}}const Ig=new F(nr),Wo="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";function Pg(n){switch(n){case"homestead":return"rpc.ankr.com/eth/";case"ropsten":return"rpc.ankr.com/eth_ropsten/";case"rinkeby":return"rpc.ankr.com/eth_rinkeby/";case"goerli":return"rpc.ankr.com/eth_goerli/";case"sepolia":return"rpc.ankr.com/eth_sepolia/";case"matic":return"rpc.ankr.com/polygon/";case"maticmum":return"rpc.ankr.com/polygon_mumbai/";case"optimism":return"rpc.ankr.com/optimism/";case"optimism-goerli":return"rpc.ankr.com/optimism_testnet/";case"optimism-sepolia":return"rpc.ankr.com/optimism_sepolia/";case"arbitrum":return"rpc.ankr.com/arbitrum/"}return Ig.throwArgumentError("unsupported network","name",n)}class B0 extends Bn{isCommunityResource(){return this.apiKey===Wo}static getApiKey(e){return e??Wo}static getUrl(e,t){t==null&&(t=Wo);const r={allowGzip:!0,url:"https://"+Pg(e.name)+t,throttleCallback:(i,s)=>(t.apiKey===Wo&&Io(),Promise.resolve(!0))};return t.projectSecret!=null&&(r.user="",r.password=t.projectSecret),r}}var Mg=function(n,e,t,r){return new(t||(t=Promise))(function(i,s){function o(h){try{l(r.next(h))}catch(u){s(u)}}function a(h){try{l(r.throw(h))}catch(u){s(u)}}function l(h){var u;h.done?i(h.value):(u=h.value,u instanceof t?u:new t(function(g){g(u)})).then(o,a)}l((r=r.apply(n,e||[])).next())})};const Xu=new F(nr);class O0 extends Bn{static getApiKey(e){return e!=null&&Xu.throwArgumentError("apiKey not supported for cloudflare","apiKey",e),null}static getUrl(e,t){let r=null;return e.name==="homestead"?r="https://cloudflare-eth.com/":Xu.throwArgumentError("unsupported network","network",arguments[0]),r}perform(e,t){const r=Object.create(null,{perform:{get:()=>super.perform}});return Mg(this,void 0,void 0,function*(){return e==="getBlockNumber"?(yield r.perform.call(this,"getBlock",{blockTag:"latest"})).number:r.perform.call(this,e,t)})}}var Ko=function(n,e,t,r){return new(t||(t=Promise))(function(i,s){function o(h){try{l(r.next(h))}catch(u){s(u)}}function a(h){try{l(r.throw(h))}catch(u){s(u)}}function l(h){var u;h.done?i(h.value):(u=h.value,u instanceof t?u:new t(function(g){g(u)})).then(o,a)}l((r=r.apply(n,e||[])).next())})};const ri=new F(nr);function Zu(n){const e={};for(let t in n){if(n[t]==null)continue;let r=n[t];t==="type"&&r===0||(r={type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[t]?So(te(r)):t==="accessList"?"["+hi(r).map(i=>`{address:"${i.address}",storageKeys:["${i.storageKeys.join('","')}"]}`).join(",")+"]":te(r),e[t]=r)}return e}function Tg(n){if(n.status==0&&(n.message==="No records found"||n.message==="No transactions found"))return n.result;if(n.status!=1||typeof n.message!="string"||!n.message.match(/^OK/)){const e=new Error("invalid response");throw e.result=JSON.stringify(n),(n.result||"").toLowerCase().indexOf("rate limit")>=0&&(e.throttleRetry=!0),e}return n.result}function ef(n){if(n&&n.status==0&&n.message=="NOTOK"&&(n.result||"").toLowerCase().indexOf("rate limit")>=0){const e=new Error("throttled response");throw e.result=JSON.stringify(n),e.throttleRetry=!0,e}if(n.jsonrpc!="2.0"){const e=new Error("invalid response");throw e.result=JSON.stringify(n),e}if(n.error){const e=new Error(n.error.message||"unknown error");throw n.error.code&&(e.code=n.error.code),n.error.data&&(e.data=n.error.data),e}return n.result}function tf(n){if(n==="pending")throw new Error("pending not supported");return n==="latest"?n:parseInt(n.substring(2),16)}function Hl(n,e,t){if(n==="call"&&e.code===F.errors.SERVER_ERROR){const i=e.error;if(i&&(i.message.match(/reverted/i)||i.message.match(/VM execution error/i))){let s=i.data;if(s&&(s="0x"+s.replace(/^.*0x/i,"")),Te(s))return s;ri.throwError("missing revert data in call exception",F.errors.CALL_EXCEPTION,{error:e,data:"0x"})}}let r=e.message;throw e.code===F.errors.SERVER_ERROR&&(e.error&&typeof e.error.message=="string"?r=e.error.message:typeof e.body=="string"?r=e.body:typeof e.responseText=="string"&&(r=e.responseText)),r=(r||"").toLowerCase(),r.match(/insufficient funds/)&&ri.throwError("insufficient funds for intrinsic transaction cost",F.errors.INSUFFICIENT_FUNDS,{error:e,method:n,transaction:t}),r.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&ri.throwError("nonce has already been used",F.errors.NONCE_EXPIRED,{error:e,method:n,transaction:t}),r.match(/another transaction with same nonce/)&&ri.throwError("replacement fee too low",F.errors.REPLACEMENT_UNDERPRICED,{error:e,method:n,transaction:t}),r.match(/execution failed due to an exception|execution reverted/)&&ri.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",F.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:n,transaction:t}),e}class F0 extends Ja{constructor(e,t){super(e),j(this,"baseUrl",this.getBaseUrl()),j(this,"apiKey",t||null)}getBaseUrl(){switch(this.network?this.network.name:"invalid"){case"homestead":return"https://api.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"sepolia":return"https://api-sepolia.etherscan.io";case"matic":return"https://api.polygonscan.com";case"maticmum":return"https://api-testnet.polygonscan.com";case"arbitrum":return"https://api.arbiscan.io";case"arbitrum-goerli":return"https://api-goerli.arbiscan.io";case"optimism":return"https://api-optimistic.etherscan.io";case"optimism-goerli":return"https://api-goerli-optimistic.etherscan.io"}return ri.throwArgumentError("unsupported network","network",this.network.name)}getUrl(e,t){const r=Object.keys(t).reduce((s,o)=>{const a=t[o];return a!=null&&(s+=`&${o}=${a}`),s},""),i=this.apiKey?`&apikey=${this.apiKey}`:"";return`${this.baseUrl}/api?module=${e}${r}${i}`}getPostUrl(){return`${this.baseUrl}/api`}getPostData(e,t){return t.module=e,t.apikey=this.apiKey,t}fetch(e,t,r){return Ko(this,void 0,void 0,function*(){const i=r?this.getPostUrl():this.getUrl(e,t),s=r?this.getPostData(e,t):null,o=e==="proxy"?ef:Tg;this.emit("debug",{action:"request",request:i,provider:this});const a={url:i,throttleSlotInterval:1e3,throttleCallback:(u,g)=>(this.isCommunityResource()&&Io(),Promise.resolve(!0))};let l=null;s&&(a.headers={"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},l=Object.keys(s).map(u=>`${u}=${s[u]}`).join("&"));const h=yield Cs(a,l,o||ef);return this.emit("debug",{action:"response",request:i,response:gr(h),provider:this}),h})}detectNetwork(){return Ko(this,void 0,void 0,function*(){return this.network})}perform(e,t){const r=Object.create(null,{perform:{get:()=>super.perform}});return Ko(this,void 0,void 0,function*(){switch(e){case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getBalance":return this.fetch("account",{action:"balance",address:t.address,tag:t.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:t.address,tag:t.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:t.address,tag:t.blockTag});case"getStorageAt":return this.fetch("proxy",{action:"eth_getStorageAt",address:t.address,position:t.position,tag:t.blockTag});case"sendTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:t.signedTransaction},!0).catch(i=>Hl("sendTransaction",i,t.signedTransaction));case"getBlock":if(t.blockTag)return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:t.blockTag,boolean:t.includeTransactions?"true":"false"});throw new Error("getBlock by blockHash not implemented");case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:t.transactionHash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:t.transactionHash});case"call":{if(t.blockTag!=="latest")throw new Error("EtherscanProvider does not support blockTag for call");const i=Zu(t.transaction);i.module="proxy",i.action="eth_call";try{return yield this.fetch("proxy",i,!0)}catch(s){return Hl("call",s,t.transaction)}}case"estimateGas":{const i=Zu(t.transaction);i.module="proxy",i.action="eth_estimateGas";try{return yield this.fetch("proxy",i,!0)}catch(s){return Hl("estimateGas",s,t.transaction)}}case"getLogs":{const i={action:"getLogs"};if(t.filter.fromBlock&&(i.fromBlock=tf(t.filter.fromBlock)),t.filter.toBlock&&(i.toBlock=tf(t.filter.toBlock)),t.filter.address&&(i.address=t.filter.address),t.filter.topics&&t.filter.topics.length>0&&(t.filter.topics.length>1&&ri.throwError("unsupported topic count",F.errors.UNSUPPORTED_OPERATION,{topics:t.filter.topics}),t.filter.topics.length===1)){const a=t.filter.topics[0];typeof a=="string"&&a.length===66||ri.throwError("unsupported topic format",F.errors.UNSUPPORTED_OPERATION,{topic0:a}),i.topic0=a}const s=yield this.fetch("logs",i);let o={};for(let a=0;a<s.length;a++){const l=s[a];if(l.blockHash==null){if(o[l.blockNumber]==null){const h=yield this.getBlock(l.blockNumber);h&&(o[l.blockNumber]=h.hash)}l.blockHash=o[l.blockNumber]}}return s}case"getEtherPrice":return this.network.name!=="homestead"?0:parseFloat((yield this.fetch("stats",{action:"ethprice"})).ethusd)}return r.perform.call(this,e,t)})}getHistory(e,t,r){return Ko(this,void 0,void 0,function*(){const i={action:"txlist",address:yield this.resolveName(e),startblock:t??0,endblock:r??99999999,sort:"asc"};return(yield this.fetch("account",i)).map(s=>{["contractAddress","to"].forEach(function(a){s[a]==""&&delete s[a]}),s.creates==null&&s.contractAddress!=null&&(s.creates=s.contractAddress);const o=this.formatter.transactionResponse(s);return s.timeStamp&&(o.timestamp=parseInt(s.timeStamp)),o})})}isCommunityResource(){return this.apiKey==null}}var Ra=function(n,e,t,r){return new(t||(t=Promise))(function(i,s){function o(h){try{l(r.next(h))}catch(u){s(u)}}function a(h){try{l(r.throw(h))}catch(u){s(u)}}function l(h){var u;h.done?i(h.value):(u=h.value,u instanceof t?u:new t(function(g){g(u)})).then(o,a)}l((r=r.apply(n,e||[])).next())})};const Si=new F(nr);function Vo(){return new Date().getTime()}function rf(n){let e=null;for(let t=0;t<n.length;t++){const r=n[t];if(r==null)return null;e?e.name===r.name&&e.chainId===r.chainId&&(e.ensAddress===r.ensAddress||e.ensAddress==null&&r.ensAddress==null)||Si.throwArgumentError("provider mismatch","networks",n):e=r}return e}function nf(n,e){n=n.slice().sort();const t=Math.floor(n.length/2);if(n.length%2)return n[t];const r=n[t-1],i=n[t];return e!=null&&Math.abs(r-i)>e?null:(r+i)/2}function ls(n){if(n===null)return"null";if(typeof n=="number"||typeof n=="boolean")return JSON.stringify(n);if(typeof n=="string")return n;if(X.isBigNumber(n))return n.toString();if(Array.isArray(n))return JSON.stringify(n.map(e=>ls(e)));if(typeof n=="object"){const e=Object.keys(n);return e.sort(),"{"+e.map(t=>{let r=n[t];return r=typeof r=="function"?"[function]":ls(r),JSON.stringify(t)+":"+r}).join(",")+"}"}throw new Error("unknown value type: "+typeof n)}let Rg=1;function sf(n){let e=null,t=null,r=new Promise(i=>{e=function(){t&&(clearTimeout(t),t=null),i()},t=setTimeout(e,n)});return{cancel:e,getPromise:function(){return r},wait:i=>(r=r.then(i),r)}}const Bg=[F.errors.CALL_EXCEPTION,F.errors.INSUFFICIENT_FUNDS,F.errors.NONCE_EXPIRED,F.errors.REPLACEMENT_UNDERPRICED,F.errors.UNPREDICTABLE_GAS_LIMIT],Og=["address","args","errorArgs","errorSignature","method","transaction"];function Jo(n,e){const t={weight:n.weight};return Object.defineProperty(t,"provider",{get:()=>n.provider}),n.start&&(t.start=n.start),e&&(t.duration=e-n.start),n.done&&(n.error?t.error=n.error:t.result=n.result||null),t}function Fg(n,e,t){let r=ls;switch(e){case"getBlockNumber":return function(i){const s=i.map(a=>a.result);let o=nf(i.map(a=>a.result),2);if(o!=null)return o=Math.ceil(o),s.indexOf(o+1)>=0&&o++,o>=n._highestBlockNumber&&(n._highestBlockNumber=o),n._highestBlockNumber};case"getGasPrice":return function(i){const s=i.map(o=>o.result);return s.sort(),s[Math.floor(s.length/2)]};case"getEtherPrice":return function(i){return nf(i.map(s=>s.result))};case"getBalance":case"getTransactionCount":case"getCode":case"getStorageAt":case"call":case"estimateGas":case"getLogs":break;case"getTransaction":case"getTransactionReceipt":r=function(i){return i==null?null:((i=Nt(i)).confirmations=-1,ls(i))};break;case"getBlock":r=t.includeTransactions?function(i){return i==null?null:((i=Nt(i)).transactions=i.transactions.map(s=>((s=Nt(s)).confirmations=-1,s)),ls(i))}:function(i){return i==null?null:ls(i)};break;default:throw new Error("unknown method: "+e)}return function(i,s){return function(o){const a={};o.forEach(h=>{const u=i(h.result);a[u]||(a[u]={count:0,result:h.result}),a[u].count++});const l=Object.keys(a);for(let h=0;h<l.length;h++){const u=a[l[h]];if(u.count>=s)return u.result}}}(r,n.quorum)}function Us(n,e){return Ra(this,void 0,void 0,function*(){const t=n.provider;return t.blockNumber!=null&&t.blockNumber>=e||e===-1?t:Mi(()=>new Promise((r,i)=>{setTimeout(function(){return t.blockNumber>=e?r(t):n.cancelled?r(null):r(void 0)},0)}),{oncePoll:t})})}function Dg(n,e,t,r){return Ra(this,void 0,void 0,function*(){let i=n.provider;switch(t){case"getBlockNumber":case"getGasPrice":return i[t]();case"getEtherPrice":if(i.getEtherPrice)return i.getEtherPrice();break;case"getBalance":case"getTransactionCount":case"getCode":return r.blockTag&&Te(r.blockTag)&&(i=yield Us(n,e)),i[t](r.address,r.blockTag||"latest");case"getStorageAt":return r.blockTag&&Te(r.blockTag)&&(i=yield Us(n,e)),i.getStorageAt(r.address,r.position,r.blockTag||"latest");case"getBlock":return r.blockTag&&Te(r.blockTag)&&(i=yield Us(n,e)),i[r.includeTransactions?"getBlockWithTransactions":"getBlock"](r.blockTag||r.blockHash);case"call":case"estimateGas":return r.blockTag&&Te(r.blockTag)&&(i=yield Us(n,e)),t==="call"&&r.blockTag?i[t](r.transaction,r.blockTag):i[t](r.transaction);case"getTransaction":case"getTransactionReceipt":return i[t](r.transactionHash);case"getLogs":{let s=r.filter;return(s.fromBlock&&Te(s.fromBlock)||s.toBlock&&Te(s.toBlock))&&(i=yield Us(n,e)),i.getLogs(s)}}return Si.throwError("unknown method error",F.errors.UNKNOWN_ERROR,{method:t,params:r})})}class D0 extends Ja{constructor(e,t){e.length===0&&Si.throwArgumentError("missing providers","providers",e);const r=e.map((o,a)=>{if(Ki.isProvider(o)){const u=Sc(o)?2e3:750;return Object.freeze({provider:o,weight:1,stallTimeout:u,priority:1})}const l=Nt(o);l.priority==null&&(l.priority=1),l.stallTimeout==null&&(l.stallTimeout=Sc(o)?2e3:750),l.weight==null&&(l.weight=1);const h=l.weight;return(h%1||h>512||h<1)&&Si.throwArgumentError("invalid weight; must be integer in [1, 512]",`providers[${a}].weight`,h),Object.freeze(l)}),i=r.reduce((o,a)=>o+a.weight,0);t==null?t=i/2:t>i&&Si.throwArgumentError("quorum will always fail; larger than total weight","quorum",t);let s=rf(r.map(o=>o.provider.network));s==null&&(s=new Promise((o,a)=>{setTimeout(()=>{this.detectNetwork().then(o,a)},0)})),super(s),j(this,"providerConfigs",Object.freeze(r)),j(this,"quorum",t),this._highestBlockNumber=-1}detectNetwork(){return Ra(this,void 0,void 0,function*(){return rf(yield Promise.all(this.providerConfigs.map(e=>e.provider.getNetwork())))})}perform(e,t){return Ra(this,void 0,void 0,function*(){if(e==="sendTransaction"){const l=yield Promise.all(this.providerConfigs.map(h=>h.provider.sendTransaction(t.signedTransaction).then(u=>u.hash,u=>u)));for(let h=0;h<l.length;h++){const u=l[h];if(typeof u=="string")return u}throw l[0]}this._highestBlockNumber===-1&&e!=="getBlockNumber"&&(yield this.getBlockNumber());const r=Fg(this,e,t),i=A0(this.providerConfigs.map(Nt));i.sort((l,h)=>l.priority-h.priority);const s=this._highestBlockNumber;let o=0,a=!0;for(;;){const l=Vo();let h=i.filter(A=>A.runner&&l-A.start<A.stallTimeout).reduce((A,E)=>A+E.weight,0);for(;h<this.quorum&&o<i.length;){const A=i[o++],E=Rg++;A.start=Vo(),A.staller=sf(A.stallTimeout),A.staller.wait(()=>{A.staller=null}),A.runner=Dg(A,s,e,t).then(I=>{A.done=!0,A.result=I,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:E,backend:Jo(A,Vo()),request:{method:e,params:gr(t)},provider:this})},I=>{A.done=!0,A.error=I,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:E,backend:Jo(A,Vo()),request:{method:e,params:gr(t)},provider:this})}),this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:E,backend:Jo(A,null),request:{method:e,params:gr(t)},provider:this}),h+=A.weight}const u=[];i.forEach(A=>{!A.done&&A.runner&&(u.push(A.runner),A.staller&&u.push(A.staller.getPromise()))}),u.length&&(yield Promise.race(u));const g=i.filter(A=>A.done&&A.error==null);if(g.length>=this.quorum){const A=r(g);if(A!==void 0)return i.forEach(E=>{E.staller&&E.staller.cancel(),E.cancelled=!0}),A;a||(yield sf(100).getPromise()),a=!1}const x=i.reduce((A,E)=>{if(!E.done||E.error==null)return A;const I=E.error.code;return Bg.indexOf(I)>=0&&(A[I]||(A[I]={error:E.error,weight:0}),A[I].weight+=E.weight),A},{});if(Object.keys(x).forEach(A=>{const E=x[A];if(E.weight<this.quorum)return;i.forEach(R=>{R.staller&&R.staller.cancel(),R.cancelled=!0});const I=E.error,T={};Og.forEach(R=>{I[R]!=null&&(T[R]=I[R])}),Si.throwError(I.reason||I.message,A,T)}),i.filter(A=>!A.done).length===0)break}return i.forEach(l=>{l.staller&&l.staller.cancel(),l.cancelled=!0}),Si.throwError("failed to meet quorum",F.errors.SERVER_ERROR,{method:e,params:t,results:i.map(l=>Jo(l)),provider:this})})}}const fa=new F(nr),Vs="84842078b09946638c03157f83405213";class L0 extends $a{constructor(e,t){const r=new hh(e,t),i=r.connection;i.password&&fa.throwError("INFURA WebSocket project secrets unsupported",F.errors.UNSUPPORTED_OPERATION,{operation:"InfuraProvider.getWebSocketProvider()"}),super(i.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/"),e),j(this,"apiKey",r.projectId),j(this,"projectId",r.projectId),j(this,"projectSecret",r.projectSecret)}isCommunityResource(){return this.projectId===Vs}}class hh extends Bn{static getWebSocketProvider(e,t){return new L0(e,t)}static getApiKey(e){const t={apiKey:Vs,projectId:Vs,projectSecret:null};return e==null||(typeof e=="string"?t.projectId=e:e.projectSecret!=null?(fa.assertArgument(typeof e.projectId=="string","projectSecret requires a projectId","projectId",e.projectId),fa.assertArgument(typeof e.projectSecret=="string","invalid projectSecret","projectSecret","[REDACTED]"),t.projectId=e.projectId,t.projectSecret=e.projectSecret):e.projectId&&(t.projectId=e.projectId),t.apiKey=t.projectId),t}static getUrl(e,t){let r=null;switch(e?e.name:"unknown"){case"homestead":r="mainnet.infura.io";break;case"goerli":r="goerli.infura.io";break;case"sepolia":r="sepolia.infura.io";break;case"matic":r="polygon-mainnet.infura.io";break;case"maticmum":r="polygon-mumbai.infura.io";break;case"optimism":r="optimism-mainnet.infura.io";break;case"optimism-goerli":r="optimism-goerli.infura.io";break;case"optimism-sepolia":r="optimism-sepolia.infura.io";break;case"arbitrum":r="arbitrum-mainnet.infura.io";break;case"arbitrum-goerli":r="arbitrum-goerli.infura.io";break;case"arbitrum-sepolia":r="arbitrum-sepolia.infura.io";break;default:fa.throwError("unsupported network",F.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const i={allowGzip:!0,url:"https://"+r+"/v3/"+t.projectId,throttleCallback:(s,o)=>(t.projectId===Vs&&Io(),Promise.resolve(!0))};return t.projectSecret!=null&&(i.user="",i.password=t.projectSecret),i}isCommunityResource(){return this.projectId===Vs}}const jl=new F(nr);let U0=class extends Bn{static getApiKey(e){return e&&typeof e!="string"&&jl.throwArgumentError("invalid apiKey","apiKey",e),e||"ETHERS_JS_SHARED"}static getUrl(e,t){jl.warn("NodeSmith will be discontinued on 2019-12-20; please migrate to another platform.");let r=null;switch(e.name){case"homestead":r="https://ethereum.api.nodesmith.io/v1/mainnet/jsonrpc";break;case"ropsten":r="https://ethereum.api.nodesmith.io/v1/ropsten/jsonrpc";break;case"rinkeby":r="https://ethereum.api.nodesmith.io/v1/rinkeby/jsonrpc";break;case"goerli":r="https://ethereum.api.nodesmith.io/v1/goerli/jsonrpc";break;case"kovan":r="https://ethereum.api.nodesmith.io/v1/kovan/jsonrpc";break;default:jl.throwArgumentError("unsupported network","network",arguments[0])}return r+"?apiKey="+t}};const of=new F(nr),af="62e1ad51b37b8e00394bda3b";class z0 extends Bn{static getApiKey(e){const t={applicationId:null,loadBalancer:!0,applicationSecretKey:null};return e==null?t.applicationId=af:typeof e=="string"?t.applicationId=e:e.applicationSecretKey!=null?(t.applicationId=e.applicationId,t.applicationSecretKey=e.applicationSecretKey):e.applicationId?t.applicationId=e.applicationId:of.throwArgumentError("unsupported PocketProvider apiKey","apiKey",e),t}static getUrl(e,t){let r=null;switch(e?e.name:"unknown"){case"goerli":r="eth-goerli.gateway.pokt.network";break;case"homestead":r="eth-mainnet.gateway.pokt.network";break;case"kovan":r="poa-kovan.gateway.pokt.network";break;case"matic":r="poly-mainnet.gateway.pokt.network";break;case"maticmum":r="polygon-mumbai-rpc.gateway.pokt.network";break;case"rinkeby":r="eth-rinkeby.gateway.pokt.network";break;case"ropsten":r="eth-ropsten.gateway.pokt.network";break;default:of.throwError("unsupported network",F.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const i={headers:{},url:`https://${r}/v1/lb/${t.applicationId}`};return t.applicationSecretKey!=null&&(i.user="",i.password=t.applicationSecretKey),i}isCommunityResource(){return this.applicationId===af}}const lf=new F(nr);class q0 extends Bn{static getApiKey(e){return e&&typeof e!="string"&&lf.throwArgumentError("invalid apiKey","apiKey",e),e||"919b412a057b5e9c9b6dce193c5a60242d6efadb"}static getUrl(e,t){let r=null;switch(e.name){case"homestead":r="ethers.quiknode.pro";break;case"goerli":r="ethers.ethereum-goerli.quiknode.pro";break;case"sepolia":r="ethers.ethereum-sepolia.quiknode.pro";break;case"holesky":r="ethers.ethereum-holesky.quiknode.pro";break;case"arbitrum":r="ethers.arbitrum-mainnet.quiknode.pro";break;case"arbitrum-goerli":r="ethers.arbitrum-goerli.quiknode.pro";break;case"arbitrum-sepolia":r="ethers.arbitrum-sepolia.quiknode.pro";break;case"base":r="ethers.base-mainnet.quiknode.pro";break;case"base-goerli":r="ethers.base-goerli.quiknode.pro";break;case"base-spolia":r="ethers.base-sepolia.quiknode.pro";break;case"bnb":r="ethers.bsc.quiknode.pro";break;case"bnbt":r="ethers.bsc-testnet.quiknode.pro";break;case"matic":r="ethers.matic.quiknode.pro";break;case"maticmum":r="ethers.matic-testnet.quiknode.pro";break;case"optimism":r="ethers.optimism.quiknode.pro";break;case"optimism-goerli":r="ethers.optimism-goerli.quiknode.pro";break;case"optimism-sepolia":r="ethers.optimism-sepolia.quiknode.pro";break;case"xdai":r="ethers.xdai.quiknode.pro";break;default:lf.throwArgumentError("unsupported network","network",arguments[0])}return"https://"+r+"/"+t}}const cf=new F(nr);let Lg=1;function hf(n,e){const t="Web3LegacyFetcher";return function(r,i){const s={method:r,params:i,id:Lg++,jsonrpc:"2.0"};return new Promise((o,a)=>{this.emit("debug",{action:"request",fetcher:t,request:gr(s),provider:this}),e(s,(l,h)=>{if(l)return this.emit("debug",{action:"response",fetcher:t,error:l,request:s,provider:this}),a(l);if(this.emit("debug",{action:"response",fetcher:t,request:s,response:h,provider:this}),h.error){const u=new Error(h.error.message);return u.code=h.error.code,u.data=h.error.data,a(u)}o(h.result)})})}}class Ni extends Li{constructor(e,t){e==null&&cf.throwArgumentError("missing provider","provider",e);let r=null,i=null,s=null;typeof e=="function"?(r="unknown:",i=e):(r=e.host||e.path||"",!r&&e.isMetaMask&&(r="metamask"),s=e,e.request?(r===""&&(r="eip-1193:"),i=function(o){return function(a,l){l==null&&(l=[]);const h={method:a,params:l};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:gr(h),provider:this}),o.request(h).then(u=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:h,response:u,provider:this}),u),u=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:h,error:u,provider:this}),u})}}(e)):e.sendAsync?i=hf(0,e.sendAsync.bind(e)):e.send?i=hf(0,e.send.bind(e)):cf.throwArgumentError("unsupported provider","provider",e),r||(r="unknown:")),super(r,t),j(this,"jsonRpcFetchFunc",i),j(this,"provider",s)}send(e,t){return this.jsonRpcFetchFunc(e,t)}}const uf=new F(nr);function G0(n,e){if(n==null&&(n="homestead"),typeof n=="string"){const r=n.match(/^(ws|http)s?:/i);if(r)switch(r[1].toLowerCase()){case"http":case"https":return new Li(n);case"ws":case"wss":return new $a(n);default:uf.throwArgumentError("unsupported URL scheme","network",n)}}const t=ah(n);return t&&t._defaultProvider||uf.throwError("unsupported getDefaultProvider network",F.errors.NETWORK_ERROR,{operation:"getDefaultProvider",network:n}),t._defaultProvider({FallbackProvider:D0,AlchemyProvider:ch,AnkrProvider:B0,CloudflareProvider:O0,EtherscanProvider:F0,InfuraProvider:hh,JsonRpcProvider:Li,NodesmithProvider:U0,PocketProvider:z0,QuickNodeProvider:q0,Web3Provider:Ni,IpcProvider:null},e)}var Ug=Object.freeze({__proto__:null,AlchemyProvider:ch,AlchemyWebSocketProvider:R0,AnkrProvider:B0,BaseProvider:Ja,CloudflareProvider:O0,EtherscanProvider:F0,FallbackProvider:D0,Formatter:ae,InfuraProvider:hh,InfuraWebSocketProvider:L0,IpcProvider:null,JsonRpcBatchProvider:class extends Li{send(n,e){const t={method:n,params:e,id:this._nextId++,jsonrpc:"2.0"};this._pendingBatch==null&&(this._pendingBatch=[]);const r={request:t,resolve:null,reject:null},i=new Promise((s,o)=>{r.resolve=s,r.reject=o});return this._pendingBatch.push(r),this._pendingBatchAggregator||(this._pendingBatchAggregator=setTimeout(()=>{const s=this._pendingBatch;this._pendingBatch=null,this._pendingBatchAggregator=null;const o=s.map(a=>a.request);return this.emit("debug",{action:"requestBatch",request:gr(o),provider:this}),Cs(this.connection,JSON.stringify(o)).then(a=>{this.emit("debug",{action:"response",request:o,response:a,provider:this}),s.forEach((l,h)=>{const u=a[h];if(u.error){const g=new Error(u.error.message);g.code=u.error.code,g.data=u.error.data,l.reject(g)}else l.resolve(u.result)})},a=>{this.emit("debug",{action:"response",error:a,request:o,provider:this}),s.forEach(l=>{l.reject(a)})})},10)),i}},JsonRpcProvider:Li,JsonRpcSigner:lh,NodesmithProvider:U0,PocketProvider:z0,Provider:Ki,QuickNodeProvider:q0,Resolver:Nc,StaticJsonRpcProvider:T0,UrlJsonRpcProvider:Bn,Web3Provider:Ni,WebSocketProvider:$a,getDefaultProvider:G0,getNetwork:ah,isCommunityResourcable:C0,isCommunityResource:Sc,showThrottleMessage:Io});const zg=new RegExp("^bytes([0-9]+)$"),qg=new RegExp("^(u?int)([0-9]*)$"),Gg=new RegExp("^(.*)\\[([0-9]*)\\]$"),ns=new F("solidity/5.8.0");function H0(n,e,t){switch(n){case"address":return t?$s(e,32):Y(e);case"string":return zt(e);case"bytes":return Y(e);case"bool":return e=e?"0x01":"0x00",t?$s(e,32):Y(e)}let r=n.match(qg);if(r){let i=parseInt(r[2]||"256");return(r[2]&&String(i)!==r[2]||i%8!=0||i===0||i>256)&&ns.throwArgumentError("invalid number type","type",n),t&&(i=256),$s(e=X.from(e).toTwos(i),i/8)}if(r=n.match(zg),r){const i=parseInt(r[1]);return(String(i)!==r[1]||i===0||i>32)&&ns.throwArgumentError("invalid bytes type","type",n),Y(e).byteLength!==i&&ns.throwArgumentError(`invalid value for ${n}`,"value",e),t?Y((e+"0000000000000000000000000000000000000000000000000000000000000000").substring(0,66)):e}if(r=n.match(Gg),r&&Array.isArray(e)){const i=r[1];parseInt(r[2]||String(e.length))!=e.length&&ns.throwArgumentError(`invalid array length for ${n}`,"value",e);const s=[];return e.forEach(function(o){s.push(H0(i,o,!0))}),kt(s)}return ns.throwArgumentError("invalid type","type",n)}function Wl(n,e){n.length!=e.length&&ns.throwArgumentError("wrong number of values; expected ${ types.length }","values",e);const t=[];return n.forEach(function(r,i){t.push(H0(r,e[i]))}),te(kt(t))}const j0=new F("units/5.8.0"),W0=["wei","kwei","mwei","gwei","szabo","finney","ether"];function K0(n,e){if(typeof e=="string"){const t=W0.indexOf(e);t!==-1&&(e=3*t)}return na(n,e??18)}function V0(n,e){if(typeof n!="string"&&j0.throwArgumentError("value must be a string","value",n),typeof e=="string"){const t=W0.indexOf(e);t!==-1&&(e=3*t)}return cn(n,e??18)}function Hg(n){return K0(n,18)}function jg(n){return V0(n,18)}var Wg=Object.freeze({__proto__:null,AbiCoder:Kd,ConstructorFragment:rn,ErrorFragment:qn,EventFragment:yn,FormatTypes:mt,Fragment:bn,FunctionFragment:nn,HDNode:kr,Indexed:Na,Interface:vc,LogDescription:n0,Logger:F,ParamType:Wt,RLP:qp,SigningKey:Ti,get SupportedAlgorithm(){return bs},TransactionDescription:i0,get TransactionTypes(){return Ac},get UnicodeNormalizationForm(){return Pn},Utf8ErrorFuncs:jd,get Utf8ErrorReason(){return br},_TypedDataEncoder:er,_fetchData:N0,_toEscapedUtf8String:function(n,e){return'"'+Jc(n,e).map(t=>{if(t<256){switch(t){case 8:return"\\b";case 9:return"\\t";case 10:return"\\n";case 13:return"\\r";case 34:return'\\"';case 92:return"\\\\"}if(t>=32&&t<127)return String.fromCharCode(t)}return t<=65535?yl(t):yl(55296+((t-=65536)>>10&1023))+yl(56320+(1023&t))}).join("")+'"'},accessListify:hi,arrayify:Y,base58:ws,base64:um,checkProperties:Hc,checkResultErrors:Td,commify:function(n){const e=String(n).split(".");(e.length>2||!e[0].match(/^-?[0-9]*$/)||e[1]&&!e[1].match(/^[0-9]*$/)||n==="."||n==="-.")&&j0.throwArgumentError("invalid value","value",n);let t=e[0],r="";for(t.substring(0,1)==="-"&&(r="-",t=t.substring(1));t.substring(0,1)==="0";)t=t.substring(1);t===""&&(t="0");let i="";for(e.length===2&&(i="."+(e[1]||"0"));i.length>2&&i[i.length-1]==="0";)i=i.substring(0,i.length-1);const s=[];for(;t.length;){if(t.length<=3){s.unshift(t);break}{const o=t.length-3;s.unshift(t.substring(o)),t=t.substring(0,o)}}return r+s.join(",")+i},computeAddress:oi,computeHmac:mo,computePublicKey:eh,concat:kt,deepCopy:gr,defaultAbiCoder:Vd,defaultPath:as,defineReadOnly:j,dnsEncode:Zd,entropyToMnemonic:Va,fetchJson:Cs,formatBytes32String:function(n){const e=zt(n);if(e.length>31)throw new Error("bytes32 string must be less than 32 bytes");return te(kt([e,Vc]).slice(0,32))},formatEther:Hg,formatUnits:K0,getAccountPath:function(n){return(typeof n!="number"||n<0||n>=Ws||n%1)&&go.throwArgumentError("invalid account index","index",n),`m/44'/60'/${n}'/0/0`},getAddress:At,getContractAddress:ja,getCreate2Address:function(n,e,t){return _n(e)!==32&&ii.throwArgumentError("salt must be 32 bytes","salt",e),_n(t)!==32&&ii.throwArgumentError("initCodeHash must be 32 bytes","initCodeHash",t),At(Lt(_t(kt(["0xff",At(n),e,t])),12))},getIcapAddress:function(n){let e=(t=At(n).substring(2),new ao(t,16).toString(36)).toUpperCase();for(var t;e.length<30;)e="0"+e;return"XE"+Od("XE00"+e)+e},getJsonWalletAddress:function(n){if(ih(n))try{return At(JSON.parse(n).ethaddr)}catch{return null}if(sh(n))try{return At(JSON.parse(n).address)}catch{return null}return null},getStatic:tr,hashMessage:yc,hexConcat:fr,hexDataLength:_n,hexDataSlice:Lt,hexStripZeros:xd,hexValue:So,hexZeroPad:St,hexlify:te,id:si,isAddress:function(n){try{return At(n),!0}catch{}return!1},isBytes:li,isBytesLike:ko,isHexString:Te,isValidMnemonic:function(n,e){try{return Ma(n,e),!0}catch{}return!1},isValidName:function(n){try{return Xc(n).length!==0}catch{}return!1},joinSignature:dc,keccak256:_t,mnemonicToEntropy:Ma,mnemonicToSeed:b0,namehash:Xs,nameprep:function(n){if(n.match(/^[a-z0-9-]*$/i)&&n.length<=59)return n.toLowerCase();let e=sa(n);var t;t=e.map(i=>rm.indexOf(i)>=0?[]:i>=65024&&i<=65039?[]:function(o){let a=vl(o,nm);if(a)return[o+a.s];let l=im[o];if(l)return l;let h=sm[o];return h?[o+h[0]]:om[o]||null}(i)||[i]),e=t.reduce((i,s)=>(s.forEach(o=>{i.push(o)}),i),[]),e=sa(gc(e),Pn.NFKC),e.forEach(i=>{if(vl(i,am))throw new Error("STRINGPREP_CONTAINS_PROHIBITED")}),e.forEach(i=>{if(vl(i,tm))throw new Error("STRINGPREP_CONTAINS_UNASSIGNED")});let r=gc(e);if(r.substring(0,1)==="-"||r.substring(2,4)==="--"||r.substring(r.length-1)==="-")throw new Error("invalid hyphen");return r},parseBytes32String:function(n){const e=Y(n);if(e.length!==32)throw new Error("invalid bytes32 - not 32 bytes long");if(e[31]!==0)throw new Error("invalid bytes32 string - no null terminator");let t=31;for(;e[t-1]===0;)t--;return Fi(e.slice(0,t))},parseEther:jg,parseTransaction:u0,parseUnits:V0,poll:Mi,randomBytes:rs,recoverAddress:Zs,recoverPublicKey:a0,resolveProperties:Ot,ripemd160:y0,serializeTransaction:Ec,sha256:jn,sha512:function(n){return"0x"+wr.sha512().update(Y(n)).digest("hex")},shallowCopy:Nt,shuffled:A0,solidityKeccak256:function(n,e){return _t(Wl(n,e))},solidityPack:Wl,soliditySha256:function(n,e){return jn(Wl(n,e))},splitSignature:ji,stripZeros:xn,toUtf8Bytes:zt,toUtf8CodePoints:sa,toUtf8String:Fi,verifyMessage:function(n,e){return Zs(yc(n),e)},verifyTypedData:function(n,e,t,r){return Zs(er.hash(n,e,t),r)},zeroPad:$s});const J0="ethers/5.8.0",Kg=new F(J0);var $0=Object.freeze({__proto__:null,BaseContract:m0,BigNumber:X,Contract:la,ContractFactory:class{constructor(n,e,t){let r=null;r=typeof e=="string"?e:li(e)?te(e):e&&typeof e.object=="string"?e.object:"!",r.substring(0,2)!=="0x"&&(r="0x"+r),(!Te(r)||r.length%2)&&xt.throwArgumentError("invalid bytecode","bytecode",e),t&&!ci.isSigner(t)&&xt.throwArgumentError("invalid signer","signer",t),j(this,"bytecode",r),j(this,"interface",tr(new.target,"getInterface")(n)),j(this,"signer",t||null)}getDeployTransaction(...n){let e={};if(n.length===this.interface.deploy.inputs.length+1&&typeof n[n.length-1]=="object"){e=Nt(n.pop());for(const t in e)if(!Ym[t])throw new Error("unknown transaction override "+t)}return["data","from","to"].forEach(t=>{e[t]!=null&&xt.throwError("cannot override "+t,F.errors.UNSUPPORTED_OPERATION,{operation:t})}),e.value&&(X.from(e.value).isZero()||this.interface.deploy.payable||xt.throwError("non-payable constructor cannot override value",F.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:e.value})),xt.checkArgumentCount(n.length,this.interface.deploy.inputs.length," in Contract constructor"),e.data=te(kt([this.bytecode,this.interface.encodeDeploy(n)])),e}deploy(...n){return ui(this,void 0,void 0,function*(){let e={};n.length===this.interface.deploy.inputs.length+1&&(e=n.pop()),xt.checkArgumentCount(n.length,this.interface.deploy.inputs.length," in Contract constructor");const t=yield eo(this.signer,n,this.interface.deploy.inputs);t.push(e);const r=this.getDeployTransaction(...t),i=yield this.signer.sendTransaction(r),s=tr(this.constructor,"getContractAddress")(i),o=tr(this.constructor,"getContract")(s,this.interface,this.signer);return f0(o,i),j(o,"deployTransaction",i),o})}attach(n){return this.constructor.getContract(n,this.interface,this.signer)}connect(n){return new this.constructor(this.interface,this.bytecode,n)}static fromSolidity(n,e){n==null&&xt.throwError("missing compiler output",F.errors.MISSING_ARGUMENT,{argument:"compilerOutput"}),typeof n=="string"&&(n=JSON.parse(n));const t=n.abi;let r=null;return n.bytecode?r=n.bytecode:n.evm&&n.evm.bytecode&&(r=n.evm.bytecode),new this(t,r,e)}static getInterface(n){return la.getInterface(n)}static getContractAddress(n){return ja(n)}static getContract(n,e,t){return new la(n,e,t)}},FixedNumber:Jt,Signer:ci,VoidSigner:Ka,Wallet:ki,Wordlist:Ns,constants:Zp,get errors(){return Gr},getDefaultProvider:G0,logger:Kg,providers:Ug,utils:Wg,version:J0,wordlists:xc});try{const n=window;n._ethers==null&&(n._ethers=$0)}catch{}const Vg={metamask:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 20L7 16L4 4L10 10H14L20 4L17 16L12 20Z"/></svg>',rainbow:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"><path d="M4 18A8 8 0 0 1 20 18"/><path d="M7 18A5 5 0 0 1 17 18"/><path d="M10 18A2 2 0 0 1 14 18"/></svg>',rabby:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><ellipse cx="12" cy="15" rx="6" ry="5"/><path d="M8 10C8 10 7 3 9 3C11 3 10 8 10 10"/><path d="M16 10C16 10 17 3 15 3C13 3 14 8 14 10"/></svg>',phantom:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M6 11C6 6.58 8.69 3 12 3C15.31 3 18 6.58 18 11V19C18 19 17 18 16 19C15 20 14 19 13 19C12 19 12 20 11 19C10 19 9 20 8 19C7 18 6 19 6 19V11Z"/></svg>'};class Jg{constructor(e){if(!e)throw new Error("WalletService requires an eventBus instance.");this.eventBus=e,this.provider=null,this.signer=null,this.connectedAddress=null,this.selectedWallet=null,this.connected=!1,this.ethers=$0,this.isInitialized=!1,this.providerMap={rabby:()=>window.ethereum&&window.ethereum.isRabby?window.ethereum:null,rainbow:()=>window.ethereum&&window.ethereum.isRainbow?window.ethereum:window.rainbow||null,phantom:()=>window.phantom&&window.phantom.ethereum?window.phantom.ethereum:null,metamask:()=>(console.log("Checking for MetaMask with direct window.ethereum access"),window.ethereum||null)},this.walletIcons=Vg}async initialize(e={}){const{autoReconnect:t=!0}=e;try{if(console.log("Initializing WalletService..."),window.ethereum===void 0)return console.log("No Ethereum provider found"),this.eventBus.emit("wallet:notdetected"),this.isInitialized=!0,!0;if(console.log("Found Ethereum provider"),this.eventBus.emit("wallet:detected"),this.isMetaMask=window.ethereum.isMetaMask,t){const r=await window.ethereum.request({method:"eth_accounts"});if((r==null?void 0:r.length)>0){console.log("[WalletService] Found authorized account:",r[0]);const i=this._detectWalletType();this.selectedWallet=i,this.provider=window.ethereum,this.connectedAddress=r[0],this.connected=!0,this.ethersProvider=new Ni(window.ethereum,"any"),this.signer=this.ethersProvider.getSigner(),this.setupEventListeners(),localStorage.setItem("ms2fun_lastWallet",i),console.log("[WalletService] Auto-connected to:",r[0]),this.eventBus.emit("wallet:connected",{address:this.connectedAddress,walletType:this.selectedWallet,provider:this.provider,ethersProvider:this.ethersProvider,signer:this.signer})}}return this.connected||this.setupEventListeners(),this.isInitialized=!0,!0}catch(r){throw console.error("Error initializing WalletService:",r),this.isInitialized=!0,r}}async tryAutoConnect(){try{if(window.ethereum===void 0)return null;const e=await window.ethereum.request({method:"eth_accounts"});if(!e||e.length===0)return console.log("[WalletService] No previously authorized accounts found"),null;console.log("[WalletService] Found authorized account:",e[0]);const t=this._detectWalletType();console.log("[WalletService] Detected wallet type:",t),await this.selectWallet(t);const r=await this.connect();return console.log("[WalletService] Auto-reconnected to:",r),r}catch(e){return console.warn("[WalletService] Auto-connect failed:",e.message),null}}_detectWalletType(){var t;if(window.ethereum===void 0)return"metamask";if(window.ethereum.isRabby)return"rabby";if(window.ethereum.isRainbow)return"rainbow";if((t=window.phantom)!=null&&t.ethereum)return"phantom";const e=localStorage.getItem("ms2fun_lastWallet");return e&&this.providerMap[e]?e:"metamask"}formatError(e,t=""){if(typeof e=="string")return new Error(`${t}: ${e}`);if(e&&e.message){const r=this.getUserFriendlyErrorMessage(e,t),i=new Error(r);return i.code=e.code,i.originalError=e,i}return new Error(`${t}: Unknown error`)}getUserFriendlyErrorMessage(e,t){const r=e.message||"Unknown error";return e.code===4001?"Connection request rejected by user":e.code===4902?"Network needs to be added to your wallet":r.includes("redefine property")||r.includes("which has only a getter")?"Wallet conflict detected. Please disable all wallet extensions except the one you want to use, then refresh.":r.includes("user rejected")?"Connection rejected by user":r.includes("already pending")?"A wallet request is already pending, please check your wallet":t?`${t}: ${r}`:r}getAvailableWallets(){const e={};console.log("Checking for available wallets..."),window.ethereum?console.log("window.ethereum is available"):console.log("window.ethereum is not available");for(const[t,r]of Object.entries(this.providerMap))try{console.log(`Checking for ${t} wallet...`);const i=r();i?(console.log(`Found ${t} wallet`),e[t]={name:t,icon:this.walletIcons[t],provider:i}):console.log(`${t} wallet not detected`)}catch(i){console.warn(`Error detecting ${t} wallet:`,i)}return Object.keys(e).length===0&&window.ethereum?(console.log("No specific wallets detected, but window.ethereum exists. Adding MetaMask as fallback."),e.metamask={name:"metamask",icon:this.walletIcons.metamask,provider:window.ethereum}):!e.metamask&&window.ethereum&&(console.log("window.ethereum exists. Adding MetaMask option regardless of detection."),e.metamask={name:"metamask",icon:this.walletIcons.metamask,provider:window.ethereum}),console.log("Available wallets:",Object.keys(e)),e}async selectWallet(e){try{if(this.cleanup(),!this.providerMap[e])throw new Error(`Unsupported wallet: ${e}`);const t=this.providerMap[e]();if(!t)throw new Error(`${e} not detected. Please install it first.`);return this.selectedWallet=e,this.provider=t,this.setupEventListeners(),this.eventBus.emit("wallet:selected",{type:e,provider:t}),e}catch(t){const r=this.formatError(t,"Wallet selection failed");throw this.eventBus.emit("wallet:error",r),r}}setupEventListeners(){if(this.provider){try{this.provider.removeListener("chainChanged",this.handleNetworkChange),this.provider.removeListener("accountsChanged",this.handleAccountChange)}catch{}this.provider.on("chainChanged",()=>this.handleNetworkChange()),this.provider.on("accountsChanged",e=>this.handleAccountChange(e))}}cleanup(){if(this.provider)try{this.provider.removeListener("chainChanged",this.handleNetworkChange),this.provider.removeListener("accountsChanged",this.handleAccountChange)}catch{}this.provider=null,this.signer=null,this.connectedAddress=null,this.connected=!1,this.ethersProvider=null}async connect(e){try{if(e&&await this.selectWallet(e),!this.selectedWallet||!this.provider)throw new Error("Please select a wallet first");let t;this.eventBus.emit("wallet:connecting"),console.log(`Attempting to connect to ${this.selectedWallet}...`);try{if(await new Promise(r=>setTimeout(r,500)),this.selectedWallet==="phantom"&&window.phantom&&window.phantom.ethereum)console.log("Using phantom-specific connection method"),t=await window.phantom.ethereum.request({method:"eth_requestAccounts"});else{console.log(`Using standard connection method for ${this.selectedWallet}`);try{const r=await this.provider.request({method:"eth_accounts"});console.log("Existing accounts:",r),r&&r.length!==0||console.log("No existing accounts found, requesting user approval...")}catch(r){console.warn("Error checking existing accounts:",r)}t=await this.provider.request({method:"eth_requestAccounts",params:[]})}}catch(r){throw console.error("Error requesting accounts:",r),r&&r.code===4001?this.formatError(r,"Wallet connection rejected"):r&&r.message&&r.message.includes("wallet must has at least one account")?new Error("Your wallet has no accounts. Please create at least one account in your wallet and try again."):r}if(console.log("Accounts received:",t),!t||!t[0])throw new Error("No accounts found. Please unlock your wallet and make sure you have at least one account set up.");return this.connectedAddress=t[0],this.connected=!0,console.log(`Successfully connected to account: ${this.connectedAddress}`),this.selectedWallet&&localStorage.setItem("ms2fun_lastWallet",this.selectedWallet),this.ethersProvider=new Ni(this.provider,"any"),this.signer=this.ethersProvider.getSigner(),this.eventBus.emit("wallet:connected",{address:this.connectedAddress,walletType:this.selectedWallet,provider:this.provider,ethersProvider:this.ethersProvider,signer:this.signer}),this.connectedAddress}catch(t){if(console.error("Wallet connection error:",t),t.message&&(t.message.includes("at least one account")||t.message.includes("wallet must has")||t.message.includes("no accounts"))){const i=new Error("Your wallet has no accounts. Please create at least one account in your wallet and try again.");throw i.code=t.code,i.originalError=t,this.eventBus.emit("wallet:error",i),i}const r=this.formatError(t,"Wallet connection failed");throw this.eventBus.emit("wallet:error",r),r}}async switchNetwork(e){try{if(!this.provider)throw new Error("No wallet connected");const t=`0x${Number(e).toString(16)}`;this.eventBus.emit("network:switching",{to:e,automatic:!1});try{return await this.provider.request({method:"wallet_switchEthereumChain",params:[{chainId:t}]}),this.ethersProvider=new Ni(this.provider,"any"),this.signer=this.ethersProvider.getSigner(),this.eventBus.emit("network:switched",{to:e,success:!0}),!0}catch(r){throw r.code===4902?new Error("Network needs to be added first"):r}}catch(t){const r=this.formatError(t,"Network switch failed");throw this.eventBus.emit("network:switch:error",{from:null,to:e,error:r.message,originalError:t}),this.eventBus.emit("network:switched",{to:e,success:!1,error:r.message}),r}}getAddress(){return this.connectedAddress}isConnected(){return this.connected&&!!this.connectedAddress}getProviderAndSigner(){return{provider:this.ethersProvider,signer:this.signer}}setConnectedState({address:e,provider:t,ethersProvider:r,signer:i,walletType:s="metamask"},o=!0){if(!e)throw new Error("setConnectedState requires an address");if(!t)throw new Error("setConnectedState requires a provider");this.provider=t,this.connectedAddress=e,this.connected=!0,this.selectedWallet=s,this.ethersProvider=r||new Ni(t,"any"),this.signer=i||this.ethersProvider.getSigner(),this.setupEventListeners(),localStorage.setItem("ms2fun_lastWallet",s),console.log("[WalletService] State set programmatically:",e),o&&this.eventBus.emit("wallet:connected",{address:this.connectedAddress,walletType:this.selectedWallet,provider:this.provider,ethersProvider:this.ethersProvider,signer:this.signer})}handleNetworkChange(){this.provider&&(this.ethersProvider=new Ni(this.provider,"any"),this.signer=this.ethersProvider.getSigner())}handleAccountChange(e){e&&Array.isArray(e)&&(e.length===0?(this.connected=!1,this.connectedAddress=null,this.eventBus.emit("wallet:disconnected")):e[0]!==this.connectedAddress&&(this.connectedAddress=e[0],this.eventBus.emit("wallet:changed",{address:e[0]})))}async disconnect(){this.cleanup(),this.eventBus.emit("wallet:disconnected")}}const ff=["https://w3s.link/ipfs/","https://cloudflare-ipfs.com/ipfs/","https://ipfs.io/ipfs/","https://gateway.pinata.cloud/ipfs/","https://dweb.link/ipfs/"],df=["https://cloudflare-ipfs.com/ipfs/","https://dweb.link/ipfs/","https://w3s.link/ipfs/"],pf="bafybeigdyrzt5sfp7udm7hu76uh7y26nf3efuylqabf3oclgtqy55fbzdi",Zt=new class{constructor(){this.currentGateway=null,this.gatewayLatencies=new Map,this.failedGateways=new Set,this.failureCounts=new Map,this.lastHealthCheck=null,this.healthCheckInterval=null,this.initialized=!1,this.config={timeout:5e3,maxRetries:3,healthCheckInterval:6e4,parallelDiscovery:!0,corsGatewaysFirst:!0}}getEnvironment(){if(typeof window>"u")return"production";const n=window.location.hostname;return n==="localhost"||n==="127.0.0.1"||n.includes(".local")?"development":"production"}getPrioritizedGateways(){const n=function(){try{const t=localStorage.getItem("customIpfsGatewayBaseUrl");if(t&&typeof t=="string"&&t.trim()){const r=t.trim();return r.endsWith("/ipfs/")?r:r.endsWith("/")?r+"ipfs/":r+"/ipfs/"}}catch(t){console.warn("[IpfsService] Failed to read custom gateway from localStorage:",t)}return null}(),e=n?[n,...ff]:ff;return!this.config.corsGatewaysFirst||this.getEnvironment()!=="development"?e:[...e.filter(t=>df.some(r=>t.includes(r))),...e.filter(t=>!df.some(r=>t.includes(r)))]}recordSuccess(n,e){this.gatewayLatencies.set(n,e),this.failedGateways.delete(n),this.failureCounts.delete(n),(!this.currentGateway||e<(this.gatewayLatencies.get(this.currentGateway)||1/0))&&(this.currentGateway=n)}recordFailure(n){const e=(this.failureCounts.get(n)||0)+1;this.failureCounts.set(n,e),e>=this.config.maxRetries&&(this.failedGateways.add(n),this.gatewayLatencies.set(n,1/0),this.currentGateway===n&&(this.currentGateway=this.getNextBestGateway()))}getNextBestGateway(){return this.getPrioritizedGateways().filter(n=>!this.failedGateways.has(n)).sort((n,e)=>(this.gatewayLatencies.get(n)||1/0)-(this.gatewayLatencies.get(e)||1/0))[0]}async selectBestGateway(n=pf){var i;const e=this.getPrioritizedGateways(),t=await Promise.allSettled(e.map(async s=>{const o=Date.now();if(!(await fetch(`${s}${n}`,{method:"HEAD",signal:AbortSignal.timeout(this.config.timeout)})).ok)throw new Error("Failed");return{gateway:s,latency:Date.now()-o}})),r=t.filter(s=>s.status==="fulfilled").map(s=>s.value).sort((s,o)=>s.latency-o.latency);return r.forEach(({gateway:s,latency:o})=>this.recordSuccess(s,o)),t.forEach((s,o)=>{s.status==="rejected"&&this.recordFailure(e[o])}),this.currentGateway=((i=r[0])==null?void 0:i.gateway)||e[0],this.initialized=!0,this.currentGateway}async fetchWithRotation(n,e={}){const{timeout:t=this.config.timeout,...r}=e,i=this.getPrioritizedGateways(),s=[];let o=this.currentGateway?i.indexOf(this.currentGateway):0;o===-1&&(o=0);for(let a=0;a<i.length;a++){const l=i[(o+a)%i.length];if(this.failedGateways.has(l))continue;const h=new AbortController,u=setTimeout(()=>h.abort(),t),g=Date.now();try{const x=await fetch(`${l}${n}`,{...r,signal:h.signal});if(clearTimeout(u),!x.ok)throw new Error(`HTTP ${x.status}`);const A=await x.json();return this.recordSuccess(l,Date.now()-g),A}catch(x){clearTimeout(u),this.recordFailure(l),s.push(`${l}: ${x.message}`)}}throw new Error(`All gateways failed:
${s.join(`
`)}`)}startHealthMonitoring(){this.healthCheckInterval||this.config.healthCheckInterval<=0||(this.healthCheckInterval=setInterval(()=>this.runHealthCheck(),this.config.healthCheckInterval))}stopHealthMonitoring(){this.healthCheckInterval&&(clearInterval(this.healthCheckInterval),this.healthCheckInterval=null)}async runHealthCheck(){const n=this.getPrioritizedGateways();this.lastHealthCheck=Date.now();for(const e of n)try{const t=Date.now();(await fetch(`${e}${pf}`,{method:"HEAD",signal:AbortSignal.timeout(3e3)})).ok&&this.recordSuccess(e,Date.now()-t)}catch{this.gatewayLatencies.set(e,1/0)}}reset(){this.currentGateway=null,this.gatewayLatencies.clear(),this.failedGateways.clear(),this.failureCounts.clear(),this.initialized=!1}};function Q0(){return Zt.getPrioritizedGateways()}function Ri(n){return!(!n||typeof n!="string")&&n.toLowerCase().startsWith("ipfs://")}function da(n){if(!Ri(n))return n;const e=n.substring(7);return e.startsWith("/")?e.substring(1):e}function Y0(n,e){if(!Ri(n))return n;const t=da(n);if(e===void 0)return(Zt.currentGateway||Zt.getPrioritizedGateways()[0])+t;const r=Q0();return e<0||e>=r.length?null:r[e]+t}function X0(){return Q0()}function mf(){return Zt.currentGateway||Zt.getPrioritizedGateways()[0]}var Vi=Object.freeze({__proto__:null,configureGatewayManager:function(n){Object.assign(Zt.config,n),n.healthCheckInterval!==void 0&&(Zt.stopHealthMonitoring(),n.healthCheckInterval>0&&Zt.startHealthMonitoring())},fetchJson:function(n,e={}){return Zt.fetchWithRotation(n,e)},fetchJsonWithIpfsSupport:async function(n,e={}){const{timeout:t=1e4,...r}=e;if(!Ri(n)){const s=new AbortController,o=setTimeout(()=>s.abort(),t);try{const a=await fetch(n,{...r,signal:s.signal});if(!a.ok)throw new Error(`HTTP ${a.status}: ${a.statusText}`);const l=await a.json();return clearTimeout(o),l}catch(a){throw clearTimeout(o),a.name==="AbortError"?new Error(`Request timeout after ${t}ms`):a}}const i=da(n);return Zt.fetchWithRotation(i,{timeout:t,...r})},getAvailableGateways:X0,getGateway:mf,getGatewayStats:function(){return{current:Zt.currentGateway,latencies:Object.fromEntries(Zt.gatewayLatencies),failed:Array.from(Zt.failedGateways),lastHealthCheck:Zt.lastHealthCheck,initialized:Zt.initialized}},initializeGatewayDiscovery:async function(n){return Zt.selectBestGateway(n)},isIpfsUri:Ri,normalizeIpfsPath:da,resolveIpfsToHttp:Y0,resolveUrl:function(n){return Ri(n)?mf()+da(n):n},setCustomGateway:function(n){try{n?localStorage.setItem("customIpfsGatewayBaseUrl",n):localStorage.removeItem("customIpfsGatewayBaseUrl"),Zt.reset()}catch(e){console.warn("[IpfsService] Failed to save custom gateway to localStorage:",e)}},testImageLoad:function(n,e=5e3){return new Promise(t=>{const r=new Image,i=setTimeout(()=>{r.onload=null,r.onerror=null,t(!1)},e);r.onload=()=>{clearTimeout(i),t(!0)},r.onerror=()=>{clearTimeout(i),t(!1)},r.src=n})}});class Z0{async initialize(e){throw new Error("StorageAdapter.initialize() must be implemented")}async putEvents(e){throw new Error("StorageAdapter.putEvents() must be implemented")}async getEvent(e,t){throw new Error("StorageAdapter.getEvent() must be implemented")}async queryEvents(e,t){throw new Error("StorageAdapter.queryEvents() must be implemented")}async countEvents(e,t){throw new Error("StorageAdapter.countEvents() must be implemented")}async deleteEvents(e,t){throw new Error("StorageAdapter.deleteEvents() must be implemented")}async deleteEventsAfterBlock(e){throw new Error("StorageAdapter.deleteEventsAfterBlock() must be implemented")}async getSyncState(){throw new Error("StorageAdapter.getSyncState() must be implemented")}async setSyncState(e){throw new Error("StorageAdapter.setSyncState() must be implemented")}async getVersion(){throw new Error("StorageAdapter.getVersion() must be implemented")}async setVersion(e){throw new Error("StorageAdapter.setVersion() must be implemented")}async clear(){throw new Error("StorageAdapter.clear() must be implemented")}async close(){throw new Error("StorageAdapter.close() must be implemented")}}class $g extends Z0{constructor(){super(),this.db=null,this.config=null,this.dbName=null}async initialize(e){this.config=e,this.dbName=e.dbName;const t=await this._getStoredVersion();return t!==null&&e.version>t&&(console.log(`[IndexedDBAdapter] Migrating from v${t} to v${e.version}`),await this._deleteDatabase()),new Promise((r,i)=>{const s=indexedDB.open(this.dbName,e.version);s.onerror=()=>{var o;i(new Error(`Failed to open IndexedDB: ${(o=s.error)==null?void 0:o.message}`))},s.onsuccess=()=>{this.db=s.result,r()},s.onupgradeneeded=o=>{const a=o.target.result;this._createStores(a,e.eventTypes)}})}_createStores(e,t){for(const r of t){const i=`events_${r.name}`;if(!e.objectStoreNames.contains(i)){const s=e.createObjectStore(i,{keyPath:"id"});for(const o of r.indexedParams||[])s.createIndex(`param_${o}`,`indexed.${o}`,{unique:!1});s.createIndex("blockNumber","blockNumber",{unique:!1}),s.createIndex("timestamp","timestamp",{unique:!1})}}e.objectStoreNames.contains("syncState")||e.createObjectStore("syncState",{keyPath:"id"}),e.objectStoreNames.contains("meta")||e.createObjectStore("meta",{keyPath:"key"})}async _getStoredVersion(){return new Promise(e=>{const t=indexedDB.open(this.dbName);t.onsuccess=()=>{const r=t.result,i=r.version;r.close(),e(i)},t.onerror=()=>e(null)})}async _deleteDatabase(){return new Promise((e,t)=>{this.db&&(this.db.close(),this.db=null);const r=indexedDB.deleteDatabase(this.dbName);r.onsuccess=()=>e(),r.onerror=()=>t(r.error)})}async putEvents(e){if(!this.db)throw new Error("IndexedDBAdapter not initialized");if(e.length===0)return;const t=new Map;for(const i of e)t.has(i.type)||t.set(i.type,[]),t.get(i.type).push(i);const r=[];for(const[i,s]of t)r.push(this._putEventsOfType(i,s));await Promise.all(r)}async _putEventsOfType(e,t){const r=`events_${e}`;return this.db.objectStoreNames.contains(r)||await this._addStore(e),new Promise((i,s)=>{const o=this.db.transaction(r,"readwrite"),a=o.objectStore(r);for(const l of t)a.put(l);o.oncomplete=()=>i(),o.onerror=()=>s(o.error)})}async _addStore(e){const t=this.db.version;return this.db.close(),new Promise((r,i)=>{const s=indexedDB.open(this.dbName,t+1);s.onupgradeneeded=o=>{const a=o.target.result,l=`events_${e}`;if(!a.objectStoreNames.contains(l)){const h=a.createObjectStore(l,{keyPath:"id"});h.createIndex("blockNumber","blockNumber",{unique:!1}),h.createIndex("timestamp","timestamp",{unique:!1})}},s.onsuccess=()=>{this.db=s.result,r()},s.onerror=()=>i(s.error)})}async getEvent(e,t){if(!this.db)throw new Error("IndexedDBAdapter not initialized");const r=`events_${e}`;return this.db.objectStoreNames.contains(r)?new Promise((i,s)=>{const o=this.db.transaction(r,"readonly").objectStore(r).get(t);o.onsuccess=()=>i(o.result||null),o.onerror=()=>s(o.error)}):null}async queryEvents(e,t={}){if(!this.db)throw new Error("IndexedDBAdapter not initialized");const r=`events_${e}`;return this.db.objectStoreNames.contains(r)?new Promise((i,s)=>{const o=this.db.transaction(r,"readonly").objectStore(r).getAll();o.onsuccess=()=>{let a=o.result;t.where&&(a=a.filter(E=>this._matchesWhere(E,t.where)));const l=a.length,h=t.orderBy||"blockNumber",u=t.order||"desc";a.sort((E,I)=>{const T=this._getNestedValue(E,h),R=this._getNestedValue(I,h);return T<R?u==="asc"?-1:1:T>R?u==="asc"?1:-1:0});const g=t.offset||0,x=t.limit||100,A=a.slice(g,g+x);i({events:A,total:l,hasMore:g+x<l})},o.onerror=()=>s(o.error)}):{events:[],total:0,hasMore:!1}}async countEvents(e,t){if(!this.db)throw new Error("IndexedDBAdapter not initialized");const r=`events_${e}`;return this.db.objectStoreNames.contains(r)?new Promise((i,s)=>{const o=this.db.transaction(r,"readonly").objectStore(r);if(t){const a=o.getAll();a.onsuccess=()=>{const l=a.result.filter(h=>this._matchesWhere(h,t)).length;i(l)},a.onerror=()=>s(a.error)}else{const a=o.count();a.onsuccess=()=>i(a.result),a.onerror=()=>s(a.error)}}):0}async deleteEvents(e,t){if(!this.db)throw new Error("IndexedDBAdapter not initialized");const r=`events_${e}`;if(this.db.objectStoreNames.contains(r))return new Promise((i,s)=>{const o=this.db.transaction(r,"readwrite"),a=o.objectStore(r);for(const l of t)a.delete(l);o.oncomplete=()=>i(),o.onerror=()=>s(o.error)})}async deleteEventsAfterBlock(e){if(!this.db)throw new Error("IndexedDBAdapter not initialized");const t=Array.from(this.db.objectStoreNames).filter(r=>r.startsWith("events_"));for(const r of t)await this._deleteEventsAfterBlockInStore(r,e)}async _deleteEventsAfterBlockInStore(e,t){return new Promise((r,i)=>{const s=this.db.transaction(e,"readwrite"),o=s.objectStore(e).index("blockNumber"),a=IDBKeyRange.lowerBound(t,!0);o.openCursor(a).onsuccess=l=>{const h=l.target.result;h&&(h.delete(),h.continue())},s.oncomplete=()=>r(),s.onerror=()=>i(s.error)})}async getSyncState(){if(!this.db)throw new Error("IndexedDBAdapter not initialized");return new Promise((e,t)=>{const r=this.db.transaction("syncState","readonly").objectStore("syncState").get("current");r.onsuccess=()=>e(r.result||null),r.onerror=()=>t(r.error)})}async setSyncState(e){if(!this.db)throw new Error("IndexedDBAdapter not initialized");return new Promise((t,r)=>{const i=this.db.transaction("syncState","readwrite").objectStore("syncState").put({id:"current",...e});i.onsuccess=()=>t(),i.onerror=()=>r(i.error)})}async getVersion(){return this.db?this.db.version:0}async setVersion(e){}async clear(){if(!this.db)return;const e=Array.from(this.db.objectStoreNames);return new Promise((t,r)=>{const i=this.db.transaction(e,"readwrite");for(const s of e)i.objectStore(s).clear();i.oncomplete=()=>t(),i.onerror=()=>r(i.error)})}async close(){this.db&&(this.db.close(),this.db=null)}_matchesWhere(e,t){for(const[r,i]of Object.entries(t)){const s=this._getNestedValue(e,r);if(Array.isArray(i)){if(!i.includes(s))return!1}else if(typeof i=="object"&&i!==null){if(i.$gt!==void 0&&!(s>i.$gt)||i.$gte!==void 0&&!(s>=i.$gte)||i.$lt!==void 0&&!(s<i.$lt)||i.$lte!==void 0&&!(s<=i.$lte)||i.$ne!==void 0&&s===i.$ne)return!1}else if((typeof s=="string"?s.toLowerCase():s)!==(typeof i=="string"?i.toLowerCase():i))return!1}return!0}_getNestedValue(e,t){var r,i,s,o;return t.startsWith("indexed.")?(r=e.indexed)==null?void 0:r[t.slice(8)]:t.startsWith("data.")?(i=e.data)==null?void 0:i[t.slice(5)]:((s=e.indexed)==null?void 0:s[t])!==void 0?e.indexed[t]:((o=e.data)==null?void 0:o[t])!==void 0?e.data[t]:e[t]}}class Kl extends Z0{constructor(){super(),this.stores=new Map,this.syncState=null,this.version=0,this.config=null}async initialize(e){this.config=e;for(const t of e.eventTypes)this.stores.set(t.name,new Map);e.version>this.version&&(await this.clear(),this.version=e.version)}async putEvents(e){for(const t of e)this.stores.get(t.type)||this.stores.set(t.type,new Map),this.stores.get(t.type).set(t.id,t)}async getEvent(e,t){const r=this.stores.get(e);return r&&r.get(t)||null}async queryEvents(e,t={}){const r=this.stores.get(e);if(!r)return{events:[],total:0,hasMore:!1};let i=Array.from(r.values());t.where&&(i=i.filter(u=>this._matchesWhere(u,t.where)));const s=i.length,o=t.orderBy||"blockNumber",a=t.order||"desc";i.sort((u,g)=>{const x=this._getNestedValue(u,o),A=this._getNestedValue(g,o);return x<A?a==="asc"?-1:1:x>A?a==="asc"?1:-1:0});const l=t.offset||0,h=t.limit||100;return{events:i.slice(l,l+h),total:s,hasMore:l+h<s}}async countEvents(e,t){const r=this.stores.get(e);if(!r)return 0;if(!t)return r.size;let i=0;for(const s of r.values())this._matchesWhere(s,t)&&i++;return i}async deleteEvents(e,t){const r=this.stores.get(e);if(r)for(const i of t)r.delete(i)}async deleteEventsAfterBlock(e){for(const t of this.stores.values())for(const[r,i]of t.entries())i.blockNumber>e&&t.delete(r)}async getSyncState(){return this.syncState}async setSyncState(e){this.syncState={...e}}async getVersion(){return this.version}async setVersion(e){this.version=e}async clear(){for(const e of this.stores.values())e.clear();this.syncState=null}async close(){}_matchesWhere(e,t){for(const[r,i]of Object.entries(t)){const s=this._getNestedValue(e,r);if(Array.isArray(i)){if(!i.includes(s))return!1}else if(typeof i=="object"&&i!==null){if(i.$gt!==void 0&&!(s>i.$gt)||i.$gte!==void 0&&!(s>=i.$gte)||i.$lt!==void 0&&!(s<i.$lt)||i.$lte!==void 0&&!(s<=i.$lte)||i.$ne!==void 0&&s===i.$ne)return!1}else if((typeof s=="string"?s.toLowerCase():s)!==(typeof i=="string"?i.toLowerCase():i))return!1}return!0}_getNestedValue(e,t){var r,i,s,o;return t.startsWith("indexed.")?(r=e.indexed)==null?void 0:r[t.slice(8)]:t.startsWith("data.")?(i=e.data)==null?void 0:i[t.slice(5)]:((s=e.indexed)==null?void 0:s[t])!==void 0?e.indexed[t]:((o=e.data)==null?void 0:o[t])!==void 0?e.data[t]:e[t]}}const gf="mw3_indexer_settings",Qg={get(){try{const n=localStorage.getItem(gf);return n?JSON.parse(n):this.getDefaults()}catch{return this.getDefaults()}},getDefaults:()=>({storageEnabled:!0,maxStorageMB:50}),set(n){const e={...this.get(),...n};return localStorage.setItem(gf,JSON.stringify(e)),e},isStorageEnabled(){return this.get().storageEnabled},async clearAllData(){var e;if(typeof indexedDB>"u")return;const n=(await((e=indexedDB.databases)==null?void 0:e.call(indexedDB))||[]).filter(t=>{var r,i;return((r=t.name)==null?void 0:r.startsWith("micro-web3-events-"))||((i=t.name)==null?void 0:i.includes("colasseum-"))});for(const t of n)await new Promise((r,i)=>{const s=indexedDB.deleteDatabase(t.name);s.onsuccess=r,s.onerror=i})},getStorageEstimate:async()=>{var n;return(n=navigator.storage)!=null&&n.estimate?navigator.storage.estimate():{used:0,quota:0}}};class Yg{constructor(e,t){this.storage=e,this.eventBus=t,this.subscriptions=new Map,this.nextSubscriptionId=1}async query(e,t={}){return this.storage.queryEvents(e,{where:t.where,orderBy:t.orderBy||"blockNumber",order:t.order||"desc",limit:t.limit||100,offset:t.offset||0})}async get(e,t){return this.storage.getEvent(e,t)}subscribe(e,t){const r=Array.isArray(e)?e:[e],i=this.nextSubscriptionId++;return this.subscriptions.set(i,{eventTypes:new Set(r),callback:t}),()=>{this.subscriptions.delete(i)}}async count(e,t){return this.storage.countEvents(e,t)}notifyNewEvents(e,t){for(const r of this.subscriptions.values())if(r.eventTypes.has(e)||r.eventTypes.has("*"))try{r.callback(t)}catch(i){console.error("[QueryEngine] Subscription callback error:",i)}}async getEventChecker(e={}){const t=new Map;return{has:(r,i={})=>this._getCachedEvents(t,r).some(s=>this._matchesWhere(s,{...e,...i})),get:(r,i={})=>this._getCachedEvents(t,r).filter(s=>this._matchesWhere(s,{...e,...i})),count:(r,i={})=>this._getCachedEvents(t,r).filter(s=>this._matchesWhere(s,{...e,...i})).length,prefetch:async r=>{for(const i of r)if(!t.has(i)){const s=await this.storage.queryEvents(i,{limit:1e4});t.set(i,s.events)}}}}_getCachedEvents(e,t){return e.get(t)||[]}_matchesWhere(e,t){for(const[r,i]of Object.entries(t)){const s=this._getNestedValue(e,r);if((typeof s=="string"?s.toLowerCase():s)!==(typeof i=="string"?i.toLowerCase():i))return!1}return!0}_getNestedValue(e,t){var r,i;return((r=e.indexed)==null?void 0:r[t])!==void 0?e.indexed[t]:((i=e.data)==null?void 0:i[t])!==void 0?e.data[t]:e[t]}}class Xg{constructor(e,t,r,i={}){this.storage=e,this.queryEngine=t,this.eventBus=r,this.batchSize=i.batchSize||2e3,this.confirmations=i.confirmations||2,this.realTimeEnabled=i.realTimeEnabled!==!1,this.retryAttempts=i.retryAttempts||3,this.retryDelay=i.retryDelay||1e3,this.pollInterval=i.pollInterval||12e3,this.reorgTracking=i.reorgTracking||!1,this.reorgDepth=i.reorgDepth||100,this.provider=null,this.contract=null,this.eventTypes=[],this.deployBlock=0,this.chainId=null,this.state="initializing",this.currentBlock=0,this.latestBlock=0,this.eventsIndexed=0,this.lastSyncTime=null,this.error=null,this.eventListeners=[],this.pollTimer=null,this.isPaused=!1,this.recentBlocks=new Map}async initialize({provider:e,contract:t,eventTypes:r,deployBlock:i,chainId:s}){this.provider=e,this.contract=t,this.eventTypes=r,this.deployBlock=i,this.chainId=s,await this._validateChainId();const o=await this.storage.getSyncState();o?(this.currentBlock=o.lastSyncedBlock,this.eventsIndexed=Object.values(o.eventCounts||{}).reduce((a,l)=>a+l,0),this.lastSyncTime=o.lastSyncTime):this.currentBlock=this.deployBlock-1}async _validateChainId(){const e=await this.storage.getSyncState();e&&e.chainId!==this.chainId&&(console.warn("[SyncEngine] Chain ID mismatch, clearing data"),await this.storage.clear())}async start(){if(this.state!=="synced"&&this.state!=="syncing")try{await this._syncHistorical(),this.realTimeEnabled&&!this.isPaused&&await this._startRealTimeSync()}catch(e){this.state="error",this.error=e,this.eventBus.emit("indexer:error",{code:"SYNC_ERROR",message:e.message,cause:e,recoverable:!0})}}async _syncHistorical(){this.state="syncing",this.latestBlock=await this.provider.getBlockNumber();const e=this.latestBlock-this.confirmations;if(this.currentBlock>=e)return this.state="synced",void this.eventBus.emit("indexer:syncComplete",{eventsIndexed:this.eventsIndexed,duration:0});const t=Date.now(),r=this.currentBlock+1;this.eventBus.emit("indexer:syncStarted",{fromBlock:r,toBlock:e});for(let i=r;i<=e&&!this.isPaused;i+=this.batchSize){const s=Math.min(i+this.batchSize-1,e);await this._syncBatch(i,s);const o=(s-r+1)/(e-r+1);this.eventBus.emit("indexer:syncProgress",{progress:o,currentBlock:s,latestBlock:this.latestBlock,eventsIndexed:this.eventsIndexed})}this.isPaused||(this.state="synced",this.lastSyncTime=Date.now(),this.eventBus.emit("indexer:syncComplete",{eventsIndexed:this.eventsIndexed,duration:Date.now()-t}))}async _syncBatch(e,t){const r=await this._fetchEventsWithRetry(e,t);if(r.length>0){const i=r.map(o=>this._parseEvent(o));await this.storage.putEvents(i),this.eventsIndexed+=i.length;const s=this._groupByType(i);for(const[o,a]of Object.entries(s))this.queryEngine.notifyNewEvents(o,a)}this.currentBlock=t,await this._saveSyncState()}async _fetchEventsWithRetry(e,t){for(let r=0;r<this.retryAttempts;r++)try{const i=[];for(const s of this.eventTypes){const o=this.contract.filters[s.name](),a=await this.contract.queryFilter(o,e,t);i.push(...a)}return i}catch(i){if(r===this.retryAttempts-1)throw i;const s=this.retryDelay*Math.pow(2,r);await this._sleep(s)}return[]}_parseEvent(e){const t={},r={};if(e.args){const i=e.eventFragment||this.contract.interface.getEvent(e.event);if(i)for(let s=0;s<i.inputs.length;s++){const o=i.inputs[s],a=e.args[s],l=this._serializeValue(a);o.indexed&&(t[o.name]=l),r[o.name]=l}}return{id:`${e.transactionHash}-${e.logIndex}`,type:e.event,blockNumber:e.blockNumber,blockHash:e.blockHash,transactionHash:e.transactionHash,logIndex:e.logIndex,timestamp:0,data:r,indexed:t}}_serializeValue(e){return e==null?null:typeof e=="bigint"||e._isBigNumber?e.toString():Array.isArray(e)?e.map(t=>this._serializeValue(t)):e}_groupByType(e){const t={};for(const r of e)t[r.type]||(t[r.type]=[]),t[r.type].push(r);return t}async _saveSyncState(){await this.storage.setSyncState({lastSyncedBlock:this.currentBlock,lastSyncTime:Date.now(),eventCounts:{},chainId:this.chainId})}async _startRealTimeSync(){try{for(const e of this.eventTypes){const t=this.contract.filters[e.name](),r=async(...i)=>{const s=i[i.length-1];await this._handleNewEvent(s)};this.contract.on(t,r),this.eventListeners.push({filter:t,listener:r})}}catch{console.warn("[SyncEngine] WebSocket subscription failed, falling back to polling"),this._startPolling()}this._startPolling()}_startPolling(){this.pollTimer||(this.pollTimer=setInterval(async()=>{if(!this.isPaused)try{const e=await this.provider.getBlockNumber(),t=e-this.confirmations;t>this.currentBlock&&await this._syncBatch(this.currentBlock+1,t),this.latestBlock=e,this.reorgTracking&&await this._checkForReorg(e)}catch(e){console.error("[SyncEngine] Polling error:",e)}},this.pollInterval))}async _handleNewEvent(e){this.confirmations>0&&await this._waitForConfirmations(e.transactionHash);const t=this._parseEvent(e);await this.storage.putEvents([t]),this.eventsIndexed++,t.blockNumber>this.currentBlock&&(this.currentBlock=t.blockNumber,await this._saveSyncState()),this.queryEngine.notifyNewEvents(t.type,[t]),this.eventBus.emit("indexer:newEvents",{eventType:t.type,events:[t]})}async _waitForConfirmations(e){let t=0;for(;t<this.confirmations;){const r=await this.provider.getTransactionReceipt(e);if(!r){await this._sleep(1e3);continue}t=await this.provider.getBlockNumber()-r.blockNumber+1,t<this.confirmations&&await this._sleep(1e3)}}async _checkForReorg(e){const t=await this.provider.getBlock(e);if(!t)return;const r=this.recentBlocks.get(e-1);if(r&&r!==t.parentHash&&await this._handleReorg(e-1),this.recentBlocks.set(e,t.hash),this.recentBlocks.size>this.reorgDepth){const i=Math.min(...this.recentBlocks.keys());this.recentBlocks.delete(i)}}async _handleReorg(e){let t=e;for(;t>this.deployBlock;){const r=this.recentBlocks.get(t),i=await this.provider.getBlock(t);if(r===(i==null?void 0:i.hash))break;t--}await this.storage.deleteEventsAfterBlock(t),this.currentBlock=t,await this._saveSyncState(),this.eventBus.emit("indexer:reorg",{forkBlock:e,commonAncestor:t,depth:e-t}),await this._syncHistorical()}pause(){this.isPaused=!0,this.state="paused",this.eventBus.emit("indexer:paused",{})}resume(){this.isPaused=!1,this.start(),this.eventBus.emit("indexer:resumed",{})}async resync(e){this.pause(),this.currentBlock=e!==void 0?e-1:this.deployBlock-1,await this.storage.clear(),await this._saveSyncState(),this.eventsIndexed=0,this.resume()}getStatus(){return{state:this.state,currentBlock:this.currentBlock,latestBlock:this.latestBlock,progress:this.latestBlock>0?Math.min(1,(this.currentBlock-this.deployBlock)/(this.latestBlock-this.deployBlock)):0,eventsIndexed:this.eventsIndexed,lastSyncTime:this.lastSyncTime,error:this.error}}async stop(){this.isPaused=!0;for(const{filter:e,listener:t}of this.eventListeners)this.contract.off(e,t);this.eventListeners=[],this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_sleep(e){return new Promise(t=>setTimeout(t,e))}}class Zg{constructor(e,t={}){this.queryEngine=e,this.definitions=t,this.entityAPIs={};for(const[r,i]of Object.entries(t))this.entityAPIs[r]=this._createEntityAPI(r,i)}getEntity(e){return this.entityAPIs[e]}getAllEntities(){return this.entityAPIs}_createEntityAPI(e,t){const r=this;return{query:async(i={})=>r._queryEntities(e,t,i),get:async i=>(await r._queryEntities(e,t,{[t.key]:i}))[0]||null,subscribe(i,s){const o=r._getRelevantEventTypes(t);return r.queryEngine.subscribe(o,async()=>{const a=await r._queryEntities(e,t,i);s(a)})},count:async(i={})=>(await r._queryEntities(e,t,i)).length}}async _queryEntities(e,t,r={}){const i=r.status,s={...r};delete s.status;const o=await this.queryEngine.query(t.source,{where:s,limit:1e4}),a=await this.queryEngine.getEventChecker(),l=this._getRelevantEventTypes(t);await a.prefetch(l);const h=[];for(const u of o.events){const g=await this._buildEntity(e,t,u,a);i&&g.status!==i||h.push(g)}return h}async _buildEntity(e,t,r,i){const s={_type:e,_sourceEvent:r,...r.data};if(s[t.key]=r.data[t.key]||r.indexed[t.key],t.status&&(s.status=this._evaluateStatus(s,t.status,i)),t.computed)for(const[o,a]of Object.entries(t.computed))try{s[o]=a(s,i)}catch(l){console.error(`[EntityResolver] Error computing ${o}:`,l),s[o]=null}if(t.relations)for(const[o,a]of Object.entries(t.relations))Object.defineProperty(s,o,{get:()=>this._resolveRelation(s,a),enumerable:!0});return s}_evaluateStatus(e,t,r){for(const[i,s]of Object.entries(t))if(i!=="default")try{if(s(e,r))return i}catch(o){console.error(`[EntityResolver] Error evaluating status ${i}:`,o)}return t.default||"unknown"}async _resolveRelation(e,t){const r=this.entityAPIs[t.entity];if(!r)return null;const i=e[t.foreignKey];return i===void 0?null:t.type==="many"?r.query({[t.foreignKey]:i}):r.get(i)}_getRelevantEventTypes(e){var r;const t=new Set([e.source]);if(e.status){for(const i of Object.values(e.status))if(typeof i=="function"){const s=i.toString().match(/events\.has\(['"](\w+)['"]/g)||[];for(const o of s){const a=(r=o.match(/['"](\w+)['"]/))==null?void 0:r[1];a&&t.add(a)}}}return Array.from(t)}}class e2{constructor(e,t){this.queryEngine=e,this.entityResolver=t}async userActivity(e,t={}){const{events:r=[],userFields:i,limit:s=50,offset:o=0}=t,a=e.toLowerCase(),l=[];for(const h of r){const u=await this.queryEngine.query(h,{limit:1e3}),g=i||this._detectAddressFields(u.events[0]);for(const x of u.events)g.some(A=>{const E=x.indexed[A]||x.data[A];return typeof E=="string"&&E.toLowerCase()===a})&&l.push({type:x.type,timestamp:x.timestamp||x.blockNumber,blockNumber:x.blockNumber,transactionHash:x.transactionHash,data:x.data})}return l.sort((h,u)=>(u.timestamp||u.blockNumber)-(h.timestamp||h.blockNumber)),l.slice(o,o+s)}async refundable(e){const{itemEvent:t,itemKey:r,parentKey:i,cancelEvent:s,claimEvent:o,userField:a,user:l}=e,h=l.toLowerCase(),u=(await this.queryEngine.query(t,{limit:1e4})).events.filter(I=>{const T=I.indexed[a]||I.data[a];return typeof T=="string"&&T.toLowerCase()===h}),g=await this.queryEngine.query(s,{limit:1e4}),x=new Set(g.events.map(I=>I.indexed[i]||I.data[i])),A=await this.queryEngine.query(o,{limit:1e4}),E=new Set(A.events.map(I=>I.indexed[r]||I.data[r]));return u.filter(I=>{const T=I.indexed[r]||I.data[r],R=I.indexed[i]||I.data[i];return x.has(R)&&!E.has(T)})}async leaderboard(e){const{event:t,groupBy:r,aggregate:i,sumField:s,limit:o=10,where:a}=e,l=await this.queryEngine.query(t,{where:a,limit:1e4}),h=new Map;for(const g of l.events){const x=g.indexed[r]||g.data[r];if(x===void 0)continue;const A=typeof x=="string"?x.toLowerCase():x;h.has(A)||h.set(A,{key:x,events:[]}),h.get(A).events.push(g)}const u=[];for(const[g,x]of h){let A;i==="count"?A=x.events.length:i==="sum"&&(A=x.events.reduce((E,I)=>{const T=I.indexed[s]||I.data[s],R=typeof T=="string"?parseFloat(T):T;return E+(isNaN(R)?0:R)},0)),u.push({key:x.key,value:A})}return u.sort((g,x)=>x.value-g.value),u.slice(0,o).map((g,x)=>({...g,rank:x+1}))}async timeSeries(e){const{event:t,interval:r,aggregate:i,sumField:s,where:o,periods:a=30}=e,l=await this.queryEngine.query(t,{where:o,limit:1e5}),h={hour:36e5,day:864e5,week:6048e5}[r];if(!h)throw new Error(`Invalid interval: ${r}`);const u=Date.now(),g=new Map;for(let A=0;A<a;A++){const E=new Date(u-(A+1)*h).toISOString();g.set(E,[])}for(const A of l.events){const E=A.timestamp?1e3*A.timestamp:u,I=Math.floor((u-E)/h);if(I>=0&&I<a){const T=new Date(u-(I+1)*h).toISOString();g.has(T)&&g.get(T).push(A)}}const x=[];for(const[A,E]of g){let I;i==="count"?I=E.length:i==="sum"&&(I=E.reduce((T,R)=>{const O=R.indexed[s]||R.data[s],B=typeof O=="string"?parseFloat(O):O;return T+(isNaN(B)?0:B)},0)),x.push({period:A,value:I})}return x.sort((A,E)=>new Date(A.period)-new Date(E.period)),x}_detectAddressFields(e){if(!e)return[];const t=[],r={...e.indexed,...e.data};for(const[i,s]of Object.entries(r))typeof s=="string"&&s.match(/^0x[a-fA-F0-9]{40}$/)&&t.push(i);return t}}class Fn extends Error{constructor(e,t,r){super(e),this.name="EventIndexerError",this.code=t,this.cause=r}}const hn={NOT_INITIALIZED:"NOT_INITIALIZED",STORAGE_ERROR:"STORAGE_ERROR",SYNC_ERROR:"SYNC_ERROR",QUERY_ERROR:"QUERY_ERROR",INVALID_CONFIG:"INVALID_CONFIG",PROVIDER_ERROR:"PROVIDER_ERROR",REORG_DETECTED:"REORG_DETECTED"};class Ic{constructor(e,t={}){if(!e)throw new Fn("EventBus is required",hn.INVALID_CONFIG);this.eventBus=e,this.blockchainService=t.blockchainService,this.storage=null,this.queryEngine=null,this.syncEngine=null,this.entityResolver=null,this.patternsAPI=null,this.contract=null,this.initialized=!1,this.config=null}async initialize(e){var t,r;this._validateConfig(e),this.config=e;try{const i=this._getProvider(e),s=await i.getNetwork(),o=Number(s.chainId),a=this._extractEventTypes(e.contract.abi);this.storage=function(h){return(h==null?void 0:h.type)==="memory"?new Kl:Qg.isStorageEnabled()?typeof indexedDB<"u"?new $g:(console.warn("[EventIndexer] IndexedDB not available, falling back to memory storage"),new Kl):(console.log("[EventIndexer] User disabled IndexedDB storage, using memory"),new Kl)}(e.persistence),await this.storage.initialize({dbName:((t=e.persistence)==null?void 0:t.dbName)||`micro-web3-events-${o}`,version:((r=e.persistence)==null?void 0:r.version)||1,eventTypes:a}),this.contract=new la(e.contract.address,e.contract.abi,i);const l=e.contract.deployBlock||await this._detectDeployBlock(i);this.queryEngine=new Yg(this.storage,this.eventBus),this.syncEngine=new Xg(this.storage,this.queryEngine,this.eventBus,e.sync||{}),await this.syncEngine.initialize({provider:i,contract:this.contract,eventTypes:a,deployBlock:l,chainId:o}),e.entities&&(this.entityResolver=new Zg(this.queryEngine,e.entities)),this.patternsAPI=new e2(this.queryEngine,this.entityResolver),this.initialized=!0,this.eventBus.emit("indexer:initialized",{}),await this.syncEngine.start()}catch(i){throw this.eventBus.emit("indexer:error",{code:hn.STORAGE_ERROR,message:`Initialization failed: ${i.message}`,cause:i,recoverable:!1}),new Fn(`Failed to initialize EventIndexer: ${i.message}`,hn.STORAGE_ERROR,i)}}_validateConfig(e){if(!e.contract)throw new Fn("contract config is required",hn.INVALID_CONFIG);if(!e.contract.address)throw new Fn("contract.address is required",hn.INVALID_CONFIG);if(!e.contract.abi||!Array.isArray(e.contract.abi))throw new Fn("contract.abi is required and must be an array",hn.INVALID_CONFIG);if(!e.provider&&!this.blockchainService)throw new Fn("Either provider in config or blockchainService in constructor is required",hn.INVALID_CONFIG)}_getProvider(e){var t,r;if(e.provider)return e.provider;if((t=this.blockchainService)!=null&&t.getProvider)return this.blockchainService.getProvider();if((r=this.blockchainService)!=null&&r.provider)return this.blockchainService.provider;throw new Fn("No provider available",hn.PROVIDER_ERROR)}_extractEventTypes(e){const t=[];for(const r of e)if(r.type==="event"){const i=r.inputs.filter(s=>s.indexed).map(s=>s.name);t.push({name:r.name,inputs:r.inputs,indexedParams:i})}return t}async _detectDeployBlock(e){return console.warn("[EventIndexer] No deployBlock specified, starting from block 0"),0}get events(){return this._checkInitialized(),{query:(e,t)=>this.queryEngine.query(e,t),get:(e,t)=>this.queryEngine.get(e,t),subscribe:(e,t)=>this.queryEngine.subscribe(e,t),count:(e,t)=>this.queryEngine.count(e,t)}}get entities(){return this._checkInitialized(),this.entityResolver?new Proxy({},{get:(e,t)=>this.entityResolver.getEntity(t)}):(console.warn("[EventIndexer] No entities configured"),{})}get patterns(){return this._checkInitialized(),this.patternsAPI}get sync(){return this._checkInitialized(),{getStatus:()=>this.syncEngine.getStatus(),resync:e=>this.syncEngine.resync(e),clear:()=>this.storage.clear(),pause:()=>this.syncEngine.pause(),resume:()=>this.syncEngine.resume()}}_checkInitialized(){if(!this.initialized)throw new Fn("EventIndexer not initialized. Call initialize() first.",hn.NOT_INITIALIZED)}async destroy(){this.syncEngine&&await this.syncEngine.stop(),this.storage&&await this.storage.close(),this.initialized=!1}static installHook(e){e.prototype.useIndexer?console.warn("[EventIndexer] useIndexer hook already installed"):e.prototype.useIndexer=function(t,r={},i={}){let s=null,o=!0,a=null;const l=()=>{const u={};for(const[g,x]of Object.entries(r))u[g]=typeof x=="function"?x():x;return u},h=async()=>{try{const u=l();if(t.query){const g=await t.query(u);s=Array.isArray(g)?g:g.events}else s=[];o=!1,i.onUpdate&&i.onUpdate(s)}catch(u){o=!1,console.error("[useIndexer] Query error:",u),i.onError&&i.onError(u)}};return h(),t.subscribe&&(a=t.subscribe(l(),()=>{h()})),this.registerCleanup&&this.registerCleanup(()=>{a&&a()}),new Proxy([],{get:(u,g)=>g==="length"?(s==null?void 0:s.length)||0:g==="isLoading"?o:g===Symbol.iterator?function*(){s&&(yield*s)}:typeof g!="string"||isNaN(g)?s&&typeof s[g]=="function"?s[g].bind(s):s==null?void 0:s[g]:s==null?void 0:s[parseInt(g)]})}}}Ic.EventIndexerError=Fn,Ic.ErrorCodes=hn;class Ji extends qt{constructor(e={}){super(e),this.state={gatewayIndex:0,isLoading:!0,hasError:!1,currentSrc:null}}getCurrentUrl(){const{src:e}=this.props;return e?Ri(e)?Y0(e,this.state.gatewayIndex):e:null}handleImageLoad(e){this.setState({isLoading:!1,hasError:!1}),this.props.onLoad&&this.props.onLoad(e)}handleImageError(e){const t=X0(),{src:r}=this.props;if(!Ri(r)||this.state.gatewayIndex>=t.length-1)return this.setState({isLoading:!1,hasError:!0}),console.error("[IpfsImage] Failed to load image:",r,{triedGateways:this.state.gatewayIndex+1,totalGateways:t.length}),void(this.props.onError&&this.props.onError(e));const i=this.state.gatewayIndex+1;this.setState({gatewayIndex:i})}normalizeStyle(e){return e&&typeof e=="object"?e:{}}escapeHtml(e){if(!e)return"";const t=document.createElement("div");return t.textContent=e,t.innerHTML}render(){const{src:e,alt:t="",className:r="",style:i={},loading:s="lazy",placeholder:o,errorPlaceholder:a}=this.props,{isLoading:l,hasError:h}=this.state;if(!e)return b("div",{className:"ipfs-image-empty"});const u=this.getCurrentUrl();if(h)return a||b("div",{className:`ipfs-image-error ${r}`,style:this.normalizeStyle(i)},b("div",{className:"ipfs-image-error-icon"},""),b("div",{className:"ipfs-image-error-text"},"IPFS image unavailable"));const g=l?{opacity:0}:{opacity:1,transition:"opacity 0.3s"};return b("div",{className:`ipfs-image-container ${r}`,style:this.normalizeStyle(i)},l&&o,b("img",{src:u||"",alt:t,loading:s,className:"ipfs-image "+(l?"ipfs-image-loading":"ipfs-image-loaded"),style:g,onLoad:this.bind(this.handleImageLoad),onError:this.bind(this.handleImageError)}))}}Ji.styles=`
    .ipfs-image-container {
        position: relative;
        display: inline-block;
        width: 100%;
        height: 100%;
    }

    .ipfs-image {
        display: block;
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .ipfs-image-loading {
        opacity: 0;
    }

    .ipfs-image-loaded {
        opacity: 1;
        transition: opacity 0.3s ease-in;
    }

    .ipfs-image-error {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 100px;
        background-color: #f5f5f5;
        color: #666;
        padding: 1rem;
        text-align: center;
    }

    .ipfs-image-error-icon {
        font-size: 2rem;
        margin-bottom: 0.5rem;
    }

    .ipfs-image-error-text {
        font-size: 0.875rem;
    }

    .ipfs-image-empty {
        display: block;
        width: 100%;
        height: 100%;
        background-color: transparent;
    }

    /* Dark mode support */
    html[data-theme='dark'] .ipfs-image-error {
        background-color: #2a2a2a;
        color: #aaa;
    }
`;var t2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof{}<"u"?{}:typeof self<"u"?self:{};function Qa(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function r2(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var uh={exports:{}};const n2={},i2=Object.freeze(Object.defineProperty({__proto__:null,default:n2},Symbol.toStringTag,{value:"Module"})),s2=r2(i2);uh.exports;(function(n){(function(e,t){function r(p,c){if(!p)throw new Error(c||"Assertion failed")}function i(p,c){p.super_=c;var d=function(){};d.prototype=c.prototype,p.prototype=new d,p.prototype.constructor=p}function s(p,c,d){if(s.isBN(p))return p;this.negative=0,this.words=null,this.length=0,this.red=null,p!==null&&((c==="le"||c==="be")&&(d=c,c=10),this._init(p||0,c||10,d||"be"))}typeof e=="object"?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=s2.Buffer}catch{}s.isBN=function(c){return c instanceof s?!0:c!==null&&typeof c=="object"&&c.constructor.wordSize===s.wordSize&&Array.isArray(c.words)},s.max=function(c,d){return c.cmp(d)>0?c:d},s.min=function(c,d){return c.cmp(d)<0?c:d},s.prototype._init=function(c,d,f){if(typeof c=="number")return this._initNumber(c,d,f);if(typeof c=="object")return this._initArray(c,d,f);d==="hex"&&(d=16),r(d===(d|0)&&d>=2&&d<=36),c=c.toString().replace(/\s+/g,"");var N=0;c[0]==="-"&&(N++,this.negative=1),N<c.length&&(d===16?this._parseHex(c,N,f):(this._parseBase(c,d,N),f==="le"&&this._initArray(this.toArray(),d,f)))},s.prototype._initNumber=function(c,d,f){c<0&&(this.negative=1,c=-c),c<67108864?(this.words=[c&67108863],this.length=1):c<4503599627370496?(this.words=[c&67108863,c/67108864&67108863],this.length=2):(r(c<9007199254740992),this.words=[c&67108863,c/67108864&67108863,1],this.length=3),f==="le"&&this._initArray(this.toArray(),d,f)},s.prototype._initArray=function(c,d,f){if(r(typeof c.length=="number"),c.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(c.length/3),this.words=new Array(this.length);for(var N=0;N<this.length;N++)this.words[N]=0;var v,w,P=0;if(f==="be")for(N=c.length-1,v=0;N>=0;N-=3)w=c[N]|c[N-1]<<8|c[N-2]<<16,this.words[v]|=w<<P&67108863,this.words[v+1]=w>>>26-P&67108863,P+=24,P>=26&&(P-=26,v++);else if(f==="le")for(N=0,v=0;N<c.length;N+=3)w=c[N]|c[N+1]<<8|c[N+2]<<16,this.words[v]|=w<<P&67108863,this.words[v+1]=w>>>26-P&67108863,P+=24,P>=26&&(P-=26,v++);return this._strip()};function a(p,c){var d=p.charCodeAt(c);if(d>=48&&d<=57)return d-48;if(d>=65&&d<=70)return d-55;if(d>=97&&d<=102)return d-87;r(!1,"Invalid character in "+p)}function l(p,c,d){var f=a(p,d);return d-1>=c&&(f|=a(p,d-1)<<4),f}s.prototype._parseHex=function(c,d,f){this.length=Math.ceil((c.length-d)/6),this.words=new Array(this.length);for(var N=0;N<this.length;N++)this.words[N]=0;var v=0,w=0,P;if(f==="be")for(N=c.length-1;N>=d;N-=2)P=l(c,d,N)<<v,this.words[w]|=P&67108863,v>=18?(v-=18,w+=1,this.words[w]|=P>>>26):v+=8;else{var _=c.length-d;for(N=_%2===0?d+1:d;N<c.length;N+=2)P=l(c,d,N)<<v,this.words[w]|=P&67108863,v>=18?(v-=18,w+=1,this.words[w]|=P>>>26):v+=8}this._strip()};function h(p,c,d,f){for(var N=0,v=0,w=Math.min(p.length,d),P=c;P<w;P++){var _=p.charCodeAt(P)-48;N*=f,_>=49?v=_-49+10:_>=17?v=_-17+10:v=_,r(_>=0&&v<f,"Invalid character"),N+=v}return N}s.prototype._parseBase=function(c,d,f){this.words=[0],this.length=1;for(var N=0,v=1;v<=67108863;v*=d)N++;N--,v=v/d|0;for(var w=c.length-f,P=w%N,_=Math.min(w,w-P)+f,m=0,M=f;M<_;M+=N)m=h(c,M,M+N,d),this.imuln(v),this.words[0]+m<67108864?this.words[0]+=m:this._iaddn(m);if(P!==0){var L=1;for(m=h(c,M,c.length,d),M=0;M<P;M++)L*=d;this.imuln(L),this.words[0]+m<67108864?this.words[0]+=m:this._iaddn(m)}this._strip()},s.prototype.copy=function(c){c.words=new Array(this.length);for(var d=0;d<this.length;d++)c.words[d]=this.words[d];c.length=this.length,c.negative=this.negative,c.red=this.red};function u(p,c){p.words=c.words,p.length=c.length,p.negative=c.negative,p.red=c.red}if(s.prototype._move=function(c){u(c,this)},s.prototype.clone=function(){var c=new s(null);return this.copy(c),c},s.prototype._expand=function(c){for(;this.length<c;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=g}catch{s.prototype.inspect=g}else s.prototype.inspect=g;function g(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var x=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],A=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(c,d){c=c||10,d=d|0||1;var f;if(c===16||c==="hex"){f="";for(var N=0,v=0,w=0;w<this.length;w++){var P=this.words[w],_=((P<<N|v)&16777215).toString(16);v=P>>>24-N&16777215,N+=2,N>=26&&(N-=26,w--),v!==0||w!==this.length-1?f=x[6-_.length]+_+f:f=_+f}for(v!==0&&(f=v.toString(16)+f);f.length%d!==0;)f="0"+f;return this.negative!==0&&(f="-"+f),f}if(c===(c|0)&&c>=2&&c<=36){var m=A[c],M=E[c];f="";var L=this.clone();for(L.negative=0;!L.isZero();){var k=L.modrn(M).toString(c);L=L.idivn(M),L.isZero()?f=k+f:f=x[m-k.length]+k+f}for(this.isZero()&&(f="0"+f);f.length%d!==0;)f="0"+f;return this.negative!==0&&(f="-"+f),f}r(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var c=this.words[0];return this.length===2?c+=this.words[1]*67108864:this.length===3&&this.words[2]===1?c+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-c:c},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(c,d){return this.toArrayLike(o,c,d)}),s.prototype.toArray=function(c,d){return this.toArrayLike(Array,c,d)};var I=function(c,d){return c.allocUnsafe?c.allocUnsafe(d):new c(d)};s.prototype.toArrayLike=function(c,d,f){this._strip();var N=this.byteLength(),v=f||Math.max(1,N);r(N<=v,"byte array longer than desired length"),r(v>0,"Requested array length <= 0");var w=I(c,v),P=d==="le"?"LE":"BE";return this["_toArrayLike"+P](w,N),w},s.prototype._toArrayLikeLE=function(c,d){for(var f=0,N=0,v=0,w=0;v<this.length;v++){var P=this.words[v]<<w|N;c[f++]=P&255,f<c.length&&(c[f++]=P>>8&255),f<c.length&&(c[f++]=P>>16&255),w===6?(f<c.length&&(c[f++]=P>>24&255),N=0,w=0):(N=P>>>24,w+=2)}if(f<c.length)for(c[f++]=N;f<c.length;)c[f++]=0},s.prototype._toArrayLikeBE=function(c,d){for(var f=c.length-1,N=0,v=0,w=0;v<this.length;v++){var P=this.words[v]<<w|N;c[f--]=P&255,f>=0&&(c[f--]=P>>8&255),f>=0&&(c[f--]=P>>16&255),w===6?(f>=0&&(c[f--]=P>>24&255),N=0,w=0):(N=P>>>24,w+=2)}if(f>=0)for(c[f--]=N;f>=0;)c[f--]=0},Math.clz32?s.prototype._countBits=function(c){return 32-Math.clz32(c)}:s.prototype._countBits=function(c){var d=c,f=0;return d>=4096&&(f+=13,d>>>=13),d>=64&&(f+=7,d>>>=7),d>=8&&(f+=4,d>>>=4),d>=2&&(f+=2,d>>>=2),f+d},s.prototype._zeroBits=function(c){if(c===0)return 26;var d=c,f=0;return d&8191||(f+=13,d>>>=13),d&127||(f+=7,d>>>=7),d&15||(f+=4,d>>>=4),d&3||(f+=2,d>>>=2),d&1||f++,f},s.prototype.bitLength=function(){var c=this.words[this.length-1],d=this._countBits(c);return(this.length-1)*26+d};function T(p){for(var c=new Array(p.bitLength()),d=0;d<c.length;d++){var f=d/26|0,N=d%26;c[d]=p.words[f]>>>N&1}return c}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var c=0,d=0;d<this.length;d++){var f=this._zeroBits(this.words[d]);if(c+=f,f!==26)break}return c},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(c){return this.negative!==0?this.abs().inotn(c).iaddn(1):this.clone()},s.prototype.fromTwos=function(c){return this.testn(c-1)?this.notn(c).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(c){for(;this.length<c.length;)this.words[this.length++]=0;for(var d=0;d<c.length;d++)this.words[d]=this.words[d]|c.words[d];return this._strip()},s.prototype.ior=function(c){return r((this.negative|c.negative)===0),this.iuor(c)},s.prototype.or=function(c){return this.length>c.length?this.clone().ior(c):c.clone().ior(this)},s.prototype.uor=function(c){return this.length>c.length?this.clone().iuor(c):c.clone().iuor(this)},s.prototype.iuand=function(c){var d;this.length>c.length?d=c:d=this;for(var f=0;f<d.length;f++)this.words[f]=this.words[f]&c.words[f];return this.length=d.length,this._strip()},s.prototype.iand=function(c){return r((this.negative|c.negative)===0),this.iuand(c)},s.prototype.and=function(c){return this.length>c.length?this.clone().iand(c):c.clone().iand(this)},s.prototype.uand=function(c){return this.length>c.length?this.clone().iuand(c):c.clone().iuand(this)},s.prototype.iuxor=function(c){var d,f;this.length>c.length?(d=this,f=c):(d=c,f=this);for(var N=0;N<f.length;N++)this.words[N]=d.words[N]^f.words[N];if(this!==d)for(;N<d.length;N++)this.words[N]=d.words[N];return this.length=d.length,this._strip()},s.prototype.ixor=function(c){return r((this.negative|c.negative)===0),this.iuxor(c)},s.prototype.xor=function(c){return this.length>c.length?this.clone().ixor(c):c.clone().ixor(this)},s.prototype.uxor=function(c){return this.length>c.length?this.clone().iuxor(c):c.clone().iuxor(this)},s.prototype.inotn=function(c){r(typeof c=="number"&&c>=0);var d=Math.ceil(c/26)|0,f=c%26;this._expand(d),f>0&&d--;for(var N=0;N<d;N++)this.words[N]=~this.words[N]&67108863;return f>0&&(this.words[N]=~this.words[N]&67108863>>26-f),this._strip()},s.prototype.notn=function(c){return this.clone().inotn(c)},s.prototype.setn=function(c,d){r(typeof c=="number"&&c>=0);var f=c/26|0,N=c%26;return this._expand(f+1),d?this.words[f]=this.words[f]|1<<N:this.words[f]=this.words[f]&~(1<<N),this._strip()},s.prototype.iadd=function(c){var d;if(this.negative!==0&&c.negative===0)return this.negative=0,d=this.isub(c),this.negative^=1,this._normSign();if(this.negative===0&&c.negative!==0)return c.negative=0,d=this.isub(c),c.negative=1,d._normSign();var f,N;this.length>c.length?(f=this,N=c):(f=c,N=this);for(var v=0,w=0;w<N.length;w++)d=(f.words[w]|0)+(N.words[w]|0)+v,this.words[w]=d&67108863,v=d>>>26;for(;v!==0&&w<f.length;w++)d=(f.words[w]|0)+v,this.words[w]=d&67108863,v=d>>>26;if(this.length=f.length,v!==0)this.words[this.length]=v,this.length++;else if(f!==this)for(;w<f.length;w++)this.words[w]=f.words[w];return this},s.prototype.add=function(c){var d;return c.negative!==0&&this.negative===0?(c.negative=0,d=this.sub(c),c.negative^=1,d):c.negative===0&&this.negative!==0?(this.negative=0,d=c.sub(this),this.negative=1,d):this.length>c.length?this.clone().iadd(c):c.clone().iadd(this)},s.prototype.isub=function(c){if(c.negative!==0){c.negative=0;var d=this.iadd(c);return c.negative=1,d._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(c),this.negative=1,this._normSign();var f=this.cmp(c);if(f===0)return this.negative=0,this.length=1,this.words[0]=0,this;var N,v;f>0?(N=this,v=c):(N=c,v=this);for(var w=0,P=0;P<v.length;P++)d=(N.words[P]|0)-(v.words[P]|0)+w,w=d>>26,this.words[P]=d&67108863;for(;w!==0&&P<N.length;P++)d=(N.words[P]|0)+w,w=d>>26,this.words[P]=d&67108863;if(w===0&&P<N.length&&N!==this)for(;P<N.length;P++)this.words[P]=N.words[P];return this.length=Math.max(this.length,P),N!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(c){return this.clone().isub(c)};function R(p,c,d){d.negative=c.negative^p.negative;var f=p.length+c.length|0;d.length=f,f=f-1|0;var N=p.words[0]|0,v=c.words[0]|0,w=N*v,P=w&67108863,_=w/67108864|0;d.words[0]=P;for(var m=1;m<f;m++){for(var M=_>>>26,L=_&67108863,k=Math.min(m,c.length-1),D=Math.max(0,m-p.length+1);D<=k;D++){var G=m-D|0;N=p.words[G]|0,v=c.words[D]|0,w=N*v+L,M+=w/67108864|0,L=w&67108863}d.words[m]=L|0,_=M|0}return _!==0?d.words[m]=_|0:d.length--,d._strip()}var O=function(c,d,f){var N=c.words,v=d.words,w=f.words,P=0,_,m,M,L=N[0]|0,k=L&8191,D=L>>>13,G=N[1]|0,H=G&8191,V=G>>>13,re=N[2]|0,$=re&8191,ne=re>>>13,de=N[3]|0,Q=de&8191,he=de>>>13,Re=N[4]|0,pe=Re&8191,De=Re>>>13,Le=N[5]|0,me=Le&8191,Ue=Le>>>13,ze=N[6]|0,ue=ze&8191,Be=ze>>>13,qe=N[7]|0,ge=qe&8191,Ve=qe>>>13,Je=N[8]|0,ye=Je&8191,$e=Je>>>13,Qe=N[9]|0,ve=Qe&8191,Ye=Qe>>>13,Xe=v[0]|0,we=Xe&8191,Ze=Xe>>>13,et=v[1]|0,be=et&8191,tt=et>>>13,rt=v[2]|0,Ae=rt&8191,nt=rt>>>13,it=v[3]|0,Ee=it&8191,st=it>>>13,ot=v[4]|0,xe=ot&8191,at=ot>>>13,lt=v[5]|0,_e=lt&8191,ct=lt>>>13,ht=v[6]|0,ke=ht&8191,ut=ht>>>13,ft=v[7]|0,Se=ft&8191,dt=ft>>>13,pt=v[8]|0,Ne=pt&8191,vt=pt>>>13,Vr=v[9]|0,wt=Vr&8191,bt=Vr>>>13;f.negative=c.negative^d.negative,f.length=19,_=Math.imul(k,we),m=Math.imul(k,Ze),m=m+Math.imul(D,we)|0,M=Math.imul(D,Ze);var Pr=(P+_|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,_=Math.imul(H,we),m=Math.imul(H,Ze),m=m+Math.imul(V,we)|0,M=Math.imul(V,Ze),_=_+Math.imul(k,be)|0,m=m+Math.imul(k,tt)|0,m=m+Math.imul(D,be)|0,M=M+Math.imul(D,tt)|0;var Mr=(P+_|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(Mr>>>26)|0,Mr&=67108863,_=Math.imul($,we),m=Math.imul($,Ze),m=m+Math.imul(ne,we)|0,M=Math.imul(ne,Ze),_=_+Math.imul(H,be)|0,m=m+Math.imul(H,tt)|0,m=m+Math.imul(V,be)|0,M=M+Math.imul(V,tt)|0,_=_+Math.imul(k,Ae)|0,m=m+Math.imul(k,nt)|0,m=m+Math.imul(D,Ae)|0,M=M+Math.imul(D,nt)|0;var Tr=(P+_|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(Tr>>>26)|0,Tr&=67108863,_=Math.imul(Q,we),m=Math.imul(Q,Ze),m=m+Math.imul(he,we)|0,M=Math.imul(he,Ze),_=_+Math.imul($,be)|0,m=m+Math.imul($,tt)|0,m=m+Math.imul(ne,be)|0,M=M+Math.imul(ne,tt)|0,_=_+Math.imul(H,Ae)|0,m=m+Math.imul(H,nt)|0,m=m+Math.imul(V,Ae)|0,M=M+Math.imul(V,nt)|0,_=_+Math.imul(k,Ee)|0,m=m+Math.imul(k,st)|0,m=m+Math.imul(D,Ee)|0,M=M+Math.imul(D,st)|0;var Rr=(P+_|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,_=Math.imul(pe,we),m=Math.imul(pe,Ze),m=m+Math.imul(De,we)|0,M=Math.imul(De,Ze),_=_+Math.imul(Q,be)|0,m=m+Math.imul(Q,tt)|0,m=m+Math.imul(he,be)|0,M=M+Math.imul(he,tt)|0,_=_+Math.imul($,Ae)|0,m=m+Math.imul($,nt)|0,m=m+Math.imul(ne,Ae)|0,M=M+Math.imul(ne,nt)|0,_=_+Math.imul(H,Ee)|0,m=m+Math.imul(H,st)|0,m=m+Math.imul(V,Ee)|0,M=M+Math.imul(V,st)|0,_=_+Math.imul(k,xe)|0,m=m+Math.imul(k,at)|0,m=m+Math.imul(D,xe)|0,M=M+Math.imul(D,at)|0;var Br=(P+_|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(Br>>>26)|0,Br&=67108863,_=Math.imul(me,we),m=Math.imul(me,Ze),m=m+Math.imul(Ue,we)|0,M=Math.imul(Ue,Ze),_=_+Math.imul(pe,be)|0,m=m+Math.imul(pe,tt)|0,m=m+Math.imul(De,be)|0,M=M+Math.imul(De,tt)|0,_=_+Math.imul(Q,Ae)|0,m=m+Math.imul(Q,nt)|0,m=m+Math.imul(he,Ae)|0,M=M+Math.imul(he,nt)|0,_=_+Math.imul($,Ee)|0,m=m+Math.imul($,st)|0,m=m+Math.imul(ne,Ee)|0,M=M+Math.imul(ne,st)|0,_=_+Math.imul(H,xe)|0,m=m+Math.imul(H,at)|0,m=m+Math.imul(V,xe)|0,M=M+Math.imul(V,at)|0,_=_+Math.imul(k,_e)|0,m=m+Math.imul(k,ct)|0,m=m+Math.imul(D,_e)|0,M=M+Math.imul(D,ct)|0;var pi=(P+_|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(pi>>>26)|0,pi&=67108863,_=Math.imul(ue,we),m=Math.imul(ue,Ze),m=m+Math.imul(Be,we)|0,M=Math.imul(Be,Ze),_=_+Math.imul(me,be)|0,m=m+Math.imul(me,tt)|0,m=m+Math.imul(Ue,be)|0,M=M+Math.imul(Ue,tt)|0,_=_+Math.imul(pe,Ae)|0,m=m+Math.imul(pe,nt)|0,m=m+Math.imul(De,Ae)|0,M=M+Math.imul(De,nt)|0,_=_+Math.imul(Q,Ee)|0,m=m+Math.imul(Q,st)|0,m=m+Math.imul(he,Ee)|0,M=M+Math.imul(he,st)|0,_=_+Math.imul($,xe)|0,m=m+Math.imul($,at)|0,m=m+Math.imul(ne,xe)|0,M=M+Math.imul(ne,at)|0,_=_+Math.imul(H,_e)|0,m=m+Math.imul(H,ct)|0,m=m+Math.imul(V,_e)|0,M=M+Math.imul(V,ct)|0,_=_+Math.imul(k,ke)|0,m=m+Math.imul(k,ut)|0,m=m+Math.imul(D,ke)|0,M=M+Math.imul(D,ut)|0;var mi=(P+_|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(mi>>>26)|0,mi&=67108863,_=Math.imul(ge,we),m=Math.imul(ge,Ze),m=m+Math.imul(Ve,we)|0,M=Math.imul(Ve,Ze),_=_+Math.imul(ue,be)|0,m=m+Math.imul(ue,tt)|0,m=m+Math.imul(Be,be)|0,M=M+Math.imul(Be,tt)|0,_=_+Math.imul(me,Ae)|0,m=m+Math.imul(me,nt)|0,m=m+Math.imul(Ue,Ae)|0,M=M+Math.imul(Ue,nt)|0,_=_+Math.imul(pe,Ee)|0,m=m+Math.imul(pe,st)|0,m=m+Math.imul(De,Ee)|0,M=M+Math.imul(De,st)|0,_=_+Math.imul(Q,xe)|0,m=m+Math.imul(Q,at)|0,m=m+Math.imul(he,xe)|0,M=M+Math.imul(he,at)|0,_=_+Math.imul($,_e)|0,m=m+Math.imul($,ct)|0,m=m+Math.imul(ne,_e)|0,M=M+Math.imul(ne,ct)|0,_=_+Math.imul(H,ke)|0,m=m+Math.imul(H,ut)|0,m=m+Math.imul(V,ke)|0,M=M+Math.imul(V,ut)|0,_=_+Math.imul(k,Se)|0,m=m+Math.imul(k,dt)|0,m=m+Math.imul(D,Se)|0,M=M+Math.imul(D,dt)|0;var gi=(P+_|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(gi>>>26)|0,gi&=67108863,_=Math.imul(ye,we),m=Math.imul(ye,Ze),m=m+Math.imul($e,we)|0,M=Math.imul($e,Ze),_=_+Math.imul(ge,be)|0,m=m+Math.imul(ge,tt)|0,m=m+Math.imul(Ve,be)|0,M=M+Math.imul(Ve,tt)|0,_=_+Math.imul(ue,Ae)|0,m=m+Math.imul(ue,nt)|0,m=m+Math.imul(Be,Ae)|0,M=M+Math.imul(Be,nt)|0,_=_+Math.imul(me,Ee)|0,m=m+Math.imul(me,st)|0,m=m+Math.imul(Ue,Ee)|0,M=M+Math.imul(Ue,st)|0,_=_+Math.imul(pe,xe)|0,m=m+Math.imul(pe,at)|0,m=m+Math.imul(De,xe)|0,M=M+Math.imul(De,at)|0,_=_+Math.imul(Q,_e)|0,m=m+Math.imul(Q,ct)|0,m=m+Math.imul(he,_e)|0,M=M+Math.imul(he,ct)|0,_=_+Math.imul($,ke)|0,m=m+Math.imul($,ut)|0,m=m+Math.imul(ne,ke)|0,M=M+Math.imul(ne,ut)|0,_=_+Math.imul(H,Se)|0,m=m+Math.imul(H,dt)|0,m=m+Math.imul(V,Se)|0,M=M+Math.imul(V,dt)|0,_=_+Math.imul(k,Ne)|0,m=m+Math.imul(k,vt)|0,m=m+Math.imul(D,Ne)|0,M=M+Math.imul(D,vt)|0;var yi=(P+_|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(yi>>>26)|0,yi&=67108863,_=Math.imul(ve,we),m=Math.imul(ve,Ze),m=m+Math.imul(Ye,we)|0,M=Math.imul(Ye,Ze),_=_+Math.imul(ye,be)|0,m=m+Math.imul(ye,tt)|0,m=m+Math.imul($e,be)|0,M=M+Math.imul($e,tt)|0,_=_+Math.imul(ge,Ae)|0,m=m+Math.imul(ge,nt)|0,m=m+Math.imul(Ve,Ae)|0,M=M+Math.imul(Ve,nt)|0,_=_+Math.imul(ue,Ee)|0,m=m+Math.imul(ue,st)|0,m=m+Math.imul(Be,Ee)|0,M=M+Math.imul(Be,st)|0,_=_+Math.imul(me,xe)|0,m=m+Math.imul(me,at)|0,m=m+Math.imul(Ue,xe)|0,M=M+Math.imul(Ue,at)|0,_=_+Math.imul(pe,_e)|0,m=m+Math.imul(pe,ct)|0,m=m+Math.imul(De,_e)|0,M=M+Math.imul(De,ct)|0,_=_+Math.imul(Q,ke)|0,m=m+Math.imul(Q,ut)|0,m=m+Math.imul(he,ke)|0,M=M+Math.imul(he,ut)|0,_=_+Math.imul($,Se)|0,m=m+Math.imul($,dt)|0,m=m+Math.imul(ne,Se)|0,M=M+Math.imul(ne,dt)|0,_=_+Math.imul(H,Ne)|0,m=m+Math.imul(H,vt)|0,m=m+Math.imul(V,Ne)|0,M=M+Math.imul(V,vt)|0,_=_+Math.imul(k,wt)|0,m=m+Math.imul(k,bt)|0,m=m+Math.imul(D,wt)|0,M=M+Math.imul(D,bt)|0;var vi=(P+_|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(vi>>>26)|0,vi&=67108863,_=Math.imul(ve,be),m=Math.imul(ve,tt),m=m+Math.imul(Ye,be)|0,M=Math.imul(Ye,tt),_=_+Math.imul(ye,Ae)|0,m=m+Math.imul(ye,nt)|0,m=m+Math.imul($e,Ae)|0,M=M+Math.imul($e,nt)|0,_=_+Math.imul(ge,Ee)|0,m=m+Math.imul(ge,st)|0,m=m+Math.imul(Ve,Ee)|0,M=M+Math.imul(Ve,st)|0,_=_+Math.imul(ue,xe)|0,m=m+Math.imul(ue,at)|0,m=m+Math.imul(Be,xe)|0,M=M+Math.imul(Be,at)|0,_=_+Math.imul(me,_e)|0,m=m+Math.imul(me,ct)|0,m=m+Math.imul(Ue,_e)|0,M=M+Math.imul(Ue,ct)|0,_=_+Math.imul(pe,ke)|0,m=m+Math.imul(pe,ut)|0,m=m+Math.imul(De,ke)|0,M=M+Math.imul(De,ut)|0,_=_+Math.imul(Q,Se)|0,m=m+Math.imul(Q,dt)|0,m=m+Math.imul(he,Se)|0,M=M+Math.imul(he,dt)|0,_=_+Math.imul($,Ne)|0,m=m+Math.imul($,vt)|0,m=m+Math.imul(ne,Ne)|0,M=M+Math.imul(ne,vt)|0,_=_+Math.imul(H,wt)|0,m=m+Math.imul(H,bt)|0,m=m+Math.imul(V,wt)|0,M=M+Math.imul(V,bt)|0;var wi=(P+_|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(wi>>>26)|0,wi&=67108863,_=Math.imul(ve,Ae),m=Math.imul(ve,nt),m=m+Math.imul(Ye,Ae)|0,M=Math.imul(Ye,nt),_=_+Math.imul(ye,Ee)|0,m=m+Math.imul(ye,st)|0,m=m+Math.imul($e,Ee)|0,M=M+Math.imul($e,st)|0,_=_+Math.imul(ge,xe)|0,m=m+Math.imul(ge,at)|0,m=m+Math.imul(Ve,xe)|0,M=M+Math.imul(Ve,at)|0,_=_+Math.imul(ue,_e)|0,m=m+Math.imul(ue,ct)|0,m=m+Math.imul(Be,_e)|0,M=M+Math.imul(Be,ct)|0,_=_+Math.imul(me,ke)|0,m=m+Math.imul(me,ut)|0,m=m+Math.imul(Ue,ke)|0,M=M+Math.imul(Ue,ut)|0,_=_+Math.imul(pe,Se)|0,m=m+Math.imul(pe,dt)|0,m=m+Math.imul(De,Se)|0,M=M+Math.imul(De,dt)|0,_=_+Math.imul(Q,Ne)|0,m=m+Math.imul(Q,vt)|0,m=m+Math.imul(he,Ne)|0,M=M+Math.imul(he,vt)|0,_=_+Math.imul($,wt)|0,m=m+Math.imul($,bt)|0,m=m+Math.imul(ne,wt)|0,M=M+Math.imul(ne,bt)|0;var bi=(P+_|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(bi>>>26)|0,bi&=67108863,_=Math.imul(ve,Ee),m=Math.imul(ve,st),m=m+Math.imul(Ye,Ee)|0,M=Math.imul(Ye,st),_=_+Math.imul(ye,xe)|0,m=m+Math.imul(ye,at)|0,m=m+Math.imul($e,xe)|0,M=M+Math.imul($e,at)|0,_=_+Math.imul(ge,_e)|0,m=m+Math.imul(ge,ct)|0,m=m+Math.imul(Ve,_e)|0,M=M+Math.imul(Ve,ct)|0,_=_+Math.imul(ue,ke)|0,m=m+Math.imul(ue,ut)|0,m=m+Math.imul(Be,ke)|0,M=M+Math.imul(Be,ut)|0,_=_+Math.imul(me,Se)|0,m=m+Math.imul(me,dt)|0,m=m+Math.imul(Ue,Se)|0,M=M+Math.imul(Ue,dt)|0,_=_+Math.imul(pe,Ne)|0,m=m+Math.imul(pe,vt)|0,m=m+Math.imul(De,Ne)|0,M=M+Math.imul(De,vt)|0,_=_+Math.imul(Q,wt)|0,m=m+Math.imul(Q,bt)|0,m=m+Math.imul(he,wt)|0,M=M+Math.imul(he,bt)|0;var Ai=(P+_|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(Ai>>>26)|0,Ai&=67108863,_=Math.imul(ve,xe),m=Math.imul(ve,at),m=m+Math.imul(Ye,xe)|0,M=Math.imul(Ye,at),_=_+Math.imul(ye,_e)|0,m=m+Math.imul(ye,ct)|0,m=m+Math.imul($e,_e)|0,M=M+Math.imul($e,ct)|0,_=_+Math.imul(ge,ke)|0,m=m+Math.imul(ge,ut)|0,m=m+Math.imul(Ve,ke)|0,M=M+Math.imul(Ve,ut)|0,_=_+Math.imul(ue,Se)|0,m=m+Math.imul(ue,dt)|0,m=m+Math.imul(Be,Se)|0,M=M+Math.imul(Be,dt)|0,_=_+Math.imul(me,Ne)|0,m=m+Math.imul(me,vt)|0,m=m+Math.imul(Ue,Ne)|0,M=M+Math.imul(Ue,vt)|0,_=_+Math.imul(pe,wt)|0,m=m+Math.imul(pe,bt)|0,m=m+Math.imul(De,wt)|0,M=M+Math.imul(De,bt)|0;var Ei=(P+_|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(Ei>>>26)|0,Ei&=67108863,_=Math.imul(ve,_e),m=Math.imul(ve,ct),m=m+Math.imul(Ye,_e)|0,M=Math.imul(Ye,ct),_=_+Math.imul(ye,ke)|0,m=m+Math.imul(ye,ut)|0,m=m+Math.imul($e,ke)|0,M=M+Math.imul($e,ut)|0,_=_+Math.imul(ge,Se)|0,m=m+Math.imul(ge,dt)|0,m=m+Math.imul(Ve,Se)|0,M=M+Math.imul(Ve,dt)|0,_=_+Math.imul(ue,Ne)|0,m=m+Math.imul(ue,vt)|0,m=m+Math.imul(Be,Ne)|0,M=M+Math.imul(Be,vt)|0,_=_+Math.imul(me,wt)|0,m=m+Math.imul(me,bt)|0,m=m+Math.imul(Ue,wt)|0,M=M+Math.imul(Ue,bt)|0;var xi=(P+_|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(xi>>>26)|0,xi&=67108863,_=Math.imul(ve,ke),m=Math.imul(ve,ut),m=m+Math.imul(Ye,ke)|0,M=Math.imul(Ye,ut),_=_+Math.imul(ye,Se)|0,m=m+Math.imul(ye,dt)|0,m=m+Math.imul($e,Se)|0,M=M+Math.imul($e,dt)|0,_=_+Math.imul(ge,Ne)|0,m=m+Math.imul(ge,vt)|0,m=m+Math.imul(Ve,Ne)|0,M=M+Math.imul(Ve,vt)|0,_=_+Math.imul(ue,wt)|0,m=m+Math.imul(ue,bt)|0,m=m+Math.imul(Be,wt)|0,M=M+Math.imul(Be,bt)|0;var al=(P+_|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(al>>>26)|0,al&=67108863,_=Math.imul(ve,Se),m=Math.imul(ve,dt),m=m+Math.imul(Ye,Se)|0,M=Math.imul(Ye,dt),_=_+Math.imul(ye,Ne)|0,m=m+Math.imul(ye,vt)|0,m=m+Math.imul($e,Ne)|0,M=M+Math.imul($e,vt)|0,_=_+Math.imul(ge,wt)|0,m=m+Math.imul(ge,bt)|0,m=m+Math.imul(Ve,wt)|0,M=M+Math.imul(Ve,bt)|0;var ll=(P+_|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(ll>>>26)|0,ll&=67108863,_=Math.imul(ve,Ne),m=Math.imul(ve,vt),m=m+Math.imul(Ye,Ne)|0,M=Math.imul(Ye,vt),_=_+Math.imul(ye,wt)|0,m=m+Math.imul(ye,bt)|0,m=m+Math.imul($e,wt)|0,M=M+Math.imul($e,bt)|0;var cl=(P+_|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(cl>>>26)|0,cl&=67108863,_=Math.imul(ve,wt),m=Math.imul(ve,bt),m=m+Math.imul(Ye,wt)|0,M=Math.imul(Ye,bt);var hl=(P+_|0)+((m&8191)<<13)|0;return P=(M+(m>>>13)|0)+(hl>>>26)|0,hl&=67108863,w[0]=Pr,w[1]=Mr,w[2]=Tr,w[3]=Rr,w[4]=Br,w[5]=pi,w[6]=mi,w[7]=gi,w[8]=yi,w[9]=vi,w[10]=wi,w[11]=bi,w[12]=Ai,w[13]=Ei,w[14]=xi,w[15]=al,w[16]=ll,w[17]=cl,w[18]=hl,P!==0&&(w[19]=P,f.length++),f};Math.imul||(O=R);function B(p,c,d){d.negative=c.negative^p.negative,d.length=p.length+c.length;for(var f=0,N=0,v=0;v<d.length-1;v++){var w=N;N=0;for(var P=f&67108863,_=Math.min(v,c.length-1),m=Math.max(0,v-p.length+1);m<=_;m++){var M=v-m,L=p.words[M]|0,k=c.words[m]|0,D=L*k,G=D&67108863;w=w+(D/67108864|0)|0,G=G+P|0,P=G&67108863,w=w+(G>>>26)|0,N+=w>>>26,w&=67108863}d.words[v]=P,f=w,w=N}return f!==0?d.words[v]=f:d.length--,d._strip()}function U(p,c,d){return B(p,c,d)}s.prototype.mulTo=function(c,d){var f,N=this.length+c.length;return this.length===10&&c.length===10?f=O(this,c,d):N<63?f=R(this,c,d):N<1024?f=B(this,c,d):f=U(this,c,d),f},s.prototype.mul=function(c){var d=new s(null);return d.words=new Array(this.length+c.length),this.mulTo(c,d)},s.prototype.mulf=function(c){var d=new s(null);return d.words=new Array(this.length+c.length),U(this,c,d)},s.prototype.imul=function(c){return this.clone().mulTo(c,this)},s.prototype.imuln=function(c){var d=c<0;d&&(c=-c),r(typeof c=="number"),r(c<67108864);for(var f=0,N=0;N<this.length;N++){var v=(this.words[N]|0)*c,w=(v&67108863)+(f&67108863);f>>=26,f+=v/67108864|0,f+=w>>>26,this.words[N]=w&67108863}return f!==0&&(this.words[N]=f,this.length++),this.length=c===0?1:this.length,d?this.ineg():this},s.prototype.muln=function(c){return this.clone().imuln(c)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(c){var d=T(c);if(d.length===0)return new s(1);for(var f=this,N=0;N<d.length&&d[N]===0;N++,f=f.sqr());if(++N<d.length)for(var v=f.sqr();N<d.length;N++,v=v.sqr())d[N]!==0&&(f=f.mul(v));return f},s.prototype.iushln=function(c){r(typeof c=="number"&&c>=0);var d=c%26,f=(c-d)/26,N=67108863>>>26-d<<26-d,v;if(d!==0){var w=0;for(v=0;v<this.length;v++){var P=this.words[v]&N,_=(this.words[v]|0)-P<<d;this.words[v]=_|w,w=P>>>26-d}w&&(this.words[v]=w,this.length++)}if(f!==0){for(v=this.length-1;v>=0;v--)this.words[v+f]=this.words[v];for(v=0;v<f;v++)this.words[v]=0;this.length+=f}return this._strip()},s.prototype.ishln=function(c){return r(this.negative===0),this.iushln(c)},s.prototype.iushrn=function(c,d,f){r(typeof c=="number"&&c>=0);var N;d?N=(d-d%26)/26:N=0;var v=c%26,w=Math.min((c-v)/26,this.length),P=67108863^67108863>>>v<<v,_=f;if(N-=w,N=Math.max(0,N),_){for(var m=0;m<w;m++)_.words[m]=this.words[m];_.length=w}if(w!==0)if(this.length>w)for(this.length-=w,m=0;m<this.length;m++)this.words[m]=this.words[m+w];else this.words[0]=0,this.length=1;var M=0;for(m=this.length-1;m>=0&&(M!==0||m>=N);m--){var L=this.words[m]|0;this.words[m]=M<<26-v|L>>>v,M=L&P}return _&&M!==0&&(_.words[_.length++]=M),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(c,d,f){return r(this.negative===0),this.iushrn(c,d,f)},s.prototype.shln=function(c){return this.clone().ishln(c)},s.prototype.ushln=function(c){return this.clone().iushln(c)},s.prototype.shrn=function(c){return this.clone().ishrn(c)},s.prototype.ushrn=function(c){return this.clone().iushrn(c)},s.prototype.testn=function(c){r(typeof c=="number"&&c>=0);var d=c%26,f=(c-d)/26,N=1<<d;if(this.length<=f)return!1;var v=this.words[f];return!!(v&N)},s.prototype.imaskn=function(c){r(typeof c=="number"&&c>=0);var d=c%26,f=(c-d)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=f)return this;if(d!==0&&f++,this.length=Math.min(f,this.length),d!==0){var N=67108863^67108863>>>d<<d;this.words[this.length-1]&=N}return this._strip()},s.prototype.maskn=function(c){return this.clone().imaskn(c)},s.prototype.iaddn=function(c){return r(typeof c=="number"),r(c<67108864),c<0?this.isubn(-c):this.negative!==0?this.length===1&&(this.words[0]|0)<=c?(this.words[0]=c-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(c),this.negative=1,this):this._iaddn(c)},s.prototype._iaddn=function(c){this.words[0]+=c;for(var d=0;d<this.length&&this.words[d]>=67108864;d++)this.words[d]-=67108864,d===this.length-1?this.words[d+1]=1:this.words[d+1]++;return this.length=Math.max(this.length,d+1),this},s.prototype.isubn=function(c){if(r(typeof c=="number"),r(c<67108864),c<0)return this.iaddn(-c);if(this.negative!==0)return this.negative=0,this.iaddn(c),this.negative=1,this;if(this.words[0]-=c,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var d=0;d<this.length&&this.words[d]<0;d++)this.words[d]+=67108864,this.words[d+1]-=1;return this._strip()},s.prototype.addn=function(c){return this.clone().iaddn(c)},s.prototype.subn=function(c){return this.clone().isubn(c)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(c,d,f){var N=c.length+f,v;this._expand(N);var w,P=0;for(v=0;v<c.length;v++){w=(this.words[v+f]|0)+P;var _=(c.words[v]|0)*d;w-=_&67108863,P=(w>>26)-(_/67108864|0),this.words[v+f]=w&67108863}for(;v<this.length-f;v++)w=(this.words[v+f]|0)+P,P=w>>26,this.words[v+f]=w&67108863;if(P===0)return this._strip();for(r(P===-1),P=0,v=0;v<this.length;v++)w=-(this.words[v]|0)+P,P=w>>26,this.words[v]=w&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(c,d){var f=this.length-c.length,N=this.clone(),v=c,w=v.words[v.length-1]|0,P=this._countBits(w);f=26-P,f!==0&&(v=v.ushln(f),N.iushln(f),w=v.words[v.length-1]|0);var _=N.length-v.length,m;if(d!=="mod"){m=new s(null),m.length=_+1,m.words=new Array(m.length);for(var M=0;M<m.length;M++)m.words[M]=0}var L=N.clone()._ishlnsubmul(v,1,_);L.negative===0&&(N=L,m&&(m.words[_]=1));for(var k=_-1;k>=0;k--){var D=(N.words[v.length+k]|0)*67108864+(N.words[v.length+k-1]|0);for(D=Math.min(D/w|0,67108863),N._ishlnsubmul(v,D,k);N.negative!==0;)D--,N.negative=0,N._ishlnsubmul(v,1,k),N.isZero()||(N.negative^=1);m&&(m.words[k]=D)}return m&&m._strip(),N._strip(),d!=="div"&&f!==0&&N.iushrn(f),{div:m||null,mod:N}},s.prototype.divmod=function(c,d,f){if(r(!c.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var N,v,w;return this.negative!==0&&c.negative===0?(w=this.neg().divmod(c,d),d!=="mod"&&(N=w.div.neg()),d!=="div"&&(v=w.mod.neg(),f&&v.negative!==0&&v.iadd(c)),{div:N,mod:v}):this.negative===0&&c.negative!==0?(w=this.divmod(c.neg(),d),d!=="mod"&&(N=w.div.neg()),{div:N,mod:w.mod}):this.negative&c.negative?(w=this.neg().divmod(c.neg(),d),d!=="div"&&(v=w.mod.neg(),f&&v.negative!==0&&v.isub(c)),{div:w.div,mod:v}):c.length>this.length||this.cmp(c)<0?{div:new s(0),mod:this}:c.length===1?d==="div"?{div:this.divn(c.words[0]),mod:null}:d==="mod"?{div:null,mod:new s(this.modrn(c.words[0]))}:{div:this.divn(c.words[0]),mod:new s(this.modrn(c.words[0]))}:this._wordDiv(c,d)},s.prototype.div=function(c){return this.divmod(c,"div",!1).div},s.prototype.mod=function(c){return this.divmod(c,"mod",!1).mod},s.prototype.umod=function(c){return this.divmod(c,"mod",!0).mod},s.prototype.divRound=function(c){var d=this.divmod(c);if(d.mod.isZero())return d.div;var f=d.div.negative!==0?d.mod.isub(c):d.mod,N=c.ushrn(1),v=c.andln(1),w=f.cmp(N);return w<0||v===1&&w===0?d.div:d.div.negative!==0?d.div.isubn(1):d.div.iaddn(1)},s.prototype.modrn=function(c){var d=c<0;d&&(c=-c),r(c<=67108863);for(var f=(1<<26)%c,N=0,v=this.length-1;v>=0;v--)N=(f*N+(this.words[v]|0))%c;return d?-N:N},s.prototype.modn=function(c){return this.modrn(c)},s.prototype.idivn=function(c){var d=c<0;d&&(c=-c),r(c<=67108863);for(var f=0,N=this.length-1;N>=0;N--){var v=(this.words[N]|0)+f*67108864;this.words[N]=v/c|0,f=v%c}return this._strip(),d?this.ineg():this},s.prototype.divn=function(c){return this.clone().idivn(c)},s.prototype.egcd=function(c){r(c.negative===0),r(!c.isZero());var d=this,f=c.clone();d.negative!==0?d=d.umod(c):d=d.clone();for(var N=new s(1),v=new s(0),w=new s(0),P=new s(1),_=0;d.isEven()&&f.isEven();)d.iushrn(1),f.iushrn(1),++_;for(var m=f.clone(),M=d.clone();!d.isZero();){for(var L=0,k=1;!(d.words[0]&k)&&L<26;++L,k<<=1);if(L>0)for(d.iushrn(L);L-- >0;)(N.isOdd()||v.isOdd())&&(N.iadd(m),v.isub(M)),N.iushrn(1),v.iushrn(1);for(var D=0,G=1;!(f.words[0]&G)&&D<26;++D,G<<=1);if(D>0)for(f.iushrn(D);D-- >0;)(w.isOdd()||P.isOdd())&&(w.iadd(m),P.isub(M)),w.iushrn(1),P.iushrn(1);d.cmp(f)>=0?(d.isub(f),N.isub(w),v.isub(P)):(f.isub(d),w.isub(N),P.isub(v))}return{a:w,b:P,gcd:f.iushln(_)}},s.prototype._invmp=function(c){r(c.negative===0),r(!c.isZero());var d=this,f=c.clone();d.negative!==0?d=d.umod(c):d=d.clone();for(var N=new s(1),v=new s(0),w=f.clone();d.cmpn(1)>0&&f.cmpn(1)>0;){for(var P=0,_=1;!(d.words[0]&_)&&P<26;++P,_<<=1);if(P>0)for(d.iushrn(P);P-- >0;)N.isOdd()&&N.iadd(w),N.iushrn(1);for(var m=0,M=1;!(f.words[0]&M)&&m<26;++m,M<<=1);if(m>0)for(f.iushrn(m);m-- >0;)v.isOdd()&&v.iadd(w),v.iushrn(1);d.cmp(f)>=0?(d.isub(f),N.isub(v)):(f.isub(d),v.isub(N))}var L;return d.cmpn(1)===0?L=N:L=v,L.cmpn(0)<0&&L.iadd(c),L},s.prototype.gcd=function(c){if(this.isZero())return c.abs();if(c.isZero())return this.abs();var d=this.clone(),f=c.clone();d.negative=0,f.negative=0;for(var N=0;d.isEven()&&f.isEven();N++)d.iushrn(1),f.iushrn(1);do{for(;d.isEven();)d.iushrn(1);for(;f.isEven();)f.iushrn(1);var v=d.cmp(f);if(v<0){var w=d;d=f,f=w}else if(v===0||f.cmpn(1)===0)break;d.isub(f)}while(!0);return f.iushln(N)},s.prototype.invm=function(c){return this.egcd(c).a.umod(c)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(c){return this.words[0]&c},s.prototype.bincn=function(c){r(typeof c=="number");var d=c%26,f=(c-d)/26,N=1<<d;if(this.length<=f)return this._expand(f+1),this.words[f]|=N,this;for(var v=N,w=f;v!==0&&w<this.length;w++){var P=this.words[w]|0;P+=v,v=P>>>26,P&=67108863,this.words[w]=P}return v!==0&&(this.words[w]=v,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(c){var d=c<0;if(this.negative!==0&&!d)return-1;if(this.negative===0&&d)return 1;this._strip();var f;if(this.length>1)f=1;else{d&&(c=-c),r(c<=67108863,"Number is too big");var N=this.words[0]|0;f=N===c?0:N<c?-1:1}return this.negative!==0?-f|0:f},s.prototype.cmp=function(c){if(this.negative!==0&&c.negative===0)return-1;if(this.negative===0&&c.negative!==0)return 1;var d=this.ucmp(c);return this.negative!==0?-d|0:d},s.prototype.ucmp=function(c){if(this.length>c.length)return 1;if(this.length<c.length)return-1;for(var d=0,f=this.length-1;f>=0;f--){var N=this.words[f]|0,v=c.words[f]|0;if(N!==v){N<v?d=-1:N>v&&(d=1);break}}return d},s.prototype.gtn=function(c){return this.cmpn(c)===1},s.prototype.gt=function(c){return this.cmp(c)===1},s.prototype.gten=function(c){return this.cmpn(c)>=0},s.prototype.gte=function(c){return this.cmp(c)>=0},s.prototype.ltn=function(c){return this.cmpn(c)===-1},s.prototype.lt=function(c){return this.cmp(c)===-1},s.prototype.lten=function(c){return this.cmpn(c)<=0},s.prototype.lte=function(c){return this.cmp(c)<=0},s.prototype.eqn=function(c){return this.cmpn(c)===0},s.prototype.eq=function(c){return this.cmp(c)===0},s.red=function(c){return new S(c)},s.prototype.toRed=function(c){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),c.convertTo(this)._forceRed(c)},s.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(c){return this.red=c,this},s.prototype.forceRed=function(c){return r(!this.red,"Already a number in reduction context"),this._forceRed(c)},s.prototype.redAdd=function(c){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,c)},s.prototype.redIAdd=function(c){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,c)},s.prototype.redSub=function(c){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,c)},s.prototype.redISub=function(c){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,c)},s.prototype.redShl=function(c){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,c)},s.prototype.redMul=function(c){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.mul(this,c)},s.prototype.redIMul=function(c){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.imul(this,c)},s.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(c){return r(this.red&&!c.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,c)};var q={k256:null,p224:null,p192:null,p25519:null};function W(p,c){this.name=p,this.p=new s(c,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}W.prototype._tmp=function(){var c=new s(null);return c.words=new Array(Math.ceil(this.n/13)),c},W.prototype.ireduce=function(c){var d=c,f;do this.split(d,this.tmp),d=this.imulK(d),d=d.iadd(this.tmp),f=d.bitLength();while(f>this.n);var N=f<this.n?-1:d.ucmp(this.p);return N===0?(d.words[0]=0,d.length=1):N>0?d.isub(this.p):d.strip!==void 0?d.strip():d._strip(),d},W.prototype.split=function(c,d){c.iushrn(this.n,0,d)},W.prototype.imulK=function(c){return c.imul(this.k)};function Z(){W.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(Z,W),Z.prototype.split=function(c,d){for(var f=4194303,N=Math.min(c.length,9),v=0;v<N;v++)d.words[v]=c.words[v];if(d.length=N,c.length<=9){c.words[0]=0,c.length=1;return}var w=c.words[9];for(d.words[d.length++]=w&f,v=10;v<c.length;v++){var P=c.words[v]|0;c.words[v-10]=(P&f)<<4|w>>>22,w=P}w>>>=22,c.words[v-10]=w,w===0&&c.length>10?c.length-=10:c.length-=9},Z.prototype.imulK=function(c){c.words[c.length]=0,c.words[c.length+1]=0,c.length+=2;for(var d=0,f=0;f<c.length;f++){var N=c.words[f]|0;d+=N*977,c.words[f]=d&67108863,d=N*64+(d/67108864|0)}return c.words[c.length-1]===0&&(c.length--,c.words[c.length-1]===0&&c.length--),c};function K(){W.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(K,W);function se(){W.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(se,W);function y(){W.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(y,W),y.prototype.imulK=function(c){for(var d=0,f=0;f<c.length;f++){var N=(c.words[f]|0)*19+d,v=N&67108863;N>>>=26,c.words[f]=v,d=N}return d!==0&&(c.words[c.length++]=d),c},s._prime=function(c){if(q[c])return q[c];var d;if(c==="k256")d=new Z;else if(c==="p224")d=new K;else if(c==="p192")d=new se;else if(c==="p25519")d=new y;else throw new Error("Unknown prime "+c);return q[c]=d,d};function S(p){if(typeof p=="string"){var c=s._prime(p);this.m=c.p,this.prime=c}else r(p.gtn(1),"modulus must be greater than 1"),this.m=p,this.prime=null}S.prototype._verify1=function(c){r(c.negative===0,"red works only with positives"),r(c.red,"red works only with red numbers")},S.prototype._verify2=function(c,d){r((c.negative|d.negative)===0,"red works only with positives"),r(c.red&&c.red===d.red,"red works only with red numbers")},S.prototype.imod=function(c){return this.prime?this.prime.ireduce(c)._forceRed(this):(u(c,c.umod(this.m)._forceRed(this)),c)},S.prototype.neg=function(c){return c.isZero()?c.clone():this.m.sub(c)._forceRed(this)},S.prototype.add=function(c,d){this._verify2(c,d);var f=c.add(d);return f.cmp(this.m)>=0&&f.isub(this.m),f._forceRed(this)},S.prototype.iadd=function(c,d){this._verify2(c,d);var f=c.iadd(d);return f.cmp(this.m)>=0&&f.isub(this.m),f},S.prototype.sub=function(c,d){this._verify2(c,d);var f=c.sub(d);return f.cmpn(0)<0&&f.iadd(this.m),f._forceRed(this)},S.prototype.isub=function(c,d){this._verify2(c,d);var f=c.isub(d);return f.cmpn(0)<0&&f.iadd(this.m),f},S.prototype.shl=function(c,d){return this._verify1(c),this.imod(c.ushln(d))},S.prototype.imul=function(c,d){return this._verify2(c,d),this.imod(c.imul(d))},S.prototype.mul=function(c,d){return this._verify2(c,d),this.imod(c.mul(d))},S.prototype.isqr=function(c){return this.imul(c,c.clone())},S.prototype.sqr=function(c){return this.mul(c,c)},S.prototype.sqrt=function(c){if(c.isZero())return c.clone();var d=this.m.andln(3);if(r(d%2===1),d===3){var f=this.m.add(new s(1)).iushrn(2);return this.pow(c,f)}for(var N=this.m.subn(1),v=0;!N.isZero()&&N.andln(1)===0;)v++,N.iushrn(1);r(!N.isZero());var w=new s(1).toRed(this),P=w.redNeg(),_=this.m.subn(1).iushrn(1),m=this.m.bitLength();for(m=new s(2*m*m).toRed(this);this.pow(m,_).cmp(P)!==0;)m.redIAdd(P);for(var M=this.pow(m,N),L=this.pow(c,N.addn(1).iushrn(1)),k=this.pow(c,N),D=v;k.cmp(w)!==0;){for(var G=k,H=0;G.cmp(w)!==0;H++)G=G.redSqr();r(H<D);var V=this.pow(M,new s(1).iushln(D-H-1));L=L.redMul(V),M=V.redSqr(),k=k.redMul(M),D=H}return L},S.prototype.invm=function(c){var d=c._invmp(this.m);return d.negative!==0?(d.negative=0,this.imod(d).redNeg()):this.imod(d)},S.prototype.pow=function(c,d){if(d.isZero())return new s(1).toRed(this);if(d.cmpn(1)===0)return c.clone();var f=4,N=new Array(1<<f);N[0]=new s(1).toRed(this),N[1]=c;for(var v=2;v<N.length;v++)N[v]=this.mul(N[v-1],c);var w=N[0],P=0,_=0,m=d.bitLength()%26;for(m===0&&(m=26),v=d.length-1;v>=0;v--){for(var M=d.words[v],L=m-1;L>=0;L--){var k=M>>L&1;if(w!==N[0]&&(w=this.sqr(w)),k===0&&P===0){_=0;continue}P<<=1,P|=k,_++,!(_!==f&&(v!==0||L!==0))&&(w=this.mul(w,N[P]),_=0,P=0)}m=26}return w},S.prototype.convertTo=function(c){var d=c.umod(this.m);return d===c?d.clone():d},S.prototype.convertFrom=function(c){var d=c.clone();return d.red=null,d},s.mont=function(c){return new C(c)};function C(p){S.call(this,p),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(C,S),C.prototype.convertTo=function(c){return this.imod(c.ushln(this.shift))},C.prototype.convertFrom=function(c){var d=this.imod(c.mul(this.rinv));return d.red=null,d},C.prototype.imul=function(c,d){if(c.isZero()||d.isZero())return c.words[0]=0,c.length=1,c;var f=c.imul(d),N=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=f.isub(N).iushrn(this.shift),w=v;return v.cmp(this.m)>=0?w=v.isub(this.m):v.cmpn(0)<0&&(w=v.iadd(this.m)),w._forceRed(this)},C.prototype.mul=function(c,d){if(c.isZero()||d.isZero())return new s(0)._forceRed(this);var f=c.mul(d),N=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=f.isub(N).iushrn(this.shift),w=v;return v.cmp(this.m)>=0?w=v.isub(this.m):v.cmpn(0)<0&&(w=v.iadd(this.m)),w._forceRed(this)},C.prototype.invm=function(c){var d=this.imod(c._invmp(this.m).mul(this.r2));return d._forceRed(this)}})(n,t2)})(uh);var o2=uh.exports;const Ie=Qa(o2),a2="logger/5.8.0";let yf=!1,vf=!1;const pa={debug:1,default:2,info:2,warning:3,error:4,off:5};let wf=pa.default,Vl=null;function l2(){try{const n=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{n.push(e)}}),n.length)throw new Error("missing "+n.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(n){return n.message}return null}const bf=l2();var Pc;(function(n){n.DEBUG="DEBUG",n.INFO="INFO",n.WARNING="WARNING",n.ERROR="ERROR",n.OFF="OFF"})(Pc||(Pc={}));var en;(function(n){n.UNKNOWN_ERROR="UNKNOWN_ERROR",n.NOT_IMPLEMENTED="NOT_IMPLEMENTED",n.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",n.NETWORK_ERROR="NETWORK_ERROR",n.SERVER_ERROR="SERVER_ERROR",n.TIMEOUT="TIMEOUT",n.BUFFER_OVERRUN="BUFFER_OVERRUN",n.NUMERIC_FAULT="NUMERIC_FAULT",n.MISSING_NEW="MISSING_NEW",n.INVALID_ARGUMENT="INVALID_ARGUMENT",n.MISSING_ARGUMENT="MISSING_ARGUMENT",n.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",n.CALL_EXCEPTION="CALL_EXCEPTION",n.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",n.NONCE_EXPIRED="NONCE_EXPIRED",n.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",n.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",n.TRANSACTION_REPLACED="TRANSACTION_REPLACED",n.ACTION_REJECTED="ACTION_REJECTED"})(en||(en={}));const Af="0123456789abcdef";class z{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const r=e.toLowerCase();pa[r]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(wf>pa[r])&&console.log.apply(console,t)}debug(...e){this._log(z.levels.DEBUG,e)}info(...e){this._log(z.levels.INFO,e)}warn(...e){this._log(z.levels.WARNING,e)}makeError(e,t,r){if(vf)return this.makeError("censored error",t,{});t||(t=z.errors.UNKNOWN_ERROR),r||(r={});const i=[];Object.keys(r).forEach(l=>{const h=r[l];try{if(h instanceof Uint8Array){let u="";for(let g=0;g<h.length;g++)u+=Af[h[g]>>4],u+=Af[h[g]&15];i.push(l+"=Uint8Array(0x"+u+")")}else i.push(l+"="+JSON.stringify(h))}catch{i.push(l+"="+JSON.stringify(r[l].toString()))}}),i.push(`code=${t}`),i.push(`version=${this.version}`);const s=e;let o="";switch(t){case en.NUMERIC_FAULT:{o="NUMERIC_FAULT";const l=e;switch(l){case"overflow":case"underflow":case"division-by-zero":o+="-"+l;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result";break}break}case en.CALL_EXCEPTION:case en.INSUFFICIENT_FUNDS:case en.MISSING_NEW:case en.NONCE_EXPIRED:case en.REPLACEMENT_UNDERPRICED:case en.TRANSACTION_REPLACED:case en.UNPREDICTABLE_GAS_LIMIT:o=t;break}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),i.length&&(e+=" ("+i.join(", ")+")");const a=new Error(e);return a.reason=s,a.code=t,Object.keys(r).forEach(function(l){a[l]=r[l]}),a}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,z.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,i){e||this.throwError(t,r,i)}assertArgument(e,t,r,i){e||this.throwArgumentError(t,r,i)}checkNormalize(e){bf&&this.throwError("platform missing String.prototype.normalize",z.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:bf})}checkSafeUint53(e,t){typeof e=="number"&&(t==null&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,z.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,z.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r?r=": "+r:r="",e<t&&this.throwError("missing argument"+r,z.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,z.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){(e===Object||e==null)&&this.throwError("missing new",z.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",z.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",z.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return Vl||(Vl=new z(a2)),Vl}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",z.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),yf){if(!e)return;this.globalLogger().throwError("error censorship permanent",z.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}vf=!!e,yf=!!t}static setLogLevel(e){const t=pa[e.toLowerCase()];if(t==null){z.globalLogger().warn("invalid log level - "+e);return}wf=t}static from(e){return new z(e)}}z.errors=en;z.levels=Pc;const c2="bytes/5.8.0",Bt=new z(c2);function e1(n){return!!n.toHexString}function ms(n){return n.slice||(n.slice=function(){const e=Array.prototype.slice.call(arguments);return ms(new Uint8Array(Array.prototype.slice.apply(n,e)))}),n}function fh(n){return yt(n)&&!(n.length%2)||Is(n)}function Ef(n){return typeof n=="number"&&n==n&&n%1===0}function Is(n){if(n==null)return!1;if(n.constructor===Uint8Array)return!0;if(typeof n=="string"||!Ef(n.length)||n.length<0)return!1;for(let e=0;e<n.length;e++){const t=n[e];if(!Ef(t)||t<0||t>=256)return!1}return!0}function fe(n,e){if(e||(e={}),typeof n=="number"){Bt.checkSafeUint53(n,"invalid arrayify value");const t=[];for(;n;)t.unshift(n&255),n=parseInt(String(n/256));return t.length===0&&t.push(0),ms(new Uint8Array(t))}if(e.allowMissingPrefix&&typeof n=="string"&&n.substring(0,2)!=="0x"&&(n="0x"+n),e1(n)&&(n=n.toHexString()),yt(n)){let t=n.substring(2);t.length%2&&(e.hexPad==="left"?t="0"+t:e.hexPad==="right"?t+="0":Bt.throwArgumentError("hex data is odd-length","value",n));const r=[];for(let i=0;i<t.length;i+=2)r.push(parseInt(t.substring(i,i+2),16));return ms(new Uint8Array(r))}return Is(n)?ms(new Uint8Array(n)):Bt.throwArgumentError("invalid arrayify value","value",n)}function mr(n){const e=n.map(i=>fe(i)),t=e.reduce((i,s)=>i+s.length,0),r=new Uint8Array(t);return e.reduce((i,s)=>(r.set(s,i),i+s.length),0),ms(r)}function As(n){let e=fe(n);if(e.length===0)return e;let t=0;for(;t<e.length&&e[t]===0;)t++;return t&&(e=e.slice(t)),e}function ma(n,e){n=fe(n),n.length>e&&Bt.throwArgumentError("value out of range","value",arguments[0]);const t=new Uint8Array(e);return t.set(n,e-n.length),ms(t)}function yt(n,e){return!(typeof n!="string"||!n.match(/^0x[0-9A-Fa-f]*$/)||e&&n.length!==2+2*e)}const Jl="0123456789abcdef";function ce(n,e){if(e||(e={}),typeof n=="number"){Bt.checkSafeUint53(n,"invalid hexlify value");let t="";for(;n;)t=Jl[n&15]+t,n=Math.floor(n/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if(typeof n=="bigint")return n=n.toString(16),n.length%2?"0x0"+n:"0x"+n;if(e.allowMissingPrefix&&typeof n=="string"&&n.substring(0,2)!=="0x"&&(n="0x"+n),e1(n))return n.toHexString();if(yt(n))return n.length%2&&(e.hexPad==="left"?n="0x0"+n.substring(2):e.hexPad==="right"?n+="0":Bt.throwArgumentError("hex data is odd-length","value",n)),n.toLowerCase();if(Is(n)){let t="0x";for(let r=0;r<n.length;r++){let i=n[r];t+=Jl[(i&240)>>4]+Jl[i&15]}return t}return Bt.throwArgumentError("invalid hexlify value","value",n)}function Ui(n){if(typeof n!="string")n=ce(n);else if(!yt(n)||n.length%2)return null;return(n.length-2)/2}function cr(n,e,t){return typeof n!="string"?n=ce(n):(!yt(n)||n.length%2)&&Bt.throwArgumentError("invalid hexData","value",n),e=2+2*e,t!=null?"0x"+n.substring(e,2+2*t):"0x"+n.substring(e)}function Ar(n){let e="0x";return n.forEach(t=>{e+=ce(t).substring(2)}),e}function dh(n){const e=h2(ce(n,{hexPad:"left"}));return e==="0x"?"0x0":e}function h2(n){typeof n!="string"&&(n=ce(n)),yt(n)||Bt.throwArgumentError("invalid hex string","value",n),n=n.substring(2);let e=0;for(;e<n.length&&n[e]==="0";)e++;return"0x"+n.substring(e)}function Ct(n,e){for(typeof n!="string"?n=ce(n):yt(n)||Bt.throwArgumentError("invalid hex string","value",n),n.length>2*e+2&&Bt.throwArgumentError("value out of range","value",arguments[1]);n.length<2*e+2;)n="0x0"+n.substring(2);return n}function Ya(n){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(fh(n)){let t=fe(n);t.length===64?(e.v=27+(t[32]>>7),t[32]&=127,e.r=ce(t.slice(0,32)),e.s=ce(t.slice(32,64))):t.length===65?(e.r=ce(t.slice(0,32)),e.s=ce(t.slice(32,64)),e.v=t[64]):Bt.throwArgumentError("invalid signature string","signature",n),e.v<27&&(e.v===0||e.v===1?e.v+=27:Bt.throwArgumentError("signature invalid v byte","signature",n)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(t[32]|=128),e._vs=ce(t.slice(32,64))}else{if(e.r=n.r,e.s=n.s,e.v=n.v,e.recoveryParam=n.recoveryParam,e._vs=n._vs,e._vs!=null){const i=ma(fe(e._vs),32);e._vs=ce(i);const s=i[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=s:e.recoveryParam!==s&&Bt.throwArgumentError("signature recoveryParam mismatch _vs","signature",n),i[0]&=127;const o=ce(i);e.s==null?e.s=o:e.s!==o&&Bt.throwArgumentError("signature v mismatch _vs","signature",n)}if(e.recoveryParam==null)e.v==null?Bt.throwArgumentError("signature missing v and recoveryParam","signature",n):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const i=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==i&&Bt.throwArgumentError("signature recoveryParam mismatch v","signature",n)}e.r==null||!yt(e.r)?Bt.throwArgumentError("signature missing or invalid r","signature",n):e.r=Ct(e.r,32),e.s==null||!yt(e.s)?Bt.throwArgumentError("signature missing or invalid s","signature",n):e.s=Ct(e.s,32);const t=fe(e.s);t[0]>=128&&Bt.throwArgumentError("signature s out of range","signature",n),e.recoveryParam&&(t[0]|=128);const r=ce(t);e._vs&&(yt(e._vs)||Bt.throwArgumentError("signature invalid _vs","signature",n),e._vs=Ct(e._vs,32)),e._vs==null?e._vs=r:e._vs!==r&&Bt.throwArgumentError("signature _vs mismatch v and s","signature",n)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}const t1="bignumber/5.8.0";var Ba=Ie.BN;const Un=new z(t1),$l={},xf=9007199254740991;function u2(n){return n!=null&&(J.isBigNumber(n)||typeof n=="number"&&n%1===0||typeof n=="string"&&!!n.match(/^-?[0-9]+$/)||yt(n)||typeof n=="bigint"||Is(n))}let _f=!1;class J{constructor(e,t){e!==$l&&Un.throwError("cannot call constructor directly; use BigNumber.from",z.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=t,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return vr(He(this).fromTwos(e))}toTwos(e){return vr(He(this).toTwos(e))}abs(){return this._hex[0]==="-"?J.from(this._hex.substring(1)):this}add(e){return vr(He(this).add(He(e)))}sub(e){return vr(He(this).sub(He(e)))}div(e){return J.from(e).isZero()&&Dr("division-by-zero","div"),vr(He(this).div(He(e)))}mul(e){return vr(He(this).mul(He(e)))}mod(e){const t=He(e);return t.isNeg()&&Dr("division-by-zero","mod"),vr(He(this).umod(t))}pow(e){const t=He(e);return t.isNeg()&&Dr("negative-power","pow"),vr(He(this).pow(t))}and(e){const t=He(e);return(this.isNegative()||t.isNeg())&&Dr("unbound-bitwise-result","and"),vr(He(this).and(t))}or(e){const t=He(e);return(this.isNegative()||t.isNeg())&&Dr("unbound-bitwise-result","or"),vr(He(this).or(t))}xor(e){const t=He(e);return(this.isNegative()||t.isNeg())&&Dr("unbound-bitwise-result","xor"),vr(He(this).xor(t))}mask(e){return(this.isNegative()||e<0)&&Dr("negative-width","mask"),vr(He(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&Dr("negative-width","shl"),vr(He(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&Dr("negative-width","shr"),vr(He(this).shrn(e))}eq(e){return He(this).eq(He(e))}lt(e){return He(this).lt(He(e))}lte(e){return He(this).lte(He(e))}gt(e){return He(this).gt(He(e))}gte(e){return He(this).gte(He(e))}isNegative(){return this._hex[0]==="-"}isZero(){return He(this).isZero()}toNumber(){try{return He(this).toNumber()}catch{Dr("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return Un.throwError("this platform does not support BigInt",z.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?_f||(_f=!0,Un.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?Un.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",z.errors.UNEXPECTED_ARGUMENT,{}):Un.throwError("BigNumber.toString does not accept parameters",z.errors.UNEXPECTED_ARGUMENT,{})),He(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof J)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new J($l,vo(e)):e.match(/^-?[0-9]+$/)?new J($l,vo(new Ba(e))):Un.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&Dr("underflow","BigNumber.from",e),(e>=xf||e<=-xf)&&Dr("overflow","BigNumber.from",e),J.from(String(e));const t=e;if(typeof t=="bigint")return J.from(t.toString());if(Is(t))return J.from(ce(t));if(t)if(t.toHexString){const r=t.toHexString();if(typeof r=="string")return J.from(r)}else{let r=t._hex;if(r==null&&t.type==="BigNumber"&&(r=t.hex),typeof r=="string"&&(yt(r)||r[0]==="-"&&yt(r.substring(1))))return J.from(r)}return Un.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}}function vo(n){if(typeof n!="string")return vo(n.toString(16));if(n[0]==="-")return n=n.substring(1),n[0]==="-"&&Un.throwArgumentError("invalid hex","value",n),n=vo(n),n==="0x00"?n:"-"+n;if(n.substring(0,2)!=="0x"&&(n="0x"+n),n==="0x")return"0x00";for(n.length%2&&(n="0x0"+n.substring(2));n.length>4&&n.substring(0,4)==="0x00";)n="0x"+n.substring(4);return n}function vr(n){return J.from(vo(n))}function He(n){const e=J.from(n).toHexString();return e[0]==="-"?new Ba("-"+e.substring(3),16):new Ba(e.substring(2),16)}function Dr(n,e,t){const r={fault:n,operation:e};return t!=null&&(r.value=t),Un.throwError(n,z.errors.NUMERIC_FAULT,r)}function f2(n){return new Ba(n,36).toString(16)}const pr=new z(t1),io={},r1=J.from(0),n1=J.from(-1);function i1(n,e,t,r){const i={fault:e,operation:t};return r!==void 0&&(i.value=r),pr.throwError(n,z.errors.NUMERIC_FAULT,i)}let so="0";for(;so.length<256;)so+=so;function ph(n){if(typeof n!="number")try{n=J.from(n).toNumber()}catch{}return typeof n=="number"&&n>=0&&n<=256&&!(n%1)?"1"+so.substring(0,n):pr.throwArgumentError("invalid decimal size","decimals",n)}function ga(n,e){e==null&&(e=0);const t=ph(e);n=J.from(n);const r=n.lt(r1);r&&(n=n.mul(n1));let i=n.mod(t).toString();for(;i.length<t.length-1;)i="0"+i;i=i.match(/^([0-9]*[1-9]|0)(0*)/)[1];const s=n.div(t).toString();return t.length===1?n=s:n=s+"."+i,r&&(n="-"+n),n}function un(n,e){e==null&&(e=0);const t=ph(e);(typeof n!="string"||!n.match(/^-?[0-9.]+$/))&&pr.throwArgumentError("invalid decimal value","value",n);const r=n.substring(0,1)==="-";r&&(n=n.substring(1)),n==="."&&pr.throwArgumentError("missing value","value",n);const i=n.split(".");i.length>2&&pr.throwArgumentError("too many decimal points","value",n);let s=i[0],o=i[1];for(s||(s="0"),o||(o="0");o[o.length-1]==="0";)o=o.substring(0,o.length-1);for(o.length>t.length-1&&i1("fractional component exceeds decimals","underflow","parseFixed"),o===""&&(o="0");o.length<t.length-1;)o+="0";const a=J.from(s),l=J.from(o);let h=a.mul(t).add(l);return r&&(h=h.mul(n1)),h}class gs{constructor(e,t,r,i){e!==io&&pr.throwError("cannot use FixedFormat constructor; use FixedFormat.from",z.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=t,this.width=r,this.decimals=i,this.name=(t?"":"u")+"fixed"+String(r)+"x"+String(i),this._multiplier=ph(i),Object.freeze(this)}static from(e){if(e instanceof gs)return e;typeof e=="number"&&(e=`fixed128x${e}`);let t=!0,r=128,i=18;if(typeof e=="string"){if(e!=="fixed")if(e==="ufixed")t=!1;else{const s=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);s||pr.throwArgumentError("invalid fixed format","format",e),t=s[1]!=="u",r=parseInt(s[2]),i=parseInt(s[3])}}else if(e){const s=(o,a,l)=>e[o]==null?l:(typeof e[o]!==a&&pr.throwArgumentError("invalid fixed format ("+o+" not "+a+")","format."+o,e[o]),e[o]);t=s("signed","boolean",t),r=s("width","number",r),i=s("decimals","number",i)}return r%8&&pr.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",r),i>80&&pr.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",i),new gs(io,t,r,i)}}class Xt{constructor(e,t,r,i){e!==io&&pr.throwError("cannot use FixedNumber constructor; use FixedNumber.from",z.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=i,this._hex=t,this._value=r,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(e){this.format.name!==e.format.name&&pr.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",e)}addUnsafe(e){this._checkFormat(e);const t=un(this._value,this.format.decimals),r=un(e._value,e.format.decimals);return Xt.fromValue(t.add(r),this.format.decimals,this.format)}subUnsafe(e){this._checkFormat(e);const t=un(this._value,this.format.decimals),r=un(e._value,e.format.decimals);return Xt.fromValue(t.sub(r),this.format.decimals,this.format)}mulUnsafe(e){this._checkFormat(e);const t=un(this._value,this.format.decimals),r=un(e._value,e.format.decimals);return Xt.fromValue(t.mul(r).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(e){this._checkFormat(e);const t=un(this._value,this.format.decimals),r=un(e._value,e.format.decimals);return Xt.fromValue(t.mul(this.format._multiplier).div(r),this.format.decimals,this.format)}floor(){const e=this.toString().split(".");e.length===1&&e.push("0");let t=Xt.from(e[0],this.format);const r=!e[1].match(/^(0*)$/);return this.isNegative()&&r&&(t=t.subUnsafe(kf.toFormat(t.format))),t}ceiling(){const e=this.toString().split(".");e.length===1&&e.push("0");let t=Xt.from(e[0],this.format);const r=!e[1].match(/^(0*)$/);return!this.isNegative()&&r&&(t=t.addUnsafe(kf.toFormat(t.format))),t}round(e){e==null&&(e=0);const t=this.toString().split(".");if(t.length===1&&t.push("0"),(e<0||e>80||e%1)&&pr.throwArgumentError("invalid decimal count","decimals",e),t[1].length<=e)return this;const r=Xt.from("1"+so.substring(0,e),this.format),i=d2.toFormat(this.format);return this.mulUnsafe(r).addUnsafe(i).floor().divUnsafe(r)}isZero(){return this._value==="0.0"||this._value==="0"}isNegative(){return this._value[0]==="-"}toString(){return this._value}toHexString(e){if(e==null)return this._hex;e%8&&pr.throwArgumentError("invalid byte width","width",e);const t=J.from(this._hex).fromTwos(this.format.width).toTwos(e).toHexString();return Ct(t,e/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Xt.fromString(this._value,e)}static fromValue(e,t,r){return r==null&&t!=null&&!u2(t)&&(r=t,t=null),t==null&&(t=0),r==null&&(r="fixed"),Xt.fromString(ga(e,t),gs.from(r))}static fromString(e,t){t==null&&(t="fixed");const r=gs.from(t),i=un(e,r.decimals);!r.signed&&i.lt(r1)&&i1("unsigned value cannot be negative","overflow","value",e);let s=null;r.signed?s=i.toTwos(r.width).toHexString():(s=i.toHexString(),s=Ct(s,r.width/8));const o=ga(i,r.decimals);return new Xt(io,s,o,r)}static fromBytes(e,t){t==null&&(t="fixed");const r=gs.from(t);if(fe(e).length>r.width/8)throw new Error("overflow");let i=J.from(e);r.signed&&(i=i.fromTwos(r.width));const s=i.toTwos((r.signed?0:1)+r.width).toHexString(),o=ga(i,r.decimals);return new Xt(io,s,o,r)}static from(e,t){if(typeof e=="string")return Xt.fromString(e,t);if(Is(e))return Xt.fromBytes(e,t);try{return Xt.fromValue(e,0,t)}catch(r){if(r.code!==z.errors.INVALID_ARGUMENT)throw r}return pr.throwArgumentError("invalid FixedNumber value","value",e)}static isFixedNumber(e){return!!(e&&e._isFixedNumber)}}const kf=Xt.from(1),d2=Xt.from("0.5"),p2="properties/5.8.0";var m2=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{h(r.next(u))}catch(g){o(g)}}function l(u){try{h(r.throw(u))}catch(g){o(g)}}function h(u){u.done?s(u.value):i(u.value).then(a,l)}h((r=r.apply(n,e||[])).next())})};const Oa=new z(p2);function ee(n,e,t){Object.defineProperty(n,e,{enumerable:!0,value:t,writable:!1})}function En(n,e){for(let t=0;t<32;t++){if(n[e])return n[e];if(!n.prototype||typeof n.prototype!="object")break;n=Object.getPrototypeOf(n.prototype).constructor}return null}function Ht(n){return m2(this,void 0,void 0,function*(){const e=Object.keys(n).map(r=>{const i=n[r];return Promise.resolve(i).then(s=>({key:r,value:s}))});return(yield Promise.all(e)).reduce((r,i)=>(r[i.key]=i.value,r),{})})}function g2(n,e){(!n||typeof n!="object")&&Oa.throwArgumentError("invalid object","object",n),Object.keys(n).forEach(t=>{e[t]||Oa.throwArgumentError("invalid object key - "+t,"transaction:"+t,n)})}function Kt(n){const e={};for(const t in n)e[t]=n[t];return e}const y2={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function s1(n){if(n==null||y2[typeof n])return!0;if(Array.isArray(n)||typeof n=="object"){if(!Object.isFrozen(n))return!1;const e=Object.keys(n);for(let t=0;t<e.length;t++){let r=null;try{r=n[e[t]]}catch{continue}if(!s1(r))return!1}return!0}return Oa.throwArgumentError(`Cannot deepCopy ${typeof n}`,"object",n)}function v2(n){if(s1(n))return n;if(Array.isArray(n))return Object.freeze(n.map(e=>Wn(e)));if(typeof n=="object"){const e={};for(const t in n){const r=n[t];r!==void 0&&ee(e,t,Wn(r))}return e}return Oa.throwArgumentError(`Cannot deepCopy ${typeof n}`,"object",n)}function Wn(n){return v2(n)}class Po{constructor(e){for(const t in e)this[t]=Wn(e[t])}}const Mo="abi/5.8.0",Ke=new z(Mo),zi={};let Sf={calldata:!0,memory:!0,storage:!0},w2={calldata:!0,memory:!0};function $o(n,e){if(n==="bytes"||n==="string"){if(Sf[e])return!0}else if(n==="address"){if(e==="payable")return!0}else if((n.indexOf("[")>=0||n==="tuple")&&w2[e])return!0;return(Sf[e]||e==="payable")&&Ke.throwArgumentError("invalid modifier","name",e),!1}function b2(n,e){let t=n;function r(a){Ke.throwArgumentError(`unexpected character at position ${a}`,"param",n)}n=n.replace(/\s/g," ");function i(a){let l={type:"",name:"",parent:a,state:{allowType:!0}};return e&&(l.indexed=!1),l}let s={type:"",name:"",state:{allowType:!0}},o=s;for(let a=0;a<n.length;a++){let l=n[a];switch(l){case"(":o.state.allowType&&o.type===""?o.type="tuple":o.state.allowParams||r(a),o.state.allowType=!1,o.type=is(o.type),o.components=[i(o)],o=o.components[0];break;case")":delete o.state,o.name==="indexed"&&(e||r(a),o.indexed=!0,o.name=""),$o(o.type,o.name)&&(o.name=""),o.type=is(o.type);let h=o;o=o.parent,o||r(a),delete h.parent,o.state.allowParams=!1,o.state.allowName=!0,o.state.allowArray=!0;break;case",":delete o.state,o.name==="indexed"&&(e||r(a),o.indexed=!0,o.name=""),$o(o.type,o.name)&&(o.name=""),o.type=is(o.type);let u=i(o.parent);o.parent.components.push(u),delete o.parent,o=u;break;case" ":o.state.allowType&&o.type!==""&&(o.type=is(o.type),delete o.state.allowType,o.state.allowName=!0,o.state.allowParams=!0),o.state.allowName&&o.name!==""&&(o.name==="indexed"?(e||r(a),o.indexed&&r(a),o.indexed=!0,o.name=""):$o(o.type,o.name)?o.name="":o.state.allowName=!1);break;case"[":o.state.allowArray||r(a),o.type+=l,o.state.allowArray=!1,o.state.allowName=!1,o.state.readArray=!0;break;case"]":o.state.readArray||r(a),o.type+=l,o.state.readArray=!1,o.state.allowArray=!0,o.state.allowName=!0;break;default:o.state.allowType?(o.type+=l,o.state.allowParams=!0,o.state.allowArray=!0):o.state.allowName?(o.name+=l,delete o.state.allowArray):o.state.readArray?o.type+=l:r(a)}}return o.parent&&Ke.throwArgumentError("unexpected eof","param",n),delete s.state,o.name==="indexed"?(e||r(t.length-7),o.indexed&&r(t.length-7),o.indexed=!0,o.name=""):$o(o.type,o.name)&&(o.name=""),s.type=is(s.type),s}function ya(n,e){for(let t in e)ee(n,t,e[t])}const gt=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),A2=new RegExp(/^(.*)\[([0-9]*)\]$/);class $t{constructor(e,t){e!==zi&&Ke.throwError("use fromString",z.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),ya(this,t);let r=this.type.match(A2);r?ya(this,{arrayLength:parseInt(r[2]||"-1"),arrayChildren:$t.fromObject({type:r[1],components:this.components}),baseType:"array"}):ya(this,{arrayLength:null,arrayChildren:null,baseType:this.components!=null?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=gt.sighash),gt[e]||Ke.throwArgumentError("invalid format type","format",e),e===gt.json){let r={type:this.baseType==="tuple"?"tuple":this.type,name:this.name||void 0};return typeof this.indexed=="boolean"&&(r.indexed=this.indexed),this.components&&(r.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(r)}let t="";return this.baseType==="array"?(t+=this.arrayChildren.format(e),t+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):this.baseType==="tuple"?(e!==gt.sighash&&(t+=this.type),t+="("+this.components.map(r=>r.format(e)).join(e===gt.full?", ":",")+")"):t+=this.type,e!==gt.sighash&&(this.indexed===!0&&(t+=" indexed"),e===gt.full&&this.name&&(t+=" "+this.name)),t}static from(e,t){return typeof e=="string"?$t.fromString(e,t):$t.fromObject(e)}static fromObject(e){return $t.isParamType(e)?e:new $t(zi,{name:e.name||null,type:is(e.type),indexed:e.indexed==null?null:!!e.indexed,components:e.components?e.components.map($t.fromObject):null})}static fromString(e,t){function r(i){return $t.fromObject({name:i.name,type:i.type,indexed:i.indexed,components:i.components})}return r(b2(e,!!t))}static isParamType(e){return!!(e!=null&&e._isParamType)}}function wo(n,e){return x2(n).map(t=>$t.fromString(t,e))}class Hn{constructor(e,t){e!==zi&&Ke.throwError("use a static from method",z.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),ya(this,t),this._isFragment=!0,Object.freeze(this)}static from(e){return Hn.isFragment(e)?e:typeof e=="string"?Hn.fromString(e):Hn.fromObject(e)}static fromObject(e){if(Hn.isFragment(e))return e;switch(e.type){case"function":return wn.fromObject(e);case"event":return Gn.fromObject(e);case"constructor":return vn.fromObject(e);case"error":return ni.fromObject(e);case"fallback":case"receive":return null}return Ke.throwArgumentError("invalid fragment object","value",e)}static fromString(e){return e=e.replace(/\s/g," "),e=e.replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," "),e=e.trim(),e.split(" ")[0]==="event"?Gn.fromString(e.substring(5).trim()):e.split(" ")[0]==="function"?wn.fromString(e.substring(8).trim()):e.split("(")[0].trim()==="constructor"?vn.fromString(e.trim()):e.split(" ")[0]==="error"?ni.fromString(e.substring(5).trim()):Ke.throwArgumentError("unsupported fragment","value",e)}static isFragment(e){return!!(e&&e._isFragment)}}class Gn extends Hn{format(e){if(e||(e=gt.sighash),gt[e]||Ke.throwArgumentError("invalid format type","format",e),e===gt.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});let t="";return e!==gt.sighash&&(t+="event "),t+=this.name+"("+this.inputs.map(r=>r.format(e)).join(e===gt.full?", ":",")+") ",e!==gt.sighash&&this.anonymous&&(t+="anonymous "),t.trim()}static from(e){return typeof e=="string"?Gn.fromString(e):Gn.fromObject(e)}static fromObject(e){if(Gn.isEventFragment(e))return e;e.type!=="event"&&Ke.throwArgumentError("invalid event object","value",e);const t={name:bo(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map($t.fromObject):[],type:"event"};return new Gn(zi,t)}static fromString(e){let t=e.match(Ao);t||Ke.throwArgumentError("invalid event string","value",e);let r=!1;return t[3].split(" ").forEach(i=>{switch(i.trim()){case"anonymous":r=!0;break;case"":break;default:Ke.warn("unknown modifier: "+i)}}),Gn.fromObject({name:t[1].trim(),anonymous:r,inputs:wo(t[2],!0),type:"event"})}static isEventFragment(e){return e&&e._isFragment&&e.type==="event"}}function o1(n,e){e.gas=null;let t=n.split("@");return t.length!==1?(t.length>2&&Ke.throwArgumentError("invalid human-readable ABI signature","value",n),t[1].match(/^[0-9]+$/)||Ke.throwArgumentError("invalid human-readable ABI signature gas","value",n),e.gas=J.from(t[1]),t[0]):n}function a1(n,e){e.constant=!1,e.payable=!1,e.stateMutability="nonpayable",n.split(" ").forEach(t=>{switch(t.trim()){case"constant":e.constant=!0;break;case"payable":e.payable=!0,e.stateMutability="payable";break;case"nonpayable":e.payable=!1,e.stateMutability="nonpayable";break;case"pure":e.constant=!0,e.stateMutability="pure";break;case"view":e.constant=!0,e.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+t)}})}function l1(n){let e={constant:!1,payable:!0,stateMutability:"payable"};return n.stateMutability!=null?(e.stateMutability=n.stateMutability,e.constant=e.stateMutability==="view"||e.stateMutability==="pure",n.constant!=null&&!!n.constant!==e.constant&&Ke.throwArgumentError("cannot have constant function with mutability "+e.stateMutability,"value",n),e.payable=e.stateMutability==="payable",n.payable!=null&&!!n.payable!==e.payable&&Ke.throwArgumentError("cannot have payable function with mutability "+e.stateMutability,"value",n)):n.payable!=null?(e.payable=!!n.payable,n.constant==null&&!e.payable&&n.type!=="constructor"&&Ke.throwArgumentError("unable to determine stateMutability","value",n),e.constant=!!n.constant,e.constant?e.stateMutability="view":e.stateMutability=e.payable?"payable":"nonpayable",e.payable&&e.constant&&Ke.throwArgumentError("cannot have constant payable function","value",n)):n.constant!=null?(e.constant=!!n.constant,e.payable=!e.constant,e.stateMutability=e.constant?"view":"payable"):n.type!=="constructor"&&Ke.throwArgumentError("unable to determine stateMutability","value",n),e}class vn extends Hn{format(e){if(e||(e=gt.sighash),gt[e]||Ke.throwArgumentError("invalid format type","format",e),e===gt.json)return JSON.stringify({type:"constructor",stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});e===gt.sighash&&Ke.throwError("cannot format a constructor for sighash",z.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let t="constructor("+this.inputs.map(r=>r.format(e)).join(e===gt.full?", ":",")+") ";return this.stateMutability&&this.stateMutability!=="nonpayable"&&(t+=this.stateMutability+" "),t.trim()}static from(e){return typeof e=="string"?vn.fromString(e):vn.fromObject(e)}static fromObject(e){if(vn.isConstructorFragment(e))return e;e.type!=="constructor"&&Ke.throwArgumentError("invalid constructor object","value",e);let t=l1(e);t.constant&&Ke.throwArgumentError("constructor cannot be constant","value",e);const r={name:null,type:e.type,inputs:e.inputs?e.inputs.map($t.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?J.from(e.gas):null};return new vn(zi,r)}static fromString(e){let t={type:"constructor"};e=o1(e,t);let r=e.match(Ao);return(!r||r[1].trim()!=="constructor")&&Ke.throwArgumentError("invalid constructor string","value",e),t.inputs=wo(r[2].trim(),!1),a1(r[3].trim(),t),vn.fromObject(t)}static isConstructorFragment(e){return e&&e._isFragment&&e.type==="constructor"}}class wn extends vn{format(e){if(e||(e=gt.sighash),gt[e]||Ke.throwArgumentError("invalid format type","format",e),e===gt.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(r=>JSON.parse(r.format(e))),outputs:this.outputs.map(r=>JSON.parse(r.format(e)))});let t="";return e!==gt.sighash&&(t+="function "),t+=this.name+"("+this.inputs.map(r=>r.format(e)).join(e===gt.full?", ":",")+") ",e!==gt.sighash&&(this.stateMutability?this.stateMutability!=="nonpayable"&&(t+=this.stateMutability+" "):this.constant&&(t+="view "),this.outputs&&this.outputs.length&&(t+="returns ("+this.outputs.map(r=>r.format(e)).join(", ")+") "),this.gas!=null&&(t+="@"+this.gas.toString()+" ")),t.trim()}static from(e){return typeof e=="string"?wn.fromString(e):wn.fromObject(e)}static fromObject(e){if(wn.isFunctionFragment(e))return e;e.type!=="function"&&Ke.throwArgumentError("invalid function object","value",e);let t=l1(e);const r={type:e.type,name:bo(e.name),constant:t.constant,inputs:e.inputs?e.inputs.map($t.fromObject):[],outputs:e.outputs?e.outputs.map($t.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?J.from(e.gas):null};return new wn(zi,r)}static fromString(e){let t={type:"function"};e=o1(e,t);let r=e.split(" returns ");r.length>2&&Ke.throwArgumentError("invalid function string","value",e);let i=r[0].match(Ao);if(i||Ke.throwArgumentError("invalid function signature","value",e),t.name=i[1].trim(),t.name&&bo(t.name),t.inputs=wo(i[2],!1),a1(i[3].trim(),t),r.length>1){let s=r[1].match(Ao);(s[1].trim()!=""||s[3].trim()!="")&&Ke.throwArgumentError("unexpected tokens","value",e),t.outputs=wo(s[2],!1)}else t.outputs=[];return wn.fromObject(t)}static isFunctionFragment(e){return e&&e._isFragment&&e.type==="function"}}function Nf(n){const e=n.format();return(e==="Error(string)"||e==="Panic(uint256)")&&Ke.throwArgumentError(`cannot specify user defined ${e} error`,"fragment",n),n}class ni extends Hn{format(e){if(e||(e=gt.sighash),gt[e]||Ke.throwArgumentError("invalid format type","format",e),e===gt.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});let t="";return e!==gt.sighash&&(t+="error "),t+=this.name+"("+this.inputs.map(r=>r.format(e)).join(e===gt.full?", ":",")+") ",t.trim()}static from(e){return typeof e=="string"?ni.fromString(e):ni.fromObject(e)}static fromObject(e){if(ni.isErrorFragment(e))return e;e.type!=="error"&&Ke.throwArgumentError("invalid error object","value",e);const t={type:e.type,name:bo(e.name),inputs:e.inputs?e.inputs.map($t.fromObject):[]};return Nf(new ni(zi,t))}static fromString(e){let t={type:"error"},r=e.match(Ao);return r||Ke.throwArgumentError("invalid error signature","value",e),t.name=r[1].trim(),t.name&&bo(t.name),t.inputs=wo(r[2],!1),Nf(ni.fromObject(t))}static isErrorFragment(e){return e&&e._isFragment&&e.type==="error"}}function is(n){return n.match(/^uint($|[^1-9])/)?n="uint256"+n.substring(4):n.match(/^int($|[^1-9])/)&&(n="int256"+n.substring(3)),n}const E2=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function bo(n){return(!n||!n.match(E2))&&Ke.throwArgumentError(`invalid identifier "${n}"`,"value",n),n}const Ao=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");function x2(n){n=n.trim();let e=[],t="",r=0;for(let i=0;i<n.length;i++){let s=n[i];s===","&&r===0?(e.push(t),t=""):(t+=s,s==="("?r++:s===")"&&(r--,r===-1&&Ke.throwArgumentError("unbalanced parenthesis","value",n)))}return t&&e.push(t),e}const mh=new z(Mo);function _2(n){const e=[],t=function(r,i){if(Array.isArray(i))for(let s in i){const o=r.slice();o.push(s);try{t(o,i[s])}catch(a){e.push({path:o,error:a})}}};return t([],n),e}class $n{constructor(e,t,r,i){this.name=e,this.type=t,this.localName=r,this.dynamic=i}_throwError(e,t){mh.throwArgumentError(e,this.localName,t)}}class Mc{constructor(e){ee(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return Ar(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData(mr(e._data))}writeBytes(e){let t=fe(e);const r=t.length%this.wordSize;return r&&(t=mr([t,this._padding.slice(r)])),this._writeData(t)}_getValue(e){let t=fe(J.from(e));return t.length>this.wordSize&&mh.throwError("value out-of-bounds",z.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:t.length}),t.length%this.wordSize&&(t=mr([this._padding.slice(t.length%this.wordSize),t])),t}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,t=>{this._data[e]=this._getValue(t)}}}class Fa{constructor(e,t,r,i){ee(this,"_data",fe(e)),ee(this,"wordSize",t||32),ee(this,"_coerceFunc",r),ee(this,"allowLoose",i),this._offset=0}get data(){return ce(this._data)}get consumed(){return this._offset}static coerce(e,t){let r=e.match("^u?int([0-9]+)$");return r&&parseInt(r[1])<=48&&(t=t.toNumber()),t}coerce(e,t){return this._coerceFunc?this._coerceFunc(e,t):Fa.coerce(e,t)}_peekBytes(e,t,r){let i=Math.ceil(t/this.wordSize)*this.wordSize;return this._offset+i>this._data.length&&(this.allowLoose&&r&&this._offset+t<=this._data.length?i=t:mh.throwError("data out-of-bounds",z.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+i})),this._data.slice(this._offset,this._offset+i)}subReader(e){return new Fa(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,t){let r=this._peekBytes(0,e,!!t);return this._offset+=r.length,r.slice(0,e)}readValue(){return J.from(this.readBytes(this.wordSize))}}var c1={exports:{}};/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */(function(n){(function(){var e="input is invalid type",t="finalize already called",r=typeof window=="object",i=r?window:{};i.JS_SHA3_NO_WINDOW&&(r=!1);var s=!r&&typeof self=="object",o=!i.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;o?i={}:s&&(i=self);var a=!i.JS_SHA3_NO_COMMON_JS&&!0&&n.exports,l=!i.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",h="0123456789abcdef".split(""),u=[31,7936,2031616,520093696],g=[4,1024,262144,67108864],x=[1,256,65536,16777216],A=[6,1536,393216,100663296],E=[0,8,16,24],I=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],T=[224,256,384,512],R=[128,256],O=["hex","buffer","arrayBuffer","array","digest"],B={128:168,256:136};(i.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(k){return Object.prototype.toString.call(k)==="[object Array]"}),l&&(i.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(k){return typeof k=="object"&&k.buffer&&k.buffer.constructor===ArrayBuffer});for(var U=function(k,D,G){return function(H){return new m(k,D,k).update(H)[G]()}},q=function(k,D,G){return function(H,V){return new m(k,D,V).update(H)[G]()}},W=function(k,D,G){return function(H,V,re,$){return c["cshake"+k].update(H,V,re,$)[G]()}},Z=function(k,D,G){return function(H,V,re,$){return c["kmac"+k].update(H,V,re,$)[G]()}},K=function(k,D,G,H){for(var V=0;V<O.length;++V){var re=O[V];k[re]=D(G,H,re)}return k},se=function(k,D){var G=U(k,D,"hex");return G.create=function(){return new m(k,D,k)},G.update=function(H){return G.create().update(H)},K(G,U,k,D)},y=function(k,D){var G=q(k,D,"hex");return G.create=function(H){return new m(k,D,H)},G.update=function(H,V){return G.create(V).update(H)},K(G,q,k,D)},S=function(k,D){var G=B[k],H=W(k,D,"hex");return H.create=function(V,re,$){return!re&&!$?c["shake"+k].create(V):new m(k,D,V).bytepad([re,$],G)},H.update=function(V,re,$,ne){return H.create(re,$,ne).update(V)},K(H,W,k,D)},C=function(k,D){var G=B[k],H=Z(k,D,"hex");return H.create=function(V,re,$){return new M(k,D,re).bytepad(["KMAC",$],G).bytepad([V],G)},H.update=function(V,re,$,ne){return H.create(V,$,ne).update(re)},K(H,Z,k,D)},p=[{name:"keccak",padding:x,bits:T,createMethod:se},{name:"sha3",padding:A,bits:T,createMethod:se},{name:"shake",padding:u,bits:R,createMethod:y},{name:"cshake",padding:g,bits:R,createMethod:S},{name:"kmac",padding:g,bits:R,createMethod:C}],c={},d=[],f=0;f<p.length;++f)for(var N=p[f],v=N.bits,w=0;w<v.length;++w){var P=N.name+"_"+v[w];if(d.push(P),c[P]=N.createMethod(v[w],N.padding),N.name!=="sha3"){var _=N.name+v[w];d.push(_),c[_]=c[P]}}function m(k,D,G){this.blocks=[],this.s=[],this.padding=D,this.outputBits=G,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(k<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=G>>5,this.extraBytes=(G&31)>>3;for(var H=0;H<50;++H)this.s[H]=0}m.prototype.update=function(k){if(this.finalized)throw new Error(t);var D,G=typeof k;if(G!=="string"){if(G==="object"){if(k===null)throw new Error(e);if(l&&k.constructor===ArrayBuffer)k=new Uint8Array(k);else if(!Array.isArray(k)&&(!l||!ArrayBuffer.isView(k)))throw new Error(e)}else throw new Error(e);D=!0}for(var H=this.blocks,V=this.byteCount,re=k.length,$=this.blockCount,ne=0,de=this.s,Q,he;ne<re;){if(this.reset)for(this.reset=!1,H[0]=this.block,Q=1;Q<$+1;++Q)H[Q]=0;if(D)for(Q=this.start;ne<re&&Q<V;++ne)H[Q>>2]|=k[ne]<<E[Q++&3];else for(Q=this.start;ne<re&&Q<V;++ne)he=k.charCodeAt(ne),he<128?H[Q>>2]|=he<<E[Q++&3]:he<2048?(H[Q>>2]|=(192|he>>6)<<E[Q++&3],H[Q>>2]|=(128|he&63)<<E[Q++&3]):he<55296||he>=57344?(H[Q>>2]|=(224|he>>12)<<E[Q++&3],H[Q>>2]|=(128|he>>6&63)<<E[Q++&3],H[Q>>2]|=(128|he&63)<<E[Q++&3]):(he=65536+((he&1023)<<10|k.charCodeAt(++ne)&1023),H[Q>>2]|=(240|he>>18)<<E[Q++&3],H[Q>>2]|=(128|he>>12&63)<<E[Q++&3],H[Q>>2]|=(128|he>>6&63)<<E[Q++&3],H[Q>>2]|=(128|he&63)<<E[Q++&3]);if(this.lastByteIndex=Q,Q>=V){for(this.start=Q-V,this.block=H[$],Q=0;Q<$;++Q)de[Q]^=H[Q];L(de),this.reset=!0}else this.start=Q}return this},m.prototype.encode=function(k,D){var G=k&255,H=1,V=[G];for(k=k>>8,G=k&255;G>0;)V.unshift(G),k=k>>8,G=k&255,++H;return D?V.push(H):V.unshift(H),this.update(V),V.length},m.prototype.encodeString=function(k){var D,G=typeof k;if(G!=="string"){if(G==="object"){if(k===null)throw new Error(e);if(l&&k.constructor===ArrayBuffer)k=new Uint8Array(k);else if(!Array.isArray(k)&&(!l||!ArrayBuffer.isView(k)))throw new Error(e)}else throw new Error(e);D=!0}var H=0,V=k.length;if(D)H=V;else for(var re=0;re<k.length;++re){var $=k.charCodeAt(re);$<128?H+=1:$<2048?H+=2:$<55296||$>=57344?H+=3:($=65536+(($&1023)<<10|k.charCodeAt(++re)&1023),H+=4)}return H+=this.encode(H*8),this.update(k),H},m.prototype.bytepad=function(k,D){for(var G=this.encode(D),H=0;H<k.length;++H)G+=this.encodeString(k[H]);var V=D-G%D,re=[];return re.length=V,this.update(re),this},m.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var k=this.blocks,D=this.lastByteIndex,G=this.blockCount,H=this.s;if(k[D>>2]|=this.padding[D&3],this.lastByteIndex===this.byteCount)for(k[0]=k[G],D=1;D<G+1;++D)k[D]=0;for(k[G-1]|=2147483648,D=0;D<G;++D)H[D]^=k[D];L(H)}},m.prototype.toString=m.prototype.hex=function(){this.finalize();for(var k=this.blockCount,D=this.s,G=this.outputBlocks,H=this.extraBytes,V=0,re=0,$="",ne;re<G;){for(V=0;V<k&&re<G;++V,++re)ne=D[V],$+=h[ne>>4&15]+h[ne&15]+h[ne>>12&15]+h[ne>>8&15]+h[ne>>20&15]+h[ne>>16&15]+h[ne>>28&15]+h[ne>>24&15];re%k===0&&(L(D),V=0)}return H&&(ne=D[V],$+=h[ne>>4&15]+h[ne&15],H>1&&($+=h[ne>>12&15]+h[ne>>8&15]),H>2&&($+=h[ne>>20&15]+h[ne>>16&15])),$},m.prototype.arrayBuffer=function(){this.finalize();var k=this.blockCount,D=this.s,G=this.outputBlocks,H=this.extraBytes,V=0,re=0,$=this.outputBits>>3,ne;H?ne=new ArrayBuffer(G+1<<2):ne=new ArrayBuffer($);for(var de=new Uint32Array(ne);re<G;){for(V=0;V<k&&re<G;++V,++re)de[re]=D[V];re%k===0&&L(D)}return H&&(de[V]=D[V],ne=ne.slice(0,$)),ne},m.prototype.buffer=m.prototype.arrayBuffer,m.prototype.digest=m.prototype.array=function(){this.finalize();for(var k=this.blockCount,D=this.s,G=this.outputBlocks,H=this.extraBytes,V=0,re=0,$=[],ne,de;re<G;){for(V=0;V<k&&re<G;++V,++re)ne=re<<2,de=D[V],$[ne]=de&255,$[ne+1]=de>>8&255,$[ne+2]=de>>16&255,$[ne+3]=de>>24&255;re%k===0&&L(D)}return H&&(ne=re<<2,de=D[V],$[ne]=de&255,H>1&&($[ne+1]=de>>8&255),H>2&&($[ne+2]=de>>16&255)),$};function M(k,D,G){m.call(this,k,D,G)}M.prototype=new m,M.prototype.finalize=function(){return this.encode(this.outputBits,!0),m.prototype.finalize.call(this)};var L=function(k){var D,G,H,V,re,$,ne,de,Q,he,Re,pe,De,Le,me,Ue,ze,ue,Be,qe,ge,Ve,Je,ye,$e,Qe,ve,Ye,Xe,we,Ze,et,be,tt,rt,Ae,nt,it,Ee,st,ot,xe,at,lt,_e,ct,ht,ke,ut,ft,Se,dt,pt,Ne,vt,Vr,wt,bt,Pr,Mr,Tr,Rr,Br;for(H=0;H<48;H+=2)V=k[0]^k[10]^k[20]^k[30]^k[40],re=k[1]^k[11]^k[21]^k[31]^k[41],$=k[2]^k[12]^k[22]^k[32]^k[42],ne=k[3]^k[13]^k[23]^k[33]^k[43],de=k[4]^k[14]^k[24]^k[34]^k[44],Q=k[5]^k[15]^k[25]^k[35]^k[45],he=k[6]^k[16]^k[26]^k[36]^k[46],Re=k[7]^k[17]^k[27]^k[37]^k[47],pe=k[8]^k[18]^k[28]^k[38]^k[48],De=k[9]^k[19]^k[29]^k[39]^k[49],D=pe^($<<1|ne>>>31),G=De^(ne<<1|$>>>31),k[0]^=D,k[1]^=G,k[10]^=D,k[11]^=G,k[20]^=D,k[21]^=G,k[30]^=D,k[31]^=G,k[40]^=D,k[41]^=G,D=V^(de<<1|Q>>>31),G=re^(Q<<1|de>>>31),k[2]^=D,k[3]^=G,k[12]^=D,k[13]^=G,k[22]^=D,k[23]^=G,k[32]^=D,k[33]^=G,k[42]^=D,k[43]^=G,D=$^(he<<1|Re>>>31),G=ne^(Re<<1|he>>>31),k[4]^=D,k[5]^=G,k[14]^=D,k[15]^=G,k[24]^=D,k[25]^=G,k[34]^=D,k[35]^=G,k[44]^=D,k[45]^=G,D=de^(pe<<1|De>>>31),G=Q^(De<<1|pe>>>31),k[6]^=D,k[7]^=G,k[16]^=D,k[17]^=G,k[26]^=D,k[27]^=G,k[36]^=D,k[37]^=G,k[46]^=D,k[47]^=G,D=he^(V<<1|re>>>31),G=Re^(re<<1|V>>>31),k[8]^=D,k[9]^=G,k[18]^=D,k[19]^=G,k[28]^=D,k[29]^=G,k[38]^=D,k[39]^=G,k[48]^=D,k[49]^=G,Le=k[0],me=k[1],ct=k[11]<<4|k[10]>>>28,ht=k[10]<<4|k[11]>>>28,Ye=k[20]<<3|k[21]>>>29,Xe=k[21]<<3|k[20]>>>29,Mr=k[31]<<9|k[30]>>>23,Tr=k[30]<<9|k[31]>>>23,xe=k[40]<<18|k[41]>>>14,at=k[41]<<18|k[40]>>>14,tt=k[2]<<1|k[3]>>>31,rt=k[3]<<1|k[2]>>>31,Ue=k[13]<<12|k[12]>>>20,ze=k[12]<<12|k[13]>>>20,ke=k[22]<<10|k[23]>>>22,ut=k[23]<<10|k[22]>>>22,we=k[33]<<13|k[32]>>>19,Ze=k[32]<<13|k[33]>>>19,Rr=k[42]<<2|k[43]>>>30,Br=k[43]<<2|k[42]>>>30,Ne=k[5]<<30|k[4]>>>2,vt=k[4]<<30|k[5]>>>2,Ae=k[14]<<6|k[15]>>>26,nt=k[15]<<6|k[14]>>>26,ue=k[25]<<11|k[24]>>>21,Be=k[24]<<11|k[25]>>>21,ft=k[34]<<15|k[35]>>>17,Se=k[35]<<15|k[34]>>>17,et=k[45]<<29|k[44]>>>3,be=k[44]<<29|k[45]>>>3,ye=k[6]<<28|k[7]>>>4,$e=k[7]<<28|k[6]>>>4,Vr=k[17]<<23|k[16]>>>9,wt=k[16]<<23|k[17]>>>9,it=k[26]<<25|k[27]>>>7,Ee=k[27]<<25|k[26]>>>7,qe=k[36]<<21|k[37]>>>11,ge=k[37]<<21|k[36]>>>11,dt=k[47]<<24|k[46]>>>8,pt=k[46]<<24|k[47]>>>8,lt=k[8]<<27|k[9]>>>5,_e=k[9]<<27|k[8]>>>5,Qe=k[18]<<20|k[19]>>>12,ve=k[19]<<20|k[18]>>>12,bt=k[29]<<7|k[28]>>>25,Pr=k[28]<<7|k[29]>>>25,st=k[38]<<8|k[39]>>>24,ot=k[39]<<8|k[38]>>>24,Ve=k[48]<<14|k[49]>>>18,Je=k[49]<<14|k[48]>>>18,k[0]=Le^~Ue&ue,k[1]=me^~ze&Be,k[10]=ye^~Qe&Ye,k[11]=$e^~ve&Xe,k[20]=tt^~Ae&it,k[21]=rt^~nt&Ee,k[30]=lt^~ct&ke,k[31]=_e^~ht&ut,k[40]=Ne^~Vr&bt,k[41]=vt^~wt&Pr,k[2]=Ue^~ue&qe,k[3]=ze^~Be&ge,k[12]=Qe^~Ye&we,k[13]=ve^~Xe&Ze,k[22]=Ae^~it&st,k[23]=nt^~Ee&ot,k[32]=ct^~ke&ft,k[33]=ht^~ut&Se,k[42]=Vr^~bt&Mr,k[43]=wt^~Pr&Tr,k[4]=ue^~qe&Ve,k[5]=Be^~ge&Je,k[14]=Ye^~we&et,k[15]=Xe^~Ze&be,k[24]=it^~st&xe,k[25]=Ee^~ot&at,k[34]=ke^~ft&dt,k[35]=ut^~Se&pt,k[44]=bt^~Mr&Rr,k[45]=Pr^~Tr&Br,k[6]=qe^~Ve&Le,k[7]=ge^~Je&me,k[16]=we^~et&ye,k[17]=Ze^~be&$e,k[26]=st^~xe&tt,k[27]=ot^~at&rt,k[36]=ft^~dt&lt,k[37]=Se^~pt&_e,k[46]=Mr^~Rr&Ne,k[47]=Tr^~Br&vt,k[8]=Ve^~Le&Ue,k[9]=Je^~me&ze,k[18]=et^~ye&Qe,k[19]=be^~$e&ve,k[28]=xe^~tt&Ae,k[29]=at^~rt&nt,k[38]=dt^~lt&ct,k[39]=pt^~_e&ht,k[48]=Rr^~Ne&Vr,k[49]=Br^~vt&wt,k[0]^=I[H],k[1]^=I[H+1]};if(a)n.exports=c;else for(f=0;f<d.length;++f)i[d[f]]=c[d[f]]})()})(c1);var k2=c1.exports;const S2=Qa(k2);function Ut(n){return"0x"+S2.keccak_256(fe(n))}const N2="rlp/5.8.0",pn=new z(N2);function Cf(n){const e=[];for(;n;)e.unshift(n&255),n>>=8;return e}function If(n,e,t){let r=0;for(let i=0;i<t;i++)r=r*256+n[e+i];return r}function h1(n){if(Array.isArray(n)){let r=[];if(n.forEach(function(s){r=r.concat(h1(s))}),r.length<=55)return r.unshift(192+r.length),r;const i=Cf(r.length);return i.unshift(247+i.length),i.concat(r)}fh(n)||pn.throwArgumentError("RLP object must be BytesLike","object",n);const e=Array.prototype.slice.call(fe(n));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const t=Cf(e.length);return t.unshift(183+t.length),t.concat(e)}function Xa(n){return ce(h1(n))}function Pf(n,e,t,r){const i=[];for(;t<e+1+r;){const s=u1(n,t);i.push(s.result),t+=s.consumed,t>e+1+r&&pn.throwError("child data too short",z.errors.BUFFER_OVERRUN,{})}return{consumed:1+r,result:i}}function u1(n,e){if(n.length===0&&pn.throwError("data too short",z.errors.BUFFER_OVERRUN,{}),n[e]>=248){const t=n[e]-247;e+1+t>n.length&&pn.throwError("data short segment too short",z.errors.BUFFER_OVERRUN,{});const r=If(n,e+1,t);return e+1+t+r>n.length&&pn.throwError("data long segment too short",z.errors.BUFFER_OVERRUN,{}),Pf(n,e,e+1+t,t+r)}else if(n[e]>=192){const t=n[e]-192;return e+1+t>n.length&&pn.throwError("data array too short",z.errors.BUFFER_OVERRUN,{}),Pf(n,e,e+1,t)}else if(n[e]>=184){const t=n[e]-183;e+1+t>n.length&&pn.throwError("data array too short",z.errors.BUFFER_OVERRUN,{});const r=If(n,e+1,t);e+1+t+r>n.length&&pn.throwError("data array too short",z.errors.BUFFER_OVERRUN,{});const i=ce(n.slice(e+1+t,e+1+t+r));return{consumed:1+t+r,result:i}}else if(n[e]>=128){const t=n[e]-128;e+1+t>n.length&&pn.throwError("data too short",z.errors.BUFFER_OVERRUN,{});const r=ce(n.slice(e+1,e+1+t));return{consumed:1+t,result:r}}return{consumed:1,result:ce(n[e])}}function gh(n){const e=fe(n),t=u1(e,0);return t.consumed!==e.length&&pn.throwArgumentError("invalid rlp data","data",n),t.result}const C2="address/5.8.0",cs=new z(C2);function Mf(n){yt(n,20)||cs.throwArgumentError("invalid address","address",n),n=n.toLowerCase();const e=n.substring(2).split(""),t=new Uint8Array(40);for(let i=0;i<40;i++)t[i]=e[i].charCodeAt(0);const r=fe(Ut(t));for(let i=0;i<40;i+=2)r[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(r[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const I2=9007199254740991;function P2(n){return Math.log10?Math.log10(n):Math.log(n)/Math.LN10}const yh={};for(let n=0;n<10;n++)yh[String(n)]=String(n);for(let n=0;n<26;n++)yh[String.fromCharCode(65+n)]=String(10+n);const Tf=Math.floor(P2(I2));function M2(n){n=n.toUpperCase(),n=n.substring(4)+n.substring(0,2)+"00";let e=n.split("").map(r=>yh[r]).join("");for(;e.length>=Tf;){let r=e.substring(0,Tf);e=parseInt(r,10)%97+e.substring(r.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}function rr(n){let e=null;if(typeof n!="string"&&cs.throwArgumentError("invalid address","address",n),n.match(/^(0x)?[0-9a-fA-F]{40}$/))n.substring(0,2)!=="0x"&&(n="0x"+n),e=Mf(n),n.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==n&&cs.throwArgumentError("bad address checksum","address",n);else if(n.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(n.substring(2,4)!==M2(n)&&cs.throwArgumentError("bad icap checksum","address",n),e=f2(n.substring(4));e.length<40;)e="0"+e;e=Mf("0x"+e)}else cs.throwArgumentError("invalid address","address",n);return e}function f1(n){let e=null;try{e=rr(n.from)}catch{cs.throwArgumentError("missing from address","transaction",n)}const t=As(fe(J.from(n.nonce).toHexString()));return rr(cr(Ut(Xa([e,t])),12))}class T2 extends $n{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){try{t=rr(t)}catch(r){this._throwError(r.message,t)}return e.writeValue(t)}decode(e){return rr(Ct(e.readValue().toHexString(),20))}}class R2 extends $n{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}const hs=new z(Mo);function d1(n,e,t){let r=null;if(Array.isArray(t))r=t;else if(t&&typeof t=="object"){let l={};r=e.map(h=>{const u=h.localName;return u||hs.throwError("cannot encode object for signature with missing names",z.errors.INVALID_ARGUMENT,{argument:"values",coder:h,value:t}),l[u]&&hs.throwError("cannot encode object for signature with duplicate names",z.errors.INVALID_ARGUMENT,{argument:"values",coder:h,value:t}),l[u]=!0,t[u]})}else hs.throwArgumentError("invalid tuple value","tuple",t);e.length!==r.length&&hs.throwArgumentError("types/value length mismatch","tuple",t);let i=new Mc(n.wordSize),s=new Mc(n.wordSize),o=[];e.forEach((l,h)=>{let u=r[h];if(l.dynamic){let g=s.length;l.encode(s,u);let x=i.writeUpdatableValue();o.push(A=>{x(A+g)})}else l.encode(i,u)}),o.forEach(l=>{l(i.length)});let a=n.appendWriter(i);return a+=n.appendWriter(s),a}function p1(n,e){let t=[],r=n.subReader(0);e.forEach(s=>{let o=null;if(s.dynamic){let a=n.readValue(),l=r.subReader(a.toNumber());try{o=s.decode(l)}catch(h){if(h.code===z.errors.BUFFER_OVERRUN)throw h;o=h,o.baseType=s.name,o.name=s.localName,o.type=s.type}}else try{o=s.decode(n)}catch(a){if(a.code===z.errors.BUFFER_OVERRUN)throw a;o=a,o.baseType=s.name,o.name=s.localName,o.type=s.type}o!=null&&t.push(o)});const i=e.reduce((s,o)=>{const a=o.localName;return a&&(s[a]||(s[a]=0),s[a]++),s},{});e.forEach((s,o)=>{let a=s.localName;if(!a||i[a]!==1||(a==="length"&&(a="_length"),t[a]!=null))return;const l=t[o];l instanceof Error?Object.defineProperty(t,a,{enumerable:!0,get:()=>{throw l}}):t[a]=l});for(let s=0;s<t.length;s++){const o=t[s];o instanceof Error&&Object.defineProperty(t,s,{enumerable:!0,get:()=>{throw o}})}return Object.freeze(t)}class B2 extends $n{constructor(e,t,r){const i=e.type+"["+(t>=0?t:"")+"]",s=t===-1||e.dynamic;super("array",i,r,s),this.coder=e,this.length=t}defaultValue(){const e=this.coder.defaultValue(),t=[];for(let r=0;r<this.length;r++)t.push(e);return t}encode(e,t){Array.isArray(t)||this._throwError("expected array value",t);let r=this.length;r===-1&&(r=t.length,e.writeValue(t.length)),hs.checkArgumentCount(t.length,r,"coder array"+(this.localName?" "+this.localName:""));let i=[];for(let s=0;s<t.length;s++)i.push(this.coder);return d1(e,i,t)}decode(e){let t=this.length;t===-1&&(t=e.readValue().toNumber(),t*32>e._data.length&&hs.throwError("insufficient data length",z.errors.BUFFER_OVERRUN,{length:e._data.length,count:t}));let r=[];for(let i=0;i<t;i++)r.push(new R2(this.coder));return e.coerce(this.name,p1(e,r))}}class O2 extends $n{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){return e.writeValue(t?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class m1 extends $n{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=fe(t);let r=e.writeValue(t.length);return r+=e.writeBytes(t),r}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}}class F2 extends m1{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,ce(super.decode(e)))}}class D2 extends $n{constructor(e,t){let r="bytes"+String(e);super(r,r,t,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,t){let r=fe(t);return r.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(r)}decode(e){return e.coerce(this.name,ce(e.readBytes(this.size)))}}class L2 extends $n{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return t!=null&&this._throwError("not null",t),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}}const U2="0x0000000000000000000000000000000000000000",z2=J.from(-1),g1=J.from(0),q2=J.from(1),G2=J.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),H2="0x0000000000000000000000000000000000000000000000000000000000000000";class j2 extends $n{constructor(e,t,r){const i=(t?"int":"uint")+e*8;super(i,i,r,!1),this.size=e,this.signed=t}defaultValue(){return 0}encode(e,t){let r=J.from(t),i=G2.mask(e.wordSize*8);if(this.signed){let s=i.mask(this.size*8-1);(r.gt(s)||r.lt(s.add(q2).mul(z2)))&&this._throwError("value out-of-bounds",t)}else(r.lt(g1)||r.gt(i.mask(this.size*8)))&&this._throwError("value out-of-bounds",t);return r=r.toTwos(this.size*8).mask(this.size*8),this.signed&&(r=r.fromTwos(this.size*8).toTwos(8*e.wordSize)),e.writeValue(r)}decode(e){let t=e.readValue().mask(this.size*8);return this.signed&&(t=t.fromTwos(this.size*8)),e.coerce(this.name,t)}}const W2="strings/5.8.0",y1=new z(W2);var Eo;(function(n){n.current="",n.NFC="NFC",n.NFD="NFD",n.NFKC="NFKC",n.NFKD="NFKD"})(Eo||(Eo={}));var Sr;(function(n){n.UNEXPECTED_CONTINUE="unexpected continuation byte",n.BAD_PREFIX="bad codepoint prefix",n.OVERRUN="string overrun",n.MISSING_CONTINUE="missing continuation byte",n.OUT_OF_RANGE="out of UTF-8 range",n.UTF16_SURROGATE="UTF-16 surrogate",n.OVERLONG="overlong representation"})(Sr||(Sr={}));function K2(n,e,t,r,i){return y1.throwArgumentError(`invalid codepoint at offset ${e}; ${n}`,"bytes",t)}function v1(n,e,t,r,i){if(n===Sr.BAD_PREFIX||n===Sr.UNEXPECTED_CONTINUE){let s=0;for(let o=e+1;o<t.length&&t[o]>>6===2;o++)s++;return s}return n===Sr.OVERRUN?t.length-e-1:0}function V2(n,e,t,r,i){return n===Sr.OVERLONG?(r.push(i),0):(r.push(65533),v1(n,e,t))}const J2=Object.freeze({error:K2,ignore:v1,replace:V2});function w1(n,e){e==null&&(e=J2.error),n=fe(n);const t=[];let r=0;for(;r<n.length;){const i=n[r++];if(!(i>>7)){t.push(i);continue}let s=null,o=null;if((i&224)===192)s=1,o=127;else if((i&240)===224)s=2,o=2047;else if((i&248)===240)s=3,o=65535;else{(i&192)===128?r+=e(Sr.UNEXPECTED_CONTINUE,r-1,n,t):r+=e(Sr.BAD_PREFIX,r-1,n,t);continue}if(r-1+s>=n.length){r+=e(Sr.OVERRUN,r-1,n,t);continue}let a=i&(1<<8-s-1)-1;for(let l=0;l<s;l++){let h=n[r];if((h&192)!=128){r+=e(Sr.MISSING_CONTINUE,r,n,t),a=null;break}a=a<<6|h&63,r++}if(a!==null){if(a>1114111){r+=e(Sr.OUT_OF_RANGE,r-1-s,n,t,a);continue}if(a>=55296&&a<=57343){r+=e(Sr.UTF16_SURROGATE,r-1-s,n,t,a);continue}if(a<=o){r+=e(Sr.OVERLONG,r-1-s,n,t,a);continue}t.push(a)}}return t}function Hr(n,e=Eo.current){e!=Eo.current&&(y1.checkNormalize(),n=n.normalize(e));let t=[];for(let r=0;r<n.length;r++){const i=n.charCodeAt(r);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192),t.push(i&63|128);else if((i&64512)==55296){r++;const s=n.charCodeAt(r);if(r>=n.length||(s&64512)!==56320)throw new Error("invalid utf-8 string");const o=65536+((i&1023)<<10)+(s&1023);t.push(o>>18|240),t.push(o>>12&63|128),t.push(o>>6&63|128),t.push(o&63|128)}else t.push(i>>12|224),t.push(i>>6&63|128),t.push(i&63|128)}return fe(t)}function $2(n){return n.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function To(n,e){return $2(w1(n,e))}function Q2(n,e=Eo.current){return w1(Hr(n,e))}class Y2 extends m1{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,Hr(t))}decode(e){return To(super.decode(e))}}class Qo extends $n{constructor(e,t){let r=!1;const i=[];e.forEach(o=>{o.dynamic&&(r=!0),i.push(o.type)});const s="tuple("+i.join(",")+")";super("tuple",s,t,r),this.coders=e}defaultValue(){const e=[];this.coders.forEach(r=>{e.push(r.defaultValue())});const t=this.coders.reduce((r,i)=>{const s=i.localName;return s&&(r[s]||(r[s]=0),r[s]++),r},{});return this.coders.forEach((r,i)=>{let s=r.localName;!s||t[s]!==1||(s==="length"&&(s="_length"),e[s]==null&&(e[s]=e[i]))}),Object.freeze(e)}encode(e,t){return d1(e,this.coders,t)}decode(e){return e.coerce(this.name,p1(e,this.coders))}}const Yo=new z(Mo),X2=new RegExp(/^bytes([0-9]*)$/),Z2=new RegExp(/^(u?int)([0-9]*)$/);class e3{constructor(e){ee(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new T2(e.name);case"bool":return new O2(e.name);case"string":return new Y2(e.name);case"bytes":return new F2(e.name);case"array":return new B2(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new Qo((e.components||[]).map(r=>this._getCoder(r)),e.name);case"":return new L2(e.name)}let t=e.type.match(Z2);if(t){let r=parseInt(t[2]||"256");return(r===0||r>256||r%8!==0)&&Yo.throwArgumentError("invalid "+t[1]+" bit length","param",e),new j2(r/8,t[1]==="int",e.name)}if(t=e.type.match(X2),t){let r=parseInt(t[1]);return(r===0||r>32)&&Yo.throwArgumentError("invalid bytes length","param",e),new D2(r,e.name)}return Yo.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,t){return new Fa(e,this._getWordSize(),this.coerceFunc,t)}_getWriter(){return new Mc(this._getWordSize())}getDefaultValue(e){const t=e.map(i=>this._getCoder($t.from(i)));return new Qo(t,"_").defaultValue()}encode(e,t){e.length!==t.length&&Yo.throwError("types/values length mismatch",z.errors.INVALID_ARGUMENT,{count:{types:e.length,values:t.length},value:{types:e,values:t}});const r=e.map(o=>this._getCoder($t.from(o))),i=new Qo(r,"_"),s=this._getWriter();return i.encode(s,t),s.data}decode(e,t,r){const i=e.map(o=>this._getCoder($t.from(o)));return new Qo(i,"_").decode(this._getReader(fe(t),r))}}const t3=new e3;function us(n){return Ut(Hr(n))}const b1="hash/5.8.0";function A1(n){n=atob(n);const e=[];for(let t=0;t<n.length;t++)e.push(n.charCodeAt(t));return fe(e)}function E1(n){n=fe(n);let e="";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return btoa(e)}function x1(n,e){e==null&&(e=1);const t=[],r=t.forEach,i=function(s,o){r.call(s,function(a){o>0&&Array.isArray(a)?i(a,o-1):t.push(a)})};return i(n,e),t}function r3(n){const e={};for(let t=0;t<n.length;t++){const r=n[t];e[r[0]]=r[1]}return e}function n3(n){let e=0;function t(){return n[e++]<<8|n[e++]}let r=t(),i=1,s=[0,1];for(let q=1;q<r;q++)s.push(i+=t());let o=t(),a=e;e+=o;let l=0,h=0;function u(){return l==0&&(h=h<<8|n[e++],l=8),h>>--l&1}const g=31,x=Math.pow(2,g),A=x>>>1,E=A>>1,I=x-1;let T=0;for(let q=0;q<g;q++)T=T<<1|u();let R=[],O=0,B=x;for(;;){let q=Math.floor(((T-O+1)*i-1)/B),W=0,Z=r;for(;Z-W>1;){let y=W+Z>>>1;q<s[y]?Z=y:W=y}if(W==0)break;R.push(W);let K=O+Math.floor(B*s[W]/i),se=O+Math.floor(B*s[W+1]/i)-1;for(;!((K^se)&A);)T=T<<1&I|u(),K=K<<1&I,se=se<<1&I|1;for(;K&~se&E;)T=T&A|T<<1&I>>>1|u(),K=K<<1^A,se=(se^A)<<1|A|1;O=K,B=1+se-K}let U=r-4;return R.map(q=>{switch(q-U){case 3:return U+65792+(n[a++]<<16|n[a++]<<8|n[a++]);case 2:return U+256+(n[a++]<<8|n[a++]);case 1:return U+n[a++];default:return q-1}})}function i3(n){let e=0;return()=>n[e++]}function s3(n){return i3(n3(n))}function o3(n){return n&1?~n>>1:n>>1}function a3(n,e){let t=Array(n);for(let r=0;r<n;r++)t[r]=1+e();return t}function Rf(n,e){let t=Array(n);for(let r=0,i=-1;r<n;r++)t[r]=i+=1+e();return t}function l3(n,e){let t=Array(n);for(let r=0,i=0;r<n;r++)t[r]=i+=o3(e());return t}function Da(n,e){let t=Rf(n(),n),r=n(),i=Rf(r,n),s=a3(r,n);for(let o=0;o<r;o++)for(let a=0;a<s[o];a++)t.push(i[o]+a);return e?t.map(o=>e[o]):t}function c3(n){let e=[];for(;;){let t=n();if(t==0)break;e.push(u3(t,n))}for(;;){let t=n()-1;if(t<0)break;e.push(f3(t,n))}return r3(x1(e))}function h3(n){let e=[];for(;;){let t=n();if(t==0)break;e.push(t)}return e}function _1(n,e,t){let r=Array(n).fill(void 0).map(()=>[]);for(let i=0;i<e;i++)l3(n,t).forEach((s,o)=>r[o].push(s));return r}function u3(n,e){let t=1+e(),r=e(),i=h3(e),s=_1(i.length,1+n,e);return x1(s.map((o,a)=>{const l=o[0],h=o.slice(1);return Array(i[a]).fill(void 0).map((u,g)=>{let x=g*r;return[l+g*t,h.map(A=>A+x)]})}))}function f3(n,e){let t=1+e();return _1(t,1+n,e).map(i=>[i[0],i.slice(1)])}function d3(n){let e=Da(n).sort((r,i)=>r-i);return t();function t(){let r=[];for(;;){let h=Da(n,e);if(h.length==0)break;r.push({set:new Set(h),node:t()})}r.sort((h,u)=>u.set.size-h.set.size);let i=n(),s=i%3;i=i/3|0;let o=!!(i&1);i>>=1;let a=i==1,l=i==2;return{branches:r,valid:s,fe0f:o,save:a,check:l}}}function p3(){return s3(A1("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}const Za=p3(),m3=new Set(Da(Za)),g3=new Set(Da(Za)),y3=c3(Za),v3=d3(Za),Bf=45,Of=95;function k1(n){return Q2(n)}function w3(n){return n.filter(e=>e!=65039)}function S1(n){for(let e of n.split(".")){let t=k1(e);try{for(let r=t.lastIndexOf(Of)-1;r>=0;r--)if(t[r]!==Of)throw new Error("underscore only allowed at start");if(t.length>=4&&t.every(r=>r<128)&&t[2]===Bf&&t[3]===Bf)throw new Error("invalid label extension")}catch(r){throw new Error(`Invalid label "${e}": ${r.message}`)}}return n}function b3(n){return S1(A3(n,w3))}function A3(n,e){let t=k1(n).reverse(),r=[];for(;t.length;){let i=x3(t);if(i){r.push(...e(i));continue}let s=t.pop();if(m3.has(s)){r.push(s);continue}if(g3.has(s))continue;let o=y3[s];if(o){r.push(...o);continue}throw new Error(`Disallowed codepoint: 0x${s.toString(16).toUpperCase()}`)}return S1(E3(String.fromCodePoint(...r)))}function E3(n){return n.normalize("NFC")}function x3(n,e){var t;let r=v3,i,s,o=[],a=n.length;for(e&&(e.length=0);a;){let l=n[--a];if(r=(t=r.branches.find(h=>h.set.has(l)))===null||t===void 0?void 0:t.node,!r)break;if(r.save)s=l;else if(r.check&&l===s)break;o.push(l),r.fe0f&&(o.push(65039),a>0&&n[a-1]==65039&&a--),r.valid&&(i=o.slice(),r.valid==2&&i.splice(1,1),e&&e.push(...n.slice(a).reverse()),n.length=a)}return i}const _3=new z(b1),N1=new Uint8Array(32);N1.fill(0);function Ff(n){if(n.length===0)throw new Error("invalid ENS name; empty component");return n}function C1(n){const e=Hr(b3(n)),t=[];if(n.length===0)return t;let r=0;for(let i=0;i<e.length;i++)e[i]===46&&(t.push(Ff(e.slice(r,i))),r=i+1);if(r>=e.length)throw new Error("invalid ENS name; empty component");return t.push(Ff(e.slice(r))),t}function va(n){typeof n!="string"&&_3.throwArgumentError("invalid ENS name; not a string","name",n);let e=N1;const t=C1(n);for(;t.length;)e=Ut(mr([e,Ut(t.pop())]));return ce(e)}function k3(n){return ce(mr(C1(n).map(e=>{if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const t=new Uint8Array(e.length+1);return t.set(e,1),t[0]=t.length-1,t})))+"00"}var S3=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{h(r.next(u))}catch(g){o(g)}}function l(u){try{h(r.throw(u))}catch(g){o(g)}}function h(u){u.done?s(u.value):i(u.value).then(a,l)}h((r=r.apply(n,e||[])).next())})};const Tt=new z(b1),I1=new Uint8Array(32);I1.fill(0);const N3=J.from(-1),P1=J.from(0),M1=J.from(1),C3=J.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function I3(n){const e=fe(n),t=e.length%32;return t?Ar([e,I1.slice(t)]):ce(e)}const P3=Ct(M1.toHexString(),32),M3=Ct(P1.toHexString(),32),Df={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Ql=["name","version","chainId","verifyingContract","salt"];function Lf(n){return function(e){return typeof e!="string"&&Tt.throwArgumentError(`invalid domain value for ${JSON.stringify(n)}`,`domain.${n}`,e),e}}const T3={name:Lf("name"),version:Lf("version"),chainId:function(n){try{return J.from(n).toString()}catch{}return Tt.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",n)},verifyingContract:function(n){try{return rr(n).toLowerCase()}catch{}return Tt.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",n)},salt:function(n){try{const e=fe(n);if(e.length!==32)throw new Error("bad length");return ce(e)}catch{}return Tt.throwArgumentError('invalid domain value "salt"',"domain.salt",n)}};function Yl(n){{const e=n.match(/^(u?)int(\d*)$/);if(e){const t=e[1]==="",r=parseInt(e[2]||"256");(r%8!==0||r>256||e[2]&&e[2]!==String(r))&&Tt.throwArgumentError("invalid numeric width","type",n);const i=C3.mask(t?r-1:r),s=t?i.add(M1).mul(N3):P1;return function(o){const a=J.from(o);return(a.lt(s)||a.gt(i))&&Tt.throwArgumentError(`value out-of-bounds for ${n}`,"value",o),Ct(a.toTwos(256).toHexString(),32)}}}{const e=n.match(/^bytes(\d+)$/);if(e){const t=parseInt(e[1]);return(t===0||t>32||e[1]!==String(t))&&Tt.throwArgumentError("invalid bytes width","type",n),function(r){return fe(r).length!==t&&Tt.throwArgumentError(`invalid length for ${n}`,"value",r),I3(r)}}}switch(n){case"address":return function(e){return Ct(rr(e),32)};case"bool":return function(e){return e?P3:M3};case"bytes":return function(e){return Ut(e)};case"string":return function(e){return us(e)}}return null}function Uf(n,e){return`${n}(${e.map(({name:t,type:r})=>r+" "+t).join(",")})`}class xr{constructor(e){ee(this,"types",Object.freeze(Wn(e))),ee(this,"_encoderCache",{}),ee(this,"_types",{});const t={},r={},i={};Object.keys(e).forEach(a=>{t[a]={},r[a]=[],i[a]={}});for(const a in e){const l={};e[a].forEach(h=>{l[h.name]&&Tt.throwArgumentError(`duplicate variable name ${JSON.stringify(h.name)} in ${JSON.stringify(a)}`,"types",e),l[h.name]=!0;const u=h.type.match(/^([^\x5b]*)(\x5b|$)/)[1];u===a&&Tt.throwArgumentError(`circular type reference to ${JSON.stringify(u)}`,"types",e),!Yl(u)&&(r[u]||Tt.throwArgumentError(`unknown type ${JSON.stringify(u)}`,"types",e),r[u].push(a),t[a][u]=!0)})}const s=Object.keys(r).filter(a=>r[a].length===0);s.length===0?Tt.throwArgumentError("missing primary type","types",e):s.length>1&&Tt.throwArgumentError(`ambiguous primary types or unused types: ${s.map(a=>JSON.stringify(a)).join(", ")}`,"types",e),ee(this,"primaryType",s[0]);function o(a,l){l[a]&&Tt.throwArgumentError(`circular type reference to ${JSON.stringify(a)}`,"types",e),l[a]=!0,Object.keys(t[a]).forEach(h=>{r[h]&&(o(h,l),Object.keys(l).forEach(u=>{i[u][h]=!0}))}),delete l[a]}o(this.primaryType,{});for(const a in i){const l=Object.keys(i[a]);l.sort(),this._types[a]=Uf(a,e[a])+l.map(h=>Uf(h,e[h])).join("")}}getEncoder(e){let t=this._encoderCache[e];return t||(t=this._encoderCache[e]=this._getEncoder(e)),t}_getEncoder(e){{const i=Yl(e);if(i)return i}const t=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(t){const i=t[1],s=this.getEncoder(i),o=parseInt(t[3]);return a=>{o>=0&&a.length!==o&&Tt.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",a);let l=a.map(s);return this._types[i]&&(l=l.map(Ut)),Ut(Ar(l))}}const r=this.types[e];if(r){const i=us(this._types[e]);return s=>{const o=r.map(({name:a,type:l})=>{const h=this.getEncoder(l)(s[a]);return this._types[l]?Ut(h):h});return o.unshift(i),Ar(o)}}return Tt.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const t=this._types[e];return t||Tt.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return Ut(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,r){if(Yl(e))return r(e,t);const i=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(i){const o=i[1],a=parseInt(i[3]);return a>=0&&t.length!==a&&Tt.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t),t.map(l=>this._visit(o,l,r))}const s=this.types[e];return s?s.reduce((o,{name:a,type:l})=>(o[a]=this._visit(l,t[a],r),o),{}):Tt.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new xr(e)}static getPrimaryType(e){return xr.from(e).primaryType}static hashStruct(e,t,r){return xr.from(t).hashStruct(e,r)}static hashDomain(e){const t=[];for(const r in e){const i=Df[r];i||Tt.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),t.push({name:r,type:i})}return t.sort((r,i)=>Ql.indexOf(r.name)-Ql.indexOf(i.name)),xr.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,r){return Ar(["0x1901",xr.hashDomain(e),xr.from(t).hash(r)])}static hash(e,t,r){return Ut(xr.encode(e,t,r))}static resolveNames(e,t,r,i){return S3(this,void 0,void 0,function*(){e=Kt(e);const s={};e.verifyingContract&&!yt(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const o=xr.from(t);o.visit(r,(a,l)=>(a==="address"&&!yt(l,20)&&(s[l]="0x"),l));for(const a in s)s[a]=yield i(a);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),r=o.visit(r,(a,l)=>a==="address"&&s[l]?s[l]:l),{domain:e,value:r}})}static getPayload(e,t,r){xr.hashDomain(e);const i={},s=[];Ql.forEach(l=>{const h=e[l];h!=null&&(i[l]=T3[l](h),s.push({name:l,type:Df[l]}))});const o=xr.from(t),a=Kt(t);return a.EIP712Domain?Tt.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",t):a.EIP712Domain=s,o.encode(r),{types:a,domain:i,primaryType:o.primaryType,message:o.visit(r,(l,h)=>{if(l.match(/^bytes(\d*)/))return ce(fe(h));if(l.match(/^u?int/))return J.from(h).toString();switch(l){case"address":return h.toLowerCase();case"bool":return!!h;case"string":return typeof h!="string"&&Tt.throwArgumentError("invalid string","value",h),h}return Tt.throwArgumentError("unsupported type","type",l)})}}}const Pt=new z(Mo);class R3 extends Po{}class B3 extends Po{}class O3 extends Po{}class Tc extends Po{static isIndexed(e){return!!(e&&e._isIndexed)}}const F3={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function zf(n,e){const t=new Error(`deferred error during ABI decoding triggered accessing ${n}`);return t.error=e,t}class qf{constructor(e){let t=[];typeof e=="string"?t=JSON.parse(e):t=e,ee(this,"fragments",t.map(r=>Hn.from(r)).filter(r=>r!=null)),ee(this,"_abiCoder",En(new.target,"getAbiCoder")()),ee(this,"functions",{}),ee(this,"errors",{}),ee(this,"events",{}),ee(this,"structs",{}),this.fragments.forEach(r=>{let i=null;switch(r.type){case"constructor":if(this.deploy){Pt.warn("duplicate definition - constructor");return}ee(this,"deploy",r);return;case"function":i=this.functions;break;case"event":i=this.events;break;case"error":i=this.errors;break;default:return}let s=r.format();if(i[s]){Pt.warn("duplicate definition - "+s);return}i[s]=r}),this.deploy||ee(this,"deploy",vn.from({payable:!1,type:"constructor"})),ee(this,"_isInterface",!0)}format(e){e||(e=gt.full),e===gt.sighash&&Pt.throwArgumentError("interface does not support formatting sighash","format",e);const t=this.fragments.map(r=>r.format(e));return e===gt.json?JSON.stringify(t.map(r=>JSON.parse(r))):t}static getAbiCoder(){return t3}static getAddress(e){return rr(e)}static getSighash(e){return cr(us(e.format()),0,4)}static getEventTopic(e){return us(e.format())}getFunction(e){if(yt(e)){for(const r in this.functions)if(e===this.getSighash(r))return this.functions[r];Pt.throwArgumentError("no matching function","sighash",e)}if(e.indexOf("(")===-1){const r=e.trim(),i=Object.keys(this.functions).filter(s=>s.split("(")[0]===r);return i.length===0?Pt.throwArgumentError("no matching function","name",r):i.length>1&&Pt.throwArgumentError("multiple matching functions","name",r),this.functions[i[0]]}const t=this.functions[wn.fromString(e).format()];return t||Pt.throwArgumentError("no matching function","signature",e),t}getEvent(e){if(yt(e)){const r=e.toLowerCase();for(const i in this.events)if(r===this.getEventTopic(i))return this.events[i];Pt.throwArgumentError("no matching event","topichash",r)}if(e.indexOf("(")===-1){const r=e.trim(),i=Object.keys(this.events).filter(s=>s.split("(")[0]===r);return i.length===0?Pt.throwArgumentError("no matching event","name",r):i.length>1&&Pt.throwArgumentError("multiple matching events","name",r),this.events[i[0]]}const t=this.events[Gn.fromString(e).format()];return t||Pt.throwArgumentError("no matching event","signature",e),t}getError(e){if(yt(e)){const r=En(this.constructor,"getSighash");for(const i in this.errors){const s=this.errors[i];if(e===r(s))return this.errors[i]}Pt.throwArgumentError("no matching error","sighash",e)}if(e.indexOf("(")===-1){const r=e.trim(),i=Object.keys(this.errors).filter(s=>s.split("(")[0]===r);return i.length===0?Pt.throwArgumentError("no matching error","name",r):i.length>1&&Pt.throwArgumentError("multiple matching errors","name",r),this.errors[i[0]]}const t=this.errors[wn.fromString(e).format()];return t||Pt.throwArgumentError("no matching error","signature",e),t}getSighash(e){if(typeof e=="string")try{e=this.getFunction(e)}catch(t){try{e=this.getError(e)}catch{throw t}}return En(this.constructor,"getSighash")(e)}getEventTopic(e){return typeof e=="string"&&(e=this.getEvent(e)),En(this.constructor,"getEventTopic")(e)}_decodeParams(e,t){return this._abiCoder.decode(e,t)}_encodeParams(e,t){return this._abiCoder.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){typeof e=="string"&&(e=this.getError(e));const r=fe(t);return ce(r.slice(0,4))!==this.getSighash(e)&&Pt.throwArgumentError(`data signature does not match error ${e.name}.`,"data",ce(r)),this._decodeParams(e.inputs,r.slice(4))}encodeErrorResult(e,t){return typeof e=="string"&&(e=this.getError(e)),ce(mr([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionData(e,t){typeof e=="string"&&(e=this.getFunction(e));const r=fe(t);return ce(r.slice(0,4))!==this.getSighash(e)&&Pt.throwArgumentError(`data signature does not match function ${e.name}.`,"data",ce(r)),this._decodeParams(e.inputs,r.slice(4))}encodeFunctionData(e,t){return typeof e=="string"&&(e=this.getFunction(e)),ce(mr([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionResult(e,t){typeof e=="string"&&(e=this.getFunction(e));let r=fe(t),i=null,s="",o=null,a=null,l=null;switch(r.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,r)}catch{}break;case 4:{const h=ce(r.slice(0,4)),u=F3[h];if(u)o=this._abiCoder.decode(u.inputs,r.slice(4)),a=u.name,l=u.signature,u.reason&&(i=o[0]),a==="Error"?s=`; VM Exception while processing transaction: reverted with reason string ${JSON.stringify(o[0])}`:a==="Panic"&&(s=`; VM Exception while processing transaction: reverted with panic code ${o[0]}`);else try{const g=this.getError(h);o=this._abiCoder.decode(g.inputs,r.slice(4)),a=g.name,l=g.format()}catch{}break}}return Pt.throwError("call revert exception"+s,z.errors.CALL_EXCEPTION,{method:e.format(),data:ce(t),errorArgs:o,errorName:a,errorSignature:l,reason:i})}encodeFunctionResult(e,t){return typeof e=="string"&&(e=this.getFunction(e)),ce(this._abiCoder.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){typeof e=="string"&&(e=this.getEvent(e)),t.length>e.inputs.length&&Pt.throwError("too many arguments for "+e.format(),z.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:t});let r=[];e.anonymous||r.push(this.getEventTopic(e));const i=(s,o)=>s.type==="string"?us(o):s.type==="bytes"?Ut(ce(o)):(s.type==="bool"&&typeof o=="boolean"&&(o=o?"0x01":"0x00"),s.type.match(/^u?int/)&&(o=J.from(o).toHexString()),s.type==="address"&&this._abiCoder.encode(["address"],[o]),Ct(ce(o),32));for(t.forEach((s,o)=>{let a=e.inputs[o];if(!a.indexed){s!=null&&Pt.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+a.name,s);return}s==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?Pt.throwArgumentError("filtering with tuples or arrays not supported","contract."+a.name,s):Array.isArray(s)?r.push(s.map(l=>i(a,l))):r.push(i(a,s))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,t){typeof e=="string"&&(e=this.getEvent(e));const r=[],i=[],s=[];return e.anonymous||r.push(this.getEventTopic(e)),t.length!==e.inputs.length&&Pt.throwArgumentError("event arguments/values mismatch","values",t),e.inputs.forEach((o,a)=>{const l=t[a];if(o.indexed)if(o.type==="string")r.push(us(l));else if(o.type==="bytes")r.push(Ut(l));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(this._abiCoder.encode([o.type],[l]))}else i.push(o),s.push(l)}),{data:this._abiCoder.encode(i,s),topics:r}}decodeEventLog(e,t,r){if(typeof e=="string"&&(e=this.getEvent(e)),r!=null&&!e.anonymous){let x=this.getEventTopic(e);(!yt(r[0],32)||r[0].toLowerCase()!==x)&&Pt.throwError("fragment/topic mismatch",z.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:x,value:r[0]}),r=r.slice(1)}let i=[],s=[],o=[];e.inputs.forEach((x,A)=>{x.indexed?x.type==="string"||x.type==="bytes"||x.baseType==="tuple"||x.baseType==="array"?(i.push($t.fromObject({type:"bytes32",name:x.name})),o.push(!0)):(i.push(x),o.push(!1)):(s.push(x),o.push(!1))});let a=r!=null?this._abiCoder.decode(i,mr(r)):null,l=this._abiCoder.decode(s,t,!0),h=[],u=0,g=0;e.inputs.forEach((x,A)=>{if(x.indexed)if(a==null)h[A]=new Tc({_isIndexed:!0,hash:null});else if(o[A])h[A]=new Tc({_isIndexed:!0,hash:a[g++]});else try{h[A]=a[g++]}catch(E){h[A]=E}else try{h[A]=l[u++]}catch(E){h[A]=E}if(x.name&&h[x.name]==null){const E=h[A];E instanceof Error?Object.defineProperty(h,x.name,{enumerable:!0,get:()=>{throw zf(`property ${JSON.stringify(x.name)}`,E)}}):h[x.name]=E}});for(let x=0;x<h.length;x++){const A=h[x];A instanceof Error&&Object.defineProperty(h,x,{enumerable:!0,get:()=>{throw zf(`index ${x}`,A)}})}return Object.freeze(h)}parseTransaction(e){let t=this.getFunction(e.data.substring(0,10).toLowerCase());return t?new B3({args:this._abiCoder.decode(t.inputs,"0x"+e.data.substring(10)),functionFragment:t,name:t.name,signature:t.format(),sighash:this.getSighash(t),value:J.from(e.value||"0")}):null}parseLog(e){let t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new R3({eventFragment:t,name:t.name,signature:t.format(),topic:this.getEventTopic(t),args:this.decodeEventLog(t,e.data,e.topics)})}parseError(e){const t=ce(e);let r=this.getError(t.substring(0,10).toLowerCase());return r?new O3({args:this._abiCoder.decode(r.inputs,"0x"+t.substring(10)),errorFragment:r,name:r.name,signature:r.format(),sighash:this.getSighash(r)}):null}static isInterface(e){return!!(e&&e._isInterface)}}const D3="abstract-provider/5.8.0";var L3=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{h(r.next(u))}catch(g){o(g)}}function l(u){try{h(r.throw(u))}catch(g){o(g)}}function h(u){u.done?s(u.value):i(u.value).then(a,l)}h((r=r.apply(n,e||[])).next())})};const U3=new z(D3);class z3 extends Po{static isForkEvent(e){return!!(e&&e._isForkEvent)}}class el{constructor(){U3.checkAbstract(new.target,el),ee(this,"_isProvider",!0)}getFeeData(){return L3(this,void 0,void 0,function*(){const{block:e,gasPrice:t}=yield Ht({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(o=>null)});let r=null,i=null,s=null;return e&&e.baseFeePerGas&&(r=e.baseFeePerGas,s=J.from("1500000000"),i=e.baseFeePerGas.mul(2).add(s)),{lastBaseFeePerGas:r,maxFeePerGas:i,maxPriorityFeePerGas:s,gasPrice:t}})}addListener(e,t){return this.on(e,t)}removeListener(e,t){return this.off(e,t)}static isProvider(e){return!!(e&&e._isProvider)}}const q3="abstract-signer/5.8.0";var $r=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{h(r.next(u))}catch(g){o(g)}}function l(u){try{h(r.throw(u))}catch(g){o(g)}}function h(u){u.done?s(u.value):i(u.value).then(a,l)}h((r=r.apply(n,e||[])).next())})};const Ur=new z(q3),G3=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],H3=[z.errors.INSUFFICIENT_FUNDS,z.errors.NONCE_EXPIRED,z.errors.REPLACEMENT_UNDERPRICED];class Ro{constructor(){Ur.checkAbstract(new.target,Ro),ee(this,"_isSigner",!0)}getBalance(e){return $r(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return $r(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return $r(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const t=yield Ht(this.checkTransaction(e));return yield this.provider.estimateGas(t)})}call(e,t){return $r(this,void 0,void 0,function*(){this._checkProvider("call");const r=yield Ht(this.checkTransaction(e));return yield this.provider.call(r,t)})}sendTransaction(e){return $r(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const t=yield this.populateTransaction(e),r=yield this.signTransaction(t);return yield this.provider.sendTransaction(r)})}getChainId(){return $r(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return $r(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return $r(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return $r(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(const r in e)G3.indexOf(r)===-1&&Ur.throwArgumentError("invalid transaction key: "+r,"transaction",e);const t=Kt(e);return t.from==null?t.from=this.getAddress():t.from=Promise.all([Promise.resolve(t.from),this.getAddress()]).then(r=>(r[0].toLowerCase()!==r[1].toLowerCase()&&Ur.throwArgumentError("from address mismatch","transaction",e),r[0])),t}populateTransaction(e){return $r(this,void 0,void 0,function*(){const t=yield Ht(this.checkTransaction(e));t.to!=null&&(t.to=Promise.resolve(t.to).then(i=>$r(this,void 0,void 0,function*(){if(i==null)return null;const s=yield this.resolveName(i);return s==null&&Ur.throwArgumentError("provided ENS name resolves to null","tx.to",i),s})),t.to.catch(i=>{}));const r=t.maxFeePerGas!=null||t.maxPriorityFeePerGas!=null;if(t.gasPrice!=null&&(t.type===2||r)?Ur.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e):(t.type===0||t.type===1)&&r&&Ur.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e),(t.type===2||t.type==null)&&t.maxFeePerGas!=null&&t.maxPriorityFeePerGas!=null)t.type=2;else if(t.type===0||t.type===1)t.gasPrice==null&&(t.gasPrice=this.getGasPrice());else{const i=yield this.getFeeData();if(t.type==null)if(i.maxFeePerGas!=null&&i.maxPriorityFeePerGas!=null)if(t.type=2,t.gasPrice!=null){const s=t.gasPrice;delete t.gasPrice,t.maxFeePerGas=s,t.maxPriorityFeePerGas=s}else t.maxFeePerGas==null&&(t.maxFeePerGas=i.maxFeePerGas),t.maxPriorityFeePerGas==null&&(t.maxPriorityFeePerGas=i.maxPriorityFeePerGas);else i.gasPrice!=null?(r&&Ur.throwError("network does not support EIP-1559",z.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),t.gasPrice==null&&(t.gasPrice=i.gasPrice),t.type=0):Ur.throwError("failed to get consistent fee data",z.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else t.type===2&&(t.maxFeePerGas==null&&(t.maxFeePerGas=i.maxFeePerGas),t.maxPriorityFeePerGas==null&&(t.maxPriorityFeePerGas=i.maxPriorityFeePerGas))}return t.nonce==null&&(t.nonce=this.getTransactionCount("pending")),t.gasLimit==null&&(t.gasLimit=this.estimateGas(t).catch(i=>{if(H3.indexOf(i.code)>=0)throw i;return Ur.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",z.errors.UNPREDICTABLE_GAS_LIMIT,{error:i,tx:t})})),t.chainId==null?t.chainId=this.getChainId():t.chainId=Promise.all([Promise.resolve(t.chainId),this.getChainId()]).then(i=>(i[1]!==0&&i[0]!==i[1]&&Ur.throwArgumentError("chainId address mismatch","transaction",e),i[0])),yield Ht(t)})}_checkProvider(e){this.provider||Ur.throwError("missing provider",z.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!!(e&&e._isSigner)}}class vh extends Ro{constructor(e,t){super(),ee(this,"address",e),ee(this,"provider",t||null)}getAddress(){return Promise.resolve(this.address)}_fail(e,t){return Promise.resolve().then(()=>{Ur.throwError(e,z.errors.UNSUPPORTED_OPERATION,{operation:t})})}signMessage(e){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(e){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(e,t,r){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(e){return new vh(this.address,e)}}var T1={},je={},Bo=R1;function R1(n,e){if(!n)throw new Error(e||"Assertion failed")}R1.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var Rc={exports:{}};typeof Object.create=="function"?Rc.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Rc.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}};var j3=Rc.exports,W3=Bo,K3=j3;je.inherits=K3;function V3(n,e){return(n.charCodeAt(e)&64512)!==55296||e<0||e+1>=n.length?!1:(n.charCodeAt(e+1)&64512)===56320}function J3(n,e){if(Array.isArray(n))return n.slice();if(!n)return[];var t=[];if(typeof n=="string")if(e){if(e==="hex")for(n=n.replace(/[^a-z0-9]+/ig,""),n.length%2!==0&&(n="0"+n),i=0;i<n.length;i+=2)t.push(parseInt(n[i]+n[i+1],16))}else for(var r=0,i=0;i<n.length;i++){var s=n.charCodeAt(i);s<128?t[r++]=s:s<2048?(t[r++]=s>>6|192,t[r++]=s&63|128):V3(n,i)?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),t[r++]=s>>18|240,t[r++]=s>>12&63|128,t[r++]=s>>6&63|128,t[r++]=s&63|128):(t[r++]=s>>12|224,t[r++]=s>>6&63|128,t[r++]=s&63|128)}else for(i=0;i<n.length;i++)t[i]=n[i]|0;return t}je.toArray=J3;function $3(n){for(var e="",t=0;t<n.length;t++)e+=O1(n[t].toString(16));return e}je.toHex=$3;function B1(n){var e=n>>>24|n>>>8&65280|n<<8&16711680|(n&255)<<24;return e>>>0}je.htonl=B1;function Q3(n,e){for(var t="",r=0;r<n.length;r++){var i=n[r];e==="little"&&(i=B1(i)),t+=F1(i.toString(16))}return t}je.toHex32=Q3;function O1(n){return n.length===1?"0"+n:n}je.zero2=O1;function F1(n){return n.length===7?"0"+n:n.length===6?"00"+n:n.length===5?"000"+n:n.length===4?"0000"+n:n.length===3?"00000"+n:n.length===2?"000000"+n:n.length===1?"0000000"+n:n}je.zero8=F1;function Y3(n,e,t,r){var i=t-e;W3(i%4===0);for(var s=new Array(i/4),o=0,a=e;o<s.length;o++,a+=4){var l;r==="big"?l=n[a]<<24|n[a+1]<<16|n[a+2]<<8|n[a+3]:l=n[a+3]<<24|n[a+2]<<16|n[a+1]<<8|n[a],s[o]=l>>>0}return s}je.join32=Y3;function X3(n,e){for(var t=new Array(n.length*4),r=0,i=0;r<n.length;r++,i+=4){var s=n[r];e==="big"?(t[i]=s>>>24,t[i+1]=s>>>16&255,t[i+2]=s>>>8&255,t[i+3]=s&255):(t[i+3]=s>>>24,t[i+2]=s>>>16&255,t[i+1]=s>>>8&255,t[i]=s&255)}return t}je.split32=X3;function Z3(n,e){return n>>>e|n<<32-e}je.rotr32=Z3;function ey(n,e){return n<<e|n>>>32-e}je.rotl32=ey;function ty(n,e){return n+e>>>0}je.sum32=ty;function ry(n,e,t){return n+e+t>>>0}je.sum32_3=ry;function ny(n,e,t,r){return n+e+t+r>>>0}je.sum32_4=ny;function iy(n,e,t,r,i){return n+e+t+r+i>>>0}je.sum32_5=iy;function sy(n,e,t,r){var i=n[e],s=n[e+1],o=r+s>>>0,a=(o<r?1:0)+t+i;n[e]=a>>>0,n[e+1]=o}je.sum64=sy;function oy(n,e,t,r){var i=e+r>>>0,s=(i<e?1:0)+n+t;return s>>>0}je.sum64_hi=oy;function ay(n,e,t,r){var i=e+r;return i>>>0}je.sum64_lo=ay;function ly(n,e,t,r,i,s,o,a){var l=0,h=e;h=h+r>>>0,l+=h<e?1:0,h=h+s>>>0,l+=h<s?1:0,h=h+a>>>0,l+=h<a?1:0;var u=n+t+i+o+l;return u>>>0}je.sum64_4_hi=ly;function cy(n,e,t,r,i,s,o,a){var l=e+r+s+a;return l>>>0}je.sum64_4_lo=cy;function hy(n,e,t,r,i,s,o,a,l,h){var u=0,g=e;g=g+r>>>0,u+=g<e?1:0,g=g+s>>>0,u+=g<s?1:0,g=g+a>>>0,u+=g<a?1:0,g=g+h>>>0,u+=g<h?1:0;var x=n+t+i+o+l+u;return x>>>0}je.sum64_5_hi=hy;function uy(n,e,t,r,i,s,o,a,l,h){var u=e+r+s+a+h;return u>>>0}je.sum64_5_lo=uy;function fy(n,e,t){var r=e<<32-t|n>>>t;return r>>>0}je.rotr64_hi=fy;function dy(n,e,t){var r=n<<32-t|e>>>t;return r>>>0}je.rotr64_lo=dy;function py(n,e,t){return n>>>t}je.shr64_hi=py;function my(n,e,t){var r=n<<32-t|e>>>t;return r>>>0}je.shr64_lo=my;var Ps={},Gf=je,gy=Bo;function tl(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}Ps.BlockHash=tl;tl.prototype.update=function(e,t){if(e=Gf.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var r=e.length%this._delta8;this.pending=e.slice(e.length-r,e.length),this.pending.length===0&&(this.pending=null),e=Gf.join32(e,0,e.length-r,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this};tl.prototype.digest=function(e){return this.update(this._pad()),gy(this.pending===null),this._digest(e)};tl.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,i=new Array(r+this.padLength);i[0]=128;for(var s=1;s<r;s++)i[s]=0;if(e<<=3,this.endian==="big"){for(var o=8;o<this.padLength;o++)i[s++]=0;i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=e>>>24&255,i[s++]=e>>>16&255,i[s++]=e>>>8&255,i[s++]=e&255}else for(i[s++]=e&255,i[s++]=e>>>8&255,i[s++]=e>>>16&255,i[s++]=e>>>24&255,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,o=8;o<this.padLength;o++)i[s++]=0;return i};var Ms={},On={},yy=je,Sn=yy.rotr32;function vy(n,e,t,r){if(n===0)return D1(e,t,r);if(n===1||n===3)return U1(e,t,r);if(n===2)return L1(e,t,r)}On.ft_1=vy;function D1(n,e,t){return n&e^~n&t}On.ch32=D1;function L1(n,e,t){return n&e^n&t^e&t}On.maj32=L1;function U1(n,e,t){return n^e^t}On.p32=U1;function wy(n){return Sn(n,2)^Sn(n,13)^Sn(n,22)}On.s0_256=wy;function by(n){return Sn(n,6)^Sn(n,11)^Sn(n,25)}On.s1_256=by;function Ay(n){return Sn(n,7)^Sn(n,18)^n>>>3}On.g0_256=Ay;function Ey(n){return Sn(n,17)^Sn(n,19)^n>>>10}On.g1_256=Ey;var Es=je,xy=Ps,_y=On,Xl=Es.rotl32,zs=Es.sum32,ky=Es.sum32_5,Sy=_y.ft_1,z1=xy.BlockHash,Ny=[1518500249,1859775393,2400959708,3395469782];function Mn(){if(!(this instanceof Mn))return new Mn;z1.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}Es.inherits(Mn,z1);var Cy=Mn;Mn.blockSize=512;Mn.outSize=160;Mn.hmacStrength=80;Mn.padLength=64;Mn.prototype._update=function(e,t){for(var r=this.W,i=0;i<16;i++)r[i]=e[t+i];for(;i<r.length;i++)r[i]=Xl(r[i-3]^r[i-8]^r[i-14]^r[i-16],1);var s=this.h[0],o=this.h[1],a=this.h[2],l=this.h[3],h=this.h[4];for(i=0;i<r.length;i++){var u=~~(i/20),g=ky(Xl(s,5),Sy(u,o,a,l),h,r[i],Ny[u]);h=l,l=a,a=Xl(o,30),o=s,s=g}this.h[0]=zs(this.h[0],s),this.h[1]=zs(this.h[1],o),this.h[2]=zs(this.h[2],a),this.h[3]=zs(this.h[3],l),this.h[4]=zs(this.h[4],h)};Mn.prototype._digest=function(e){return e==="hex"?Es.toHex32(this.h,"big"):Es.split32(this.h,"big")};var xs=je,Iy=Ps,Ts=On,Py=Bo,Qr=xs.sum32,My=xs.sum32_4,Ty=xs.sum32_5,Ry=Ts.ch32,By=Ts.maj32,Oy=Ts.s0_256,Fy=Ts.s1_256,Dy=Ts.g0_256,Ly=Ts.g1_256,q1=Iy.BlockHash,Uy=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Tn(){if(!(this instanceof Tn))return new Tn;q1.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=Uy,this.W=new Array(64)}xs.inherits(Tn,q1);var G1=Tn;Tn.blockSize=512;Tn.outSize=256;Tn.hmacStrength=192;Tn.padLength=64;Tn.prototype._update=function(e,t){for(var r=this.W,i=0;i<16;i++)r[i]=e[t+i];for(;i<r.length;i++)r[i]=My(Ly(r[i-2]),r[i-7],Dy(r[i-15]),r[i-16]);var s=this.h[0],o=this.h[1],a=this.h[2],l=this.h[3],h=this.h[4],u=this.h[5],g=this.h[6],x=this.h[7];for(Py(this.k.length===r.length),i=0;i<r.length;i++){var A=Ty(x,Fy(h),Ry(h,u,g),this.k[i],r[i]),E=Qr(Oy(s),By(s,o,a));x=g,g=u,u=h,h=Qr(l,A),l=a,a=o,o=s,s=Qr(A,E)}this.h[0]=Qr(this.h[0],s),this.h[1]=Qr(this.h[1],o),this.h[2]=Qr(this.h[2],a),this.h[3]=Qr(this.h[3],l),this.h[4]=Qr(this.h[4],h),this.h[5]=Qr(this.h[5],u),this.h[6]=Qr(this.h[6],g),this.h[7]=Qr(this.h[7],x)};Tn.prototype._digest=function(e){return e==="hex"?xs.toHex32(this.h,"big"):xs.split32(this.h,"big")};var Bc=je,H1=G1;function Kn(){if(!(this instanceof Kn))return new Kn;H1.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}Bc.inherits(Kn,H1);var zy=Kn;Kn.blockSize=512;Kn.outSize=224;Kn.hmacStrength=192;Kn.padLength=64;Kn.prototype._digest=function(e){return e==="hex"?Bc.toHex32(this.h.slice(0,7),"big"):Bc.split32(this.h.slice(0,7),"big")};var Er=je,qy=Ps,Gy=Bo,Nn=Er.rotr64_hi,Cn=Er.rotr64_lo,j1=Er.shr64_hi,W1=Er.shr64_lo,Xn=Er.sum64,Zl=Er.sum64_hi,ec=Er.sum64_lo,Hy=Er.sum64_4_hi,jy=Er.sum64_4_lo,Wy=Er.sum64_5_hi,Ky=Er.sum64_5_lo,K1=qy.BlockHash,Vy=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function an(){if(!(this instanceof an))return new an;K1.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=Vy,this.W=new Array(160)}Er.inherits(an,K1);var V1=an;an.blockSize=1024;an.outSize=512;an.hmacStrength=192;an.padLength=128;an.prototype._prepareBlock=function(e,t){for(var r=this.W,i=0;i<32;i++)r[i]=e[t+i];for(;i<r.length;i+=2){var s=iv(r[i-4],r[i-3]),o=sv(r[i-4],r[i-3]),a=r[i-14],l=r[i-13],h=rv(r[i-30],r[i-29]),u=nv(r[i-30],r[i-29]),g=r[i-32],x=r[i-31];r[i]=Hy(s,o,a,l,h,u,g,x),r[i+1]=jy(s,o,a,l,h,u,g,x)}};an.prototype._update=function(e,t){this._prepareBlock(e,t);var r=this.W,i=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],l=this.h[4],h=this.h[5],u=this.h[6],g=this.h[7],x=this.h[8],A=this.h[9],E=this.h[10],I=this.h[11],T=this.h[12],R=this.h[13],O=this.h[14],B=this.h[15];Gy(this.k.length===r.length);for(var U=0;U<r.length;U+=2){var q=O,W=B,Z=ev(x,A),K=tv(x,A),se=Jy(x,A,E,I,T),y=$y(x,A,E,I,T,R),S=this.k[U],C=this.k[U+1],p=r[U],c=r[U+1],d=Wy(q,W,Z,K,se,y,S,C,p,c),f=Ky(q,W,Z,K,se,y,S,C,p,c);q=Xy(i,s),W=Zy(i,s),Z=Qy(i,s,o,a,l),K=Yy(i,s,o,a,l,h);var N=Zl(q,W,Z,K),v=ec(q,W,Z,K);O=T,B=R,T=E,R=I,E=x,I=A,x=Zl(u,g,d,f),A=ec(g,g,d,f),u=l,g=h,l=o,h=a,o=i,a=s,i=Zl(d,f,N,v),s=ec(d,f,N,v)}Xn(this.h,0,i,s),Xn(this.h,2,o,a),Xn(this.h,4,l,h),Xn(this.h,6,u,g),Xn(this.h,8,x,A),Xn(this.h,10,E,I),Xn(this.h,12,T,R),Xn(this.h,14,O,B)};an.prototype._digest=function(e){return e==="hex"?Er.toHex32(this.h,"big"):Er.split32(this.h,"big")};function Jy(n,e,t,r,i){var s=n&t^~n&i;return s<0&&(s+=4294967296),s}function $y(n,e,t,r,i,s){var o=e&r^~e&s;return o<0&&(o+=4294967296),o}function Qy(n,e,t,r,i){var s=n&t^n&i^t&i;return s<0&&(s+=4294967296),s}function Yy(n,e,t,r,i,s){var o=e&r^e&s^r&s;return o<0&&(o+=4294967296),o}function Xy(n,e){var t=Nn(n,e,28),r=Nn(e,n,2),i=Nn(e,n,7),s=t^r^i;return s<0&&(s+=4294967296),s}function Zy(n,e){var t=Cn(n,e,28),r=Cn(e,n,2),i=Cn(e,n,7),s=t^r^i;return s<0&&(s+=4294967296),s}function ev(n,e){var t=Nn(n,e,14),r=Nn(n,e,18),i=Nn(e,n,9),s=t^r^i;return s<0&&(s+=4294967296),s}function tv(n,e){var t=Cn(n,e,14),r=Cn(n,e,18),i=Cn(e,n,9),s=t^r^i;return s<0&&(s+=4294967296),s}function rv(n,e){var t=Nn(n,e,1),r=Nn(n,e,8),i=j1(n,e,7),s=t^r^i;return s<0&&(s+=4294967296),s}function nv(n,e){var t=Cn(n,e,1),r=Cn(n,e,8),i=W1(n,e,7),s=t^r^i;return s<0&&(s+=4294967296),s}function iv(n,e){var t=Nn(n,e,19),r=Nn(e,n,29),i=j1(n,e,6),s=t^r^i;return s<0&&(s+=4294967296),s}function sv(n,e){var t=Cn(n,e,19),r=Cn(e,n,29),i=W1(n,e,6),s=t^r^i;return s<0&&(s+=4294967296),s}var Oc=je,J1=V1;function Vn(){if(!(this instanceof Vn))return new Vn;J1.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}Oc.inherits(Vn,J1);var ov=Vn;Vn.blockSize=1024;Vn.outSize=384;Vn.hmacStrength=192;Vn.padLength=128;Vn.prototype._digest=function(e){return e==="hex"?Oc.toHex32(this.h.slice(0,12),"big"):Oc.split32(this.h.slice(0,12),"big")};Ms.sha1=Cy;Ms.sha224=zy;Ms.sha256=G1;Ms.sha384=ov;Ms.sha512=V1;var $1={},qi=je,av=Ps,Xo=qi.rotl32,Hf=qi.sum32,qs=qi.sum32_3,jf=qi.sum32_4,Q1=av.BlockHash;function Rn(){if(!(this instanceof Rn))return new Rn;Q1.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}qi.inherits(Rn,Q1);$1.ripemd160=Rn;Rn.blockSize=512;Rn.outSize=160;Rn.hmacStrength=192;Rn.padLength=64;Rn.prototype._update=function(e,t){for(var r=this.h[0],i=this.h[1],s=this.h[2],o=this.h[3],a=this.h[4],l=r,h=i,u=s,g=o,x=a,A=0;A<80;A++){var E=Hf(Xo(jf(r,Wf(A,i,s,o),e[hv[A]+t],lv(A)),fv[A]),a);r=a,a=o,o=Xo(s,10),s=i,i=E,E=Hf(Xo(jf(l,Wf(79-A,h,u,g),e[uv[A]+t],cv(A)),dv[A]),x),l=x,x=g,g=Xo(u,10),u=h,h=E}E=qs(this.h[1],s,g),this.h[1]=qs(this.h[2],o,x),this.h[2]=qs(this.h[3],a,l),this.h[3]=qs(this.h[4],r,h),this.h[4]=qs(this.h[0],i,u),this.h[0]=E};Rn.prototype._digest=function(e){return e==="hex"?qi.toHex32(this.h,"little"):qi.split32(this.h,"little")};function Wf(n,e,t,r){return n<=15?e^t^r:n<=31?e&t|~e&r:n<=47?(e|~t)^r:n<=63?e&r|t&~r:e^(t|~r)}function lv(n){return n<=15?0:n<=31?1518500249:n<=47?1859775393:n<=63?2400959708:2840853838}function cv(n){return n<=15?1352829926:n<=31?1548603684:n<=47?1836072691:n<=63?2053994217:0}var hv=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],uv=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],fv=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],dv=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],pv=je,mv=Bo;function _s(n,e,t){if(!(this instanceof _s))return new _s(n,e,t);this.Hash=n,this.blockSize=n.blockSize/8,this.outSize=n.outSize/8,this.inner=null,this.outer=null,this._init(pv.toArray(e,t))}var gv=_s;_s.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),mv(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=new this.Hash().update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=new this.Hash().update(e)};_s.prototype.update=function(e,t){return this.inner.update(e,t),this};_s.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(n){var e=n;e.utils=je,e.common=Ps,e.sha=Ms,e.ripemd=$1,e.hmac=gv,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(T1);const fn=Qa(T1);function Rs(n,e,t){return t={path:e,exports:{},require:function(r,i){return yv(r,i??t.path)}},n(t,t.exports),t.exports}function yv(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var wh=Y1;function Y1(n,e){if(!n)throw new Error(e||"Assertion failed")}Y1.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var on=Rs(function(n,e){var t=e;function r(o,a){if(Array.isArray(o))return o.slice();if(!o)return[];var l=[];if(typeof o!="string"){for(var h=0;h<o.length;h++)l[h]=o[h]|0;return l}if(a==="hex"){o=o.replace(/[^a-z0-9]+/ig,""),o.length%2!==0&&(o="0"+o);for(var h=0;h<o.length;h+=2)l.push(parseInt(o[h]+o[h+1],16))}else for(var h=0;h<o.length;h++){var u=o.charCodeAt(h),g=u>>8,x=u&255;g?l.push(g,x):l.push(x)}return l}t.toArray=r;function i(o){return o.length===1?"0"+o:o}t.zero2=i;function s(o){for(var a="",l=0;l<o.length;l++)a+=i(o[l].toString(16));return a}t.toHex=s,t.encode=function(a,l){return l==="hex"?s(a):a}}),Ir=Rs(function(n,e){var t=e;t.assert=wh,t.toArray=on.toArray,t.zero2=on.zero2,t.toHex=on.toHex,t.encode=on.encode;function r(l,h,u){var g=new Array(Math.max(l.bitLength(),u)+1),x;for(x=0;x<g.length;x+=1)g[x]=0;var A=1<<h+1,E=l.clone();for(x=0;x<g.length;x++){var I,T=E.andln(A-1);E.isOdd()?(T>(A>>1)-1?I=(A>>1)-T:I=T,E.isubn(I)):I=0,g[x]=I,E.iushrn(1)}return g}t.getNAF=r;function i(l,h){var u=[[],[]];l=l.clone(),h=h.clone();for(var g=0,x=0,A;l.cmpn(-g)>0||h.cmpn(-x)>0;){var E=l.andln(3)+g&3,I=h.andln(3)+x&3;E===3&&(E=-1),I===3&&(I=-1);var T;E&1?(A=l.andln(7)+g&7,(A===3||A===5)&&I===2?T=-E:T=E):T=0,u[0].push(T);var R;I&1?(A=h.andln(7)+x&7,(A===3||A===5)&&E===2?R=-I:R=I):R=0,u[1].push(R),2*g===T+1&&(g=1-g),2*x===R+1&&(x=1-x),l.iushrn(1),h.iushrn(1)}return u}t.getJSF=i;function s(l,h,u){var g="_"+h;l.prototype[h]=function(){return this[g]!==void 0?this[g]:this[g]=u.call(this)}}t.cachedProperty=s;function o(l){return typeof l=="string"?t.toArray(l,"hex"):l}t.parseBytes=o;function a(l){return new Ie(l,"hex","le")}t.intFromLE=a}),La=Ir.getNAF,vv=Ir.getJSF,Ua=Ir.assert;function di(n,e){this.type=n,this.p=new Ie(e.p,16),this.red=e.prime?Ie.red(e.prime):Ie.mont(this.p),this.zero=new Ie(0).toRed(this.red),this.one=new Ie(1).toRed(this.red),this.two=new Ie(2).toRed(this.red),this.n=e.n&&new Ie(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var t=this.n&&this.p.div(this.n);!t||t.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var $i=di;di.prototype.point=function(){throw new Error("Not implemented")};di.prototype.validate=function(){throw new Error("Not implemented")};di.prototype._fixedNafMul=function(e,t){Ua(e.precomputed);var r=e._getDoubles(),i=La(t,1,this._bitLength),s=(1<<r.step+1)-(r.step%2===0?2:1);s/=3;var o=[],a,l;for(a=0;a<i.length;a+=r.step){l=0;for(var h=a+r.step-1;h>=a;h--)l=(l<<1)+i[h];o.push(l)}for(var u=this.jpoint(null,null,null),g=this.jpoint(null,null,null),x=s;x>0;x--){for(a=0;a<o.length;a++)l=o[a],l===x?g=g.mixedAdd(r.points[a]):l===-x&&(g=g.mixedAdd(r.points[a].neg()));u=u.add(g)}return u.toP()};di.prototype._wnafMul=function(e,t){var r=4,i=e._getNAFPoints(r);r=i.wnd;for(var s=i.points,o=La(t,r,this._bitLength),a=this.jpoint(null,null,null),l=o.length-1;l>=0;l--){for(var h=0;l>=0&&o[l]===0;l--)h++;if(l>=0&&h++,a=a.dblp(h),l<0)break;var u=o[l];Ua(u!==0),e.type==="affine"?u>0?a=a.mixedAdd(s[u-1>>1]):a=a.mixedAdd(s[-u-1>>1].neg()):u>0?a=a.add(s[u-1>>1]):a=a.add(s[-u-1>>1].neg())}return e.type==="affine"?a.toP():a};di.prototype._wnafMulAdd=function(e,t,r,i,s){var o=this._wnafT1,a=this._wnafT2,l=this._wnafT3,h=0,u,g,x;for(u=0;u<i;u++){x=t[u];var A=x._getNAFPoints(e);o[u]=A.wnd,a[u]=A.points}for(u=i-1;u>=1;u-=2){var E=u-1,I=u;if(o[E]!==1||o[I]!==1){l[E]=La(r[E],o[E],this._bitLength),l[I]=La(r[I],o[I],this._bitLength),h=Math.max(l[E].length,h),h=Math.max(l[I].length,h);continue}var T=[t[E],null,null,t[I]];t[E].y.cmp(t[I].y)===0?(T[1]=t[E].add(t[I]),T[2]=t[E].toJ().mixedAdd(t[I].neg())):t[E].y.cmp(t[I].y.redNeg())===0?(T[1]=t[E].toJ().mixedAdd(t[I]),T[2]=t[E].add(t[I].neg())):(T[1]=t[E].toJ().mixedAdd(t[I]),T[2]=t[E].toJ().mixedAdd(t[I].neg()));var R=[-3,-1,-5,-7,0,7,5,1,3],O=vv(r[E],r[I]);for(h=Math.max(O[0].length,h),l[E]=new Array(h),l[I]=new Array(h),g=0;g<h;g++){var B=O[0][g]|0,U=O[1][g]|0;l[E][g]=R[(B+1)*3+(U+1)],l[I][g]=0,a[E]=T}}var q=this.jpoint(null,null,null),W=this._wnafT4;for(u=h;u>=0;u--){for(var Z=0;u>=0;){var K=!0;for(g=0;g<i;g++)W[g]=l[g][u]|0,W[g]!==0&&(K=!1);if(!K)break;Z++,u--}if(u>=0&&Z++,q=q.dblp(Z),u<0)break;for(g=0;g<i;g++){var se=W[g];se!==0&&(se>0?x=a[g][se-1>>1]:se<0&&(x=a[g][-se-1>>1].neg()),x.type==="affine"?q=q.mixedAdd(x):q=q.add(x))}}for(u=0;u<i;u++)a[u]=null;return s?q:q.toP()};function Wr(n,e){this.curve=n,this.type=e,this.precomputed=null}di.BasePoint=Wr;Wr.prototype.eq=function(){throw new Error("Not implemented")};Wr.prototype.validate=function(){return this.curve.validate(this)};di.prototype.decodePoint=function(e,t){e=Ir.toArray(e,t);var r=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*r){e[0]===6?Ua(e[e.length-1]%2===0):e[0]===7&&Ua(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));return i}else if((e[0]===2||e[0]===3)&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),e[0]===3);throw new Error("Unknown point format")};Wr.prototype.encodeCompressed=function(e){return this.encode(e,!0)};Wr.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))};Wr.prototype.encode=function(e,t){return Ir.encode(this._encode(t),e)};Wr.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this};Wr.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return t?t.points.length>=Math.ceil((e.bitLength()+1)/t.step):!1};Wr.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],i=this,s=0;s<t;s+=e){for(var o=0;o<e;o++)i=i.dbl();r.push(i)}return{step:e,points:r}};Wr.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,i=r===1?null:this.dbl(),s=1;s<r;s++)t[s]=t[s-1].add(i);return{wnd:e,points:t}};Wr.prototype._getBeta=function(){return null};Wr.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t};var bh=Rs(function(n){typeof Object.create=="function"?n.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:n.exports=function(t,r){if(r){t.super_=r;var i=function(){};i.prototype=r.prototype,t.prototype=new i,t.prototype.constructor=t}}}),wv=Ir.assert;function Kr(n){$i.call(this,"short",n),this.a=new Ie(n.a,16).toRed(this.red),this.b=new Ie(n.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(n),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}bh(Kr,$i);var bv=Kr;Kr.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var t,r;if(e.beta)t=new Ie(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);t=i[0].cmp(i[1])<0?i[0]:i[1],t=t.toRed(this.red)}if(e.lambda)r=new Ie(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(t))===0?r=s[0]:(r=s[1],wv(this.g.mul(r).x.cmp(this.g.x.redMul(t))===0))}var o;return e.basis?o=e.basis.map(function(a){return{a:new Ie(a.a,16),b:new Ie(a.b,16)}}):o=this._getEndoBasis(r),{beta:t,lambda:r,basis:o}}};Kr.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:Ie.mont(e),r=new Ie(2).toRed(t).redInvm(),i=r.redNeg(),s=new Ie(3).toRed(t).redNeg().redSqrt().redMul(r),o=i.redAdd(s).fromRed(),a=i.redSub(s).fromRed();return[o,a]};Kr.prototype._getEndoBasis=function(e){for(var t=this.n.ushrn(Math.floor(this.n.bitLength()/2)),r=e,i=this.n.clone(),s=new Ie(1),o=new Ie(0),a=new Ie(0),l=new Ie(1),h,u,g,x,A,E,I,T=0,R,O;r.cmpn(0)!==0;){var B=i.div(r);R=i.sub(B.mul(r)),O=a.sub(B.mul(s));var U=l.sub(B.mul(o));if(!g&&R.cmp(t)<0)h=I.neg(),u=s,g=R.neg(),x=O;else if(g&&++T===2)break;I=R,i=r,r=R,a=s,s=O,l=o,o=U}A=R.neg(),E=O;var q=g.sqr().add(x.sqr()),W=A.sqr().add(E.sqr());return W.cmp(q)>=0&&(A=h,E=u),g.negative&&(g=g.neg(),x=x.neg()),A.negative&&(A=A.neg(),E=E.neg()),[{a:g,b:x},{a:A,b:E}]};Kr.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],i=t[1],s=i.b.mul(e).divRound(this.n),o=r.b.neg().mul(e).divRound(this.n),a=s.mul(r.a),l=o.mul(i.a),h=s.mul(r.b),u=o.mul(i.b),g=e.sub(a).sub(l),x=h.add(u).neg();return{k1:g,k2:x}};Kr.prototype.pointFromX=function(e,t){e=new Ie(e,16),e.red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=r.redSqrt();if(i.redSqr().redSub(r).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(t&&!s||!t&&s)&&(i=i.redNeg()),this.point(e,i)};Kr.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,i=this.a.redMul(t),s=t.redSqr().redMul(t).redIAdd(i).redIAdd(this.b);return r.redSqr().redISub(s).cmpn(0)===0};Kr.prototype._endoWnafMulAdd=function(e,t,r){for(var i=this._endoWnafT1,s=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(t[o]),l=e[o],h=l._getBeta();a.k1.negative&&(a.k1.ineg(),l=l.neg(!0)),a.k2.negative&&(a.k2.ineg(),h=h.neg(!0)),i[o*2]=l,i[o*2+1]=h,s[o*2]=a.k1,s[o*2+1]=a.k2}for(var u=this._wnafMulAdd(1,i,s,o*2,r),g=0;g<o*2;g++)i[g]=null,s[g]=null;return u};function Qt(n,e,t,r){$i.BasePoint.call(this,n,"affine"),e===null&&t===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new Ie(e,16),this.y=new Ie(t,16),r&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}bh(Qt,$i.BasePoint);Kr.prototype.point=function(e,t,r){return new Qt(this,e,t,r)};Kr.prototype.pointFromJSON=function(e,t){return Qt.fromJSON(this,e,t)};Qt.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,i=function(s){return r.point(s.x.redMul(r.endo.beta),s.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return t}};Qt.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Qt.fromJSON=function(e,t,r){typeof t=="string"&&(t=JSON.parse(t));var i=e.point(t[0],t[1],r);if(!t[2])return i;function s(a){return e.point(a[0],a[1],r)}var o=t[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(s))}},i};Qt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Qt.prototype.isInfinity=function(){return this.inf};Qt.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var t=this.y.redSub(e.y);t.cmpn(0)!==0&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),i=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,i)};Qt.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),i=e.redInvm(),s=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(i),o=s.redSqr().redISub(this.x.redAdd(this.x)),a=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)};Qt.prototype.getX=function(){return this.x.fromRed()};Qt.prototype.getY=function(){return this.y.fromRed()};Qt.prototype.mul=function(e){return e=new Ie(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};Qt.prototype.mulAdd=function(e,t,r){var i=[this,t],s=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)};Qt.prototype.jmulAdd=function(e,t,r){var i=[this,t],s=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)};Qt.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};Qt.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,i=function(s){return s.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(i)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(i)}}}return t};Qt.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function ir(n,e,t,r){$i.BasePoint.call(this,n,"jacobian"),e===null&&t===null&&r===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Ie(0)):(this.x=new Ie(e,16),this.y=new Ie(t,16),this.z=new Ie(r,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}bh(ir,$i.BasePoint);Kr.prototype.jpoint=function(e,t,r){return new ir(this,e,t,r)};ir.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),i=this.y.redMul(t).redMul(e);return this.curve.point(r,i)};ir.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};ir.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),i=this.x.redMul(t),s=e.x.redMul(r),o=this.y.redMul(t.redMul(e.z)),a=e.y.redMul(r.redMul(this.z)),l=i.redSub(s),h=o.redSub(a);if(l.cmpn(0)===0)return h.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var u=l.redSqr(),g=u.redMul(l),x=i.redMul(u),A=h.redSqr().redIAdd(g).redISub(x).redISub(x),E=h.redMul(x.redISub(A)).redISub(o.redMul(g)),I=this.z.redMul(e.z).redMul(l);return this.curve.jpoint(A,E,I)};ir.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,i=e.x.redMul(t),s=this.y,o=e.y.redMul(t).redMul(this.z),a=r.redSub(i),l=s.redSub(o);if(a.cmpn(0)===0)return l.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var h=a.redSqr(),u=h.redMul(a),g=r.redMul(h),x=l.redSqr().redIAdd(u).redISub(g).redISub(g),A=l.redMul(g.redISub(x)).redISub(s.redMul(u)),E=this.z.redMul(a);return this.curve.jpoint(x,A,E)};ir.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var r=this;for(t=0;t<e;t++)r=r.dbl();return r}var i=this.curve.a,s=this.curve.tinv,o=this.x,a=this.y,l=this.z,h=l.redSqr().redSqr(),u=a.redAdd(a);for(t=0;t<e;t++){var g=o.redSqr(),x=u.redSqr(),A=x.redSqr(),E=g.redAdd(g).redIAdd(g).redIAdd(i.redMul(h)),I=o.redMul(x),T=E.redSqr().redISub(I.redAdd(I)),R=I.redISub(T),O=E.redMul(R);O=O.redIAdd(O).redISub(A);var B=u.redMul(l);t+1<e&&(h=h.redMul(A)),o=T,l=B,u=O}return this.curve.jpoint(o,u.redMul(s),l)};ir.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};ir.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var l=i.redAdd(i).redIAdd(i),h=l.redSqr().redISub(a).redISub(a),u=o.redIAdd(o);u=u.redIAdd(u),u=u.redIAdd(u),e=h,t=l.redMul(a.redISub(h)).redISub(u),r=this.y.redAdd(this.y)}else{var g=this.x.redSqr(),x=this.y.redSqr(),A=x.redSqr(),E=this.x.redAdd(x).redSqr().redISub(g).redISub(A);E=E.redIAdd(E);var I=g.redAdd(g).redIAdd(g),T=I.redSqr(),R=A.redIAdd(A);R=R.redIAdd(R),R=R.redIAdd(R),e=T.redISub(E).redISub(E),t=I.redMul(E.redISub(e)).redISub(R),r=this.y.redMul(this.z),r=r.redIAdd(r)}return this.curve.jpoint(e,t,r)};ir.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var l=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),h=l.redSqr().redISub(a).redISub(a);e=h;var u=o.redIAdd(o);u=u.redIAdd(u),u=u.redIAdd(u),t=l.redMul(a.redISub(h)).redISub(u),r=this.y.redAdd(this.y)}else{var g=this.z.redSqr(),x=this.y.redSqr(),A=this.x.redMul(x),E=this.x.redSub(g).redMul(this.x.redAdd(g));E=E.redAdd(E).redIAdd(E);var I=A.redIAdd(A);I=I.redIAdd(I);var T=I.redAdd(I);e=E.redSqr().redISub(T),r=this.y.redAdd(this.z).redSqr().redISub(x).redISub(g);var R=x.redSqr();R=R.redIAdd(R),R=R.redIAdd(R),R=R.redIAdd(R),t=E.redMul(I.redISub(e)).redISub(R)}return this.curve.jpoint(e,t,r)};ir.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,i=this.z,s=i.redSqr().redSqr(),o=t.redSqr(),a=r.redSqr(),l=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(s)),h=t.redAdd(t);h=h.redIAdd(h);var u=h.redMul(a),g=l.redSqr().redISub(u.redAdd(u)),x=u.redISub(g),A=a.redSqr();A=A.redIAdd(A),A=A.redIAdd(A),A=A.redIAdd(A);var E=l.redMul(x).redISub(A),I=r.redAdd(r).redMul(i);return this.curve.jpoint(g,E,I)};ir.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),i=t.redSqr(),s=e.redAdd(e).redIAdd(e),o=s.redSqr(),a=this.x.redAdd(t).redSqr().redISub(e).redISub(i);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(o);var l=a.redSqr(),h=i.redIAdd(i);h=h.redIAdd(h),h=h.redIAdd(h),h=h.redIAdd(h);var u=s.redIAdd(a).redSqr().redISub(o).redISub(l).redISub(h),g=t.redMul(u);g=g.redIAdd(g),g=g.redIAdd(g);var x=this.x.redMul(l).redISub(g);x=x.redIAdd(x),x=x.redIAdd(x);var A=this.y.redMul(u.redMul(h.redISub(u)).redISub(a.redMul(l)));A=A.redIAdd(A),A=A.redIAdd(A),A=A.redIAdd(A);var E=this.z.redAdd(a).redSqr().redISub(r).redISub(l);return this.curve.jpoint(x,A,E)};ir.prototype.mul=function(e,t){return e=new Ie(e,t),this.curve._wnafMul(this,e)};ir.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0)!==0)return!1;var i=t.redMul(this.z),s=r.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)===0};ir.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(this.x.cmp(r)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(t);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(s),this.x.cmp(r)===0)return!0}};ir.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};ir.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var wa=Rs(function(n,e){var t=e;t.base=$i,t.short=bv,t.mont=null,t.edwards=null}),ba=Rs(function(n,e){var t=e,r=Ir.assert;function i(a){a.type==="short"?this.curve=new wa.short(a):a.type==="edwards"?this.curve=new wa.edwards(a):this.curve=new wa.mont(a),this.g=this.curve.g,this.n=this.curve.n,this.hash=a.hash,r(this.g.validate(),"Invalid curve"),r(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}t.PresetCurve=i;function s(a,l){Object.defineProperty(t,a,{configurable:!0,enumerable:!0,get:function(){var h=new i(l);return Object.defineProperty(t,a,{configurable:!0,enumerable:!0,value:h}),h}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:fn.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:fn.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:fn.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:fn.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:fn.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:fn.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:fn.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var o;try{o=null.crash()}catch{o=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:fn.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",o]})});function fi(n){if(!(this instanceof fi))return new fi(n);this.hash=n.hash,this.predResist=!!n.predResist,this.outLen=this.hash.outSize,this.minEntropy=n.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=on.toArray(n.entropy,n.entropyEnc||"hex"),t=on.toArray(n.nonce,n.nonceEnc||"hex"),r=on.toArray(n.pers,n.persEnc||"hex");wh(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,t,r)}var X1=fi;fi.prototype._init=function(e,t,r){var i=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};fi.prototype._hmac=function(){return new fn.hmac(this.hash,this.K)};fi.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};fi.prototype.reseed=function(e,t,r,i){typeof t!="string"&&(i=r,r=t,t=null),e=on.toArray(e,t),r=on.toArray(r,i),wh(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1};fi.prototype.generate=function(e,t,r,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof t!="string"&&(i=r,r=t,t=null),r&&(r=on.toArray(r,i||"hex"),this._update(r));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(r),this._reseed++,on.encode(o,t)};var Fc=Ir.assert;function ur(n,e){this.ec=n,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var Ah=ur;ur.fromPublic=function(e,t,r){return t instanceof ur?t:new ur(e,{pub:t,pubEnc:r})};ur.fromPrivate=function(e,t,r){return t instanceof ur?t:new ur(e,{priv:t,privEnc:r})};ur.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};ur.prototype.getPublic=function(e,t){return typeof e=="string"&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub};ur.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};ur.prototype._importPrivate=function(e,t){this.priv=new Ie(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)};ur.prototype._importPublic=function(e,t){if(e.x||e.y){this.ec.curve.type==="mont"?Fc(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&Fc(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,t)};ur.prototype.derive=function(e){return e.validate()||Fc(e.validate(),"public point not validated"),e.mul(this.priv).getX()};ur.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)};ur.prototype.verify=function(e,t,r){return this.ec.verify(e,t,this,void 0,r)};ur.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var Av=Ir.assert;function rl(n,e){if(n instanceof rl)return n;this._importDER(n,e)||(Av(n.r&&n.s,"Signature without r or s"),this.r=new Ie(n.r,16),this.s=new Ie(n.s,16),n.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=n.recoveryParam)}var nl=rl;function Ev(){this.place=0}function tc(n,e){var t=n[e.place++];if(!(t&128))return t;var r=t&15;if(r===0||r>4||n[e.place]===0)return!1;for(var i=0,s=0,o=e.place;s<r;s++,o++)i<<=8,i|=n[o],i>>>=0;return i<=127?!1:(e.place=o,i)}function Kf(n){for(var e=0,t=n.length-1;!n[e]&&!(n[e+1]&128)&&e<t;)e++;return e===0?n:n.slice(e)}rl.prototype._importDER=function(e,t){e=Ir.toArray(e,t);var r=new Ev;if(e[r.place++]!==48)return!1;var i=tc(e,r);if(i===!1||i+r.place!==e.length||e[r.place++]!==2)return!1;var s=tc(e,r);if(s===!1||e[r.place]&128)return!1;var o=e.slice(r.place,s+r.place);if(r.place+=s,e[r.place++]!==2)return!1;var a=tc(e,r);if(a===!1||e.length!==a+r.place||e[r.place]&128)return!1;var l=e.slice(r.place,a+r.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(l[0]===0)if(l[1]&128)l=l.slice(1);else return!1;return this.r=new Ie(o),this.s=new Ie(l),this.recoveryParam=null,!0};function rc(n,e){if(e<128){n.push(e);return}var t=1+(Math.log(e)/Math.LN2>>>3);for(n.push(t|128);--t;)n.push(e>>>(t<<3)&255);n.push(e)}rl.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(t[0]&128&&(t=[0].concat(t)),r[0]&128&&(r=[0].concat(r)),t=Kf(t),r=Kf(r);!r[0]&&!(r[1]&128);)r=r.slice(1);var i=[2];rc(i,t.length),i=i.concat(t),i.push(2),rc(i,r.length);var s=i.concat(r),o=[48];return rc(o,s.length),o=o.concat(s),Ir.encode(o,e)};var xv=function(){throw new Error("unsupported")},Ci=Ir.assert;function jr(n){if(!(this instanceof jr))return new jr(n);typeof n=="string"&&(Ci(Object.prototype.hasOwnProperty.call(ba,n),"Unknown curve "+n),n=ba[n]),n instanceof ba.PresetCurve&&(n={curve:n}),this.curve=n.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=n.curve.g,this.g.precompute(n.curve.n.bitLength()+1),this.hash=n.hash||n.curve.hash}var _v=jr;jr.prototype.keyPair=function(e){return new Ah(this,e)};jr.prototype.keyFromPrivate=function(e,t){return Ah.fromPrivate(this,e,t)};jr.prototype.keyFromPublic=function(e,t){return Ah.fromPublic(this,e,t)};jr.prototype.genKeyPair=function(e){e||(e={});for(var t=new X1({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||xv(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),i=this.n.sub(new Ie(2));;){var s=new Ie(t.generate(r));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}};jr.prototype._truncateToN=function(e,t,r){var i;if(Ie.isBN(e)||typeof e=="number")e=new Ie(e,16),i=e.byteLength();else if(typeof e=="object")i=e.length,e=new Ie(e,16);else{var s=e.toString();i=s.length+1>>>1,e=new Ie(s,16)}typeof r!="number"&&(r=i*8);var o=r-this.n.bitLength();return o>0&&(e=e.ushrn(o)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e};jr.prototype.sign=function(e,t,r,i){if(typeof r=="object"&&(i=r,r=null),i||(i={}),typeof e!="string"&&typeof e!="number"&&!Ie.isBN(e)){Ci(typeof e=="object"&&e&&typeof e.length=="number","Expected message to be an array-like, a hex string, or a BN instance"),Ci(e.length>>>0===e.length);for(var s=0;s<e.length;s++)Ci((e[s]&255)===e[s])}t=this.keyFromPrivate(t,r),e=this._truncateToN(e,!1,i.msgBitLength),Ci(!e.isNeg(),"Can not sign a negative message");var o=this.n.byteLength(),a=t.getPrivate().toArray("be",o),l=e.toArray("be",o);Ci(new Ie(l).eq(e),"Can not sign message");for(var h=new X1({hash:this.hash,entropy:a,nonce:l,pers:i.pers,persEnc:i.persEnc||"utf8"}),u=this.n.sub(new Ie(1)),g=0;;g++){var x=i.k?i.k(g):new Ie(h.generate(this.n.byteLength()));if(x=this._truncateToN(x,!0),!(x.cmpn(1)<=0||x.cmp(u)>=0)){var A=this.g.mul(x);if(!A.isInfinity()){var E=A.getX(),I=E.umod(this.n);if(I.cmpn(0)!==0){var T=x.invm(this.n).mul(I.mul(t.getPrivate()).iadd(e));if(T=T.umod(this.n),T.cmpn(0)!==0){var R=(A.getY().isOdd()?1:0)|(E.cmp(I)!==0?2:0);return i.canonical&&T.cmp(this.nh)>0&&(T=this.n.sub(T),R^=1),new nl({r:I,s:T,recoveryParam:R})}}}}}};jr.prototype.verify=function(e,t,r,i,s){s||(s={}),e=this._truncateToN(e,!1,s.msgBitLength),r=this.keyFromPublic(r,i),t=new nl(t,"hex");var o=t.r,a=t.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0||a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var l=a.invm(this.n),h=l.mul(e).umod(this.n),u=l.mul(o).umod(this.n),g;return this.curve._maxwellTrick?(g=this.g.jmulAdd(h,r.getPublic(),u),g.isInfinity()?!1:g.eqXToP(o)):(g=this.g.mulAdd(h,r.getPublic(),u),g.isInfinity()?!1:g.getX().umod(this.n).cmp(o)===0)};jr.prototype.recoverPubKey=function(n,e,t,r){Ci((3&t)===t,"The recovery param is more than two bits"),e=new nl(e,r);var i=this.n,s=new Ie(n),o=e.r,a=e.s,l=t&1,h=t>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&h)throw new Error("Unable to find sencond key candinate");h?o=this.curve.pointFromX(o.add(this.curve.n),l):o=this.curve.pointFromX(o,l);var u=e.r.invm(i),g=i.sub(s).mul(u).umod(i),x=a.mul(u).umod(i);return this.g.mulAdd(g,o,x)};jr.prototype.getKeyRecoveryParam=function(n,e,t,r){if(e=new nl(e,r),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(n,e,i)}catch{continue}if(s.eq(t))return i}throw new Error("Unable to find valid recovery factor")};var kv=Rs(function(n,e){var t=e;t.version="6.6.1",t.utils=Ir,t.rand=function(){throw new Error("unsupported")},t.curve=wa,t.curves=ba,t.ec=_v,t.eddsa=null}),Sv=kv.ec;const Nv="signing-key/5.8.0",Dc=new z(Nv);let nc=null;function gn(){return nc||(nc=new Sv("secp256k1")),nc}class Cv{constructor(e){ee(this,"curve","secp256k1"),ee(this,"privateKey",ce(e)),Ui(this.privateKey)!==32&&Dc.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const t=gn().keyFromPrivate(fe(this.privateKey));ee(this,"publicKey","0x"+t.getPublic(!1,"hex")),ee(this,"compressedPublicKey","0x"+t.getPublic(!0,"hex")),ee(this,"_isSigningKey",!0)}_addPoint(e){const t=gn().keyFromPublic(fe(this.publicKey)),r=gn().keyFromPublic(fe(e));return"0x"+t.pub.add(r.pub).encodeCompressed("hex")}signDigest(e){const t=gn().keyFromPrivate(fe(this.privateKey)),r=fe(e);r.length!==32&&Dc.throwArgumentError("bad digest length","digest",e);const i=t.sign(r,{canonical:!0});return Ya({recoveryParam:i.recoveryParam,r:Ct("0x"+i.r.toString(16),32),s:Ct("0x"+i.s.toString(16),32)})}computeSharedSecret(e){const t=gn().keyFromPrivate(fe(this.privateKey)),r=gn().keyFromPublic(fe(Z1(e)));return Ct("0x"+t.derive(r.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function Iv(n,e){const t=Ya(e),r={r:fe(t.r),s:fe(t.s)};return"0x"+gn().recoverPubKey(fe(n),r,t.recoveryParam).encode("hex",!1)}function Z1(n,e){const t=fe(n);if(t.length===32){const r=new Cv(t);return e?"0x"+gn().keyFromPrivate(t).getPublic(!0,"hex"):r.publicKey}else{if(t.length===33)return e?ce(t):"0x"+gn().keyFromPublic(t).getPublic(!1,"hex");if(t.length===65)return e?"0x"+gn().keyFromPublic(t).getPublic(!0,"hex"):ce(t)}return Dc.throwArgumentError("invalid public or private key","key","[REDACTED]")}const Pv="transactions/5.8.0",Qn=new z(Pv);var Vf;(function(n){n[n.legacy=0]="legacy",n[n.eip2930=1]="eip2930",n[n.eip1559=2]="eip1559"})(Vf||(Vf={}));function Eh(n){return n==="0x"?null:rr(n)}function hr(n){return n==="0x"?g1:J.from(n)}function Mv(n){const e=Z1(n);return rr(cr(Ut(cr(e,1)),12))}function ep(n,e){return Mv(Iv(fe(n),e))}function Nr(n,e){const t=As(J.from(n).toHexString());return t.length>32&&Qn.throwArgumentError("invalid length for "+e,"transaction:"+e,n),t}function ic(n,e){return{address:rr(n),storageKeys:(e||[]).map((t,r)=>(Ui(t)!==32&&Qn.throwArgumentError("invalid access list storageKey",`accessList[${n}:${r}]`,t),t.toLowerCase()))}}function Bs(n){if(Array.isArray(n))return n.map((t,r)=>Array.isArray(t)?(t.length>2&&Qn.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${r}]`,t),ic(t[0],t[1])):ic(t.address,t.storageKeys));const e=Object.keys(n).map(t=>{const r=n[t].reduce((i,s)=>(i[s]=!0,i),{});return ic(t,Object.keys(r).sort())});return e.sort((t,r)=>t.address.localeCompare(r.address)),e}function tp(n){return Bs(n).map(e=>[e.address,e.storageKeys])}function Tv(n,e){if(n.gasPrice!=null){const r=J.from(n.gasPrice),i=J.from(n.maxFeePerGas||0);r.eq(i)||Qn.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:r,maxFeePerGas:i})}const t=[Nr(n.chainId||0,"chainId"),Nr(n.nonce||0,"nonce"),Nr(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Nr(n.maxFeePerGas||0,"maxFeePerGas"),Nr(n.gasLimit||0,"gasLimit"),n.to!=null?rr(n.to):"0x",Nr(n.value||0,"value"),n.data||"0x",tp(n.accessList||[])];if(e){const r=Ya(e);t.push(Nr(r.recoveryParam,"recoveryParam")),t.push(As(r.r)),t.push(As(r.s))}return Ar(["0x02",Xa(t)])}function Rv(n,e){const t=[Nr(n.chainId||0,"chainId"),Nr(n.nonce||0,"nonce"),Nr(n.gasPrice||0,"gasPrice"),Nr(n.gasLimit||0,"gasLimit"),n.to!=null?rr(n.to):"0x",Nr(n.value||0,"value"),n.data||"0x",tp(n.accessList||[])];if(e){const r=Ya(e);t.push(Nr(r.recoveryParam,"recoveryParam")),t.push(As(r.r)),t.push(As(r.s))}return Ar(["0x01",Xa(t)])}function rp(n,e,t){try{const r=hr(e[0]).toNumber();if(r!==0&&r!==1)throw new Error("bad recid");n.v=r}catch{Qn.throwArgumentError("invalid v for transaction type: 1","v",e[0])}n.r=Ct(e[1],32),n.s=Ct(e[2],32);try{const r=Ut(t(n));n.from=ep(r,{r:n.r,s:n.s,recoveryParam:n.v})}catch{}}function Bv(n){const e=gh(n.slice(1));e.length!==9&&e.length!==12&&Qn.throwArgumentError("invalid component count for transaction type: 2","payload",ce(n));const t=hr(e[2]),r=hr(e[3]),i={type:2,chainId:hr(e[0]).toNumber(),nonce:hr(e[1]).toNumber(),maxPriorityFeePerGas:t,maxFeePerGas:r,gasPrice:null,gasLimit:hr(e[4]),to:Eh(e[5]),value:hr(e[6]),data:e[7],accessList:Bs(e[8])};return e.length===9||(i.hash=Ut(n),rp(i,e.slice(9),Tv)),i}function Ov(n){const e=gh(n.slice(1));e.length!==8&&e.length!==11&&Qn.throwArgumentError("invalid component count for transaction type: 1","payload",ce(n));const t={type:1,chainId:hr(e[0]).toNumber(),nonce:hr(e[1]).toNumber(),gasPrice:hr(e[2]),gasLimit:hr(e[3]),to:Eh(e[4]),value:hr(e[5]),data:e[6],accessList:Bs(e[7])};return e.length===8||(t.hash=Ut(n),rp(t,e.slice(8),Rv)),t}function Fv(n){const e=gh(n);e.length!==9&&e.length!==6&&Qn.throwArgumentError("invalid raw transaction","rawTransaction",n);const t={nonce:hr(e[0]).toNumber(),gasPrice:hr(e[1]),gasLimit:hr(e[2]),to:Eh(e[3]),value:hr(e[4]),data:e[5],chainId:0};if(e.length===6)return t;try{t.v=J.from(e[6]).toNumber()}catch{return t}if(t.r=Ct(e[7],32),t.s=Ct(e[8],32),J.from(t.r).isZero()&&J.from(t.s).isZero())t.chainId=t.v,t.v=0;else{t.chainId=Math.floor((t.v-35)/2),t.chainId<0&&(t.chainId=0);let r=t.v-27;const i=e.slice(0,6);t.chainId!==0&&(i.push(ce(t.chainId)),i.push("0x"),i.push("0x"),r-=t.chainId*2+8);const s=Ut(Xa(i));try{t.from=ep(s,{r:ce(t.r),s:ce(t.s),recoveryParam:r})}catch{}t.hash=Ut(n)}return t.type=null,t}function Dv(n){const e=fe(n);if(e[0]>127)return Fv(e);switch(e[0]){case 1:return Ov(e);case 2:return Bv(e)}return Qn.throwError(`unsupported transaction type: ${e[0]}`,z.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:e[0]})}const Lv="contracts/5.8.0";var Gi=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{h(r.next(u))}catch(g){o(g)}}function l(u){try{h(r.throw(u))}catch(g){o(g)}}function h(u){u.done?s(u.value):i(u.value).then(a,l)}h((r=r.apply(n,e||[])).next())})};const Dt=new z(Lv);function za(n,e){return Gi(this,void 0,void 0,function*(){const t=yield e;typeof t!="string"&&Dt.throwArgumentError("invalid address or ENS name","name",t);try{return rr(t)}catch{}n||Dt.throwError("a provider or signer is needed to resolve ENS names",z.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const r=yield n.resolveName(t);return r==null&&Dt.throwArgumentError("resolver or addr is not configured for ENS name","name",t),r})}function Aa(n,e,t){return Gi(this,void 0,void 0,function*(){return Array.isArray(t)?yield Promise.all(t.map((r,i)=>Aa(n,Array.isArray(e)?e[i]:e[r.name],r))):t.type==="address"?yield za(n,e):t.type==="tuple"?yield Aa(n,e,t.components):t.baseType==="array"?Array.isArray(e)?yield Promise.all(e.map(r=>Aa(n,r,t.arrayChildren))):Promise.reject(Dt.makeError("invalid value for array",z.errors.INVALID_ARGUMENT,{argument:"value",value:e})):e})}function il(n,e,t){return Gi(this,void 0,void 0,function*(){let r={};t.length===e.inputs.length+1&&typeof t[t.length-1]=="object"&&(r=Kt(t.pop())),Dt.checkArgumentCount(t.length,e.inputs.length,"passed to contract"),n.signer?r.from?r.from=Ht({override:za(n.signer,r.from),signer:n.signer.getAddress()}).then(h=>Gi(this,void 0,void 0,function*(){return rr(h.signer)!==h.override&&Dt.throwError("Contract with a Signer cannot override from",z.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),h.override})):r.from=n.signer.getAddress():r.from&&(r.from=za(n.provider,r.from));const i=yield Ht({args:Aa(n.signer||n.provider,t,e.inputs),address:n.resolvedAddress,overrides:Ht(r)||{}}),s=n.interface.encodeFunctionData(e,i.args),o={data:s,to:i.address},a=i.overrides;if(a.nonce!=null&&(o.nonce=J.from(a.nonce).toNumber()),a.gasLimit!=null&&(o.gasLimit=J.from(a.gasLimit)),a.gasPrice!=null&&(o.gasPrice=J.from(a.gasPrice)),a.maxFeePerGas!=null&&(o.maxFeePerGas=J.from(a.maxFeePerGas)),a.maxPriorityFeePerGas!=null&&(o.maxPriorityFeePerGas=J.from(a.maxPriorityFeePerGas)),a.from!=null&&(o.from=a.from),a.type!=null&&(o.type=a.type),a.accessList!=null&&(o.accessList=Bs(a.accessList)),o.gasLimit==null&&e.gas!=null){let h=21e3;const u=fe(s);for(let g=0;g<u.length;g++)h+=4,u[g]&&(h+=64);o.gasLimit=J.from(e.gas).add(h)}if(a.value){const h=J.from(a.value);!h.isZero()&&!e.payable&&Dt.throwError("non-payable method cannot override value",z.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:r.value}),o.value=h}a.customData&&(o.customData=Kt(a.customData)),a.ccipReadEnabled&&(o.ccipReadEnabled=!!a.ccipReadEnabled),delete r.nonce,delete r.gasLimit,delete r.gasPrice,delete r.from,delete r.value,delete r.type,delete r.accessList,delete r.maxFeePerGas,delete r.maxPriorityFeePerGas,delete r.customData,delete r.ccipReadEnabled;const l=Object.keys(r).filter(h=>r[h]!=null);return l.length&&Dt.throwError(`cannot override ${l.map(h=>JSON.stringify(h)).join(",")}`,z.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:l}),o})}function Uv(n,e){return function(...t){return il(n,e,t)}}function zv(n,e){const t=n.signer||n.provider;return function(...r){return Gi(this,void 0,void 0,function*(){t||Dt.throwError("estimate require a provider or signer",z.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const i=yield il(n,e,r);return yield t.estimateGas(i)})}}function qv(n,e){const t=e.wait.bind(e);e.wait=r=>t(r).then(i=>(i.events=i.logs.map(s=>{let o=Wn(s),a=null;try{a=n.interface.parseLog(s)}catch{}return a&&(o.args=a.args,o.decode=(l,h)=>n.interface.decodeEventLog(a.eventFragment,l,h),o.event=a.name,o.eventSignature=a.signature),o.removeListener=()=>n.provider,o.getBlock=()=>n.provider.getBlock(i.blockHash),o.getTransaction=()=>n.provider.getTransaction(i.transactionHash),o.getTransactionReceipt=()=>Promise.resolve(i),o}),i))}function np(n,e,t){const r=n.signer||n.provider;return function(...i){return Gi(this,void 0,void 0,function*(){let s;if(i.length===e.inputs.length+1&&typeof i[i.length-1]=="object"){const l=Kt(i.pop());l.blockTag!=null&&(s=yield l.blockTag),delete l.blockTag,i.push(l)}n.deployTransaction!=null&&(yield n._deployed(s));const o=yield il(n,e,i),a=yield r.call(o,s);try{let l=n.interface.decodeFunctionResult(e,a);return t&&e.outputs.length===1&&(l=l[0]),l}catch(l){throw l.code===z.errors.CALL_EXCEPTION&&(l.address=n.address,l.args=i,l.transaction=o),l}})}}function Gv(n,e){return function(...t){return Gi(this,void 0,void 0,function*(){n.signer||Dt.throwError("sending a transaction requires a signer",z.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),n.deployTransaction!=null&&(yield n._deployed());const r=yield il(n,e,t),i=yield n.signer.sendTransaction(r);return qv(n,i),i})}}function Jf(n,e,t){return e.constant?np(n,e,t):Gv(n,e)}function ip(n){return n.address&&(n.topics==null||n.topics.length===0)?"*":(n.address||"*")+"@"+(n.topics?n.topics.map(e=>Array.isArray(e)?e.join("|"):e).join(":"):"")}class xo{constructor(e,t){ee(this,"tag",e),ee(this,"filter",t),this._listeners=[]}addListener(e,t){this._listeners.push({listener:e,once:t})}removeListener(e){let t=!1;this._listeners=this._listeners.filter(r=>t||r.listener!==e?!0:(t=!0,!1))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map(e=>e.listener)}listenerCount(){return this._listeners.length}run(e){const t=this.listenerCount();return this._listeners=this._listeners.filter(r=>{const i=e.slice();return setTimeout(()=>{r.listener.apply(this,i)},0),!r.once}),t}prepareEvent(e){}getEmit(e){return[e]}}class Hv extends xo{constructor(){super("error",null)}}class $f extends xo{constructor(e,t,r,i){const s={address:e};let o=t.getEventTopic(r);i?(o!==i[0]&&Dt.throwArgumentError("topic mismatch","topics",i),s.topics=i.slice()):s.topics=[o],super(ip(s),s),ee(this,"address",e),ee(this,"interface",t),ee(this,"fragment",r)}prepareEvent(e){super.prepareEvent(e),e.event=this.fragment.name,e.eventSignature=this.fragment.format(),e.decode=(t,r)=>this.interface.decodeEventLog(this.fragment,t,r);try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(t){e.args=null,e.decodeError=t}}getEmit(e){const t=_2(e.args);if(t.length)throw t[0].error;const r=(e.args||[]).slice();return r.push(e),r}}class Qf extends xo{constructor(e,t){super("*",{address:e}),ee(this,"address",e),ee(this,"interface",t)}prepareEvent(e){super.prepareEvent(e);try{const t=this.interface.parseLog(e);e.event=t.name,e.eventSignature=t.signature,e.decode=(r,i)=>this.interface.decodeEventLog(t.eventFragment,r,i),e.args=t.args}catch{}}}class jv{constructor(e,t,r){ee(this,"interface",En(new.target,"getInterface")(t)),r==null?(ee(this,"provider",null),ee(this,"signer",null)):Ro.isSigner(r)?(ee(this,"provider",r.provider||null),ee(this,"signer",r)):el.isProvider(r)?(ee(this,"provider",r),ee(this,"signer",null)):Dt.throwArgumentError("invalid signer or provider","signerOrProvider",r),ee(this,"callStatic",{}),ee(this,"estimateGas",{}),ee(this,"functions",{}),ee(this,"populateTransaction",{}),ee(this,"filters",{});{const o={};Object.keys(this.interface.events).forEach(a=>{const l=this.interface.events[a];ee(this.filters,a,(...h)=>({address:this.address,topics:this.interface.encodeFilterTopics(l,h)})),o[l.name]||(o[l.name]=[]),o[l.name].push(a)}),Object.keys(o).forEach(a=>{const l=o[a];l.length===1?ee(this.filters,a,this.filters[l[0]]):Dt.warn(`Duplicate definition of ${a} (${l.join(", ")})`)})}if(ee(this,"_runningEvents",{}),ee(this,"_wrappedEmits",{}),e==null&&Dt.throwArgumentError("invalid contract address or ENS name","addressOrName",e),ee(this,"address",e),this.provider)ee(this,"resolvedAddress",za(this.provider,e));else try{ee(this,"resolvedAddress",Promise.resolve(rr(e)))}catch{Dt.throwError("provider is required to use ENS name as contract address",z.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}this.resolvedAddress.catch(o=>{});const i={},s={};Object.keys(this.interface.functions).forEach(o=>{const a=this.interface.functions[o];if(s[o]){Dt.warn(`Duplicate ABI entry for ${JSON.stringify(o)}`);return}s[o]=!0;{const l=a.name;i[`%${l}`]||(i[`%${l}`]=[]),i[`%${l}`].push(o)}this[o]==null&&ee(this,o,Jf(this,a,!0)),this.functions[o]==null&&ee(this.functions,o,Jf(this,a,!1)),this.callStatic[o]==null&&ee(this.callStatic,o,np(this,a,!0)),this.populateTransaction[o]==null&&ee(this.populateTransaction,o,Uv(this,a)),this.estimateGas[o]==null&&ee(this.estimateGas,o,zv(this,a))}),Object.keys(i).forEach(o=>{const a=i[o];if(a.length>1)return;o=o.substring(1);const l=a[0];try{this[o]==null&&ee(this,o,this[l])}catch{}this.functions[o]==null&&ee(this.functions,o,this.functions[l]),this.callStatic[o]==null&&ee(this.callStatic,o,this.callStatic[l]),this.populateTransaction[o]==null&&ee(this.populateTransaction,o,this.populateTransaction[l]),this.estimateGas[o]==null&&ee(this.estimateGas,o,this.estimateGas[l])})}static getContractAddress(e){return f1(e)}static getInterface(e){return qf.isInterface(e)?e:new qf(e)}deployed(){return this._deployed()}_deployed(e){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then(()=>this):this._deployedPromise=this.provider.getCode(this.address,e).then(t=>(t==="0x"&&Dt.throwError("contract not deployed",z.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this))),this._deployedPromise}fallback(e){this.signer||Dt.throwError("sending a transactions require a signer",z.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const t=Kt(e||{});return["from","to"].forEach(function(r){t[r]!=null&&Dt.throwError("cannot override "+r,z.errors.UNSUPPORTED_OPERATION,{operation:r})}),t.to=this.resolvedAddress,this.deployed().then(()=>this.signer.sendTransaction(t))}connect(e){typeof e=="string"&&(e=new vh(e,this.provider));const t=new this.constructor(this.address,this.interface,e);return this.deployTransaction&&ee(t,"deployTransaction",this.deployTransaction),t}attach(e){return new this.constructor(e,this.interface,this.signer||this.provider)}static isIndexed(e){return Tc.isIndexed(e)}_normalizeRunningEvent(e){return this._runningEvents[e.tag]?this._runningEvents[e.tag]:e}_getRunningEvent(e){if(typeof e=="string"){if(e==="error")return this._normalizeRunningEvent(new Hv);if(e==="event")return this._normalizeRunningEvent(new xo("event",null));if(e==="*")return this._normalizeRunningEvent(new Qf(this.address,this.interface));const t=this.interface.getEvent(e);return this._normalizeRunningEvent(new $f(this.address,this.interface,t))}if(e.topics&&e.topics.length>0){try{const r=e.topics[0];if(typeof r!="string")throw new Error("invalid topic");const i=this.interface.getEvent(r);return this._normalizeRunningEvent(new $f(this.address,this.interface,i,e.topics))}catch{}const t={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new xo(ip(t),t))}return this._normalizeRunningEvent(new Qf(this.address,this.interface))}_checkRunningEvents(e){if(e.listenerCount()===0){delete this._runningEvents[e.tag];const t=this._wrappedEmits[e.tag];t&&e.filter&&(this.provider.off(e.filter,t),delete this._wrappedEmits[e.tag])}}_wrapEvent(e,t,r){const i=Wn(t);return i.removeListener=()=>{r&&(e.removeListener(r),this._checkRunningEvents(e))},i.getBlock=()=>this.provider.getBlock(t.blockHash),i.getTransaction=()=>this.provider.getTransaction(t.transactionHash),i.getTransactionReceipt=()=>this.provider.getTransactionReceipt(t.transactionHash),e.prepareEvent(i),i}_addEventListener(e,t,r){if(this.provider||Dt.throwError("events require a provider or a signer with a provider",z.errors.UNSUPPORTED_OPERATION,{operation:"once"}),e.addListener(t,r),this._runningEvents[e.tag]=e,!this._wrappedEmits[e.tag]){const i=s=>{let o=this._wrapEvent(e,s,t);if(o.decodeError==null)try{const a=e.getEmit(o);this.emit(e.filter,...a)}catch(a){o.decodeError=a.error}e.filter!=null&&this.emit("event",o),o.decodeError!=null&&this.emit("error",o.decodeError,o)};this._wrappedEmits[e.tag]=i,e.filter!=null&&this.provider.on(e.filter,i)}}queryFilter(e,t,r){const i=this._getRunningEvent(e),s=Kt(i.filter);return typeof t=="string"&&yt(t,32)?(r!=null&&Dt.throwArgumentError("cannot specify toBlock with blockhash","toBlock",r),s.blockHash=t):(s.fromBlock=t??0,s.toBlock=r??"latest"),this.provider.getLogs(s).then(o=>o.map(a=>this._wrapEvent(i,a,null)))}on(e,t){return this._addEventListener(this._getRunningEvent(e),t,!1),this}once(e,t){return this._addEventListener(this._getRunningEvent(e),t,!0),this}emit(e,...t){if(!this.provider)return!1;const r=this._getRunningEvent(e),i=r.run(t)>0;return this._checkRunningEvents(r),i}listenerCount(e){return this.provider?e==null?Object.keys(this._runningEvents).reduce((t,r)=>t+this._runningEvents[r].listenerCount(),0):this._getRunningEvent(e).listenerCount():0}listeners(e){if(!this.provider)return[];if(e==null){const t=[];for(let r in this._runningEvents)this._runningEvents[r].listeners().forEach(i=>{t.push(i)});return t}return this._getRunningEvent(e).listeners()}removeAllListeners(e){if(!this.provider)return this;if(e==null){for(const r in this._runningEvents){const i=this._runningEvents[r];i.removeAllListeners(),this._checkRunningEvents(i)}return this}const t=this._getRunningEvent(e);return t.removeAllListeners(),this._checkRunningEvents(t),this}off(e,t){if(!this.provider)return this;const r=this._getRunningEvent(e);return r.removeListener(t),this._checkRunningEvents(r),this}removeListener(e,t){return this.off(e,t)}}class ar extends jv{}class sp{constructor(e){ee(this,"alphabet",e),ee(this,"base",e.length),ee(this,"_alphabetMap",{}),ee(this,"_leader",e.charAt(0));for(let t=0;t<e.length;t++)this._alphabetMap[e.charAt(t)]=t}encode(e){let t=fe(e);if(t.length===0)return"";let r=[0];for(let s=0;s<t.length;++s){let o=t[s];for(let a=0;a<r.length;++a)o+=r[a]<<8,r[a]=o%this.base,o=o/this.base|0;for(;o>0;)r.push(o%this.base),o=o/this.base|0}let i="";for(let s=0;t[s]===0&&s<t.length-1;++s)i+=this._leader;for(let s=r.length-1;s>=0;--s)i+=this.alphabet[r[s]];return i}decode(e){if(typeof e!="string")throw new TypeError("Expected String");let t=[];if(e.length===0)return new Uint8Array(t);t.push(0);for(let r=0;r<e.length;r++){let i=this._alphabetMap[e[r]];if(i===void 0)throw new Error("Non-base"+this.base+" character");let s=i;for(let o=0;o<t.length;++o)s+=t[o]*this.base,t[o]=s&255,s>>=8;for(;s>0;)t.push(s&255),s>>=8}for(let r=0;e[r]===this._leader&&r<e.length-1;++r)t.push(0);return fe(new Uint8Array(t.reverse()))}}new sp("abcdefghijklmnopqrstuvwxyz234567");const Lc=new sp("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");function Yf(n){return"0x"+fn.sha256().update(fe(n)).digest("hex")}const Wv="networks/5.8.0",Xf=new z(Wv);function Kv(n){return n&&typeof n.renetwork=="function"}function tn(n){const e=function(t,r){r==null&&(r={});const i=[];if(t.InfuraProvider&&r.infura!=="-")try{i.push(new t.InfuraProvider(n,r.infura))}catch{}if(t.EtherscanProvider&&r.etherscan!=="-")try{i.push(new t.EtherscanProvider(n,r.etherscan))}catch{}if(t.AlchemyProvider&&r.alchemy!=="-")try{i.push(new t.AlchemyProvider(n,r.alchemy))}catch{}if(t.PocketProvider&&r.pocket!=="-"){const s=["goerli","ropsten","rinkeby","sepolia"];try{const o=new t.PocketProvider(n,r.pocket);o.network&&s.indexOf(o.network.name)===-1&&i.push(o)}catch{}}if(t.CloudflareProvider&&r.cloudflare!=="-")try{i.push(new t.CloudflareProvider(n))}catch{}if(t.AnkrProvider&&r.ankr!=="-")try{const s=["ropsten"],o=new t.AnkrProvider(n,r.ankr);o.network&&s.indexOf(o.network.name)===-1&&i.push(o)}catch{}if(t.QuickNodeProvider&&r.quicknode!=="-")try{i.push(new t.QuickNodeProvider(n,r.quicknode))}catch{}if(i.length===0)return null;if(t.FallbackProvider){let s=1;return r.quorum!=null?s=r.quorum:n==="homestead"&&(s=2),new t.FallbackProvider(i,s)}return i[0]};return e.renetwork=function(t){return tn(t)},e}function qa(n,e){const t=function(r,i){return r.JsonRpcProvider?new r.JsonRpcProvider(n,e):null};return t.renetwork=function(r){return qa(n,r)},t}const Zf={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:tn("homestead")},ed={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:tn("ropsten")},td={chainId:63,name:"classicMordor",_defaultProvider:qa("https://www.ethercluster.com/mordor","classicMordor")},Zo={unspecified:{chainId:0,name:"unspecified"},homestead:Zf,mainnet:Zf,morden:{chainId:2,name:"morden"},ropsten:ed,testnet:ed,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:tn("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:tn("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:tn("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"sepolia",_defaultProvider:tn("sepolia")},holesky:{chainId:17e3,name:"holesky",_defaultProvider:tn("holesky")},classic:{chainId:61,name:"classic",_defaultProvider:qa("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:td,classicTestnet:td,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:qa("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:tn("matic")},maticmum:{chainId:80001,name:"maticmum",_defaultProvider:tn("maticmum")},optimism:{chainId:10,name:"optimism",_defaultProvider:tn("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},"optimism-sepolia":{chainId:11155420,name:"optimism-sepolia"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},"arbitrum-sepolia":{chainId:421614,name:"arbitrum-sepolia"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function Vv(n){if(n==null)return null;if(typeof n=="number"){for(const r in Zo){const i=Zo[r];if(i.chainId===n)return{name:i.name,chainId:i.chainId,ensAddress:i.ensAddress||null,_defaultProvider:i._defaultProvider||null}}return{chainId:n,name:"unknown"}}if(typeof n=="string"){const r=Zo[n];return r==null?null:{name:r.name,chainId:r.chainId,ensAddress:r.ensAddress,_defaultProvider:r._defaultProvider||null}}const e=Zo[n.name];if(!e)return typeof n.chainId!="number"&&Xf.throwArgumentError("invalid network chainId","network",n),n;n.chainId!==0&&n.chainId!==e.chainId&&Xf.throwArgumentError("network chainId mismatch","network",n);let t=n._defaultProvider||null;return t==null&&e._defaultProvider&&(Kv(e._defaultProvider)?t=e._defaultProvider.renetwork(n):t=e._defaultProvider),{name:n.name,chainId:e.chainId,ensAddress:n.ensAddress||e.ensAddress||null,_defaultProvider:t}}const Jv="web/5.8.0";var $v=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{h(r.next(u))}catch(g){o(g)}}function l(u){try{h(r.throw(u))}catch(g){o(g)}}function h(u){u.done?s(u.value):i(u.value).then(a,l)}h((r=r.apply(n,e||[])).next())})};function Qv(n,e){return $v(this,void 0,void 0,function*(){e==null&&(e={});const t={method:e.method||"GET",headers:e.headers||{},body:e.body||void 0};if(e.skipFetchSetup!==!0&&(t.mode="cors",t.cache="no-cache",t.credentials="same-origin",t.redirect="follow",t.referrer="client"),e.fetchOptions!=null){const o=e.fetchOptions;o.mode&&(t.mode=o.mode),o.cache&&(t.cache=o.cache),o.credentials&&(t.credentials=o.credentials),o.redirect&&(t.redirect=o.redirect),o.referrer&&(t.referrer=o.referrer)}const r=yield fetch(n,t),i=yield r.arrayBuffer(),s={};return r.headers.forEach?r.headers.forEach((o,a)=>{s[a.toLowerCase()]=o}):r.headers.keys().forEach(o=>{s[o.toLowerCase()]=r.headers.get(o)}),{headers:s,statusCode:r.status,statusMessage:r.statusText,body:fe(new Uint8Array(i))}})}var Yv=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{h(r.next(u))}catch(g){o(g)}}function l(u){try{h(r.throw(u))}catch(g){o(g)}}function h(u){u.done?s(u.value):i(u.value).then(a,l)}h((r=r.apply(n,e||[])).next())})};const Xr=new z(Jv);function rd(n){return new Promise(e=>{setTimeout(e,n)})}function Zn(n,e){if(n==null)return null;if(typeof n=="string")return n;if(fh(n)){if(e&&(e.split("/")[0]==="text"||e.split(";")[0].trim()==="application/json"))try{return To(n)}catch{}return ce(n)}return n}function Xv(n){return Hr(n.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16))))}function Zv(n,e,t){const r=typeof n=="object"&&n.throttleLimit!=null?n.throttleLimit:12;Xr.assertArgument(r>0&&r%1===0,"invalid connection throttle limit","connection.throttleLimit",r);const i=typeof n=="object"?n.throttleCallback:null,s=typeof n=="object"&&typeof n.throttleSlotInterval=="number"?n.throttleSlotInterval:100;Xr.assertArgument(s>0&&s%1===0,"invalid connection throttle slot interval","connection.throttleSlotInterval",s);const o=typeof n=="object"?!!n.errorPassThrough:!1,a={};let l=null;const h={method:"GET"};let u=!1,g=2*60*1e3;if(typeof n=="string")l=n;else if(typeof n=="object"){if((n==null||n.url==null)&&Xr.throwArgumentError("missing URL","connection.url",n),l=n.url,typeof n.timeout=="number"&&n.timeout>0&&(g=n.timeout),n.headers)for(const R in n.headers)a[R.toLowerCase()]={key:R,value:String(n.headers[R])},["if-none-match","if-modified-since"].indexOf(R.toLowerCase())>=0&&(u=!0);if(h.allowGzip=!!n.allowGzip,n.user!=null&&n.password!=null){l.substring(0,6)!=="https:"&&n.allowInsecureAuthentication!==!0&&Xr.throwError("basic authentication requires a secure https url",z.errors.INVALID_ARGUMENT,{argument:"url",url:l,user:n.user,password:"[REDACTED]"});const R=n.user+":"+n.password;a.authorization={key:"Authorization",value:"Basic "+E1(Hr(R))}}n.skipFetchSetup!=null&&(h.skipFetchSetup=!!n.skipFetchSetup),n.fetchOptions!=null&&(h.fetchOptions=Kt(n.fetchOptions))}const x=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),A=l?l.match(x):null;if(A)try{const R={statusCode:200,statusMessage:"OK",headers:{"content-type":A[1]||"text/plain"},body:A[2]?A1(A[3]):Xv(A[3])};let O=R.body;return t&&(O=t(R.body,R)),Promise.resolve(O)}catch(R){Xr.throwError("processing response error",z.errors.SERVER_ERROR,{body:Zn(A[1],A[2]),error:R,requestBody:null,requestMethod:"GET",url:l})}e&&(h.method="POST",h.body=e,a["content-type"]==null&&(a["content-type"]={key:"Content-Type",value:"application/octet-stream"}),a["content-length"]==null&&(a["content-length"]={key:"Content-Length",value:String(e.length)}));const E={};Object.keys(a).forEach(R=>{const O=a[R];E[O.key]=O.value}),h.headers=E;const I=function(){let R=null;return{promise:new Promise(function(U,q){g&&(R=setTimeout(()=>{R!=null&&(R=null,q(Xr.makeError("timeout",z.errors.TIMEOUT,{requestBody:Zn(h.body,E["content-type"]),requestMethod:h.method,timeout:g,url:l})))},g))}),cancel:function(){R!=null&&(clearTimeout(R),R=null)}}}(),T=function(){return Yv(this,void 0,void 0,function*(){for(let R=0;R<r;R++){let O=null;try{if(O=yield Qv(l,h),R<r){if(O.statusCode===301||O.statusCode===302){const U=O.headers.location||"";if(h.method==="GET"&&U.match(/^https:/)){l=O.headers.location;continue}}else if(O.statusCode===429){let U=!0;if(i&&(U=yield i(R,l)),U){let q=0;const W=O.headers["retry-after"];typeof W=="string"&&W.match(/^[1-9][0-9]*$/)?q=parseInt(W)*1e3:q=s*parseInt(String(Math.random()*Math.pow(2,R))),yield rd(q);continue}}}}catch(U){O=U.response,O==null&&(I.cancel(),Xr.throwError("missing response",z.errors.SERVER_ERROR,{requestBody:Zn(h.body,E["content-type"]),requestMethod:h.method,serverError:U,url:l}))}let B=O.body;if(u&&O.statusCode===304?B=null:!o&&(O.statusCode<200||O.statusCode>=300)&&(I.cancel(),Xr.throwError("bad response",z.errors.SERVER_ERROR,{status:O.statusCode,headers:O.headers,body:Zn(B,O.headers?O.headers["content-type"]:null),requestBody:Zn(h.body,E["content-type"]),requestMethod:h.method,url:l})),t)try{const U=yield t(B,O);return I.cancel(),U}catch(U){if(U.throttleRetry&&R<r){let q=!0;if(i&&(q=yield i(R,l)),q){const W=s*parseInt(String(Math.random()*Math.pow(2,R)));yield rd(W);continue}}I.cancel(),Xr.throwError("processing response error",z.errors.SERVER_ERROR,{body:Zn(B,O.headers?O.headers["content-type"]:null),error:U,requestBody:Zn(h.body,E["content-type"]),requestMethod:h.method,url:l})}return I.cancel(),B}return Xr.throwError("failed response",z.errors.SERVER_ERROR,{requestBody:Zn(h.body,E["content-type"]),requestMethod:h.method,url:l})})}();return Promise.race([I.promise,T])}function xh(n,e,t){let r=(s,o)=>{let a=null;if(s!=null)try{a=JSON.parse(To(s))}catch(l){Xr.throwError("invalid JSON",z.errors.SERVER_ERROR,{body:s,error:l})}return t&&(a=t(a,o)),a},i=null;if(e!=null){i=Hr(e);const s=typeof n=="string"?{url:n}:Kt(n);s.headers?Object.keys(s.headers).filter(a=>a.toLowerCase()==="content-type").length!==0||(s.headers=Kt(s.headers),s.headers["content-type"]="application/json"):s.headers={"content-type":"application/json"},n=s}return Zv(n,i,r)}function Js(n,e){return e||(e={}),e=Kt(e),e.floor==null&&(e.floor=0),e.ceiling==null&&(e.ceiling=1e4),e.interval==null&&(e.interval=250),new Promise(function(t,r){let i=null,s=!1;const o=()=>s?!1:(s=!0,i&&clearTimeout(i),!0);e.timeout&&(i=setTimeout(()=>{o()&&r(new Error("timeout"))},e.timeout));const a=e.retryLimit;let l=0;function h(){return n().then(function(u){if(u!==void 0)o()&&t(u);else if(e.oncePoll)e.oncePoll.once("poll",h);else if(e.onceBlock)e.onceBlock.once("block",h);else if(!s){if(l++,l>a){o()&&r(new Error("retry limit reached"));return}let g=e.interval*parseInt(String(Math.random()*Math.pow(2,l)));g<e.floor&&(g=e.floor),g>e.ceiling&&(g=e.ceiling),setTimeout(h,g)}return null},function(u){o()&&r(u)})}h()})}var Ga="qpzry9x8gf2tvdw0s3jn54khce6mua7l",Uc={};for(var ea=0;ea<Ga.length;ea++){var sc=Ga.charAt(ea);if(Uc[sc]!==void 0)throw new TypeError(sc+" is ambiguous");Uc[sc]=ea}function ys(n){var e=n>>25;return(n&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function op(n){for(var e=1,t=0;t<n.length;++t){var r=n.charCodeAt(t);if(r<33||r>126)return"Invalid prefix ("+n+")";e=ys(e)^r>>5}for(e=ys(e),t=0;t<n.length;++t){var i=n.charCodeAt(t);e=ys(e)^i&31}return e}function e6(n,e,t){if(t=t||90,n.length+7+e.length>t)throw new TypeError("Exceeds length limit");n=n.toLowerCase();var r=op(n);if(typeof r=="string")throw new Error(r);for(var i=n+"1",s=0;s<e.length;++s){var o=e[s];if(o>>5)throw new Error("Non 5-bit word");r=ys(r)^o,i+=Ga.charAt(o)}for(s=0;s<6;++s)r=ys(r);for(r^=1,s=0;s<6;++s){var a=r>>(5-s)*5&31;i+=Ga.charAt(a)}return i}function ap(n,e){if(e=e||90,n.length<8)return n+" too short";if(n.length>e)return"Exceeds length limit";var t=n.toLowerCase(),r=n.toUpperCase();if(n!==t&&n!==r)return"Mixed-case string "+n;n=t;var i=n.lastIndexOf("1");if(i===-1)return"No separator character for "+n;if(i===0)return"Missing prefix for "+n;var s=n.slice(0,i),o=n.slice(i+1);if(o.length<6)return"Data too short";var a=op(s);if(typeof a=="string")return a;for(var l=[],h=0;h<o.length;++h){var u=o.charAt(h),g=Uc[u];if(g===void 0)return"Unknown character "+u;a=ys(a)^g,!(h+6>=o.length)&&l.push(g)}return a!==1?"Invalid checksum for "+n:{prefix:s,words:l}}function t6(){var n=ap.apply(null,arguments);if(typeof n=="object")return n}function r6(n){var e=ap.apply(null,arguments);if(typeof e=="object")return e;throw new Error(e)}function sl(n,e,t,r){for(var i=0,s=0,o=(1<<t)-1,a=[],l=0;l<n.length;++l)for(i=i<<e|n[l],s+=e;s>=t;)s-=t,a.push(i>>s&o);if(r)s>0&&a.push(i<<t-s&o);else{if(s>=e)return"Excess padding";if(i<<t-s&o)return"Non-zero padding"}return a}function n6(n){var e=sl(n,8,5,!0);if(Array.isArray(e))return e}function i6(n){var e=sl(n,8,5,!0);if(Array.isArray(e))return e;throw new Error(e)}function s6(n){var e=sl(n,5,8,!1);if(Array.isArray(e))return e}function o6(n){var e=sl(n,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}var a6={decodeUnsafe:t6,decode:r6,encode:e6,toWordsUnsafe:n6,toWords:i6,fromWordsUnsafe:s6,fromWords:o6};const nd=Qa(a6),ol="providers/5.8.0",Gs=new z(ol);class le{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={},t=this.address.bind(this),r=this.bigNumber.bind(this),i=this.blockTag.bind(this),s=this.data.bind(this),o=this.hash.bind(this),a=this.hex.bind(this),l=this.number.bind(this),h=this.type.bind(this),u=g=>this.data(g,!0);return e.transaction={hash:o,type:h,accessList:le.allowNull(this.accessList.bind(this),null),blockHash:le.allowNull(o,null),blockNumber:le.allowNull(l,null),transactionIndex:le.allowNull(l,null),confirmations:le.allowNull(l,null),from:t,gasPrice:le.allowNull(r),maxPriorityFeePerGas:le.allowNull(r),maxFeePerGas:le.allowNull(r),gasLimit:r,to:le.allowNull(t,null),value:r,nonce:l,data:s,r:le.allowNull(this.uint256),s:le.allowNull(this.uint256),v:le.allowNull(l),creates:le.allowNull(t,null),raw:le.allowNull(s)},e.transactionRequest={from:le.allowNull(t),nonce:le.allowNull(l),gasLimit:le.allowNull(r),gasPrice:le.allowNull(r),maxPriorityFeePerGas:le.allowNull(r),maxFeePerGas:le.allowNull(r),to:le.allowNull(t),value:le.allowNull(r),data:le.allowNull(u),type:le.allowNull(l),accessList:le.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:l,blockNumber:l,transactionHash:o,address:t,topics:le.arrayOf(o),data:s,logIndex:l,blockHash:o},e.receipt={to:le.allowNull(this.address,null),from:le.allowNull(this.address,null),contractAddress:le.allowNull(t,null),transactionIndex:l,root:le.allowNull(a),gasUsed:r,logsBloom:le.allowNull(s),blockHash:o,transactionHash:o,logs:le.arrayOf(this.receiptLog.bind(this)),blockNumber:l,confirmations:le.allowNull(l,null),cumulativeGasUsed:r,effectiveGasPrice:le.allowNull(r),status:le.allowNull(l),type:h},e.block={hash:le.allowNull(o),parentHash:o,number:l,timestamp:l,nonce:le.allowNull(a),difficulty:this.difficulty.bind(this),gasLimit:r,gasUsed:r,miner:le.allowNull(t),extraData:s,transactions:le.allowNull(le.arrayOf(o)),baseFeePerGas:le.allowNull(r)},e.blockWithTransactions=Kt(e.block),e.blockWithTransactions.transactions=le.allowNull(le.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:le.allowNull(i,void 0),toBlock:le.allowNull(i,void 0),blockHash:le.allowNull(o,void 0),address:le.allowNull(t,void 0),topics:le.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:le.allowNull(l),blockHash:le.allowNull(o),transactionIndex:l,removed:le.allowNull(this.boolean.bind(this)),address:t,data:le.allowFalsish(s,"0x"),topics:le.arrayOf(o),transactionHash:o,logIndex:l},e}accessList(e){return Bs(e||[])}number(e){return e==="0x"?0:J.from(e).toNumber()}type(e){return e==="0x"||e==null?0:J.from(e).toNumber()}bigNumber(e){return J.from(e)}boolean(e){if(typeof e=="boolean")return e;if(typeof e=="string"){if(e=e.toLowerCase(),e==="true")return!0;if(e==="false")return!1}throw new Error("invalid boolean - "+e)}hex(e,t){return typeof e=="string"&&(!t&&e.substring(0,2)!=="0x"&&(e="0x"+e),yt(e))?e.toLowerCase():Gs.throwArgumentError("invalid hash","value",e)}data(e,t){const r=this.hex(e,t);if(r.length%2!==0)throw new Error("invalid data; odd-length - "+e);return r}address(e){return rr(e)}callAddress(e){if(!yt(e,32))return null;const t=rr(cr(e,12));return t===U2?null:t}contractAddress(e){return f1(e)}blockTag(e){if(e==null)return"latest";if(e==="earliest")return"0x0";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if(typeof e=="number"||yt(e))return dh(e);throw new Error("invalid blockTag")}hash(e,t){const r=this.hex(e,t);return Ui(r)!==32?Gs.throwArgumentError("invalid hash","value",e):r}difficulty(e){if(e==null)return null;const t=J.from(e);try{return t.toNumber()}catch{}return null}uint256(e){if(!yt(e))throw new Error("invalid uint256");return Ct(e,32)}_block(e,t){e.author!=null&&e.miner==null&&(e.miner=e.author);const r=e._difficulty!=null?e._difficulty:e.difficulty,i=le.check(t,e);return i._difficulty=r==null?null:J.from(r),i}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return le.check(this.formats.transactionRequest,e)}transactionResponse(e){e.gas!=null&&e.gasLimit==null&&(e.gasLimit=e.gas),e.to&&J.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),e.input!=null&&e.data==null&&(e.data=e.input),e.to==null&&e.creates==null&&(e.creates=this.contractAddress(e)),(e.type===1||e.type===2)&&e.accessList==null&&(e.accessList=[]);const t=le.check(this.formats.transaction,e);if(e.chainId!=null){let r=e.chainId;yt(r)&&(r=J.from(r).toNumber()),t.chainId=r}else{let r=e.networkId;r==null&&t.v==null&&(r=e.chainId),yt(r)&&(r=J.from(r).toNumber()),typeof r!="number"&&t.v!=null&&(r=(t.v-35)/2,r<0&&(r=0),r=parseInt(r)),typeof r!="number"&&(r=0),t.chainId=r}return t.blockHash&&t.blockHash.replace(/0/g,"")==="x"&&(t.blockHash=null),t}transaction(e){return Dv(e)}receiptLog(e){return le.check(this.formats.receiptLog,e)}receipt(e){const t=le.check(this.formats.receipt,e);if(t.root!=null)if(t.root.length<=4){const r=J.from(t.root).toNumber();r===0||r===1?(t.status!=null&&t.status!==r&&Gs.throwArgumentError("alt-root-status/status mismatch","value",{root:t.root,status:t.status}),t.status=r,delete t.root):Gs.throwArgumentError("invalid alt-root-status","value.root",t.root)}else t.root.length!==66&&Gs.throwArgumentError("invalid root hash","value.root",t.root);return t.status!=null&&(t.byzantium=!0),t}topics(e){return Array.isArray(e)?e.map(t=>this.topics(t)):e!=null?this.hash(e,!0):null}filter(e){return le.check(this.formats.filter,e)}filterLog(e){return le.check(this.formats.filterLog,e)}static check(e,t){const r={};for(const i in e)try{const s=e[i](t[i]);s!==void 0&&(r[i]=s)}catch(s){throw s.checkKey=i,s.checkValue=t[i],s}return r}static allowNull(e,t){return function(r){return r==null?t:e(r)}}static allowFalsish(e,t){return function(r){return r?e(r):t}}static arrayOf(e){return function(t){if(!Array.isArray(t))throw new Error("not an array");const r=[];return t.forEach(function(i){r.push(e(i))}),r}}}var Me=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{h(r.next(u))}catch(g){o(g)}}function l(u){try{h(r.throw(u))}catch(g){o(g)}}function h(u){u.done?s(u.value):i(u.value).then(a,l)}h((r=r.apply(n,e||[])).next())})};const Fe=new z(ol),l6=10;function id(n){return n==null?"null":(Ui(n)!==32&&Fe.throwArgumentError("invalid topic","topic",n),n.toLowerCase())}function sd(n){for(n=n.slice();n.length>0&&n[n.length-1]==null;)n.pop();return n.map(e=>{if(Array.isArray(e)){const t={};e.forEach(i=>{t[id(i)]=!0});const r=Object.keys(t);return r.sort(),r.join("|")}else return id(e)}).join("&")}function c6(n){return n===""?[]:n.split(/&/g).map(e=>{if(e==="")return[];const t=e.split("|").map(r=>r==="null"?null:r);return t.length===1?t[0]:t})}function ts(n){if(typeof n=="string"){if(n=n.toLowerCase(),Ui(n)===32)return"tx:"+n;if(n.indexOf(":")===-1)return n}else{if(Array.isArray(n))return"filter:*:"+sd(n);if(z3.isForkEvent(n))throw Fe.warn("not implemented"),new Error("not implemented");if(n&&typeof n=="object")return"filter:"+(n.address||"*")+":"+sd(n.topics||[])}throw new Error("invalid event - "+n)}function Hs(){return new Date().getTime()}function od(n){return new Promise(e=>{setTimeout(e,n)})}const h6=["block","network","pending","poll"];let u6=class{constructor(e,t,r){ee(this,"tag",e),ee(this,"listener",t),ee(this,"once",r),this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");return e[0]!=="tx"?null:e[1]}get filter(){const e=this.tag.split(":");if(e[0]!=="filter")return null;const t=e[1],r=c6(e[2]),i={};return r.length>0&&(i.topics=r),t&&t!=="*"&&(i.address=t),i}pollable(){return this.tag.indexOf(":")>=0||h6.indexOf(this.tag)>=0}};const f6={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function oc(n){return Ct(J.from(n).toHexString(),32)}function ad(n){return Lc.encode(mr([n,cr(Yf(Yf(n)),0,4)]))}const lp=new RegExp("^(ipfs)://(.*)$","i"),ld=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),lp,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function Ea(n,e){try{return To(_o(n,e))}catch{}return null}function _o(n,e){if(n==="0x")return null;const t=J.from(cr(n,e,e+32)).toNumber(),r=J.from(cr(n,t,t+32)).toNumber();return cr(n,t+32,t+32+r)}function ac(n){return n.match(/^ipfs:\/\/ipfs\//i)?n=n.substring(12):n.match(/^ipfs:\/\//i)?n=n.substring(7):Fe.throwArgumentError("unsupported IPFS format","link",n),`https://gateway.ipfs.io/ipfs/${n}`}function cd(n){const e=fe(n);if(e.length>32)throw new Error("internal; should not happen");const t=new Uint8Array(32);return t.set(e,32-e.length),t}function d6(n){if(n.length%32===0)return n;const e=new Uint8Array(Math.ceil(n.length/32)*32);return e.set(n),e}function cp(n){const e=[];let t=0;for(let r=0;r<n.length;r++)e.push(null),t+=32;for(let r=0;r<n.length;r++){const i=fe(n[r]);e[r]=cd(t),e.push(cd(i.length)),e.push(d6(i)),t+=32+Math.ceil(i.length/32)*32}return Ar(e)}class hd{constructor(e,t,r,i){ee(this,"provider",e),ee(this,"name",r),ee(this,"address",e.formatter.address(t)),ee(this,"_resolvedAddress",i)}supportsWildcard(){return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then(e=>J.from(e).eq(1)).catch(e=>{if(e.code===z.errors.CALL_EXCEPTION)return!1;throw this._supportsEip2544=null,e})),this._supportsEip2544}_fetch(e,t){return Me(this,void 0,void 0,function*(){const r={to:this.address,ccipReadEnabled:!0,data:Ar([e,va(this.name),t||"0x"])};let i=!1;(yield this.supportsWildcard())&&(i=!0,r.data=Ar(["0x9061b923",cp([k3(this.name),r.data])]));try{let s=yield this.provider.call(r);return fe(s).length%32===4&&Fe.throwError("resolver threw error",z.errors.CALL_EXCEPTION,{transaction:r,data:s}),i&&(s=_o(s,0)),s}catch(s){if(s.code===z.errors.CALL_EXCEPTION)return null;throw s}})}_fetchBytes(e,t){return Me(this,void 0,void 0,function*(){const r=yield this._fetch(e,t);return r!=null?_o(r,0):null})}_getAddress(e,t){const r=f6[String(e)];if(r==null&&Fe.throwError(`unsupported coin type: ${e}`,z.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),r.ilk==="eth")return this.provider.formatter.address(t);const i=fe(t);if(r.p2pkh!=null){const s=t.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(s){const o=parseInt(s[1],16);if(s[2].length===o*2&&o>=1&&o<=75)return ad(mr([[r.p2pkh],"0x"+s[2]]))}}if(r.p2sh!=null){const s=t.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(s){const o=parseInt(s[1],16);if(s[2].length===o*2&&o>=1&&o<=75)return ad(mr([[r.p2sh],"0x"+s[2]]))}}if(r.prefix!=null){const s=i[1];let o=i[0];if(o===0?s!==20&&s!==32&&(o=-1):o=-1,o>=0&&i.length===2+s&&s>=1&&s<=75){const a=nd.toWords(i.slice(2));return a.unshift(o),nd.encode(r.prefix,a)}}return null}getAddress(e){return Me(this,void 0,void 0,function*(){if(e==null&&(e=60),e===60)try{const i=yield this._fetch("0x3b3b57de");return i==="0x"||i===H2?null:this.provider.formatter.callAddress(i)}catch(i){if(i.code===z.errors.CALL_EXCEPTION)return null;throw i}const t=yield this._fetchBytes("0xf1cb7e06",oc(e));if(t==null||t==="0x")return null;const r=this._getAddress(e,t);return r==null&&Fe.throwError("invalid or unsupported coin data",z.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:t}),r})}getAvatar(){return Me(this,void 0,void 0,function*(){const e=[{type:"name",content:this.name}];try{const t=yield this.getText("avatar");if(t==null)return null;for(let r=0;r<ld.length;r++){const i=t.match(ld[r]);if(i==null)continue;const s=i[1].toLowerCase();switch(s){case"https":return e.push({type:"url",content:t}),{linkage:e,url:t};case"data":return e.push({type:"data",content:t}),{linkage:e,url:t};case"ipfs":return e.push({type:"ipfs",content:t}),{linkage:e,url:ac(t)};case"erc721":case"erc1155":{const o=s==="erc721"?"0xc87b56dd":"0x0e89341c";e.push({type:s,content:t});const a=this._resolvedAddress||(yield this.getAddress()),l=(i[2]||"").split("/");if(l.length!==2)return null;const h=yield this.provider.formatter.address(l[0]),u=Ct(J.from(l[1]).toHexString(),32);if(s==="erc721"){const I=this.provider.formatter.callAddress(yield this.provider.call({to:h,data:Ar(["0x6352211e",u])}));if(a!==I)return null;e.push({type:"owner",content:I})}else if(s==="erc1155"){const I=J.from(yield this.provider.call({to:h,data:Ar(["0x00fdd58e",Ct(a,32),u])}));if(I.isZero())return null;e.push({type:"balance",content:I.toString()})}const g={to:this.provider.formatter.address(l[0]),data:Ar([o,u])};let x=Ea(yield this.provider.call(g),0);if(x==null)return null;e.push({type:"metadata-url-base",content:x}),s==="erc1155"&&(x=x.replace("{id}",u.substring(2)),e.push({type:"metadata-url-expanded",content:x})),x.match(/^ipfs:/i)&&(x=ac(x)),e.push({type:"metadata-url",content:x});const A=yield xh(x);if(!A)return null;e.push({type:"metadata",content:JSON.stringify(A)});let E=A.image;if(typeof E!="string")return null;if(!E.match(/^(https:\/\/|data:)/i)){if(E.match(lp)==null)return null;e.push({type:"url-ipfs",content:E}),E=ac(E)}return e.push({type:"url",content:E}),{linkage:e,url:E}}}}}catch{}return null})}getContentHash(){return Me(this,void 0,void 0,function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(e==null||e==="0x")return null;const t=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const o=parseInt(t[3],16);if(t[4].length===o*2)return"ipfs://"+Lc.encode("0x"+t[1])}const r=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(r){const o=parseInt(r[3],16);if(r[4].length===o*2)return"ipns://"+Lc.encode("0x"+r[1])}const i=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(i&&i[1].length===32*2)return"bzz://"+i[1];const s=e.match(/^0x90b2c605([0-9a-f]*)$/);if(s&&s[1].length===34*2){const o={"=":"","+":"-","/":"_"};return"sia://"+E1("0x"+s[1]).replace(/[=+\/]/g,l=>o[l])}return Fe.throwError("invalid or unsupported content hash data",z.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})})}getText(e){return Me(this,void 0,void 0,function*(){let t=Hr(e);t=mr([oc(64),oc(t.length),t]),t.length%32!==0&&(t=mr([t,Ct("0x",32-e.length%32)]));const r=yield this._fetchBytes("0x59d1d43c",ce(t));return r==null||r==="0x"?null:To(r)})}}let lc=null,p6=1;class m6 extends el{constructor(e){if(super(),this._events=[],this._emitted={block:-2},this.disableCcipRead=!1,this.formatter=new.target.getFormatter(),ee(this,"anyNetwork",e==="any"),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch(t=>{}),this._ready().catch(t=>{});else{const t=En(new.target,"getNetwork")(e);t?(ee(this,"_network",t),this.emit("network",t,null)):Fe.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._maxFilterBlockRange=10,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return Me(this,void 0,void 0,function*(){if(this._network==null){let e=null;if(this._networkPromise)try{e=yield this._networkPromise}catch{}e==null&&(e=yield this.detectNetwork()),e||Fe.throwError("no network detected",z.errors.UNKNOWN_ERROR,{}),this._network==null&&(this.anyNetwork?this._network=e:ee(this,"_network",e),this.emit("network",e,null))}return this._network})}get ready(){return Js(()=>this._ready().then(e=>e,e=>{if(!(e.code===z.errors.NETWORK_ERROR&&e.event==="noNetwork"))throw e}))}static getFormatter(){return lc==null&&(lc=new le),lc}static getNetwork(e){return Vv(e??"homestead")}ccipReadFetch(e,t,r){return Me(this,void 0,void 0,function*(){if(this.disableCcipRead||r.length===0)return null;const i=e.to.toLowerCase(),s=t.toLowerCase(),o=[];for(let a=0;a<r.length;a++){const l=r[a],h=l.replace("{sender}",i).replace("{data}",s),u=l.indexOf("{data}")>=0?null:JSON.stringify({data:s,sender:i}),g=yield xh({url:h,errorPassThrough:!0},u,(A,E)=>(A.status=E.statusCode,A));if(g.data)return g.data;const x=g.message||"unknown error";if(g.status>=400&&g.status<500)return Fe.throwError(`response not found during CCIP fetch: ${x}`,z.errors.SERVER_ERROR,{url:l,errorMessage:x});o.push(x)}return Fe.throwError(`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,z.errors.SERVER_ERROR,{urls:r,errorMessages:o})})}_getInternalBlockNumber(e){return Me(this,void 0,void 0,function*(){if(yield this._ready(),e>0)for(;this._internalBlockNumber;){const i=this._internalBlockNumber;try{const s=yield i;if(Hs()-s.respTime<=e)return s.blockNumber;break}catch{if(this._internalBlockNumber===i)break}}const t=Hs(),r=Ht({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then(i=>null,i=>i)}).then(({blockNumber:i,networkError:s})=>{if(s)throw this._internalBlockNumber===r&&(this._internalBlockNumber=null),s;const o=Hs();return i=J.from(i).toNumber(),i<this._maxInternalBlockNumber&&(i=this._maxInternalBlockNumber),this._maxInternalBlockNumber=i,this._setFastBlockNumber(i),{blockNumber:i,reqTime:t,respTime:o}});return this._internalBlockNumber=r,r.catch(i=>{this._internalBlockNumber===r&&(this._internalBlockNumber=null)}),(yield r).blockNumber})}poll(){return Me(this,void 0,void 0,function*(){const e=p6++,t=[];let r=null;try{r=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(i){this.emit("error",i);return}if(this._setFastBlockNumber(r),this.emit("poll",e,r),r===this._lastBlockNumber){this.emit("didPoll",e);return}if(this._emitted.block===-2&&(this._emitted.block=r-1),Math.abs(this._emitted.block-r)>1e3)Fe.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${r})`),this.emit("error",Fe.makeError("network block skew detected",z.errors.NETWORK_ERROR,{blockNumber:r,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",r);else for(let i=this._emitted.block+1;i<=r;i++)this.emit("block",i);this._emitted.block!==r&&(this._emitted.block=r,Object.keys(this._emitted).forEach(i=>{if(i==="block")return;const s=this._emitted[i];s!=="pending"&&r-s>12&&delete this._emitted[i]})),this._lastBlockNumber===-2&&(this._lastBlockNumber=r-1),this._events.forEach(i=>{switch(i.type){case"tx":{const s=i.hash;let o=this.getTransactionReceipt(s).then(a=>(!a||a.blockNumber==null||(this._emitted["t:"+s]=a.blockNumber,this.emit(s,a)),null)).catch(a=>{this.emit("error",a)});t.push(o);break}case"filter":{if(!i._inflight){i._inflight=!0,i._lastBlockNumber===-2&&(i._lastBlockNumber=r-1);const s=i.filter;s.fromBlock=i._lastBlockNumber+1,s.toBlock=r;const o=s.toBlock-this._maxFilterBlockRange;o>s.fromBlock&&(s.fromBlock=o),s.fromBlock<0&&(s.fromBlock=0);const a=this.getLogs(s).then(l=>{i._inflight=!1,l.length!==0&&l.forEach(h=>{h.blockNumber>i._lastBlockNumber&&(i._lastBlockNumber=h.blockNumber),this._emitted["b:"+h.blockHash]=h.blockNumber,this._emitted["t:"+h.transactionHash]=h.blockNumber,this.emit(s,h)})}).catch(l=>{this.emit("error",l),i._inflight=!1});t.push(a)}break}}}),this._lastBlockNumber=r,Promise.all(t).then(()=>{this.emit("didPoll",e)}).catch(i=>{this.emit("error",i)})})}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return Me(this,void 0,void 0,function*(){return Fe.throwError("provider does not support network detection",z.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})})}getNetwork(){return Me(this,void 0,void 0,function*(){const e=yield this._ready(),t=yield this.detectNetwork();if(e.chainId!==t.chainId){if(this.anyNetwork)return this._network=t,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",t,e),yield od(0),this._network;const r=Fe.makeError("underlying network changed",z.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:t});throw this.emit("error",r),r}return e})}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then(e=>{this._setFastBlockNumber(e)},e=>{}),this._fastBlockNumber!=null?this._fastBlockNumber:-1}get polling(){return this._poller!=null}set polling(e){e&&!this._poller?(this._poller=setInterval(()=>{this.poll()},this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout(()=>{this.poll(),this._bootstrapPoll=setTimeout(()=>{this._poller||this.poll(),this._bootstrapPoll=null},this.pollingInterval)},0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if(typeof e!="number"||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval(()=>{this.poll()},this._pollingInterval))}_getFastBlockNumber(){const e=Hs();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then(t=>((this._fastBlockNumber==null||t>this._fastBlockNumber)&&(this._fastBlockNumber=t),this._fastBlockNumber))),this._fastBlockNumberPromise}_setFastBlockNumber(e){this._fastBlockNumber!=null&&e<this._fastBlockNumber||(this._fastQueryDate=Hs(),(this._fastBlockNumber==null||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,t,r){return Me(this,void 0,void 0,function*(){return this._waitForTransaction(e,t??1,r||0,null)})}_waitForTransaction(e,t,r,i){return Me(this,void 0,void 0,function*(){const s=yield this.getTransactionReceipt(e);return(s?s.confirmations:0)>=t?s:new Promise((o,a)=>{const l=[];let h=!1;const u=function(){return h?!0:(h=!0,l.forEach(x=>{x()}),!1)},g=x=>{x.confirmations<t||u()||o(x)};if(this.on(e,g),l.push(()=>{this.removeListener(e,g)}),i){let x=i.startBlock,A=null;const E=I=>Me(this,void 0,void 0,function*(){h||(yield od(1e3),this.getTransactionCount(i.from).then(T=>Me(this,void 0,void 0,function*(){if(!h){if(T<=i.nonce)x=I;else{{const R=yield this.getTransaction(e);if(R&&R.blockNumber!=null)return}for(A==null&&(A=x-3,A<i.startBlock&&(A=i.startBlock));A<=I;){if(h)return;const R=yield this.getBlockWithTransactions(A);for(let O=0;O<R.transactions.length;O++){const B=R.transactions[O];if(B.hash===e)return;if(B.from===i.from&&B.nonce===i.nonce){if(h)return;const U=yield this.waitForTransaction(B.hash,t);if(u())return;let q="replaced";B.data===i.data&&B.to===i.to&&B.value.eq(i.value)?q="repriced":B.data==="0x"&&B.from===B.to&&B.value.isZero()&&(q="cancelled"),a(Fe.makeError("transaction was replaced",z.errors.TRANSACTION_REPLACED,{cancelled:q==="replaced"||q==="cancelled",reason:q,replacement:this._wrapTransaction(B),hash:e,receipt:U}));return}}A++}}h||this.once("block",E)}}),T=>{h||this.once("block",E)}))});if(h)return;this.once("block",E),l.push(()=>{this.removeListener("block",E)})}if(typeof r=="number"&&r>0){const x=setTimeout(()=>{u()||a(Fe.makeError("timeout exceeded",z.errors.TIMEOUT,{timeout:r}))},r);x.unref&&x.unref(),l.push(()=>{clearTimeout(x)})}})})}getBlockNumber(){return Me(this,void 0,void 0,function*(){return this._getInternalBlockNumber(0)})}getGasPrice(){return Me(this,void 0,void 0,function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return J.from(e)}catch(t){return Fe.throwError("bad result from backend",z.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:t})}})}getBalance(e,t){return Me(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Ht({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),i=yield this.perform("getBalance",r);try{return J.from(i)}catch(s){return Fe.throwError("bad result from backend",z.errors.SERVER_ERROR,{method:"getBalance",params:r,result:i,error:s})}})}getTransactionCount(e,t){return Me(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Ht({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),i=yield this.perform("getTransactionCount",r);try{return J.from(i).toNumber()}catch(s){return Fe.throwError("bad result from backend",z.errors.SERVER_ERROR,{method:"getTransactionCount",params:r,result:i,error:s})}})}getCode(e,t){return Me(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Ht({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),i=yield this.perform("getCode",r);try{return ce(i)}catch(s){return Fe.throwError("bad result from backend",z.errors.SERVER_ERROR,{method:"getCode",params:r,result:i,error:s})}})}getStorageAt(e,t,r){return Me(this,void 0,void 0,function*(){yield this.getNetwork();const i=yield Ht({address:this._getAddress(e),blockTag:this._getBlockTag(r),position:Promise.resolve(t).then(o=>dh(o))}),s=yield this.perform("getStorageAt",i);try{return ce(s)}catch(o){return Fe.throwError("bad result from backend",z.errors.SERVER_ERROR,{method:"getStorageAt",params:i,result:s,error:o})}})}_wrapTransaction(e,t,r){if(t!=null&&Ui(t)!==32)throw new Error("invalid response - sendTransaction");const i=e;return t!=null&&e.hash!==t&&Fe.throwError("Transaction hash mismatch from Provider.sendTransaction.",z.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:t}),i.wait=(s,o)=>Me(this,void 0,void 0,function*(){s==null&&(s=1),o==null&&(o=0);let a;s!==0&&r!=null&&(a={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:r});const l=yield this._waitForTransaction(e.hash,s,o,a);return l==null&&s===0?null:(this._emitted["t:"+e.hash]=l.blockNumber,l.status===0&&Fe.throwError("transaction failed",z.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:l}),l)}),i}sendTransaction(e){return Me(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Promise.resolve(e).then(s=>ce(s)),r=this.formatter.transaction(e);r.confirmations==null&&(r.confirmations=0);const i=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const s=yield this.perform("sendTransaction",{signedTransaction:t});return this._wrapTransaction(r,s,i)}catch(s){throw s.transaction=r,s.transactionHash=r.hash,s}})}_getTransactionRequest(e){return Me(this,void 0,void 0,function*(){const t=yield e,r={};return["from","to"].forEach(i=>{t[i]!=null&&(r[i]=Promise.resolve(t[i]).then(s=>s?this._getAddress(s):null))}),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach(i=>{t[i]!=null&&(r[i]=Promise.resolve(t[i]).then(s=>s?J.from(s):null))}),["type"].forEach(i=>{t[i]!=null&&(r[i]=Promise.resolve(t[i]).then(s=>s??null))}),t.accessList&&(r.accessList=this.formatter.accessList(t.accessList)),["data"].forEach(i=>{t[i]!=null&&(r[i]=Promise.resolve(t[i]).then(s=>s?ce(s):null))}),this.formatter.transactionRequest(yield Ht(r))})}_getFilter(e){return Me(this,void 0,void 0,function*(){e=yield e;const t={};return e.address!=null&&(t.address=this._getAddress(e.address)),["blockHash","topics"].forEach(r=>{e[r]!=null&&(t[r]=e[r])}),["fromBlock","toBlock"].forEach(r=>{e[r]!=null&&(t[r]=this._getBlockTag(e[r]))}),this.formatter.filter(yield Ht(t))})}_call(e,t,r){return Me(this,void 0,void 0,function*(){r>=l6&&Fe.throwError("CCIP read exceeded maximum redirections",z.errors.SERVER_ERROR,{redirects:r,transaction:e});const i=e.to,s=yield this.perform("call",{transaction:e,blockTag:t});if(r>=0&&t==="latest"&&i!=null&&s.substring(0,10)==="0x556f1830"&&Ui(s)%32===4)try{const o=cr(s,4),a=cr(o,0,32);J.from(a).eq(i)||Fe.throwError("CCIP Read sender did not match",z.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const l=[],h=J.from(cr(o,32,64)).toNumber(),u=J.from(cr(o,h,h+32)).toNumber(),g=cr(o,h+32);for(let R=0;R<u;R++){const O=Ea(g,R*32);O==null&&Fe.throwError("CCIP Read contained corrupt URL string",z.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s}),l.push(O)}const x=_o(o,64);J.from(cr(o,100,128)).isZero()||Fe.throwError("CCIP Read callback selector included junk",z.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const A=cr(o,96,100),E=_o(o,128),I=yield this.ccipReadFetch(e,x,l);I==null&&Fe.throwError("CCIP Read disabled or provided no URLs",z.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const T={to:i,data:Ar([A,cp([I,E])])};return this._call(T,t,r+1)}catch(o){if(o.code===z.errors.SERVER_ERROR)throw o}try{return ce(s)}catch(o){return Fe.throwError("bad result from backend",z.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:t},result:s,error:o})}})}call(e,t){return Me(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Ht({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(t),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});return this._call(r.transaction,r.blockTag,r.ccipReadEnabled?0:-1)})}estimateGas(e){return Me(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Ht({transaction:this._getTransactionRequest(e)}),r=yield this.perform("estimateGas",t);try{return J.from(r)}catch(i){return Fe.throwError("bad result from backend",z.errors.SERVER_ERROR,{method:"estimateGas",params:t,result:r,error:i})}})}_getAddress(e){return Me(this,void 0,void 0,function*(){e=yield e,typeof e!="string"&&Fe.throwArgumentError("invalid address or ENS name","name",e);const t=yield this.resolveName(e);return t==null&&Fe.throwError("ENS name not configured",z.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),t})}_getBlock(e,t){return Me(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;let r=-128;const i={includeTransactions:!!t};if(yt(e,32))i.blockHash=e;else try{i.blockTag=yield this._getBlockTag(e),yt(i.blockTag)&&(r=parseInt(i.blockTag.substring(2),16))}catch{Fe.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return Js(()=>Me(this,void 0,void 0,function*(){const s=yield this.perform("getBlock",i);if(s==null)return i.blockHash!=null&&this._emitted["b:"+i.blockHash]==null||i.blockTag!=null&&r>this._emitted.block?null:void 0;if(t){let o=null;for(let l=0;l<s.transactions.length;l++){const h=s.transactions[l];if(h.blockNumber==null)h.confirmations=0;else if(h.confirmations==null){o==null&&(o=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let u=o-h.blockNumber+1;u<=0&&(u=1),h.confirmations=u}}const a=this.formatter.blockWithTransactions(s);return a.transactions=a.transactions.map(l=>this._wrapTransaction(l)),a}return this.formatter.block(s)}),{oncePoll:this})})}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return Me(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return Js(()=>Me(this,void 0,void 0,function*(){const r=yield this.perform("getTransaction",t);if(r==null)return this._emitted["t:"+e]==null?null:void 0;const i=this.formatter.transactionResponse(r);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let o=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;o<=0&&(o=1),i.confirmations=o}return this._wrapTransaction(i)}),{oncePoll:this})})}getTransactionReceipt(e){return Me(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return Js(()=>Me(this,void 0,void 0,function*(){const r=yield this.perform("getTransactionReceipt",t);if(r==null)return this._emitted["t:"+e]==null?null:void 0;if(r.blockHash==null)return;const i=this.formatter.receipt(r);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let o=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;o<=0&&(o=1),i.confirmations=o}return i}),{oncePoll:this})})}getLogs(e){return Me(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Ht({filter:this._getFilter(e)}),r=yield this.perform("getLogs",t);return r.forEach(i=>{i.removed==null&&(i.removed=!1)}),le.arrayOf(this.formatter.filterLog.bind(this.formatter))(r)})}getEtherPrice(){return Me(this,void 0,void 0,function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})})}_getBlockTag(e){return Me(this,void 0,void 0,function*(){if(e=yield e,typeof e=="number"&&e<0){e%1&&Fe.throwArgumentError("invalid BlockTag","blockTag",e);let t=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return t+=e,t<0&&(t=0),this.formatter.blockTag(t)}return this.formatter.blockTag(e)})}getResolver(e){return Me(this,void 0,void 0,function*(){let t=e;for(;;){if(t===""||t==="."||e!=="eth"&&t==="eth")return null;const r=yield this._getResolver(t,"getResolver");if(r!=null){const i=new hd(this,r,e);return t!==e&&!(yield i.supportsWildcard())?null:i}t=t.split(".").slice(1).join(".")}})}_getResolver(e,t){return Me(this,void 0,void 0,function*(){t==null&&(t="ENS");const r=yield this.getNetwork();r.ensAddress||Fe.throwError("network does not support ENS",z.errors.UNSUPPORTED_OPERATION,{operation:t,network:r.name});try{const i=yield this.call({to:r.ensAddress,data:"0x0178b8bf"+va(e).substring(2)});return this.formatter.callAddress(i)}catch{}return null})}resolveName(e){return Me(this,void 0,void 0,function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(r){if(yt(e))throw r}typeof e!="string"&&Fe.throwArgumentError("invalid ENS name","name",e);const t=yield this.getResolver(e);return t?yield t.getAddress():null})}lookupAddress(e){return Me(this,void 0,void 0,function*(){e=yield e,e=this.formatter.address(e);const t=e.substring(2).toLowerCase()+".addr.reverse",r=yield this._getResolver(t,"lookupAddress");if(r==null)return null;const i=Ea(yield this.call({to:r,data:"0x691f3431"+va(t).substring(2)}),0);return(yield this.resolveName(i))!=e?null:i})}getAvatar(e){return Me(this,void 0,void 0,function*(){let t=null;if(yt(e)){const s=this.formatter.address(e).substring(2).toLowerCase()+".addr.reverse",o=yield this._getResolver(s,"getAvatar");if(!o)return null;t=new hd(this,o,s);try{const a=yield t.getAvatar();if(a)return a.url}catch(a){if(a.code!==z.errors.CALL_EXCEPTION)throw a}try{const a=Ea(yield this.call({to:o,data:"0x691f3431"+va(s).substring(2)}),0);t=yield this.getResolver(a)}catch(a){if(a.code!==z.errors.CALL_EXCEPTION)throw a;return null}}else if(t=yield this.getResolver(e),!t)return null;const r=yield t.getAvatar();return r==null?null:r.url})}perform(e,t){return Fe.throwError(e+" not implemented",z.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter(t=>t.pollable()).length>0}_stopEvent(e){this.polling=this._events.filter(t=>t.pollable()).length>0}_addEventListener(e,t,r){const i=new u6(ts(e),t,r);return this._events.push(i),this._startEvent(i),this}on(e,t){return this._addEventListener(e,t,!1)}once(e,t){return this._addEventListener(e,t,!0)}emit(e,...t){let r=!1,i=[],s=ts(e);return this._events=this._events.filter(o=>o.tag!==s?!0:(setTimeout(()=>{o.listener.apply(this,t)},0),r=!0,o.once?(i.push(o),!1):!0)),i.forEach(o=>{this._stopEvent(o)}),r}listenerCount(e){if(!e)return this._events.length;let t=ts(e);return this._events.filter(r=>r.tag===t).length}listeners(e){if(e==null)return this._events.map(r=>r.listener);let t=ts(e);return this._events.filter(r=>r.tag===t).map(r=>r.listener)}off(e,t){if(t==null)return this.removeAllListeners(e);const r=[];let i=!1,s=ts(e);return this._events=this._events.filter(o=>o.tag!==s||o.listener!=t||i?!0:(i=!0,r.push(o),!1)),r.forEach(o=>{this._stopEvent(o)}),this}removeAllListeners(e){let t=[];if(e==null)t=this._events,this._events=[];else{const r=ts(e);this._events=this._events.filter(i=>i.tag!==r?!0:(t.push(i),!1))}return t.forEach(r=>{this._stopEvent(r)}),this}}var zn=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{h(r.next(u))}catch(g){o(g)}}function l(u){try{h(r.throw(u))}catch(g){o(g)}}function h(u){u.done?s(u.value):i(u.value).then(a,l)}h((r=r.apply(n,e||[])).next())})};const jt=new z(ol),g6=["call","estimateGas"];function oo(n,e){if(n==null)return null;if(typeof n.message=="string"&&n.message.match("reverted")){const t=yt(n.data)?n.data:null;if(!e||t)return{message:n.message,data:t}}if(typeof n=="object"){for(const t in n){const r=oo(n[t],e);if(r)return r}return null}if(typeof n=="string")try{return oo(JSON.parse(n),e)}catch{}return null}function hp(n,e,t){const r=t.transaction||t.signedTransaction;if(n==="call"){const s=oo(e,!0);if(s)return s.data;jt.throwError("missing revert data in call exception; Transaction reverted without a reason string",z.errors.CALL_EXCEPTION,{data:"0x",transaction:r,error:e})}if(n==="estimateGas"){let s=oo(e.body,!1);s==null&&(s=oo(e,!1)),s&&jt.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",z.errors.UNPREDICTABLE_GAS_LIMIT,{reason:s.message,method:n,transaction:r,error:e})}let i=e.message;throw e.code===z.errors.SERVER_ERROR&&e.error&&typeof e.error.message=="string"?i=e.error.message:typeof e.body=="string"?i=e.body:typeof e.responseText=="string"&&(i=e.responseText),i=(i||"").toLowerCase(),i.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)&&jt.throwError("insufficient funds for intrinsic transaction cost",z.errors.INSUFFICIENT_FUNDS,{error:e,method:n,transaction:r}),i.match(/nonce (is )?too low/i)&&jt.throwError("nonce has already been used",z.errors.NONCE_EXPIRED,{error:e,method:n,transaction:r}),i.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&jt.throwError("replacement fee too low",z.errors.REPLACEMENT_UNDERPRICED,{error:e,method:n,transaction:r}),i.match(/only replay-protected/i)&&jt.throwError("legacy pre-eip-155 transactions not supported",z.errors.UNSUPPORTED_OPERATION,{error:e,method:n,transaction:r}),g6.indexOf(n)>=0&&i.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)&&jt.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",z.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:n,transaction:r}),e}function ud(n){return new Promise(function(e){setTimeout(e,n)})}function y6(n){if(n.error){const e=new Error(n.error.message);throw e.code=n.error.code,e.data=n.error.data,e}return n.result}function js(n){return n&&n.toLowerCase()}const zc={};class up extends Ro{constructor(e,t,r){if(super(),e!==zc)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");ee(this,"provider",t),r==null&&(r=0),typeof r=="string"?(ee(this,"_address",this.provider.formatter.address(r)),ee(this,"_index",null)):typeof r=="number"?(ee(this,"_index",r),ee(this,"_address",null)):jt.throwArgumentError("invalid address or index","addressOrIndex",r)}connect(e){return jt.throwError("cannot alter JSON-RPC Signer connection",z.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new v6(zc,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then(e=>(e.length<=this._index&&jt.throwError("unknown account #"+this._index,z.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index])))}sendUncheckedTransaction(e){e=Kt(e);const t=this.getAddress().then(r=>(r&&(r=r.toLowerCase()),r));if(e.gasLimit==null){const r=Kt(e);r.from=t,e.gasLimit=this.provider.estimateGas(r)}return e.to!=null&&(e.to=Promise.resolve(e.to).then(r=>zn(this,void 0,void 0,function*(){if(r==null)return null;const i=yield this.provider.resolveName(r);return i==null&&jt.throwArgumentError("provided ENS name resolves to null","tx.to",r),i}))),Ht({tx:Ht(e),sender:t}).then(({tx:r,sender:i})=>{r.from!=null?r.from.toLowerCase()!==i&&jt.throwArgumentError("from address mismatch","transaction",e):r.from=i;const s=this.provider.constructor.hexlifyTransaction(r,{from:!0});return this.provider.send("eth_sendTransaction",[s]).then(o=>o,o=>(typeof o.message=="string"&&o.message.match(/user denied/i)&&jt.throwError("user rejected transaction",z.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:r}),hp("sendTransaction",o,s)))})}signTransaction(e){return jt.throwError("signing transactions is unsupported",z.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return zn(this,void 0,void 0,function*(){const t=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),r=yield this.sendUncheckedTransaction(e);try{return yield Js(()=>zn(this,void 0,void 0,function*(){const i=yield this.provider.getTransaction(r);if(i!==null)return this.provider._wrapTransaction(i,r,t)}),{oncePoll:this.provider})}catch(i){throw i.transactionHash=r,i}})}signMessage(e){return zn(this,void 0,void 0,function*(){const t=typeof e=="string"?Hr(e):e,r=yield this.getAddress();try{return yield this.provider.send("personal_sign",[ce(t),r.toLowerCase()])}catch(i){throw typeof i.message=="string"&&i.message.match(/user denied/i)&&jt.throwError("user rejected signing",z.errors.ACTION_REJECTED,{action:"signMessage",from:r,messageData:e}),i}})}_legacySignMessage(e){return zn(this,void 0,void 0,function*(){const t=typeof e=="string"?Hr(e):e,r=yield this.getAddress();try{return yield this.provider.send("eth_sign",[r.toLowerCase(),ce(t)])}catch(i){throw typeof i.message=="string"&&i.message.match(/user denied/i)&&jt.throwError("user rejected signing",z.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:r,messageData:e}),i}})}_signTypedData(e,t,r){return zn(this,void 0,void 0,function*(){const i=yield xr.resolveNames(e,t,r,o=>this.provider.resolveName(o)),s=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[s.toLowerCase(),JSON.stringify(xr.getPayload(i.domain,t,i.value))])}catch(o){throw typeof o.message=="string"&&o.message.match(/user denied/i)&&jt.throwError("user rejected signing",z.errors.ACTION_REJECTED,{action:"_signTypedData",from:s,messageData:{domain:i.domain,types:t,value:i.value}}),o}})}unlock(e){return zn(this,void 0,void 0,function*(){const t=this.provider,r=yield this.getAddress();return t.send("personal_unlockAccount",[r.toLowerCase(),e,null])})}}class v6 extends up{sendTransaction(e){return this.sendUncheckedTransaction(e).then(t=>({hash:t,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:r=>this.provider.waitForTransaction(t,r)}))}}const w6={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class _h extends m6{constructor(e,t){let r=t;r==null&&(r=new Promise((i,s)=>{setTimeout(()=>{this.detectNetwork().then(o=>{i(o)},o=>{s(o)})},0)})),super(r),e||(e=En(this.constructor,"defaultUrl")()),typeof e=="string"?ee(this,"connection",Object.freeze({url:e})):ee(this,"connection",Object.freeze(Kt(e))),this._nextId=42}get _cache(){return this._eventLoopCache==null&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout(()=>{this._cache.detectNetwork=null},0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return zn(this,void 0,void 0,function*(){yield ud(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch{try{e=yield this.send("net_version",[])}catch{}}if(e!=null){const t=En(this.constructor,"getNetwork");try{return t(J.from(e).toNumber())}catch(r){return jt.throwError("could not detect network",z.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:r})}}return jt.throwError("could not detect network",z.errors.NETWORK_ERROR,{event:"noNetwork"})})}getSigner(e){return new up(zc,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then(e=>e.map(t=>this.formatter.address(t)))}send(e,t){const r={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:Wn(r),provider:this});const i=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(i&&this._cache[e])return this._cache[e];const s=xh(this.connection,JSON.stringify(r),y6).then(o=>(this.emit("debug",{action:"response",request:r,response:o,provider:this}),o),o=>{throw this.emit("debug",{action:"response",error:o,request:r,provider:this}),o});return i&&(this._cache[e]=s,setTimeout(()=>{this._cache[e]=null},0)),s}prepareRequest(e,t){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[js(t.address),t.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[js(t.address),t.blockTag]];case"getCode":return["eth_getCode",[js(t.address),t.blockTag]];case"getStorageAt":return["eth_getStorageAt",[js(t.address),Ct(t.position,32),t.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[t.signedTransaction]];case"getBlock":return t.blockTag?["eth_getBlockByNumber",[t.blockTag,!!t.includeTransactions]]:t.blockHash?["eth_getBlockByHash",[t.blockHash,!!t.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[t.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[t.transactionHash]];case"call":return["eth_call",[En(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0}),t.blockTag]];case"estimateGas":return["eth_estimateGas",[En(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0})]];case"getLogs":return t.filter&&t.filter.address!=null&&(t.filter.address=js(t.filter.address)),["eth_getLogs",[t.filter]]}return null}perform(e,t){return zn(this,void 0,void 0,function*(){if(e==="call"||e==="estimateGas"){const i=t.transaction;if(i&&i.type!=null&&J.from(i.type).isZero()&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const s=yield this.getFeeData();s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null&&(t=Kt(t),t.transaction=Kt(i),delete t.transaction.type)}}const r=this.prepareRequest(e,t);r==null&&jt.throwError(e+" not implemented",z.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(r[0],r[1])}catch(i){return hp(e,i,t)}})}_startEvent(e){e.tag==="pending"&&this._startPending(),super._startEvent(e)}_startPending(){if(this._pendingFilter!=null)return;const e=this,t=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=t,t.then(function(r){function i(){e.send("eth_getFilterChanges",[r]).then(function(s){if(e._pendingFilter!=t)return null;let o=Promise.resolve();return s.forEach(function(a){e._emitted["t:"+a.toLowerCase()]="pending",o=o.then(function(){return e.getTransaction(a).then(function(l){return e.emit("pending",l),null})})}),o.then(function(){return ud(1e3)})}).then(function(){if(e._pendingFilter!=t){e.send("eth_uninstallFilter",[r]);return}return setTimeout(function(){i()},0),null}).catch(s=>{})}return i(),r}).catch(r=>{})}_stopEvent(e){e.tag==="pending"&&this.listenerCount("pending")===0&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,t){const r=Kt(w6);if(t)for(const s in t)t[s]&&(r[s]=!0);g2(e,r);const i={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(function(s){if(e[s]==null)return;const o=dh(J.from(e[s]));s==="gasLimit"&&(s="gas"),i[s]=o}),["from","to","data"].forEach(function(s){e[s]!=null&&(i[s]=ce(e[s]))}),e.accessList&&(i.accessList=Bs(e.accessList)),i}}const fd=new z(ol);let b6=1;function dd(n,e){const t="Web3LegacyFetcher";return function(r,i){const s={method:r,params:i,id:b6++,jsonrpc:"2.0"};return new Promise((o,a)=>{this.emit("debug",{action:"request",fetcher:t,request:Wn(s),provider:this}),e(s,(l,h)=>{if(l)return this.emit("debug",{action:"response",fetcher:t,error:l,request:s,provider:this}),a(l);if(this.emit("debug",{action:"response",fetcher:t,request:s,response:h,provider:this}),h.error){const u=new Error(h.error.message);return u.code=h.error.code,u.data=h.error.data,a(u)}o(h.result)})})}}function A6(n){return function(e,t){t==null&&(t=[]);const r={method:e,params:t};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:Wn(r),provider:this}),n.request(r).then(i=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:r,response:i,provider:this}),i),i=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:r,error:i,provider:this}),i})}}class E6 extends _h{constructor(e,t){e==null&&fd.throwArgumentError("missing provider","provider",e);let r=null,i=null,s=null;typeof e=="function"?(r="unknown:",i=e):(r=e.host||e.path||"",!r&&e.isMetaMask&&(r="metamask"),s=e,e.request?(r===""&&(r="eip-1193:"),i=A6(e)):e.sendAsync?i=dd(e,e.sendAsync.bind(e)):e.send?i=dd(e,e.send.bind(e)):fd.throwArgumentError("unsupported provider","provider",e),r||(r="unknown:")),super(r,t),ee(this,"jsonRpcFetchFunc",i),ee(this,"provider",s)}send(e,t){return this.jsonRpcFetchFunc(e,t)}}const x6="solidity/5.8.0",_6=new RegExp("^bytes([0-9]+)$"),k6=new RegExp("^(u?int)([0-9]*)$"),S6=new RegExp("^(.*)\\[([0-9]*)\\]$"),N6="0000000000000000000000000000000000000000000000000000000000000000",ss=new z(x6);function fp(n,e,t){switch(n){case"address":return t?ma(e,32):fe(e);case"string":return Hr(e);case"bytes":return fe(e);case"bool":return e=e?"0x01":"0x00",t?ma(e,32):fe(e)}let r=n.match(k6);if(r){let i=parseInt(r[2]||"256");return(r[2]&&String(i)!==r[2]||i%8!==0||i===0||i>256)&&ss.throwArgumentError("invalid number type","type",n),t&&(i=256),e=J.from(e).toTwos(i),ma(e,i/8)}if(r=n.match(_6),r){const i=parseInt(r[1]);return(String(i)!==r[1]||i===0||i>32)&&ss.throwArgumentError("invalid bytes type","type",n),fe(e).byteLength!==i&&ss.throwArgumentError(`invalid value for ${n}`,"value",e),t?fe((e+N6).substring(0,66)):e}if(r=n.match(S6),r&&Array.isArray(e)){const i=r[1];parseInt(r[2]||String(e.length))!=e.length&&ss.throwArgumentError(`invalid array length for ${n}`,"value",e);const o=[];return e.forEach(function(a){o.push(fp(i,a,!0))}),mr(o)}return ss.throwArgumentError("invalid type","type",n)}function C6(n,e){n.length!=e.length&&ss.throwArgumentError("wrong number of values; expected ${ types.length }","values",e);const t=[];return n.forEach(function(r,i){t.push(fp(r,e[i]))}),ce(mr(t))}function I6(n,e){return Ut(C6(n,e))}const P6="units/5.8.0",M6=new z(P6),dp=["wei","kwei","mwei","gwei","szabo","finney","ether"];function T6(n,e){if(typeof e=="string"){const t=dp.indexOf(e);t!==-1&&(e=3*t)}return ga(n,e??18)}function R6(n,e){if(typeof n!="string"&&M6.throwArgumentError("value must be a string","value",n),typeof e=="string"){const t=dp.indexOf(e);t!==-1&&(e=3*t)}return un(n,e??18)}function xa(n){return T6(n,18)}function pd(n){return R6(n,18)}const B6=1,O6=2,F6=1,D6=2,md=n=>(Number(n)&B6)!==0,L6=n=>(Number(n)&O6)!==0,U6=n=>(Number(n)&F6)!==0,z6=n=>(Number(n)&D6)!==0;class q6{constructor(e){this.eventBus=e,this.provider=null,this.signer=null,this.contracts=null,this.config=null,this.initialized=!1}async initialize(e){this.config=e,this.provider=new _h(e.rpcUrl),this.contracts={colasseum:new ar(e.contracts.colasseum.address,e.contracts.colasseum.abi,this.provider),oracle:new ar(e.contracts.oracle.address,e.contracts.oracle.abi,this.provider)},e.contracts.nft&&(this.contracts.nft=new ar(e.contracts.nft.address,e.contracts.nft.abi,this.provider)),this.initialized=!0,console.log("[ContractService] Initialized with colasseum at:",e.contracts.colasseum.address)}setSigner(e){this.signer=e,this.contracts&&this.config&&(this.contracts.colasseum=new ar(this.config.contracts.colasseum.address,this.config.contracts.colasseum.abi,e),this.config.contracts.nft&&(this.contracts.nft=new ar(this.config.contracts.nft.address,this.config.contracts.nft.abi,e)))}clearSigner(){this.signer=null,this.contracts&&this.config&&(this.contracts.colasseum=new ar(this.config.contracts.colasseum.address,this.config.contracts.colasseum.abi,this.provider),this.config.contracts.nft&&(this.contracts.nft=new ar(this.config.contracts.nft.address,this.config.contracts.nft.abi,this.provider)))}async getTrial(e){if(!this.initialized)throw new Error("ContractService not initialized");const t=await this.contracts.colasseum.trials(e),r=await this.contracts.colasseum.lore(e),i=J.from("1000000000");return{id:e,creator:t.challenger,nftContract:t.nftContract,nftId:t.nftId.toNumber(),chancePrice:xa(i),difficulty:t.difficulty.toString(),ethPool:xa(t.ethPool),active:md(t.status),cancelled:L6(t.status),creationTime:Number(t.creationTime),lore:r}}async getTrials(e){return Promise.all(e.map(t=>this.getTrial(t)))}async getChance(e){if(!this.initialized)throw new Error("ContractService not initialized");const t=await this.contracts.colasseum.chances(e);return{id:e,owner:t.owner,trialId:t.trialId.toNumber(),commitment:t.commitment.toString(),targetTimestamp:t.targetTimestamp.toNumber(),numChances:t.numChances.toNumber(),claimed:U6(t.status),refunded:z6(t.status)}}async getChances(e){return Promise.all(e.map(t=>this.getChance(t)))}async isRandomnessAvailable(e){if(!this.initialized)throw new Error("ContractService not initialized");return this.contracts.oracle.isRandomnessAvailable(e)}async getBeaconRoot(e){if(!this.initialized)throw new Error("ContractService not initialized");return await this.contracts.oracle.getRandomness(e)}async findCanonicalBeaconRoot(e){if(!this.initialized)throw new Error("ContractService not initialized");const r=e+144;console.log(`[ContractService] Searching for beacon root. Target: ${e}, max allowed: ${r}`);const i=await this.provider.getBlock("latest");console.log(`[ContractService] Latest block: ${i.number}, timestamp: ${i.timestamp}`);let s=i.number-1e4,o=i.number,a=null;if(i.timestamp<e)throw new Error(`Target timestamp ${e} is in the future (current: ${i.timestamp})`);for(;s<=o;){const u=Math.floor((s+o)/2),g=await this.provider.getBlock(u);if(!g){s=u+1;continue}g.timestamp>=e?(a=g,o=u-1):s=u+1}if(!a)throw new Error(`Could not find any block with timestamp >= ${e}`);if(console.log(`[ContractService] Found candidate block: ${a.number}, timestamp: ${a.timestamp}`),a.timestamp>r)throw new Error(`First valid block (${a.timestamp}) is beyond allowed window (max: ${r})`);try{const u=await this.contracts.oracle.getRandomness(a.timestamp);if(u&&u!=="0x"+"0".repeat(64))return console.log(`[ContractService] Found canonical beacon root at block ${a.number}, timestamp ${a.timestamp}`),{timestamp:a.timestamp,root:u}}catch(u){console.log(`[ContractService] Block ${a.number} timestamp ${a.timestamp} failed oracle query:`,u.message)}let l=a.number+1;const h=20;for(let u=0;u<h;u++){const g=await this.provider.getBlock(l+u);if(!g||g.timestamp>r)break;try{const x=await this.contracts.oracle.getRandomness(g.timestamp);if(x&&x!=="0x"+"0".repeat(64))return console.log(`[ContractService] Found canonical beacon root at block ${g.number}, timestamp ${g.timestamp}`),{timestamp:g.timestamp,root:x}}catch{console.log(`[ContractService] Block ${g.number} failed, trying next...`)}}throw new Error(`No valid beacon root found within allowed window [${e}, ${r}]`)}async getNftTokenUri(e,t){return new ar(e,["function tokenURI(uint256 tokenId) view returns (string)"],this.provider).tokenURI(t)}async getNftOwner(e,t){return new ar(e,["function ownerOf(uint256 tokenId) view returns (address)"],this.provider).ownerOf(t)}async isNftApproved(e,t){return(await new ar(e,["function getApproved(uint256 tokenId) view returns (address)"],this.provider).getApproved(t)).toLowerCase()===this.config.contracts.colasseum.address.toLowerCase()}async approveNft(e,t){if(!this.signer)throw new Error("No signer connected");return(await new ar(e,["function approve(address to, uint256 tokenId)"],this.signer).approve(this.config.contracts.colasseum.address,t)).wait()}async challenge(e,t,r,i=""){var g,x,A;if(!this.signer)throw new Error("No signer connected");const s=pd(r),o=s.mul(5).div(100),l=await(await this.contracts.colasseum.challenge(e,t,s,i,{value:o})).wait(),h=(g=l.events)==null?void 0:g.find(E=>E.event==="Gauntlet"),u=(A=(x=h==null?void 0:h.args)==null?void 0:x.trialId)==null?void 0:A.toNumber();return this.eventBus.emit("contract:gauntlet",{trialId:u,receipt:l}),{receipt:l,trialId:u}}async valor(e,t,r,i){var x,A,E,I,T,R,O;if(!this.signer)throw new Error("No signer connected");const s=J.from("1000000000"),o=J.from(i),a=s.mul(o);try{const B=await this.contracts.colasseum.trials(e),U={active:md(B.status),creator:B.challenger},q=await this.signer.getAddress(),W=await this.signer.provider.getNetwork(),Z=await this.signer.getBalance(),K=await this.signer.getTransactionCount();console.log("[ContractService] valor debug:",{trialId:e,commitment:t,targetTimestamp:r,numChances:i,value:a.toString(),colasseumAddress:this.contracts.colasseum.address,signerAddress:q,signerChainId:W.chainId,signerBalance:Z.toString(),signerNonce:K,trialActive:U.active,trialCreator:U.creator});const se=await this.provider.getNetwork(),y=await this.provider.getBalance(q);console.log("[ContractService] Provider comparison:",{providerChainId:se.chainId,providerBalance:y.toString(),chainIdMatch:W.chainId===se.chainId,balanceMatch:Z.toString()===y.toString()})}catch(B){console.error("[ContractService] Debug read failed:",B)}try{await this.contracts.colasseum.estimateGas.valor(e,t,r,i,{value:a})}catch(B){throw console.error("[ContractService] Gas estimation failed:",B),(A=(x=B.error)==null?void 0:x.data)!=null&&A.message?new Error(B.error.data.message):B.reason?new Error(B.reason):B}let l;try{l=await this.contracts.colasseum.valor(e,t,r,i,{value:a})}catch(B){console.error("[ContractService] Transaction send failed:",B);const U=((E=B.error)==null?void 0:E.data)||B.data;if(U&&console.error("[ContractService] Error data:",U),B.code===-32603){const q=((I=B.error)==null?void 0:I.message)||B.message;throw console.error("[ContractService] Inner error:",q),new Error(`Transaction failed: ${q}`)}throw B}const h=await l.wait(),u=(T=h.events)==null?void 0:T.find(B=>B.event==="ChallengeAccepted"),g=(O=(R=u==null?void 0:u.args)==null?void 0:R.chanceId)==null?void 0:O.toNumber();return this.eventBus.emit("contract:challengeAccepted",{trialId:e,chanceId:g,receipt:h}),{receipt:h,chanceId:g}}async victory(e,t,r){if(!this.signer)throw new Error("No signer connected");const s=await(await this.contracts.colasseum.victory(e,t,r.pA,r.pB,r.pC)).wait();return this.eventBus.emit("contract:victor",{chanceId:e,receipt:s}),s}async cowardice(e){if(!this.signer)throw new Error("No signer connected");const r=await(await this.contracts.colasseum.cowardice(e)).wait();return this.eventBus.emit("contract:surrender",{trialId:e,receipt:r}),r}async perseverance(e){if(!this.signer)throw new Error("No signer connected");const r=await(await this.contracts.colasseum.perseverance(e)).wait();return this.eventBus.emit("contract:justice",{chanceIds:e,receipt:r}),r}getColasseumAddress(){var e,t,r;return(r=(t=(e=this.config)==null?void 0:e.contracts)==null?void 0:t.colasseum)==null?void 0:r.address}getNftAddress(){var e,t,r;return(r=(t=(e=this.config)==null?void 0:e.contracts)==null?void 0:t.nft)==null?void 0:r.address}formatTrialForUI(e){return{id:e.id,title:`Challenge #${e.id}`,nftContract:e.nftContract,tokenId:e.nftId,appraisalEth:xa(J.from(e.difficulty).mul(pd("0.000000001")).div(J.from("21888242871839275222246405745257275088548364400416034343698204186575808495617"))),ethPool:e.ethPool,active:e.active,lore:e.lore||"",creationTime:e.creationTime}}}class G6{constructor(e){this.eventBus=e,this.indexer=null,this.initialized=!1,this.config=null}async initialize(e){var t,r;this.config=e;try{this._clearStaleDataIfRedeployed(e);const i=new _h(e.rpcUrl);this.indexer=new Ic(this.eventBus);try{await this._initializeIndexer(e,i)}catch(s){if((t=s.message)!=null&&t.includes("object stores was not found")||(r=s.message)!=null&&r.includes("NotFoundError"))console.warn("[ColasseumIndexer] Schema mismatch detected, clearing database and retrying..."),await this._clearIndexedDB(e.chainId),await this._initializeIndexer(e,i);else throw s}}catch(i){console.error("[ColasseumIndexer] Initialization failed:",i),this.initialized=!1}}_clearStaleDataIfRedeployed(e){var r,i;const t="miladycola_deploy_address";try{const s=(i=(r=e.contracts)==null?void 0:r.colasseum)==null?void 0:i.address;if(localStorage.getItem(t)!==s){console.log("[ColasseumIndexer] Contract address changed  clearing stale caches"),this._clearIndexedDB(e.chainId);const a=["miladycola_passphrase_","miladycola_reveal_seen_","miladycola_win_result_"],l=[];for(let h=0;h<localStorage.length;h++){const u=localStorage.key(h);a.some(g=>u.startsWith(g))&&l.push(u)}l.forEach(h=>localStorage.removeItem(h)),l.length>0&&console.log(`[ColasseumIndexer] Cleared ${l.length} stale localStorage entries`)}s&&localStorage.setItem(t,s)}catch(s){console.warn("[ColasseumIndexer] Failed to check deploy fingerprint:",s)}}async _clearIndexedDB(e){if(typeof indexedDB>"u"){console.warn("[ColasseumIndexer] IndexedDB not available");return}const t=`colasseum-${e}`;return new Promise(r=>{try{const i=indexedDB.deleteDatabase(t);i.onsuccess=()=>{console.log("[ColasseumIndexer] Database cleared"),r()},i.onerror=()=>{console.warn("[ColasseumIndexer] Failed to clear database:",i.error),r()},i.onblocked=()=>{console.warn("[ColasseumIndexer] Database delete blocked, continuing..."),r()}}catch(i){console.warn("[ColasseumIndexer] Error clearing database:",i),r()}})}async _initializeIndexer(e,t){let r=e.deployBlock;if(r!=null)console.log(`[ColasseumIndexer] Using deployBlock from config: ${r}`);else{const i=await t.getBlockNumber();r=Math.max(0,i-5e4),console.log(`[ColasseumIndexer] No deployBlock in config, using ${r} (currentBlock: ${i})`)}await this.indexer.initialize({contract:{address:e.contracts.colasseum.address,abi:e.contracts.colasseum.abi,deployBlock:r},provider:t,entities:{Trial:{source:"Gauntlet",key:"trialId",status:{won:(i,s)=>s.has("Victor",{trialId:i.trialId}),cancelled:(i,s)=>s.has("Surrender",{trialId:i.trialId}),default:"active"}},Chance:{source:"ChallengeAccepted",key:"chanceId",relations:{trial:{entity:"Trial",foreignKey:"trialId"}},status:{claimed:(i,s)=>s.has("Victor",{chanceId:i.chanceId}),refunded:(i,s)=>s.has("Justice",{chanceId:i.chanceId}),default:"pending"}}},persistence:{type:"indexeddb",dbName:`colasseum-${e.chainId}`,version:4},sync:{batchSize:2e3,confirmations:0,realTimeEnabled:!0,pollInterval:3e3}}),this.initialized=!0,console.log("[ColasseumIndexer] Initialized"),this.eventBus.emit("colasseum:indexerReady",{})}async getWinners(e={}){this._checkInitialized();const t=await this.indexer.events.query("Victor",{orderBy:"blockNumber",order:"desc",limit:e.limit||50,offset:e.offset||0});return{winners:t.events.map(i=>({trialId:i.indexed.trialId||i.data.trialId,chanceId:i.indexed.chanceId||i.data.chanceId,winner:i.indexed.winner||i.data.winner,appraisal:i.data.appraisal,difficulty:i.data.difficulty,charityDonation:i.data.charityDonation,challengerShare:i.data.challengerShare,blockNumber:i.blockNumber,transactionHash:i.transactionHash})),total:t.total,hasMore:t.hasMore}}async getRefundableChances(e){this._checkInitialized();const t=e.toLowerCase();return(await this.indexer.patterns.refundable({itemEvent:"ChallengeAccepted",itemKey:"chanceId",parentKey:"trialId",cancelEvent:"Surrender",claimEvent:"Justice",userField:"participant",user:t})).map(i=>({chanceId:i.indexed.chanceId||i.data.chanceId,trialId:i.indexed.trialId||i.data.trialId,participant:i.indexed.participant||i.data.participant,numChances:i.data.numChances,appraisal:i.data.appraisal,difficulty:i.data.difficulty,blockNumber:i.blockNumber,transactionHash:i.transactionHash}))}async getUserActivity(e,t={}){return this._checkInitialized(),(await this.indexer.patterns.userActivity(e,{events:["ChallengeAccepted","Victor","Justice"],limit:t.limit||50})).map(i=>{let s="unknown",o="";switch(i.type){case"ChallengeAccepted":s="entered",o=`Entered trial #${i.data.trialId} with ${i.data.numChances} chances`;break;case"Victor":s="won",o=`Won trial #${i.data.trialId}`;break;case"Justice":s="refunded",o=`Refunded from trial #${i.data.trialId}`;break}return{...i,activityType:s,description:o}})}async getLeaderboard(e=10){return this._checkInitialized(),this.indexer.patterns.leaderboard({event:"Victor",groupBy:"winner",aggregate:"count",limit:e})}async getCancelledTrials(){return this._checkInitialized(),(await this.indexer.events.query("Surrender",{orderBy:"blockNumber",order:"desc",limit:1e3})).events.map(t=>({trialId:t.indexed.trialId||t.data.trialId,blockNumber:t.blockNumber,transactionHash:t.transactionHash}))}async getActiveTrials(){var o,a,l,h;this._checkInitialized();const e=await this.indexer.events.query("Gauntlet",{orderBy:"blockNumber",order:"desc",limit:1e3}),[t,r]=await Promise.all([this.indexer.events.query("Victor",{limit:1e3}),this.indexer.events.query("Surrender",{limit:1e3})]),i=new Set;for(const u of t.events)i.add(String(((o=u.indexed)==null?void 0:o.trialId)||((a=u.data)==null?void 0:a.trialId)));for(const u of r.events)i.add(String(((l=u.indexed)==null?void 0:l.trialId)||((h=u.data)==null?void 0:h.trialId)));return e.events.filter(u=>{var x,A;const g=String(((x=u.indexed)==null?void 0:x.trialId)||((A=u.data)==null?void 0:A.trialId));return!i.has(g)}).map(u=>{var g,x,A,E,I,T,R,O,B;return{trialId:((g=u.indexed)==null?void 0:g.trialId)||((x=u.data)==null?void 0:x.trialId),challenger:((A=u.indexed)==null?void 0:A.challenger)||((E=u.data)==null?void 0:E.challenger),nftContract:(I=u.data)==null?void 0:I.nftContract,nftId:(T=u.data)==null?void 0:T.nftId,appraisal:(R=u.data)==null?void 0:R.appraisal,difficulty:(O=u.data)==null?void 0:O.difficulty,lore:(B=u.data)==null?void 0:B.lore,blockNumber:u.blockNumber,transactionHash:u.transactionHash}})}async getUserChances(e,t={}){var g,x,A,E;this._checkInitialized();const r=e.toLowerCase(),s=(await this.indexer.events.query("ChallengeAccepted",{orderBy:"blockNumber",order:"desc",limit:1e3})).events.filter(I=>{var R,O;return(((R=I.indexed)==null?void 0:R.participant)||((O=I.data)==null?void 0:O.participant)||"").toLowerCase()===r}),[o,a]=await Promise.all([this.indexer.events.query("Victor",{limit:1e3}),this.indexer.events.query("Justice",{limit:1e3})]),l=new Set;for(const I of o.events)l.add(String(((g=I.indexed)==null?void 0:g.chanceId)||((x=I.data)==null?void 0:x.chanceId)));const h=new Set;for(const I of a.events)h.add(String(((A=I.indexed)==null?void 0:A.chanceId)||((E=I.data)==null?void 0:E.chanceId)));const u=s.filter(I=>{var R,O;const T=String(((R=I.indexed)==null?void 0:R.chanceId)||((O=I.data)==null?void 0:O.chanceId));return!(h.has(T)||!t.includeClaimed&&l.has(T))});return console.log("[ColasseumIndexer] User chances:",u.length,"(includeClaimed:",!!t.includeClaimed,")"),u.map(I=>{var T,R,O,B,U,q,W,Z,K;return{chanceId:((T=I.indexed)==null?void 0:T.chanceId)||((R=I.data)==null?void 0:R.chanceId),trialId:((O=I.indexed)==null?void 0:O.trialId)||((B=I.data)==null?void 0:B.trialId),participant:((U=I.indexed)==null?void 0:U.participant)||((q=I.data)==null?void 0:q.participant),numChances:(W=I.data)==null?void 0:W.numChances,appraisal:(Z=I.data)==null?void 0:Z.appraisal,difficulty:(K=I.data)==null?void 0:K.difficulty,blockNumber:I.blockNumber,transactionHash:I.transactionHash}})}async getTrialWinner(e){this._checkInitialized();const t=await this.indexer.events.query("Victor",{where:{trialId:String(e)},limit:1});if(t.events.length===0)return null;const r=t.events[0];return{trialId:r.indexed.trialId||r.data.trialId,chanceId:r.indexed.chanceId||r.data.chanceId,winner:r.indexed.winner||r.data.winner,appraisal:r.data.appraisal,difficulty:r.data.difficulty,charityDonation:r.data.charityDonation,challengerShare:r.data.challengerShare}}async isTrialCancelled(e){return this._checkInitialized(),await this.indexer.events.count("Surrender",{trialId:String(e)})>0}getSyncStatus(){return this.indexer?this.indexer.sync.getStatus():{state:"not_initialized",progress:0}}subscribe(e,t){return this._checkInitialized(),this.indexer.events.subscribe(e,t)}_checkInitialized(){if(!this.initialized)throw new Error("ColasseumIndexer not initialized. Call initialize() first.")}async destroy(){this.indexer&&await this.indexer.destroy(),this.initialized=!1}}const gd="0x000F3df6D732807Ef1319fB7B8bB8522d0Beac02".toLowerCase();class H6{constructor(e={}){var t;this.timeWarpUrl=e.timeWarpUrl||null,this.oracleSeed=e.oracleSeed||null,this.oracleAddress=((t=e.oracleAddress)==null?void 0:t.toLowerCase())||null,this.enabled=this.oracleAddress&&this.oracleAddress!==gd,this.enabled?console.log("[DevService] Dev mode detected (mock oracle). Features enabled:",{timeWarp:!!this.timeWarpUrl,seededRoot:!!this.oracleSeed}):this.oracleAddress===gd&&console.log("[DevService] Production mode (real beacon oracle). Dev features disabled.")}isEnabled(){return this.enabled}async warpChainTime(e){if(!this.timeWarpUrl)return console.warn("[DevService] Time warp not configured - skipping"),!1;try{const t=await fetch(this.timeWarpUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({timestamp:e})});if(!t.ok)return console.error("[DevService] Time warp failed:",t.statusText),!1;const r=await t.json();return console.log("[DevService] Chain time warped to:",e,r),!0}catch(t){return console.error("[DevService] Time warp error:",t),!1}}async syncChainTimeToNow(e=0){const t=Math.floor(Date.now()/1e3)+e;return this.warpChainTime(t)}deriveSeededRoot(e){if(!this.oracleSeed)return null;const t=typeof e=="number"?e:Number(e);return I6(["bytes32","uint256"],[this.oracleSeed,t])}async getBeaconRoot(e,t){const r=this.deriveSeededRoot(e);if(r)return console.log("[DevService] Using locally derived beacon root"),r;if(t)return console.log("[DevService] Falling back to contract for beacon root"),t();throw new Error("No beacon root available - configure oracleSeed or provide contract fallback")}async prepareForClaim(e,t=768,r=null){const i=e+t+1,s=Math.floor(Date.now()/1e3);return this.timeWarpUrl&&s<i&&(console.log("[DevService] Warping chain time for claim..."),await this.warpChainTime(i)),this.getBeaconRoot(e,r)}}class j6 extends qt{constructor(t){super(t);oe(this,"handleConnect",()=>{ie.emit("wallet:select")});oe(this,"handleDisconnect",async()=>{try{await this.props.walletService.disconnect()}catch(t){console.error("Wallet disconnect failed:",t)}});oe(this,"toggleNotificationPanel",()=>{this.setState({notificationPanelOpen:!this.state.notificationPanelOpen})});this.state={connected:!1,address:null,notificationCount:0,notificationPanelOpen:!1}}didMount(){var t,r,i,s;if((r=(t=this.props.walletService).isConnected)!=null&&r.call(t)){const o=((s=(i=this.props.walletService).getAddress)==null?void 0:s.call(i))||this.props.walletService.address;queueMicrotask(()=>{this.setState({connected:!0,address:o})})}this.subscribe("wallet:connected",o=>{this.setState({connected:!0,address:o.address})}),this.subscribe("wallet:disconnected",()=>{this.setState({connected:!1,address:null})})}formatAddress(t){return t?`${t.slice(0,6)}${t.slice(-4)}`:""}render(){const{connected:t,address:r,notificationCount:i,notificationPanelOpen:s}=this.state,o=t?"connected":"",a=s?"true":"false";return this.props.compact?b("div",{className:"machine-wallet-compact"},!t&&b("button",{className:"btn primary",type:"button",onClick:this.handleConnect},"Connect"),t&&b("button",{className:"btn ghost small",type:"button",onClick:this.handleDisconnect}," Disconnect")):b("header",{className:`wallet-bar ${o}`},b("div",{className:"wallet-tray"},!t&&b("button",{className:"btn secondary",type:"button",onClick:this.handleConnect},"Connect wallet"),t&&b("span",null,this.formatAddress(r)),t&&b("button",{className:"btn ghost small disconnect-btn",type:"button",onClick:this.handleDisconnect},b("span",{"aria-hidden":"true"},""),b("span",{className:"disconnect-text"},"Disconnect"))),b("div",{className:"notification-bell"},b("button",{"aria-expanded":a,type:"button",onClick:this.toggleNotificationPanel},"",b("span",{className:"bell-badge",style:i>0?"":"display:none;"},i)),b("div",{className:"notification-panel","data-open":a},b("p",{className:"muted"},"Account alerts"),b("div",null,b("p",{className:"muted"},"All clear for nowyour alerts will pop in as soon as things update.")))))}}const W6="modulepreload",K6=function(n){return"/"+n},yd={},V6=function(e,t,r){if(!t||t.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(t.map(s=>{if(s=K6(s),s in yd)return;yd[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let u=i.length-1;u>=0;u--){const g=i[u];if(g.href===s&&(!o||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const h=document.createElement("link");if(h.rel=o?"stylesheet":W6,o||(h.as="script",h.crossOrigin=""),h.href=s,document.head.appendChild(h),o)return new Promise((u,g)=>{h.addEventListener("load",u),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};BigInt("21888242871839275222246405745257275088548364400416034343698204186575808495617");class J6{constructor(){this.poseidon=null,this.buildPoseidon=null,this.wasmBuffer=null,this.zkeyBuffer=null,this.assetsLoaded=!1}async ensurePoseidon(){if(!this.poseidon){if(!this.buildPoseidon){const e=await V6(()=>import("https://esm.sh/circomlibjs@0.1.7"),[]);this.buildPoseidon=e.buildPoseidon}this.poseidon=await this.buildPoseidon()}return this.poseidon}async loadCircuitAssets(){var e,t;if(!this.assetsLoaded)try{const r=((e=document.getElementById("url-wasm"))==null?void 0:e.value)||"/challenge.wasm",i=((t=document.getElementById("url-zkey"))==null?void 0:t.value)||"/challenge_final.zkey";console.log("[CryptoService] Pre-fetching circuit assets...");const[s,o]=await Promise.all([fetch(r),fetch(i)]);if(!s.ok||!o.ok)throw new Error("Failed to fetch circuit assets");this.wasmBuffer=await s.arrayBuffer(),this.zkeyBuffer=await o.arrayBuffer(),this.assetsLoaded=!0,console.log("[CryptoService] Circuit assets loaded")}catch(r){throw console.error("[CryptoService] Failed to load circuit assets:",r),r}}passphraseToField(e){const t=Ut(Hr(e));return BigInt(t)}addressToField(e){return BigInt(e)}async generateCommitment(e,t){const r=await this.ensurePoseidon(),i=this.passphraseToField(e),s=this.addressToField(t),o=r([i,s]);return r.F.toObject(o).toString()}async verifyCommitment(e,t,r){return await this.generateCommitment(e,t)===r.toString()}async evaluateWinCondition(e,t,r,i){const s=await this.ensurePoseidon(),o=this.passphraseToField(e),a=BigInt(t),l=a>>128n,h=a&(1n<<128n)-1n,u=s([o,l,h]),g=s.F.toObject(u),x=BigInt(r.toString()),A=BigInt(i.toString()),E=x*A;return{isWinner:g<E,randomnessHash:g.toString(),threshold:E.toString(),rootHigh:l.toString(),rootLow:h.toString()}}async generateProof(e,t,r,i,s,o){if(console.log("[CryptoService] generateProof called"),console.log("[CryptoService] Ensuring Poseidon..."),await this.ensurePoseidon(),console.log("[CryptoService] Poseidon ready"),console.log("[CryptoService] Loading circuit assets..."),await this.loadCircuitAssets(),console.log("[CryptoService] Circuit assets loaded"),!this.wasmBuffer||!this.zkeyBuffer)throw new Error("Circuit assets not loaded");if(typeof window.snarkjs>"u")throw new Error("snarkjs not loaded - ensure CDN script is included");console.log("[CryptoService] snarkjs available");const a=this.passphraseToField(e),l=this.addressToField(t),h=BigInt(r),u=h>>128n,g=h&(1n<<128n)-1n,x={passphrase:a.toString(),ownerAddress:l.toString(),rootHigh:u.toString(),rootLow:g.toString(),ticketHash:i.toString(),difficulty:s.toString(),chances:o.toString()};console.log("[CryptoService] Generating ZK proof with inputs:",{rootHigh:x.rootHigh,rootLow:x.rootLow,ticketHash:x.ticketHash,difficulty:x.difficulty,chances:x.chances});const{proof:A,publicSignals:E}=await window.snarkjs.groth16.fullProve(x,new Uint8Array(this.wasmBuffer),new Uint8Array(this.zkeyBuffer));console.log("[CryptoService] Proof generated, public signals:",E);const I=A.pi_a.slice(0,2).map(O=>O.toString()),T=[[A.pi_b[0][1].toString(),A.pi_b[0][0].toString()],[A.pi_b[1][1].toString(),A.pi_b[1][0].toString()]],R=A.pi_c.slice(0,2).map(O=>O.toString());return{proof:A,publicSignals:E,solidityProof:{pA:I,pB:T,pC:R}}}}const ai=new J6,$6=J.from("21888242871839275222246405745257275088548364400416034343698204186575808495617"),Q6=J.from("1000000000"),pp="miladycola_passphrase_";function mp(n,e){try{localStorage.setItem(`${pp}${n}`,e)}catch(t){console.warn("[EntryModal] Failed to store passphrase:",t)}}function Hi(n){try{return localStorage.getItem(`${pp}${n}`)}catch{return null}}const gp="miladycola_reveal_seen_";function kh(n){try{localStorage.setItem(`${gp}${n}`,Date.now().toString())}catch(e){console.warn("[EntryModal] Failed to store reveal seen:",e)}}function Y6(n){try{return!!localStorage.getItem(`${gp}${n}`)}catch{return!1}}const yp="miladycola_win_result_";function Sh(n,e){try{localStorage.setItem(`${yp}${n}`,e?"win":"loss")}catch(t){console.warn("[EntryModal] Failed to store win result:",t)}}function Nh(n){try{const e=localStorage.getItem(`${yp}${n}`);return e==="win"?!0:e==="loss"?!1:null}catch{return null}}class X6 extends qt{constructor(t){super(t);oe(this,"handleClose",()=>{ie.emit("modal:close")});oe(this,"handleOddsInput",t=>{const r=parseInt(t.target.value,10);this.setState({oddsPercent:r})});oe(this,"handleOddsChange",t=>{this.setState({oddsPercent:parseInt(t.target.value,10)})});oe(this,"handlePassphraseChange",t=>{this.setState({passphrase:t.target.value})});oe(this,"handleShowCancelConfirm",()=>{this.setState({showCancelConfirm:!0})});oe(this,"handleHideCancelConfirm",()=>{this.setState({showCancelConfirm:!1})});oe(this,"handleConfirmCancel",()=>{this.setState({cancelling:!0}),ie.emit("challenge:cancel",{challengeId:this.state.challenge.id});const t=()=>{this.setState({cancelling:!1}),ie.emit("modal:close"),ie.off("challenge:cancelled",t),ie.off("challenge:cancelError",r)},r=({error:i})=>{this.setState({cancelling:!1,error:i||"Failed to cancel challenge"}),ie.off("challenge:cancelled",t),ie.off("challenge:cancelError",r)};ie.on("challenge:cancelled",t),ie.on("challenge:cancelError",r)});oe(this,"handlePurchase",async()=>{var s,o;const{passphrase:t,challenge:r,oddsPercent:i}=this.state;if(!t.trim()){this.setState({error:"Please enter a passphrase to protect your bottle."});return}if(this.setState({loading:!0,error:null}),(s=this.props.contractService)!=null&&s.initialized)try{const a=await((o=this.props.contractService.signer)==null?void 0:o.getAddress());if(!a)throw new Error("Wallet not connected");const l=J.from(r.difficulty),h=this.calculateNumChances(i,l),u=await ai.generateCommitment(t,a),A=(await this.props.contractService.provider.getBlock("latest")).timestamp,I=A+120+1;console.log("[EntryModal] Preparing purchase:",{trialId:r.id,commitment:u.toString(),targetTimestamp:I,currentBlockTime:A,oddsPercent:i,numChances:h.toString(),difficulty:l.toString()});const{chanceId:T}=await this.props.contractService.valor(r.id,u.toString(),I,h.toNumber());mp(T,t),this.setState({loading:!1}),ie.emit("modal:close"),ie.emit("bottle:purchased",{chanceId:T,challenge:r,oddsPercent:i,numChances:h.toString(),passphrase:t,price:this.calculateDisplayPrice()})}catch(a){console.error("[EntryModal] Failed to purchase bottle:",a),this.setState({loading:!1,error:a.reason||a.message||"Transaction failed"})}else setTimeout(()=>{this.setState({loading:!1}),ie.emit("modal:close"),ie.emit("bottle:purchased",{challenge:r,oddsPercent:i,passphrase:t,price:this.calculateDisplayPrice()})},1500)});this.state={challenge:null,oddsPercent:1,passphrase:"",loading:!1,error:null,isOwner:!1,showCancelConfirm:!1,cancelling:!1}}setChallenge(t){this.setState({challenge:t,oddsPercent:1,passphrase:"",loading:!1,error:null,showCancelConfirm:!1,cancelling:!1}),this.checkOwnership(t)}async checkOwnership(t){var r,i;if(!(t!=null&&t.creator)||!((r=this.props.contractService)!=null&&r.signer)){this.setState({isOwner:!1});return}try{const s=await this.props.contractService.signer.getAddress(),o=(s==null?void 0:s.toLowerCase())===((i=t.creator)==null?void 0:i.toLowerCase());this.setState({isOwner:o})}catch{this.setState({isOwner:!1})}}calculateNumChances(t,r){if(!r||r.isZero())return J.from(1);let i=$6.mul(t).div(100);i.lte(0)&&(i=J.from(1));let s=i.add(r.sub(1)).div(r);return s.lt(1)&&(s=J.from(1)),s}calculateCostWei(t){return Q6.mul(t)}formatEth(t){return xa(t)}calculateDisplayPrice(){const{challenge:t,oddsPercent:r}=this.state;if(!(t!=null&&t.difficulty))return"0.0000";const i=J.from(t.difficulty),s=this.calculateNumChances(r,i),o=this.calculateCostWei(s);return parseFloat(this.formatEth(o)).toFixed(4)}calculateDisplayChances(){const{challenge:t,oddsPercent:r}=this.state;if(!(t!=null&&t.difficulty))return"1";const i=J.from(t.difficulty);return this.calculateNumChances(r,i).toString()}render(){const{challenge:t,oddsPercent:r,passphrase:i,loading:s,error:o,isOwner:a,showCancelConfirm:l,cancelling:h}=this.state;if(!t)return b("div",{className:"challenge-wizard__panel"},b("p",{className:"muted"},"No challenge selected"));const u=this.calculateDisplayPrice();this.calculateDisplayChances();const g=i.trim().length>0&&!s&&!h;return b("div",{className:"challenge-wizard__panel"},b("div",{className:"wizard-header"},b("div",{className:"wizard-header__copy"},b("h2",null,"Get Your Bottles"),b("p",{className:"caption"},"After purchase, your bottles need 15 minutes of refrigeration before you can pop them to check for a winning cap.")),b("button",{className:"icon-btn wizard-header__close",type:"button",onClick:this.handleClose},"Close")),b("div",{className:"form-grid"},b("div",{className:"prize-summary","aria-hidden":"false"},b("div",{className:"prize-summary__details"},b("strong",null,t.title),b("p",{className:"muted small-text"},`Appraisal: ${t.appraisalEth} ETH`))),b("label",null,b("span",{className:"label-row"},"Bottle Secret",b("button",{className:"info-pill info-pill--mini",type:"button","data-tooltip":"Keeps your win state private so you can claim in peace. Don't lose this passphrase or you can't claim a prize. (don't just say milady)"},"")),b("input",{type:"text",value:i,placeholder:"Passphrase (e.g., my-secret-phrase)",onInput:this.handlePassphraseChange})),b("div",{className:"slider-row"},b("div",null,b("p",{className:"label"},"Victory Odds"),b("div",null,`${r}%`)),b("input",{type:"range",min:"1",max:"99",value:r,onInput:this.handleOddsInput,onChange:this.handleOddsChange})),b("div",{className:"payment-readout"},"Bottle Price: ",b("strong",null,`${u} ETH`)),o&&b("p",{className:"form-error"},o),b("div",{className:`modal-loader ${s?"active":""}`,"aria-hidden":String(!s)}),b("button",{className:"btn primary full",type:"button",disabled:!g,onClick:this.handlePurchase},s?"Processing...":"Buy Bottle"),a&&b("div",{className:"owner-cancel-section"},b("hr",{className:"section-divider"}),b("p",{className:"muted small-text owner-cancel-label"},"You created this challenge"),l?b("div",{className:"cancel-confirm-row"},b("span",{className:"cancel-confirm-text"},"Cancel this challenge?"),b("button",{className:"btn ghost small",type:"button",disabled:h,onClick:this.handleHideCancelConfirm},"No"),b("button",{className:"btn danger small",type:"button",disabled:h,onClick:this.handleConfirmCancel},h?"Cancelling...":"Yes, Cancel")):b("button",{className:"btn ghost full",type:"button",onClick:this.handleShowCancelConfirm},"Cancel Challenge"))))}}let cc=null;class vd extends qt{constructor(t){super(t);oe(this,"handleReveal",()=>{ie.emit("modal:open",{modal:"reveal",bottle:this.props.bottle})});oe(this,"handlePreview",()=>{ie.emit("bottle:preview",{bottle:this.props.bottle})});oe(this,"handleClaim",()=>{ie.emit("bottle:claim",{bottle:this.props.bottle})});const r=t.bottle,i=Y6(r.id),s=Nh(r.id);let o=r.status,a=r.result||(s!==null?s?"win":"loss":null);const l=r.status==="ready"||r.cooldownRemaining<=0&&r.status!=="cooling";o!=="claimed"&&(i||a)&&l&&(o="revealed");const h=r.cooldownRemaining||0;this._cooldownTarget=h>0?Date.now()+h*1e3:0,this.state={cooldownRemaining:h,bottleDataUrl:null,status:o,result:a,watchedCountdownFinish:!1}}async didMount(){await this.loadBottleSvg(),this.subscribe("bottle:revealed",({bottle:t,result:r})=>{t.id===this.props.bottle.id&&this.setState({status:"revealed",result:r})}),this._startCountdownIfNeeded()}didUpdate(){const t=this.props.bottle;t.cooldownRemaining>0&&this._cooldownTarget===0&&this.state.status!=="revealed"&&this.state.status!=="claimed"&&(this._cooldownTarget=Date.now()+t.cooldownRemaining*1e3,this.setState({cooldownRemaining:t.cooldownRemaining,status:"cooling"}),this._startCountdownIfNeeded())}_startCountdownIfNeeded(){this._countdownRunning||this._cooldownTarget<=0||this.state.status==="revealed"||this.state.status==="claimed"||(this._countdownRunning=!0,this._countdownInterval=this.setInterval(()=>{if(this.state.status==="revealed"||this.state.status==="claimable"||this.state.status==="claimed")return;const t=Math.max(0,Math.ceil((this._cooldownTarget-Date.now())/1e3));t<=0?this.setState({cooldownRemaining:0,status:"ready",watchedCountdownFinish:!0}):this.setState({cooldownRemaining:t})},1e3))}async loadBottleSvg(){await Promise.resolve();const{status:t,result:r}=this.state;if(!(t==="claimed"||t==="claimable"||t==="revealed"&&r==="win"||t==="revealed"&&r==="loss"))try{cc||(cc=await(await fetch("/bottle.svg")).text());const o=this.generateColor(this.props.bottle.id),a=cc.replace(/BOTTLE_LIQUID_COLOR/g,o),l="data:image/svg+xml,"+encodeURIComponent(a);this.setState({bottleDataUrl:l})}catch(o){console.error("Failed to load bottle SVG:",o)}}generateColor(t){return`hsl(${t*137%360}, 75%, 55%)`}formatTime(t){const r=Math.floor(t/60),i=t%60;return`${r}:${i.toString().padStart(2,"0")}`}renderBottleVisual(){const{status:t,result:r,bottleDataUrl:i,cooldownRemaining:s,watchedCountdownFinish:o}=this.state,a=this.generateColor(this.props.bottle.id),l=t==="revealed"||t==="claimable"||t==="claimed"||t==="ready"&&!o&&s<=0,h=l&&r==="win",u=l&&r==="loss";return h?b("div",{className:"bottle-visual-wrapper"},b("div",{className:"bottle-color-circle",style:`background: ${a};`}),b("img",{src:"/win.svg",alt:"Winner",className:"bottle-result-svg"})):u?b("div",{className:"bottle-visual-wrapper"},b("div",{className:"bottle-color-circle",style:`background: ${a};`}),b("img",{src:"/loss.svg",alt:"No luck",className:"bottle-result-svg"})):i?b("img",{src:i,alt:"Bottle",className:"bottle-svg-img"}):b("div",{className:"bottle-loading"},"Loading...")}render(){const{id:t,challengeTitle:r,odds:i,priceEth:s}=this.props.bottle,{cooldownRemaining:o,status:a,result:l,watchedCountdownFinish:h}=this.state,u=a==="cooling"&&o>0,g=a==="ready"&&h,x=a==="claimed",A=o<=0&&a!=="claimed",E=a==="revealed"||a==="ready"&&!h&&A||a==="cooling"&&A,I=!x&&(a==="claimable"||E&&l==="win"&&!this.props.bottle.claimed),T=E&&l===null,R=T&&Hi(this.props.bottle.id),O=l===null&&(g||T||A);let B="",U="";return x?(B="Claimed!",U="winner"):u&&o>0?(B=`Cooling: ${this.formatTime(o)}`,U=""):g?(B="Ready to pop!",U=""):T&&!R?(B="Enter passphrase to reveal",U=""):T&&R?(B="Ready to reveal",U=""):E?(B=l==="win"?"Winner!":"No luck",U=l==="win"?"winner":"loser"):I?(B="Claim your prize!",U="winner"):A&&(B="Ready to reveal",U=""),b("article",{className:"dashboard-bottle-card"},b("div",{className:"dashboard-bottle-media","data-reveal-ready":g?"true":"false"},b("div",{className:"dashboard-bottle-visual"},this.renderBottleVisual()),b("button",{className:"reveal-trigger",type:"button",disabled:!O,onClick:this.handleReveal},"Crack Open")),b("div",{className:"dashboard-bottle-head"},b("h4",null,r),b("span",{className:"challenge-card__badge"},`#${t}`)),b("p",{className:"dashboard-bottle-meta"},`${i}% chance  ${s} ETH`),b("p",{className:`dashboard-bottle-status ${U}`},B),b("div",{className:"dashboard-bottle-actions"},b("button",{className:"btn ghost small bottle-preview-btn",type:"button",onClick:this.handlePreview},"Details"),O&&!g&&b("button",{className:"btn primary small",type:"button",onClick:this.handleReveal},"Reveal"),I&&b("button",{className:"btn primary small bottle-claim-btn",type:"button",onClick:this.handleClaim},"Claim")))}}class vp extends qt{constructor(t){super(t);oe(this,"handleClaimRefunds",()=>{ie.emit("modal:openRefund",{chances:this.state.refundableChances})});oe(this,"toggleCollapse",()=>{this.setState({collapsed:!this.state.collapsed})});oe(this,"handleRefresh",()=>{ie.emit("dashboard:refresh")});this.state={collapsed:!1,refundableChances:[],bottles:t.bottles||[]}}didMount(){this.subscribe("refundable:found",({chances:t})=>{this.setState({refundableChances:t})})}setRefundableChances(t){this.setState({refundableChances:t})}setBottles(t){this.setState({bottles:t})}render(){const{collapsed:t,refundableChances:r,bottles:i}=this.state,s=i.length,o=r.length,a=t?"collapsed":"",l=t?"Show":"Hide",h=s===0;return this.props.compact?b("div",{className:"dispense-bottles"},o>0&&b("div",{className:"refundable-alert refundable-alert--compact"},b("div",{className:"refundable-alert__content"},b("span",{className:"refundable-alert__icon"},""),b("span",{className:"refundable-alert__text-compact"},`${o} refund${o===1?"":"s"} available`)),b("button",{className:"btn primary small",type:"button",onClick:this.handleClaimRefunds},"Claim")),h?b("p",{className:"muted dispense-empty"},"Empty - buy a bottle to see it here!"):i.map(u=>b(vd,{key:u.id,bottle:u,compact:!0}))):b("section",{className:"dashboard"},o>0&&b("div",{className:"refundable-alert"},b("div",{className:"refundable-alert__content"},b("span",{className:"refundable-alert__icon"},""),b("div",{className:"refundable-alert__text"},b("span",{className:"refundable-alert__title"},"Refunds Available"),b("span",{className:"refundable-alert__count"},`${o} cancelled ${o===1?"trial":"trials"} with unclaimed refunds`))),b("button",{className:"btn primary small",type:"button",onClick:this.handleClaimRefunds},"Claim Refunds")),b("div",{className:"dashboard-controls"},b("div",{className:"dashboard-title-row"},b("h2",null,"Your Bottles"),b("span",null,s)),b("div",{className:"dashboard-controls-actions"},b("button",{className:"btn secondary small",type:"button",onClick:this.handleRefresh},"Refresh"),b("button",{className:"btn ghost small",type:"button",onClick:this.toggleCollapse},l))),b("div",{className:`dashboard-body bottles-only ${a}`},h?b("p",{className:"muted"},"No bottles yetload a challenge to see them here."):i.map(u=>b(vd,{key:u.id,bottle:u}))))}}const qc=[{name:"Milady Maker",address:"0x5af0d9827e0c53e4799bb226655a1de152a425a5",icon:"/assets/icons/milady.avif",enumerable:!0},{name:"MiladyStation",address:"0xB24BaB1732D34cAD0A7C7035C3539aEC553bF3a0",icon:"/assets/icons/miladystation.avif",enumerable:!0},{name:"Redacted Remilio Babies",address:"0xD3D9ddd0CF0A5F0BFB8f7fcEAe075DF687eAEBaB",icon:"/assets/icons/remilio.webp",enumerable:!0},{name:"Radbro",address:"0xABCDB5710B88f456fED1e99025379e2969F29610",icon:"/assets/icons/radbro.webp",enumerable:!0},{name:"Pixelady Maker",address:"0x8Fc0D90f2C45a5e7f94904075c952e0943CFCCfd",icon:"/assets/icons/pixelady.avif",enumerable:!0}],{isIpfsUri:Z6}=Vi,ew=new Set(qc.map(n=>n.address.toLowerCase()));class wp extends qt{constructor(t){super(t);oe(this,"handleMediaClick",()=>{ie.emit("challenge:preview",{challenge:this.props.challenge})});oe(this,"handleEnterClick",()=>{ie.emit("modal:open",{modal:"entry",challenge:this.props.challenge})});oe(this,"handleCancelClick",()=>{this.setState({showCancelConfirm:!0})});oe(this,"handleDenyCancel",()=>{this.setState({showCancelConfirm:!1})});oe(this,"handleConfirmCancel",()=>{this.setState({cancelling:!0}),ie.emit("challenge:cancel",{challengeId:this.props.challenge.id})});this.state={showCancelConfirm:!1,cancelling:!1}}setConnectedAddress(t){this.connectedAddress=t,this.update()}isOwner(){const t=this.props.connectedAddress||this.connectedAddress;return!t||!this.props.challenge.creator?!1:t.toLowerCase()===this.props.challenge.creator.toLowerCase()}render(){const{id:t,title:r,status:i,nftContract:s,tokenId:o,image:a,appraisalEth:l,potEth:h,bottlesSold:u,lore:g}=this.props.challenge,{showCancelConfirm:x,cancelling:A}=this.state,E=i==="cancelled"?"challenge-card--cancelled":"",I=!!a,T=I&&Z6(a),R=s?`https://etherscan.io/address/${s}`:"#",O=s&&ew.has(s.toLowerCase()),B=i==="active",U=this.isOwner(),q=i!=="active",W=(parseFloat(l)*.05).toFixed(4);return b("article",{className:`challenge-card ${E}`},x&&b("div",{className:"cancel-confirm-overlay"},b("div",{className:"cancel-confirm"},b("h4",null,"Are you sure?"),b("p",{className:"cancel-confirm__warning cancel-confirm__warning--severe"},"This action is irreversible."),b("p",{className:"cancel-confirm__warning"},b("strong",null,`You will permanently lose your ${W} ETH deposit.`)," This ETH will not be returned to you."),b("p",{className:"cancel-confirm__warning"},`All ${u} bottle holder${u===1?"":"s"} will be entitled to full refunds of their entries.`),b("div",{className:"cancel-confirm__actions"},b("button",{className:"btn primary small cancel-confirm__no",type:"button",disabled:A,onClick:this.handleDenyCancel},"Keep Challenge"),b("button",{className:"btn danger small cancel-confirm__yes",type:"button",disabled:A,onClick:this.handleConfirmCancel},A?"Cancelling...":"Cancel & Forfeit Deposit")))),b("div",{className:`challenge-card__media ${I?"has-image":""}`,onClick:this.handleMediaClick},I&&(T?b(Ji,{src:a,alt:r,className:"challenge-card__image"}):b("img",{src:a,alt:r,className:"challenge-card__image"})),q&&b("span",{className:"challenge-card__status"},i)),b("div",{className:"challenge-card__body"},b("div",{className:"challenge-card__title"},b("div",{className:"challenge-card__title-left"},b("h3",null,r),b("a",{className:`ghost-link contract-link${O?" verified":""}`,href:R,target:"_blank",rel:"noreferrer"},s?`${s.slice(0,6)}...${s.slice(-4)}`:`#${o}`,O&&b("span",{className:"verified-check",title:"Known collection"},""))),b("span",{className:"challenge-card__badge"},`Challenge #${t}`)),b("p",{className:"challenge-card__lore"},g),b("div",{className:"challenge-card__stats"},b("div",null,b("span",null,"Appraisal"),b("strong",null,`${parseFloat(l).toFixed(2)} ETH`)),b("div",null,b("span",null,"Prize Pot"),b("strong",null,`${parseFloat(h).toFixed(2)} ETH`)),b("div",null,b("span",null,"Bottles Sold"),b("strong",null,u))),b("div",{className:"challenge-card__actions"},B?b("button",{className:"btn primary challenge-card__enter-btn",type:"button",onClick:this.handleEnterClick},"Get Bottles"):b("button",{className:"btn ghost",type:"button",disabled:!0},i),B&&U&&b("button",{className:"btn ghost small challenge-card__cancel-btn",type:"button",onClick:this.handleCancelClick},"Cancel"))))}}const{isIpfsUri:tw}=Vi;class rw extends qt{constructor(t){super(t);oe(this,"nextPage",()=>{const t=Math.ceil(this.state.challenges.length/6)-1;this.state.currentPage<t&&this.setState({currentPage:this.state.currentPage+1})});oe(this,"prevPage",()=>{this.state.currentPage>0&&this.setState({currentPage:this.state.currentPage-1})});this.state={challenges:t.challenges||[],connectedAddress:t.connectedAddress||null,currentPage:0}}setChallenges(t){this.setState({challenges:t,currentPage:0})}setConnectedAddress(t){this.setState({connectedAddress:t})}getSlotIndex(t){const r=String.fromCharCode(65+Math.floor(t/3)),i=t%3+1;return`${r}${i}`}handleSlotClick(t,r){ie.emit("modal:open",{modal:"entry",challenge:t,slotIndex:this.getSlotIndex(r)})}renderProductSlot(t,r){const i=this.getSlotIndex(r),s=t.status!=="active";return b("div",{key:t.id||r,className:`product-slot ${s?"product-slot--sold-out":""}`,onClick:()=>!s&&this.handleSlotClick(t,r)},b("span",{className:"product-slot__index"},i),b("div",{className:"product-slot__image"},t.image?tw(t.image)?b(Ji,{src:t.image,alt:t.title}):b("img",{src:t.image,alt:t.title}):b("div",{className:"product-slot__placeholder"},"?")),b("div",{className:"product-slot__price"},b("div",{className:"product-slot__price-row"},b("span",{className:"product-slot__price-label"},"Appraisal"),b("span",{className:"product-slot__price-value"},`${t.appraisalEth} `)),b("div",{className:"product-slot__price-row"},b("span",{className:"product-slot__price-label"},"Attempts"),b("span",{className:"product-slot__price-value product-slot__price-value--pot"},`${t.potEth||"0"} `))))}renderEmptySlot(t){const r=this.getSlotIndex(t);return b("div",{className:"product-slot product-slot--empty"},b("span",{className:"product-slot__index"},r),b("div",{className:"product-slot__image"},b("div",{className:"product-slot__placeholder"},"")))}render(){const{challenges:t,connectedAddress:r}=this.state;if(this.props.asProductGrid){const{currentPage:o}=this.state,a=[...t].sort((E,I)=>{const T=parseFloat(E.appraisalEth)||0;return(parseFloat(I.appraisalEth)||0)-T}),l=Math.max(1,Math.ceil(a.length/6)),h=o*6,u=a.slice(h,h+6),g=o>0,x=o<l-1,A=[];for(let E=0;E<6;E++){const I=h+E;E<u.length?A.push(this.renderProductSlot(u[E],I)):A.push(this.renderEmptySlot(I))}return b("div",{className:"product-display"},b("div",{className:"product-grid"},A),l>1&&b("div",{className:"product-pagination"},b("button",{className:"pagination-btn",disabled:!g,onClick:this.prevPage},""),b("span",{className:"pagination-info"},`${o+1} / ${l}`),b("button",{className:"pagination-btn",disabled:!x,onClick:this.nextPage},"")))}return b("section",{className:"challenge-grid"},b("header",null,b("div",null,b("h2",null,"Prizes"))),b("div",{className:"challenge-list-grid"},isEmpty?b("p",{className:"muted"},"No active challenges at the moment."):t.map((s,o)=>b(wp,{key:s.id||o,challenge:s,connectedAddress:r}))))}}const{isIpfsUri:nw}=Vi;class wd extends qt{constructor(t){super(t);oe(this,"handleClick",()=>{ie.emit("modal:open",{modal:"winDetails",winner:this.props.winner})});this.state={}}formatAddress(t){return t?`${t.slice(0,6)}...${t.slice(-4)}`:"???"}formatEntryValue(t){if(!t)return"0 ETH";try{const r=Number(t)/1e18;return r<1e-4?"<0.0001 ETH":`${r.toFixed(4)} ETH`}catch{return"0 ETH"}}render(){const{winner:t}=this.props,{metadata:r}=t,i=(r==null?void 0:r.image)||"/bottle.svg",s=(r==null?void 0:r.name)||`NFT #${t.nftId}`,o=nw(i)?b(Ji,{src:i,alt:s,loading:"lazy"}):b("img",{src:i,alt:s,loading:"lazy"});return b("button",{className:"winner-pill",type:"button",title:"View win details",onClick:this.handleClick},b("div",{className:"winner-pill__thumb"},o),b("div",{className:"winner-pill__info"},b("span",{className:"winner-pill__address"},this.formatAddress(t.winner)),b("span",{className:"winner-pill__value"},this.formatEntryValue(t.entryValue))))}}const{isIpfsUri:iw,resolveUrl:bd,fetchJsonWithIpfsSupport:sw,configureGatewayManager:ow,setCustomGateway:aw}=Vi;ow({timeout:3e4,maxRetries:2,corsGatewaysFirst:!0});aw("https://w3s.link/ipfs/");const lw=["function tokenURI(uint256 tokenId) view returns (string)"],cw={"0x5af0d9827e0c53e4799bb226655a1de152a425a5":"milady","0xd3d9ddd0cf0a5f0bfb8f7fceae075df687eaebab":"remilio"};class hw{constructor(){this.cache=new Map,this.provider=null,this.pendingFetches=new Map}setProvider(e){this.provider=e}_getCacheKey(e,t){return`${e.toLowerCase()}-${t}`}_normalizeImageUri(e){if(!e)return null;if(e.startsWith("data:")||e.startsWith("ipfs://"))return e;if(e.startsWith("Qm")||e.startsWith("bafy"))return"ipfs://"+e;if(e.startsWith("http://")||e.startsWith("https://")){const t=this._extractIpfsPath(e);return t?"ipfs://"+t:e}return e}_extractIpfsPath(e){try{const t=new URL(e),r=t.pathname.match(/^\/ipfs\/(.+)$/);if(r)return r[1];const i=t.hostname.match(/^(bafy[a-z0-9]+|Qm[a-zA-Z0-9]+)\.ipfs\./);if(i){const s=i[1],o=t.pathname==="/"?"":t.pathname;return s+o}return null}catch{return null}}_resolveUri(e){return e?e.startsWith("http://")||e.startsWith("https://")||e.startsWith("data:")?e:iw(e)?bd(e):e.startsWith("Qm")||e.startsWith("bafy")?bd("ipfs://"+e):e:null}_parseDataUri(e){try{if(!e.startsWith("data:"))return null;if(e.includes("base64,")){const t=e.split("base64,")[1],r=atob(t);return JSON.parse(r)}if(e.includes("application/json,")){const t=decodeURIComponent(e.split("application/json,")[1]);return JSON.parse(t)}return null}catch(t){return console.warn("[NftMetadataService] Failed to parse data URI:",t),null}}async _fetchMetadata(e){if(!e)return null;if(e.startsWith("data:"))return this._parseDataUri(e);try{return await sw(e,{timeout:3e4})}catch(t){return console.warn("[NftMetadataService] Failed to fetch metadata:",e,t.message),null}}async getMetadata(e,t){if(!this.provider)return console.warn("[NftMetadataService] No provider set"),null;const r=this._getCacheKey(e,t);if(this.cache.has(r))return this.cache.get(r);if(this.pendingFetches.has(r))return this.pendingFetches.get(r);const i=this._fetchMetadataForToken(e,t,r);this.pendingFetches.set(r,i);try{return await i}finally{this.pendingFetches.delete(r)}}async _fetchMetadataForToken(e,t,r){try{const i=cw[e.toLowerCase()];if(i)try{const l=`/collections/${i}/${t}.json`,h=await fetch(l);if(h.ok){const u=await h.json();return console.log("[NftMetadataService] Using local metadata for",i,t),u.image&&(u.image=this._normalizeImageUri(u.image)),u.image_url&&!u.image&&(u.image=this._normalizeImageUri(u.image_url)),this.cache.set(r,u),u}}catch(l){console.log("[NftMetadataService] Local metadata not available, falling back to contract:",l.message)}const o=await new ar(e,lw,this.provider).tokenURI(t);if(!o)return console.warn("[NftMetadataService] No tokenURI for",e,t),null;const a=await this._fetchMetadata(o);return a&&(a.image&&(a.image=this._normalizeImageUri(a.image)),a.image_url&&!a.image&&(a.image=this._normalizeImageUri(a.image_url)),this.cache.set(r,a)),a}catch(i){return console.warn("[NftMetadataService] Failed to get metadata:",e,t,i.message),null}}async prefetchBatch(e){const t=new Map;return await Promise.all(e.map(async({contractAddress:r,tokenId:i})=>{const s=await this.getMetadata(r,i);if(s){const o=this._getCacheKey(r,i);t.set(o,s)}})),t}clearCache(){this.cache.clear()}}const In=new hw,{isIpfsUri:uw}=Vi;class bp extends qt{constructor(t){super(t);oe(this,"handleMouseEnter",()=>{this.setState({paused:!0})});oe(this,"handleMouseLeave",()=>{this.setState({paused:!1})});oe(this,"handleStickerClick",t=>{ie.emit("modal:open",{modal:"winDetails",winner:t})});this.state={winners:[],loading:!0,ready:!1,error:null,paused:!1},this._loadingStarted=!1}didMount(){var t,r;(t=this.props.contractService)!=null&&t.provider&&In.setProvider(this.props.contractService.provider),this.subscribe("app:dataReady",()=>{this.startLoading()}),(r=this.props.colasseumIndexer)!=null&&r.initialized&&setTimeout(()=>this.startLoading(),500),this.subscribe("colasseum:indexerReady",()=>{setTimeout(()=>this.startLoading(),500)}),this.subscribe("indexer:syncComplete",()=>{this.state.ready&&this.loadWinners()})}startLoading(){var t;this.state.ready||this._loadingStarted||(this._loadingStarted=!0,(t=this.props.colasseumIndexer)!=null&&t.initialized&&!this._victorUnsub&&(this._victorUnsub=this.props.colasseumIndexer.subscribe("Victor",()=>{this.loadWinners()})),this.loadWinners())}willUnmount(){this._victorUnsub&&(this._victorUnsub(),this._victorUnsub=null)}async loadWinners(){var t;if(!((t=this.props.colasseumIndexer)!=null&&t.initialized)){this.setState({loading:!1,winners:[],ready:!1});return}try{const r=await this.props.colasseumIndexer.getWinners({limit:20});let i=r.winners;if(this.props.challengeId!==void 0&&(i=r.winners.filter(o=>String(o.trialId)===String(this.props.challengeId))),i.length===0){this.setState({winners:[],loading:!1,ready:!0,error:null});return}const s=await this.enrichWinnersWithMetadata(i);this.setState({winners:s,loading:!1,ready:!0,error:null})}catch(r){console.error("[WinnersSection] Failed to load winners:",r),this.setState({loading:!1,ready:!1,error:r.message})}}async enrichWinnersWithMetadata(t){return await Promise.all(t.map(async i=>{var s,o,a;try{const l=await((s=this.props.contractService)==null?void 0:s.getTrial(i.trialId));if(!l)return{...i,metadata:null};const h=l.nftContract,u=l.nftId,g=await In.getMetadata(h,u);let x="0";try{const E=Number(i.chanceId),I=await((o=this.props.contractService)==null?void 0:o.getChance(E));I&&(x=String(I.numChances*1e9))}catch(E){console.warn("[WinnersSection] Could not fetch chance price:",E.message)}let A=null;try{if(i.blockNumber&&((a=this.props.contractService)!=null&&a.provider)){const E=await this.props.contractService.provider.getBlock(i.blockNumber);A=(E==null?void 0:E.timestamp)||null}}catch(E){console.warn("[WinnersSection] Could not fetch block timestamp:",E.message)}return{...i,nftContract:h,nftId:u,lore:l.lore||"",metadata:g,entryValue:x,timestamp:A}}catch(l){return console.warn("[WinnersSection] Failed to enrich winner:",i.trialId,l),{...i,metadata:null}}}))}formatEntryValue(t){if(!t)return"0 ETH";try{const r=Number(t)/1e18;return r<1e-4?"<0.0001 ETH":`${r.toFixed(4)} ETH`}catch{return"0 ETH"}}renderImage(t,r,i=""){return t?uw(t)?b(Ji,{src:t,alt:r,className:i,loading:"lazy"}):b("img",{src:t,alt:r,className:i,loading:"lazy"}):null}renderStaticPill(t){var a,l;const r=((a=t.metadata)==null?void 0:a.image)||"/bottle.svg",i=((l=t.metadata)==null?void 0:l.name)||`NFT #${t.nftId}`,s=t.winner?`${t.winner.slice(0,6)}...${t.winner.slice(-4)}`:"???",o=this.formatEntryValue(t.entryValue);return b("div",{className:"winner-pill-wrapper"},b("div",{className:"winner-pill winner-pill--static"},b("div",{className:"winner-pill__thumb"},this.renderImage(r,i)),b("div",{className:"winner-pill__info"},b("span",{className:"winner-pill__address"},s),b("span",{className:"winner-pill__value"},o))))}renderSticker(t,r){var o;const i=((o=t.metadata)==null?void 0:o.image)||"/bottle.svg",s=t.winner?`${t.winner.slice(0,6)}...${t.winner.slice(-4)}`:"???";return b("button",{className:`sticker sticker--${r%5+1}`,type:"button",title:"View win details",onClick:()=>this.handleStickerClick(t)},b("div",{className:"sticker__thumb"},this.renderImage(i,"Winner NFT")),b("div",{className:"sticker__content sticker__content--winner"},`${s}`))}render(){const{winners:t,loading:r,ready:i,error:s,paused:o}=this.state;if(this.props.asStickers){if(!i||r||s||t.length===0)return b("div",{className:"stickers-container stickers-container--empty"});const l=t.slice(0,5);return b("div",{className:"stickers-container"},l.map((h,u)=>this.renderSticker(h,u)))}if(!i||r)return b("div",{className:"winners-section winners-section--hidden"});if(s)return b("div",{className:"winners-section winners-section--hidden"});if(t.length===0)return b("div",{className:"winners-section winners-section--placeholder"},b("p",{className:"winners-placeholder-text"},"Who will be the FIRST miladycola champion?"));if(t.length<4)return b("div",{className:"winners-section winners-section--static"},b("h3",{className:"winners-section__heading"},"Real Miladycola Winners"),b("div",{className:"winners-static-row"},t.map((l,h)=>b(wd,{key:h,winner:l}))));const a=o?"winners-marquee--paused":"";return b("div",{className:"winners-section winners-section--marquee"},b("h3",{className:"winners-section__heading"},"Real Miladycola Winners"),b("div",{className:`winners-marquee ${a}`},b("div",{className:"winners-marquee-track",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},t.map((l,h)=>b(wd,{key:`pill-${h}`,winner:l})),t.map((l,h)=>b("div",{key:`static-${h}`},this.renderStaticPill(l))))))}}class fw extends qt{constructor(t){super(t);oe(this,"handleClose",()=>{ie.emit("modal:close")});oe(this,"handleCancel",()=>{ie.emit("modal:close")});oe(this,"handleConfirm",()=>{ie.emit("prize:confirmed",{challenge:this.state.challenge}),ie.emit("modal:close")});oe(this,"toggleTraits",()=>{this.setState({traitsOpen:!this.state.traitsOpen})});this.state={challenge:null,traitsOpen:!1,mode:"view"}}setChallenge(t,r="view"){this.setState({challenge:t,traitsOpen:!1,mode:r})}render(){const{challenge:t,traitsOpen:r,mode:i}=this.state;if(!t)return b("div",{className:"prize-detail-panel"},b("p",{className:"muted"},"No prize selected"));const{title:s,image:o,lore:a,nftContract:l,tokenId:h,appraisalEth:u,potEth:g,bottlesSold:x,creatorAddress:A}=t,E=r?"Hide Details":"Show Details",I=l?`${l.slice(0,6)}...${l.slice(-4)}`:"",T=A?`${A.slice(0,6)}...${A.slice(-4)}`:"",R=i==="view";return b("div",{className:"prize-detail-panel"},b("div",{className:"prize-detail-image"},o?b("img",{src:o,alt:s}):b("div",{className:"prize-placeholder"})),b("div",{className:"prize-detail-content"},b("h3",{className:"prize-detail-title"},s),b("p",{className:"prize-detail-description"},a||"No description available."),b("div",{className:"trait-section","data-open":r?"true":"false"},b("button",{className:"btn ghost smaller",type:"button",onClick:this.toggleTraits},E),b("div",{className:"trait-list"},b("div",null,b("span",null,"Contract"),b("a",{className:"ghost-link",href:`https://etherscan.io/address/${l}`,target:"_blank",rel:"noreferrer"},b("strong",null,I))),b("div",null,b("span",null,"Token ID"),b("strong",null,`#${h}`)),b("div",null,b("span",null,"Appraisal"),b("strong",null,`${u} ETH`)),b("div",null,b("span",null,"Prize Pot"),b("strong",null,`${g} ETH`)),b("div",null,b("span",null,"Bottles Sold"),b("strong",null,x)),b("div",null,b("span",null,"Creator"),b("strong",null,T)))),b("div",{className:"prize-detail-actions"},R?b("button",{className:"btn ghost",type:"button",onClick:this.handleClose},"Close"):[b("button",{key:"cancel",className:"btn ghost",type:"button",onClick:this.handleCancel},"Cancel"),b("button",{key:"confirm",className:"btn primary",type:"button",onClick:this.handleConfirm},"Select This Prize")])))}}const{isIpfsUri:dw}=Vi,hc=["function balanceOf(address owner) view returns (uint256)","function tokenOfOwnerByIndex(address owner, uint256 index) view returns (uint256)","function ownerOf(uint256 tokenId) view returns (address)","event Transfer(address indexed from, address indexed to, uint256 indexed tokenId)"];class pw extends qt{constructor(t){super(t);oe(this,"handleClose",()=>{ie.emit("modal:close")});oe(this,"handleContractInput",t=>{this.setState({manualContract:t.target.value})});oe(this,"handleManualContractSubmit",async()=>{var l,h;const{manualContract:t}=this.state;if(!/^0x[a-fA-F0-9]{40}$/.test(t)){this.setState({error:"Invalid contract address format"});return}this.setState({scanning:!0,scanningMessage:"Finding your tokens...",error:null});const r={name:"Custom Collection",address:t,icon:"?"},i=[];let s=0;const o=(l=this.props.walletService)==null?void 0:l.connectedAddress;if((h=this.props.contractService)!=null&&h.provider&&o)try{const u=new ar(t,hc,this.props.contractService.provider);try{const x=["function name() view returns (string)"],E=await new ar(t,x,this.props.contractService.provider).name();E&&(r.name=E)}catch{}if(s=(await u.balanceOf(o)).toNumber(),console.log("[ChallengeWizard] Custom contract balance:",s),s>0){let x=!0;try{for(let A=0;A<Math.min(s,20);A++){const E=await u.tokenOfOwnerByIndex(o,A);i.push({id:E.toString(),name:`${r.name} #${E.toString()}`})}console.log("[ChallengeWizard] Custom contract is enumerable, found",i.length,"tokens")}catch{x=!1,console.log("[ChallengeWizard] Custom contract not enumerable, trying Transfer events...");try{const E=u.filters.Transfer(null,o),I=await u.queryFilter(E),T=new Set(I.map(O=>O.args.tokenId.toString()));console.log("[ChallengeWizard] Found",T.size,"Transfer events to address");const R=[];for(const O of T){try{(await u.ownerOf(O)).toLowerCase()===o.toLowerCase()&&R.push(O)}catch{}if(R.length>=20)break}console.log("[ChallengeWizard] Verified",R.length,"tokens via events");for(const O of R)i.push({id:O,name:`${r.name} #${O}`})}catch(E){console.warn("[ChallengeWizard] Event query failed:",E.message)}}}}catch(u){console.warn("[ChallengeWizard] Failed to scan custom contract:",u)}i.length===0&&s>0&&i.push({id:"_manual_",name:`You own ${s} - enter token ID manually`,requiresManualId:!0});const a={collection:r,tokens:i,balance:s,tokensLoaded:!0};this.setState({scanning:!1,holdings:[...this.state.holdings,a],selectedCollection:a,stage:"tokens",error:null})});oe(this,"handleCollectionSelect",async t=>{let r=this.state.holdings.find(i=>i.collection.address===t);if(r)if(r.tokensLoaded)this.setState({selectedCollection:r,stage:"tokens"});else{this.setState({scanning:!0,scanningMessage:"Finding your tokens..."}),r=await this.loadTokensForCollection(r);const i=this.state.holdings.map(s=>s.collection.address===t?r:s);this.setState({holdings:i,selectedCollection:r,stage:"tokens",scanning:!1})}});oe(this,"handleChangeCollection",()=>{this.setState({selectedCollection:null,selectedToken:null,manualTokenId:"",stage:"contract"})});oe(this,"handleManualTokenInput",t=>{this.setState({manualTokenId:t.target.value})});oe(this,"handleManualTokenSubmit",()=>{const{manualTokenId:t,selectedCollection:r}=this.state;!t||!r||this.handleTokenSelect(t.trim())});oe(this,"handleTokenSelect",async t=>{var l;const{selectedCollection:r}=this.state;if(!r)return;const i=r.collection.address,s=r.collection.name;this.setState({scanning:!0,scanningMessage:"Fetching token metadata..."}),(l=this.props.contractService)!=null&&l.provider&&!In.provider&&In.setProvider(this.props.contractService.provider);let o=null;try{o=await In.getMetadata(i,t),console.log("[ChallengeWizard] Fetched metadata:",o)}catch(h){console.warn("[ChallengeWizard] Failed to fetch metadata:",h.message)}const a={id:t,title:(o==null?void 0:o.name)||`${s} #${t}`,nftContract:i,image:(o==null?void 0:o.image)||"",description:(o==null?void 0:o.description)||"",attributes:(o==null?void 0:o.attributes)||[],metadata:o};this.setState({selectedToken:a,stage:"preview",scanning:!1})});oe(this,"handleCancelToken",()=>{this.setState({selectedToken:null,stage:"tokens"})});oe(this,"handleConfirmToken",()=>{this.setState({stage:"appraisal"})});oe(this,"handleChangeToken",()=>{this.setState({selectedToken:null,stage:"tokens"})});oe(this,"handleAppraisalStepStart",t=>{this.applyAppraisalStep(t),this.appraisalStepTimeout=setTimeout(()=>{this.appraisalStepInterval=setInterval(()=>{this.applyAppraisalStep(t)},80)},400)});oe(this,"handleAppraisalStepStop",()=>{this.appraisalStepTimeout&&(clearTimeout(this.appraisalStepTimeout),this.appraisalStepTimeout=null),this.appraisalStepInterval&&(clearInterval(this.appraisalStepInterval),this.appraisalStepInterval=null)});oe(this,"handleAppraisalInput",t=>{const r=parseFloat(t.target.value)||0;this.setState({appraisal:r})});oe(this,"handleLoreInput",t=>{this.setState({lore:t.target.value})});oe(this,"handleGoToReview",()=>{this.setState({stage:"review"})});oe(this,"handleBackToAppraisal",()=>{this.setState({stage:"appraisal"})});oe(this,"handleCreate",async()=>{var o,a,l;this.setState({stage:"pending",error:null});const t=((o=this.state.selectedToken)==null?void 0:o.nftContract)||this.state.manualContract,r=(a=this.state.selectedToken)==null?void 0:a.id,i=this.state.appraisal,s=this.state.lore.trim();if((l=this.props.contractService)!=null&&l.initialized)try{await this.props.contractService.isNftApproved(t,r)||await this.props.contractService.approveNft(t,r);const{trialId:u}=await this.props.contractService.challenge(t,r,String(i),s);ie.emit("modal:close"),ie.emit("challenge:created",{trialId:u,nftContract:t,tokenId:r,appraisal:i,lore:s})}catch(h){console.error("[ChallengeWizard] Failed to create challenge:",h),this.setState({stage:"review",error:h.reason||h.message||"Transaction failed"})}else setTimeout(()=>{ie.emit("modal:close"),ie.emit("challenge:created",{nftContract:t,tokenId:r,appraisal:i})},2e3)});this.state={stage:"contract",scanning:!1,scanningMessage:"Scanning popular collections...",manualContract:"",manualTokenId:"",holdings:[],selectedCollection:null,selectedToken:null,appraisal:.2,lore:"",walletBalance:"--",error:null},this.appraisalStepTimeout=null,this.appraisalStepInterval=null}reset(){this.handleAppraisalStepStop(),this.setState({stage:"contract",scanning:!1,manualContract:"",manualTokenId:"",holdings:[],selectedCollection:null,selectedToken:null,appraisal:.2,lore:"",error:null}),this.scanCollections()}didMount(){this.scanCollections()}willUnmount(){this.handleAppraisalStepStop()}async scanCollections(){var s,o,a,l,h;this.setState({scanning:!0,scanningMessage:"Scanning popular collections..."});const t=[];if((s=this.props.contractService)!=null&&s.initialized&&((o=this.props.contractService.contracts)!=null&&o.nft)){const u=(a=this.props.walletService)==null?void 0:a.connectedAddress;if(console.log("[ChallengeWizard] Scanning with address:",u),u)try{const g=this.props.contractService.contracts.nft.address,x=this.props.contractService.contracts.nft;console.log("[ChallengeWizard] NFT contract address:",g);const A={name:"Dev NFT (CoolNFT)",address:g,icon:"D"},E=[];try{const T=(await x.balanceOf(u)).toNumber();if(console.log("[ChallengeWizard] NFT balance:",T),T>0){const R=[];for(let B=1;B<=10;B++)R.push(x.ownerOf(B).then(U=>U.toLowerCase()===u.toLowerCase()?{id:String(B),name:`CoolNFT #${B}`}:null).catch(()=>null));const O=await Promise.all(R);E.push(...O.filter(Boolean))}console.log("[ChallengeWizard] Found tokens:",E)}catch(I){console.warn("[ChallengeWizard] Failed to enumerate NFTs:",I)}E.length>0&&t.push({collection:A,tokens:E})}catch(g){console.error("[ChallengeWizard] Failed to scan dev NFT contract:",g)}else console.log("[ChallengeWizard] No wallet connected, skipping NFT scan")}else console.log("[ChallengeWizard] No dev NFT contract, will scan known collections");const r=(l=this.props.walletService)==null?void 0:l.connectedAddress,i=(h=this.props.contractService)==null?void 0:h.provider;if(r&&i&&qc.length>0){console.log("[ChallengeWizard] Quick-scanning known collections for balances...");for(const u of qc)try{const A=(await new ar(u.address,hc,i).balanceOf(r)).toNumber();console.log(`[ChallengeWizard] ${u.name}: balance = ${A}`),A>0&&t.push({collection:u,balance:A,tokens:[],tokensLoaded:!1})}catch(g){console.warn(`[ChallengeWizard] Failed to scan ${u.name}:`,g.message)}}this.setState({scanning:!1,holdings:t})}async loadTokensForCollection(t){var l,h;const r=(l=this.props.walletService)==null?void 0:l.connectedAddress,i=(h=this.props.contractService)==null?void 0:h.provider;if(!r||!i)return t;const s=t.collection,o=new ar(s.address,hc,i),a=[];console.log(`[ChallengeWizard] Loading tokens for ${s.name}...`);try{for(let u=0;u<Math.min(t.balance,20);u++){const g=await o.tokenOfOwnerByIndex(r,u);a.push({id:g.toString(),name:`${s.name} #${g.toString()}`})}}catch{console.log(`[ChallengeWizard] ${s.name} not enumerable, trying Transfer events...`);try{const g=o.filters.Transfer(null,r),x=await o.queryFilter(g),A=new Set(x.map(I=>I.args.tokenId.toString())),E=[];for(const I of A){try{(await o.ownerOf(I)).toLowerCase()===r.toLowerCase()&&E.push(I)}catch{}if(E.length>=20)break}console.log(`[ChallengeWizard] ${s.name}: found ${E.length} tokens via events`);for(const I of E)a.push({id:I,name:`${s.name} #${I}`})}catch(g){console.warn(`[ChallengeWizard] ${s.name} event query failed:`,g.message)}}return a.length===0&&t.balance>0&&a.push({id:"_manual_",name:`You own ${t.balance} - enter token ID manually`,requiresManualId:!0}),{...t,tokens:a,tokensLoaded:!0}}applyAppraisalStep(t){const r=Math.max(0,this.state.appraisal+t);this.setState({appraisal:Math.round(r*100)/100})}getDepositAmount(){return(this.state.appraisal*.05).toFixed(4)}renderNftImage(t,r,i=""){return t?dw(t)?b(Ji,{src:t,alt:r,className:i}):b("img",{src:t,alt:r,className:i}):b("div",{className:`nft-image-placeholder ${i}`},"?")}renderCollectionIcon(t){return t?t.startsWith("http")||t.startsWith("ipfs://")||t.startsWith("data:")||t.startsWith("/")?b("span",{className:"known-collection-card__icon known-collection-card__icon--img"},b("img",{src:t,alt:"Collection icon",className:"collection-icon-img"})):b("span",{className:"known-collection-card__icon"},t):b("span",{className:"known-collection-card__icon"},"?")}renderContractStage(){const{scanning:t,scanningMessage:r,holdings:i,manualContract:s}=this.state;return b("section",{className:"wizard-stage"},b("h3",{className:"form-subheading"},"Choose your collection"),b("p",{className:"muted small-text"},"We scan popular collections automatically."),b("div",{className:"collection-picker"},t?b("p",{className:"muted"},r):i.length===0?b("p",{className:"muted"},"No popular collections found in your wallet."):i.map(o=>b("div",{key:o.collection.address,className:"known-collection-card"},b("button",{className:"known-collection-card__head collection-header-btn",type:"button",onClick:()=>this.handleCollectionSelect(o.collection.address)},this.renderCollectionIcon(o.collection.icon),b("div",null,b("strong",null,o.collection.name),b("p",{className:"muted small-text"},`${o.balance||o.tokens.length} token${(o.balance||o.tokens.length)!==1?"s":""} owned`)))))),b("div",{className:"manual-entry"},b("p",{className:"muted small-text manual-entry__intro"},"Don't see your collection? Paste the NFT contract address:"),b("label",null,"NFT Contract Address",b("input",{type:"text",value:s,placeholder:"0x...",onInput:this.handleContractInput,disabled:t})),b("button",{className:"btn primary",type:"button",disabled:!s||t,onClick:this.handleManualContractSubmit},t?"Scanning...":"Use This Contract")))}renderTokensStage(){const{selectedCollection:t,selectedToken:r,manualTokenId:i}=this.state;if(!t)return null;const s=t.tokens.length>0;return b("section",{className:"wizard-stage"},b("div",{className:"stage-selection-summary"},b("div",{className:"selection-info"},this.renderCollectionIcon(t.collection.icon),b("div",null,b("strong",null,t.collection.name),b("p",{className:"muted small-text"},s?`${t.tokens.length} tokens`:"Custom contract"))),b("button",{className:"btn ghost small",type:"button",onClick:this.handleChangeCollection},"Change")),(()=>{const o=t.tokens.filter(h=>!h.requiresManualId),a=t.tokens.find(h=>h.requiresManualId),l=o.length>0;return[b("h3",{className:"form-subheading"},l?"Select a token":"Enter token ID"),b("p",{className:"muted small-text"},l?`Found ${o.length} token${o.length>1?"s":""} in your wallet. Choose which to use as your prize:`:a?a.name:"No tokens found in the 0-99 range. Enter the token ID you own:"),l?b("div",{className:"token-grid"},o.map(h=>b("button",{key:h.id,className:`collection-token-btn ${(r==null?void 0:r.id)===h.id?"selected":""}`,type:"button",onClick:()=>this.handleTokenSelect(h.id)},`#${h.id}`))):null]})(),!s||t.tokens.some(o=>o.requiresManualId)?b("div",{className:"manual-token-entry"},b("label",null,"Token ID",b("input",{type:"text",value:i,placeholder:"e.g. 1337",onInput:this.handleManualTokenInput})),b("button",{className:"btn primary",type:"button",disabled:!i,onClick:this.handleManualTokenSubmit},"Use This Token")):null)}renderPreviewStage(){const{selectedCollection:t,selectedToken:r}=this.state;if(!r)return null;const i=r.nftContract?`${r.nftContract.slice(0,6)}...${r.nftContract.slice(-4)}`:"--";return b("section",{className:"wizard-stage"},b("div",{className:"stage-selection-summary"},b("div",{className:"selection-info"},this.renderCollectionIcon(t.collection.icon),b("strong",null,t.collection.name)),b("button",{className:"btn ghost small",type:"button",onClick:this.handleChangeCollection},"Change")),b("h3",{className:"form-subheading"},"Confirm your prize"),b("div",{className:"token-preview-inline"},b("div",{className:"token-preview-image"},r.image?this.renderNftImage(r.image,r.title):b("div",{className:"token-preview-placeholder"},"?")),b("div",{className:"token-preview-info"},b("h4",null,r.title),b("p",{className:"muted small-text"},`Contract: ${i}`),b("p",{className:"muted small-text"},`Token ID: #${r.id}`),r.description&&b("p",{className:"token-preview-description muted small-text"},r.description.length>100?r.description.slice(0,100)+"...":r.description)),b("div",{className:"token-preview-actions"},b("button",{className:"btn ghost",type:"button",onClick:this.handleCancelToken},"Back"),b("button",{className:"btn primary",type:"button",onClick:this.handleConfirmToken},"Use This Token"))))}renderAppraisalStage(){const{selectedToken:t,appraisal:r,walletBalance:i}=this.state,s=this.getDepositAmount(),o=t&&r>0;return t?b("section",{className:"wizard-stage"},b("div",{className:"stage-selection-summary"},b("div",{className:"selection-info"},this.renderNftImage(t.image,t.title,"selection-thumb"),b("strong",null,t.title)),b("button",{className:"btn ghost small",type:"button",onClick:this.handleChangeToken},"Change")),b("h3",{className:"form-subheading"},"Set your appraisal"),b("p",{className:"muted small-text appraisal-hint"},"Consider pricing above floorplayers can aim for high odds to chase discounts. You'll deposit 5% of this appraisal when you launch, and that escrow returns to you alongside the prize pot when someone wins."),b("label",{className:"appraisal-input-group"},b("span",null,"Appraisal Value (ETH)"),b("div",{className:"appraisal-input"},b("button",{className:"appraisal-step-btn",type:"button","aria-label":"Decrease appraisal",onPointerDown:()=>this.handleAppraisalStepStart(-.01),onPointerUp:this.handleAppraisalStepStop,onPointerLeave:this.handleAppraisalStepStop},"-"),b("input",{type:"number",value:r,step:"0.01",min:"0",onInput:this.handleAppraisalInput}),b("button",{className:"appraisal-step-btn",type:"button","aria-label":"Increase appraisal",onPointerDown:()=>this.handleAppraisalStepStart(.01),onPointerUp:this.handleAppraisalStepStop,onPointerLeave:this.handleAppraisalStepStop},"+"))),b("div",{className:"appraisal-meta"},b("p",{className:"muted small-text"},"Wallet balance: ",b("strong",null,i)),b("p",{className:"muted small-text"},"Deposit (5%): ",b("strong",null,`${s} ETH`))),b("label",{className:"lore-input-group"},b("span",null,"Lore (optional)"),b("p",{className:"muted small-text"},"Taunt the crowd or tell your story."),b("textarea",{className:"lore-textarea",value:this.state.lore,placeholder:'e.g. "Only the boldest cola fans deserve this one..."',maxLength:280,rows:3,onInput:this.handleLoreInput})),b("button",{className:"btn primary full",type:"button",disabled:!o,onClick:this.handleGoToReview},"Review Challenge")):null}renderReviewStage(){const{selectedToken:t,appraisal:r,lore:i}=this.state,s=this.getDepositAmount();return t?b("section",{className:"wizard-stage"},b("h3",{className:"form-subheading"},"Review Your Challenge"),b("div",{className:"review-summary"},b("div",{className:"review-item"},b("span",{className:"muted"},"Prize"),b("strong",null,t.title)),b("div",{className:"review-item"},b("span",{className:"muted"},"Appraisal"),b("strong",null,`${r} ETH`)),b("div",{className:"review-item"},b("span",{className:"muted"},"Your Deposit (5%)"),b("strong",null,`${s} ETH`)),i&&b("div",{className:"review-item review-item--lore"},b("span",{className:"muted"},"Lore"),b("p",{className:"review-lore-text"},i))),b("p",{className:"muted small-text review-note"},`By creating this challenge, you'll escrow ${s} ETH. This returns to you when someone wins, along with any accumulated prize pot.`),b("div",{className:"review-actions"},b("button",{className:"btn ghost",type:"button",onClick:this.handleBackToAppraisal},"Back"),b("button",{className:"btn primary",type:"button",onClick:this.handleCreate},"Create Challenge"))):null}renderPendingStage(){return b("section",{className:"wizard-stage"},b("div",{className:"challenge-pending-content"},b("div",{className:"modal-loader active","aria-hidden":"false"}),b("div",null,b("h4",null,"Submitting your challenge..."),b("p",{className:"muted small-text"},"Confirm the wallet prompts to escrow your deposit. We'll keep this modal open until the transaction finalizes."))))}render(){const{stage:t,error:r}=this.state;let i=null;switch(t){case"contract":i=this.renderContractStage();break;case"tokens":i=this.renderTokensStage();break;case"preview":i=this.renderPreviewStage();break;case"appraisal":i=this.renderAppraisalStage();break;case"review":i=this.renderReviewStage();break;case"pending":i=this.renderPendingStage();break}return b("div",{className:"challenge-wizard__panel"},b("div",{className:"wizard-header"},b("div",{className:"wizard-header__copy"},b("h2",null,"Create Your Challenge"),b("p",{className:"caption"},"Bring your collectible, set an appraisal, and let fate decide the victor.")),b("button",{className:"icon-btn wizard-header__close",type:"button",onClick:this.handleClose},"Close")),b("div",{className:"wizard-content"},i,r&&b("p",{className:"form-error"},r)))}}class mw extends qt{constructor(t){super(t);oe(this,"handlePassphraseInput",t=>{this.setState({manualPassphrase:t.target.value,errorMessage:null})});oe(this,"handlePassphraseSubmit",()=>{const{manualPassphrase:t,bottle:r}=this.state;if(!t.trim()){this.setState({errorMessage:"Please enter your passphrase"});return}r!=null&&r.id&&mp(r.id,t.trim()),this.setState({phase:"ready"})});oe(this,"handleClose",()=>{this.countdownInterval&&(clearInterval(this.countdownInterval),this.countdownInterval=null),ie.emit("modal:close")});oe(this,"startReveal",()=>{this.setState({phase:"counting"}),this.countdownInterval=setInterval(()=>{const t=this.state.countdown-1;t<=0?(clearInterval(this.countdownInterval),this.countdownInterval=null,this.doReveal()):this.setState({countdown:t})},1e3)});this.state={bottle:null,countdown:3,phase:"ready",result:null,manualPassphrase:"",errorMessage:null},this.countdownInterval=null}setBottle(t){const r=Hi(t==null?void 0:t.id);this.setState({bottle:t,countdown:3,phase:r?"ready":"needsPassphrase",result:null,manualPassphrase:"",errorMessage:null})}willUnmount(){this.countdownInterval&&(clearInterval(this.countdownInterval),this.countdownInterval=null)}async doReveal(){var r;this.setState({phase:"revealing"});const t=this.state.bottle;try{const i=Hi(t.id)||this.state.manualPassphrase.trim();if(!i){this.setState({phase:"needsPassphrase",errorMessage:"Please enter your passphrase"});return}if(!((r=this.props.contractService)!=null&&r.initialized))throw new Error("Contract service not available");if(!t.targetTimestamp||!t.difficulty)throw new Error("Bottle missing required fields (targetTimestamp or difficulty)");if(!await this.props.contractService.isRandomnessAvailable(t.targetTimestamp))throw new Error("Randomness not available yet. Please wait for the cooldown period.");const{root:o,timestamp:a}=await this.props.contractService.findCanonicalBeaconRoot(t.targetTimestamp);if(console.log("[RevealModal] Found canonical beacon root at timestamp:",a),!o||o==="0x"+"0".repeat(64))throw new Error("No beacon root available for this timestamp range.");const{isWinner:l}=await ai.evaluateWinCondition(i,o,t.difficulty,t.numChances);console.log("[RevealModal] Real evaluation result:",l);const h=l?"win":"loss";t!=null&&t.id&&(Sh(t.id,l),kh(t.id)),this.setState({phase:"result",result:h}),ie.emit("bottle:revealed",{bottle:t,result:h})}catch(i){console.error("[RevealModal] Error evaluating win condition:",i),this.setState({phase:"error",errorMessage:i.message})}}render(){const{bottle:t,countdown:r,phase:i,result:s,manualPassphrase:o,errorMessage:a}=this.state;if(!t)return b("div",{className:"reveal-modal__panel"},b("p",{className:"muted"},"No bottle selected"));if(i==="needsPassphrase")return b("div",{className:"reveal-modal__panel"},b("button",{className:"icon-btn",type:"button",onClick:this.handleClose},"Close"),b("div",{className:"reveal-modal__content"},b("p",{className:"label"},t.challengeTitle),b("h3",{className:"reveal-modal__status"},"Enter Your Passphrase"),b("p",{className:"muted small-text"},"Enter the passphrase you used when buying this bottle to check your result."),b("div",{className:"passphrase-entry"},b("input",{type:"text",value:o,placeholder:"Your secret passphrase",onInput:this.handlePassphraseInput,autoFocus:!0}),a&&b("p",{className:"form-error"},a),b("button",{className:"btn primary",type:"button",disabled:!o.trim(),onClick:this.handlePassphraseSubmit},"Continue"))));if(i==="error")return b("div",{className:"reveal-modal__panel"},b("button",{className:"icon-btn",type:"button",onClick:this.handleClose},"Close"),b("div",{className:"reveal-modal__content"},b("p",{className:"label"},t.challengeTitle),b("h3",{className:"reveal-modal__status reveal-modal__status--error"},"Error"),b("p",{className:"form-error"},a||"Something went wrong"),b("button",{className:"btn ghost",type:"button",onClick:()=>this.setState({phase:"needsPassphrase",errorMessage:null})},"Try Different Passphrase")));let l="",h=r,u="",g="";switch(i){case"ready":l="Ready to pop!",h="";break;case"counting":l="Shaking...";break;case"revealing":l="Checking cap",h="";break;case"result":l=s==="win"?"WINNER!":"Better luck next time",h=s==="win"?"":"",u=s==="win"?"winner":"loser",g=s==="win"?"You won! Claim your prize from the dashboard.":"No winning cap this time.";break}const x=i==="ready";return b("div",{className:"reveal-modal__panel"},b("button",{className:"icon-btn",type:"button",onClick:this.handleClose},"Close"),b("div",{className:"reveal-modal__content"},b("p",{className:"label"},t.challengeTitle),b("div",{className:"reveal-modal__countdown"},h),b("p",{className:"reveal-modal__status"},l),b("div",{className:`reveal-modal__result ${u}`},g),x&&b("button",{className:"btn primary",type:"button",onClick:this.startReveal},"Pop It!"),x&&b("button",{className:"btn ghost small",type:"button",onClick:()=>this.setState({phase:"needsPassphrase",manualPassphrase:""})},"Use Different Passphrase")))}}class gw extends qt{constructor(t){super(t);oe(this,"handleClose",()=>{this.setState({loading:!1,error:null,status:""}),ie.emit("modal:close")});oe(this,"handlePassphraseChange",t=>{this.setState({passphrase:t.target.value,error:null})});oe(this,"handleSubmitClaim",async()=>{const{bottle:t,passphrase:r}=this.state;if(!r.trim()){this.setState({error:"Please enter your passphrase"});return}this.setState({loading:!0,error:null,status:"generating"}),ie.emit("claim:submit",{bottle:t,passphrase:r.trim()})});this.state={bottle:null,passphrase:"",loading:!1,error:null,status:""}}setBottle(t){const r=Hi(t.id)||"";this.setState({bottle:t,passphrase:r,loading:!1,error:null,status:""})}setStatus(t,r=null){this.setState({status:t,error:r,loading:t!=="success"&&t!==""&&!r})}render(){const{bottle:t,passphrase:r,loading:i,error:s,status:o}=this.state;if(!t)return b("div",{className:"claim-modal__panel"},b("p",{className:"muted"},"No bottle selected"));const a=Hi(t.id),l=r.trim().length>0&&!i;let h="";switch(o){case"verifying":h="Verifying passphrase...";break;case"generating":h="Generating ZK proof... This may take a moment.";break;case"claiming":h="Submitting claim transaction...";break;case"success":h="Prize claimed successfully!";break}return b("div",{className:"claim-modal__panel"},b("div",{className:"wizard-header"},b("div",{className:"wizard-header__copy"},b("h2",null,"Claim Your Prize"),b("p",{className:"caption"},`${t.challengeTitle}  Ticket #${t.id}`)),b("button",{className:"icon-btn wizard-header__close",type:"button",onClick:this.handleClose},"Close")),b("div",{className:"form-grid"},b("div",{className:"prize-summary"},b("p",{className:"muted"},"Enter your bottle secret to generate the ZK proof and claim your prize.")),b("label",null,b("span",{className:"label-row"},"Bottle Secret",a&&b("span",{className:"muted small-text"},"(auto-filled from storage)")),b("input",{type:"text",value:r,placeholder:"Enter your passphrase",disabled:i,onInput:this.handlePassphraseChange})),s&&b("p",{className:"form-error"},s),h&&b("p",{className:"form-status muted"},h),b("div",{className:`modal-loader ${i?"active":""}`,"aria-hidden":String(!i)}),o==="success"?b("button",{className:"btn primary full",type:"button",onClick:this.handleClose},"Back to Dashboard"):b("button",{className:"btn primary full",type:"button",disabled:!l,onClick:this.handleSubmitClaim},i?"Processing...":"Claim Prize")))}}class yw extends qt{constructor(t){super(t);oe(this,"handleClose",()=>{ie.emit("modal:close")});oe(this,"handleClaimTrialRefund",async t=>{if(!(!t||this.state.processing)){this.setState({processing:t,error:null});try{const i=this.state.chances.filter(a=>String(a.trialId)===t).map(a=>parseInt(a.chanceId,10));await this.props.contractService.perseverance(i);const s=new Set(this.state.processedTrials);s.add(t);const o=this.state.chances.filter(a=>String(a.trialId)!==t);this.setState({processing:null,processedTrials:s,chances:o}),o.length===0&&setTimeout(()=>{ie.emit("modal:close"),ie.emit("refundable:found",{count:0,chances:[]})},1500)}catch(r){console.error("[RefundModal] Refund failed:",r),this.setState({processing:null,error:r.reason||r.message||"Refund failed"})}}});this.state={chances:[],processing:null,processedTrials:new Set,error:null}}setChances(t){this.setState({chances:t,processing:null,processedTrials:new Set,error:null})}getTrialGroups(){const t=new Map;for(const r of this.state.chances){const i=String(r.trialId);t.has(i)||t.set(i,{trialId:i,chances:[],totalBottles:0,totalRefund:0});const s=t.get(i);s.chances.push(r),s.totalBottles+=r.numChances||1,s.totalRefund+=(r.numChances||1)*1e-9}return Array.from(t.values())}render(){const{processing:t,processedTrials:r,error:i}=this.state,s=this.getTrialGroups(),o=s.length===0&&r.size>0;return b("div",{className:"refund-modal__panel"},b("div",{className:"refund-modal__header"},b("h2",null,"Claim Refunds"),b("button",{className:"icon-btn refund-modal__close",type:"button",onClick:this.handleClose},"Close")),b("div",{className:"refund-modal__body"},o?b("div",{className:"refund-modal__success"},b("p",null,"All refunds claimed successfully!")):s.length===0?b("p",{className:"muted"},"No refunds available."):[b("p",{key:"intro",className:"refund-modal__intro"},'The following challenges were cancelled. Click "Claim" to refund all your entries for that challenge in one transaction.'),b("div",{key:"list",className:"refund-list"},s.map(a=>{const l=t===a.trialId,h=a.chances.length;return b("div",{key:a.trialId,className:"refund-item"},b("div",{className:"refund-item__info"},b("span",{className:"refund-item__trial"},`Trial #${a.trialId}`),b("span",{className:"refund-item__details"},`${a.totalBottles} bottle${a.totalBottles===1?"":"s"}${h>1?` (${h} entries)`:""}`)),b("div",{className:"refund-item__amount"},b("span",null,`${a.totalRefund.toFixed(9)} ETH`)),b("button",{className:"btn primary small refund-trial__claim-btn",type:"button",disabled:l||!!t,onClick:()=>this.handleClaimTrialRefund(a.trialId)},l?"Claiming...":"Claim All"))}))],i&&b("p",{className:"form-error"},i)))}}class vw extends qt{constructor(t){super(t);oe(this,"handleClose",()=>{ie.emit("modal:close")});oe(this,"handleWalletSelect",async t=>{if(!(!t||!this.props.walletService)){this.setState({loading:!0,error:null});try{await this.props.walletService.selectWallet(t),await this.props.walletService.connect(),ie.emit("modal:close")}catch(r){console.error("[WalletSelectModal] Connection failed:",r),this.setState({loading:!1,error:r.message||"Failed to connect wallet"})}}});this.state={wallets:{},loading:!1,error:null}}refresh(){if(!this.props.walletService)return;const t=this.props.walletService.getAvailableWallets();this.setState({wallets:t,loading:!1,error:null})}getWalletDisplayName(t){return{metamask:"MetaMask",rabby:"Rabby",rainbow:"Rainbow",phantom:"Phantom",coinbase:"Coinbase Wallet",trust:"Trust Wallet",okx:"OKX Wallet"}[t]||t.charAt(0).toUpperCase()+t.slice(1)}render(){const{wallets:t,loading:r,error:i}=this.state,s=Object.keys(t);return b("div",{className:"challenge-wizard__panel wallet-select-panel"},b("div",{className:"wizard-header"},b("div",{className:"wizard-header__copy"},b("h2",null,"Connect Wallet"),b("p",{className:"caption"},"Choose a wallet to connect to Colasseum.")),b("button",{className:"icon-btn wizard-header__close",type:"button",onClick:this.handleClose},"Close")),b("div",{className:"wallet-options-grid"},s.length>0?s.map(o=>b("button",{className:"wallet-option-btn",type:"button",disabled:r,onClick:()=>this.handleWalletSelect(o)},b("span",{className:"wallet-option-name"},this.getWalletDisplayName(o)))):b("p",{className:"muted"},"No wallets detected. Please install MetaMask or another browser wallet.")),i&&b("p",{className:"form-error"},i),r&&b("div",{className:"modal-loader active","aria-hidden":"false"}))}}const{isIpfsUri:ww}=Vi;class bw extends qt{constructor(t){super(t);oe(this,"handleClose",()=>{ie.emit("modal:close")});oe(this,"toggleShowMore",()=>{this.setState({showMore:!this.state.showMore})});this.state={winner:null,showMore:!1}}setWinner(t){this.setState({winner:t,showMore:!1})}formatAddress(t){return t?`${t.slice(0,6)}...${t.slice(-4)}`:"???"}formatEntryValue(t){if(!t)return"0 ETH";try{const r=Number(t)/1e18;return r<1e-4?"<0.0001 ETH":`${r.toFixed(4)} ETH`}catch{return"0 ETH"}}formatTimestamp(t){if(!t)return"Unknown";try{const r=t>1e12?t:t*1e3;return new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"Unknown"}}renderTraits(t){return!t||!Array.isArray(t)||t.length===0?b("p",{className:"muted"},"No traits available"):b("div",{className:"win-details-traits"},t.map((r,i)=>b("div",{key:i,className:"win-details-trait"},b("span",{className:"trait-type"},r.trait_type||"Property"),b("span",{className:"trait-value"},r.value))))}render(){const{winner:t,showMore:r}=this.state;if(!t)return b("div",{className:"win-details-panel"},b("p",{className:"muted"},"No winner selected"));const{metadata:i,nftContract:s,nftId:o,lore:a,entryValue:l,timestamp:h,transactionHash:u}=t,g=(i==null?void 0:i.image)||"/bottle.svg",x=(i==null?void 0:i.name)||`NFT #${o}`,A=(i==null?void 0:i.description)||"No description available.",E=i==null?void 0:i.attributes,I=u?`${u.slice(0,10)}...${u.slice(-6)}`:"---",T=u?`https://etherscan.io/tx/${u}`:"#",R=r?"Show Less":"Show More";return b("div",{className:"win-details-panel"},b("button",{className:"modal-close-btn",type:"button","aria-label":"Close",onClick:this.handleClose},b("span",{"aria-hidden":"true"},"")),b("div",{className:"win-details-image"},ww(g)?b(Ji,{src:g,alt:x}):b("img",{src:g,alt:x})),b("div",{className:"win-details-content"},b("h3",{className:"win-details-title"},x),b("a",{className:"win-details-contract ghost-link",href:T,target:"_blank",rel:"noreferrer"},b("span",{className:"contract-icon"},""),b("span",null,`tx: ${I}`)),a&&b("blockquote",{className:"win-details-lore"},a),b("div",{className:"win-details-stats"},b("div",{className:"win-details-stat"},b("span",{className:"stat-label"},"Entry Cost"),b("span",{className:"stat-value"},this.formatEntryValue(l))),b("div",{className:"win-details-stat"},b("span",{className:"stat-label"},"Won On"),b("span",{className:"stat-value"},this.formatTimestamp(h)))),b("div",{className:"win-details-more","data-open":r?"true":"false"},b("button",{className:"btn ghost smaller",type:"button",onClick:this.toggleShowMore},R),b("div",{className:"win-details-more-content"},b("div",{className:"win-details-description"},b("h4",null,"Description"),b("p",null,A)),b("div",{className:"win-details-traits-section"},b("h4",null,"Traits"),this.renderTraits(E))))))}}const Ap=[{id:0,title:"Milady #2847",status:"active",nftContract:"0xcC3f60e63a3d4D7EDec43d7558301912050ee6C9",tokenId:2847,image:"https://www.miladymaker.net/milady/2847.png",appraisalEth:"0.2",potEth:"0.05",bottlesSold:12,lore:"A rare find from the original collection.",creatorAddress:"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266"},{id:1,title:"Milady #1337",status:"active",nftContract:"0xcC3f60e63a3d4D7EDec43d7558301912050ee6C9",tokenId:1337,image:"https://www.miladymaker.net/milady/1337.png",appraisalEth:"0.35",potEth:"0.12",bottlesSold:24,lore:"The leet one. Highly sought after by collectors.",creatorAddress:"0x70997970C51812dc3A010C7d01b50e0d17dc79C8"},{id:2,title:"Milady #420",status:"cancelled",nftContract:"0xcC3f60e63a3d4D7EDec43d7558301912050ee6C9",tokenId:420,image:"https://www.miladymaker.net/milady/420.png",appraisalEth:"0.15",potEth:"0.00",bottlesSold:0,lore:"Challenge cancelled by creator.",creatorAddress:"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266"}];class Ep extends qt{constructor(t){super(t);oe(this,"handleBackdropClick",t=>{t.target.classList.contains("modal-backdrop")&&this.closeModal()});this.state={activeModal:null,modalData:null},this.prizeDetailModal=null,this.challengeWizardModal=null,this.entryModal=null,this.revealModal=null,this.claimModal=null,this.refundModal=null,this.walletSelectModal=null,this.winDetailsModal=null}didMount(){this.subscribe("modal:open",t=>{this.openModal(t.modal,t)}),this.subscribe("modal:close",()=>{this.closeModal()}),this.subscribe("challenge:preview",t=>{this.openModal("prizeDetail",{challenge:t.challenge,mode:"view"})}),this.subscribe("challenge:select",t=>{this.openModal("entry",t)}),this.subscribe("token:preview",t=>{this.openModal("prizeDetail",{challenge:t.challenge,mode:"confirm"})}),this.subscribe("bottle:preview",t=>{const r=t.bottle,s=(this.props.challenges||[]).find(o=>o.id===r.challengeId)||Ap.find(o=>o.id===r.challengeId);s&&this.openModal("prizeDetail",{challenge:s,mode:"view"})}),this.subscribe("wallet:select",()=>{this.openModal("walletSelect",{})}),this.subscribe("bottle:claim",t=>{this.openModal("claim",{bottle:t.bottle})}),this.subscribe("modal:openRefund",t=>{this.openModal("refund",{chances:t.chances})}),this.subscribe("claim:status",t=>{this.claimModal&&this.claimModal.setStatus(t.status,t.error),t.status==="success"&&setTimeout(()=>this.closeModal(),2e3)})}openModal(t,r={}){document.body.classList.add("modal-open"),this.setState({activeModal:t,modalData:r}),requestAnimationFrame(()=>{var i,s,o,a,l,h,u,g;switch(t){case"prizeDetail":(i=this.prizeDetailModal)==null||i.setChallenge(r.challenge,r.mode||"view");break;case"entry":(s=this.entryModal)==null||s.setChallenge(r.challenge);break;case"reveal":(o=this.revealModal)==null||o.setBottle(r.bottle);break;case"claim":(a=this.claimModal)==null||a.setBottle(r.bottle);break;case"refund":(l=this.refundModal)==null||l.setChances(r.chances);break;case"challengeWizard":(h=this.challengeWizardModal)==null||h.reset();break;case"walletSelect":(u=this.walletSelectModal)==null||u.refresh();break;case"winDetails":(g=this.winDetailsModal)==null||g.setWinner(r.winner);break}})}closeModal(){document.body.classList.remove("modal-open"),this.setState({activeModal:null,modalData:null})}renderModal(t,r,i,s={}){const{activeModal:o}=this.state,a=o===t;return b("div",{className:`${r} modal-backdrop ${a?"open":""}`,"aria-hidden":String(!a),onClick:this.handleBackdropClick},b(i,{ref:h=>{this[`${t}Modal`]=h},walletService:this.props.walletService,contractService:this.props.contractService,...s}))}render(){return b("div",{className:"modal-manager"},this.renderModal("prizeDetail","prize-detail-modal",fw),this.renderModal("challengeWizard","challenge-wizard",pw),this.renderModal("entry","challenge-wizard",X6),this.renderModal("reveal","reveal-modal",mw),this.renderModal("claim","claim-modal",gw),this.renderModal("refund","refund-modal",yw),this.renderModal("walletSelect","wallet-select-modal",vw),this.renderModal("winDetails","win-details-modal",bw))}}const Aw=[{id:1,challengeId:0,challengeTitle:"Milady #2847",odds:15,priceEth:"0.03",purchasedAt:17368704e5,revealAt:17368713e5,status:"ready",passphrase:"crystal-dawn-47",prizeImage:"https://www.miladymaker.net/milady/2847.png"},{id:2,challengeId:0,challengeTitle:"Milady #2847",odds:5,priceEth:"0.01",purchasedAt:17368702e5,revealAt:17368711e5,status:"cooling",cooldownRemaining:542,passphrase:"ocean-mist-12",prizeImage:"https://www.miladymaker.net/milady/2847.png"},{id:3,challengeId:1,challengeTitle:"Milady #1337",odds:25,priceEth:"0.0875",purchasedAt:17368698e5,revealAt:17368707e5,status:"revealed",result:"loss",passphrase:"silver-moon-99",prizeImage:"https://www.miladymaker.net/milady/1337.png"},{id:4,challengeId:1,challengeTitle:"Milady #1337",odds:50,priceEth:"0.175",purchasedAt:17368689e5,revealAt:17368698e5,status:"claimable",result:"win",passphrase:"golden-sun-88",prizeImage:"https://www.miladymaker.net/milady/1337.png"}];class Ew extends qt{constructor(e){super(e);const t=e.useFixtures??!0;this.state={challenges:t?Ap:[],bottles:t?Aw:[],refundableChances:[],loading:!t,connectedAddress:null,numpadInput:""},this.dashboardRef=null,this.challengeGridRef=null}didMount(){var i,s,o,a,l,h;const e=this.props.useFixtures??!0;if((i=this.props.contractService)!=null&&i.provider&&In.setProvider(this.props.contractService.provider),!e&&((s=this.props.contractService)!=null&&s.initialized)&&this.loadContractData(),(a=(o=this.props.walletService)==null?void 0:o.isConnected)!=null&&a.call(o)){const u=(h=(l=this.props.walletService).getAddress)==null?void 0:h.call(l);u&&(console.log("[AppShell] Wallet already connected on mount:",u),queueMicrotask(()=>{this.setState({connectedAddress:u}),this.challengeGridRef&&this.challengeGridRef.setConnectedAddress(u),e||(this.loadUserData(u),this.loadRefundableChances(u))}))}this.subscribe("wallet:connected",async({address:u})=>{this.setState({connectedAddress:u}),this.challengeGridRef&&this.challengeGridRef.setConnectedAddress(u),e||(await this.loadUserData(u),await this.loadRefundableChances(u))}),this.subscribe("wallet:disconnected",()=>{this.setState({connectedAddress:null}),this.challengeGridRef&&this.challengeGridRef.setConnectedAddress(null),e||this.updateBottles([])}),this.subscribe("contract:gauntlet",()=>{this.loadContractData()}),this.subscribe("contract:challengeAccepted",()=>{this.loadContractData()}),this.subscribe("contract:justice",()=>{console.log("[AppShell] Refund processed, refreshing data"),this.state.connectedAddress&&(this.loadUserData(this.state.connectedAddress),this.loadRefundableChances(this.state.connectedAddress))}),this.subscribe("challenge:created",u=>{if(e){const g={id:Date.now(),title:`Challenge #${this.state.challenges.length+1}`,lore:"",nftContract:u.nftContract,tokenId:u.tokenId,appraisalEth:String(u.appraisal),potEth:"0",bottlesSold:0,image:`https://www.miladymaker.net/milady/${u.tokenId}.png`,status:"active"};this.updateChallenges([...this.state.challenges,g])}else console.log("[AppShell] Challenge created, refreshing challenges"),this.loadContractData()}),this.subscribe("bottle:purchased",u=>{if(e){const g={id:Date.now(),challengeId:u.challenge.id,odds:u.odds,purchaseTime:Date.now(),refrigerationEnds:Date.now()+9e5,status:"refrigerating"};this.updateBottles([...this.state.bottles,g])}}),this.subscribe("claim:submit",async({bottle:u,passphrase:g})=>{await this.handleClaim(u,g)}),this.subscribe("challenge:cancel",async({challengeId:u})=>{await this.handleCancelChallenge(u)}),this.subscribe("indexer:newEvents",async({eventType:u})=>{u==="Victor"||u==="Surrender"||u==="Gauntlet"?(console.log(`[AppShell] ${u} event indexed, refreshing data`),this.loadContractData(),this.state.connectedAddress&&(this.loadUserData(this.state.connectedAddress),this.loadRefundableChances(this.state.connectedAddress))):u==="ChallengeAccepted"&&(console.log("[AppShell] ChallengeAccepted indexed, refreshing challenges then bottles"),await this.loadContractData(),this.state.connectedAddress&&this.loadUserData(this.state.connectedAddress))}),this.subscribe("dashboard:refresh",()=>{this.state.connectedAddress&&(this.loadUserData(this.state.connectedAddress),this.loadRefundableChances(this.state.connectedAddress))}),this.subscribe("colasseum:indexerReady",()=>{console.log("[AppShell] ColasseumIndexer ready, loading challenges"),console.log("[AppShell] Current connectedAddress:",this.state.connectedAddress),this.loadContractData(),this.state.connectedAddress?(console.log("[AppShell] Loading user data for connected address"),this.loadRefundableChances(this.state.connectedAddress),this.loadUserData(this.state.connectedAddress)):console.log("[AppShell] No connected address yet, skipping user data load")});const t=.3,r=()=>{const u=window.scrollY||window.pageYOffset;document.documentElement.style.setProperty("--parallax-y",`${u*t}px`)};window.addEventListener("scroll",r,{passive:!0}),r()}async handleClaim(e,t){var i,s;if(!((i=this.props.contractService)!=null&&i.initialized)){console.error("[AppShell] Contract service not initialized"),ie.emit("claim:status",{status:"",error:"Contract service not available"});return}const r=this.state.connectedAddress;if(!r){console.error("[AppShell] No wallet connected"),ie.emit("claim:status",{status:"",error:"Please connect your wallet"});return}if(!t){ie.emit("claim:status",{status:"",error:"Passphrase is required"});return}try{if(console.log("[AppShell] Starting claim for bottle",e.id,e),ie.emit("claim:status",{status:"verifying"}),await ai.generateCommitment(t,r)!==e.commitment){console.error("[AppShell] Passphrase does not match commitment"),ie.emit("claim:status",{status:"",error:"Passphrase does not match this bottle. Please check and try again."});return}console.log("[AppShell] Passphrase verified - commitment matches"),ie.emit("claim:status",{status:"generating"}),console.log("[AppShell] Finding canonical beacon root for timestamp:",e.targetTimestamp);let a,l;if((s=this.props.devService)!=null&&s.isEnabled()&&this.props.devService.oracleSeed)console.log("[AppShell] Using DevService for beacon root (dev mode with seed)"),l=e.targetTimestamp,a=await this.props.devService.prepareForClaim(e.targetTimestamp,768,async()=>{const g=await this.props.contractService.findCanonicalBeaconRoot(e.targetTimestamp);return l=g.timestamp,g.root});else{console.log("[AppShell] Finding canonical beacon root from real blocks");const g=await this.props.contractService.findCanonicalBeaconRoot(e.targetTimestamp);a=g.root,l=g.timestamp}if(console.log("[AppShell] Canonical beacon root:",a,"at timestamp:",l),!a||a==="0x"+"0".repeat(64)){console.error("[AppShell] No beacon root available"),ie.emit("claim:status",{status:"",error:"Randomness not available yet. Please wait for cooldown."});return}console.log("[AppShell] Generating ZK proof with inputs:",{passphrase:"(hidden)",ownerAddress:r,beaconRoot:a,commitment:e.commitment,difficulty:e.difficulty,numChances:e.numChances});const{solidityProof:h}=await ai.generateProof(t,r,a,e.commitment,e.difficulty,e.numChances);console.log("[AppShell] Proof generated:",h),ie.emit("claim:status",{status:"claiming"});const u=await this.props.contractService.victory(e.id,l,h);console.log("[AppShell] Claim successful:",u),ie.emit("claim:status",{status:"success"}),await this.loadUserData(r)}catch(o){console.error("[AppShell] Claim failed:",o),ie.emit("claim:status",{status:"",error:o.message})}}async handleCancelChallenge(e){var t;if(!((t=this.props.contractService)!=null&&t.initialized)){console.error("[AppShell] Contract service not initialized");return}try{console.log("[AppShell] Cancelling challenge",e),await this.props.contractService.cowardice(e),console.log("[AppShell] Challenge cancelled successfully"),await this.loadContractData(),ie.emit("challenge:cancelled",{challengeId:e})}catch(r){console.error("[AppShell] Failed to cancel challenge:",r),ie.emit("challenge:cancelError",{challengeId:e,error:r.message})}}async loadContractData(){var e,t,r,i;if(!(!((e=this.props.colasseumIndexer)!=null&&e.initialized)||!((t=this.props.contractService)!=null&&t.initialized)))try{this.setState({loading:!0});const o=(await this.props.colasseumIndexer.getActiveTrials()).map(u=>typeof u.trialId=="object"?u.trialId.toNumber():Number(u.trialId)),a=await this.props.contractService.getTrials(o),l=new Map;try{const u=await this.props.colasseumIndexer.indexer.events.query("ChallengeAccepted",{limit:1e4});for(const g of u.events){const x=String(((r=g.indexed)==null?void 0:r.trialId)||((i=g.data)==null?void 0:i.trialId));l.set(x,(l.get(x)||0)+1)}}catch(u){console.warn("[AppShell] Could not count entries:",u.message)}const h=await Promise.all(a.map(async u=>{const g=l.get(String(u.id))||0;let x="",A=`Challenge #${u.id}`;try{const E=await In.getMetadata(u.nftContract,u.nftId);E!=null&&E.image&&(x=E.image),E!=null&&E.name&&(A=E.name)}catch(E){console.warn("[AppShell] Could not fetch NFT metadata for trial",u.id,E.message)}return{id:u.id,title:A,lore:u.lore||"",nftContract:u.nftContract,tokenId:u.nftId,appraisalEth:this.calculateAppraisalFromDifficulty(u.difficulty),difficulty:u.difficulty,potEth:u.ethPool,bottlesSold:g,image:x,creator:u.creator,creationTime:u.creationTime,status:u.active?"active":u.cancelled?"cancelled":"ended"}}));this.updateChallenges(h),this.setState({loading:!1})}catch(s){console.error("[AppShell] Failed to load contract data:",s),this.setState({loading:!1})}}async loadRefundableChances(e){var t;if((t=this.props.colasseumIndexer)!=null&&t.initialized)try{const r=await this.props.colasseumIndexer.getRefundableChances(e);this.setState({refundableChances:r}),r.length>0&&(console.log(`[AppShell] Found ${r.length} refundable chances for ${e}`),ie.emit("refundable:found",{count:r.length,chances:r}))}catch(r){console.error("[AppShell] Failed to load refundable chances:",r)}}async loadUserData(e){var t,r,i,s;if(!((t=this.props.colasseumIndexer)!=null&&t.initialized)||!((r=this.props.contractService)!=null&&r.initialized)){console.log("[AppShell] loadUserData skipped - services not ready",{indexerReady:(i=this.props.colasseumIndexer)==null?void 0:i.initialized,contractReady:(s=this.props.contractService)==null?void 0:s.initialized});return}try{console.log("[AppShell] loadUserData starting for:",e);const o=await this.props.colasseumIndexer.getUserChances(e,{includeClaimed:!0});console.log("[AppShell] getUserChances returned:",o.length,"events");const a=o.map(u=>typeof u.chanceId=="object"?u.chanceId.toNumber():Number(u.chanceId)),l=await this.props.contractService.getChances(a),h=await Promise.all(l.filter(u=>!u.refunded).map(async u=>{const g=await this.props.contractService.getTrial(u.trialId),x=this.state.challenges.find(Z=>Z.id===u.trialId);let A=x==null?void 0:x.title;if(!A)try{const Z=await In.getMetadata(g.nftContract,g.nftId);A=(Z==null?void 0:Z.name)||`Challenge #${u.trialId}`}catch{A=`Challenge #${u.trialId}`}const E=this.calculateOddsFromChancesAndDifficulty(u.numChances,g.difficulty),I=1e-9,T=(u.numChances*I).toFixed(4),R=Math.floor(Date.now()/1e3),O=768,B=u.targetTimestamp+O,U=Math.max(0,B-R);let q=null;const W=Nh(u.id);if(u.claimed)q="win";else if(W!==null)q=W?"win":"loss";else if(U<=0)try{const Z=await this.evaluateChanceOutcome(u,g,e);Z!==null&&(q=Z?"win":"loss",Sh(u.id,Z),kh(u.id))}catch(Z){console.warn("[AppShell] Could not evaluate chance outcome:",Z.message)}return{id:u.id,challengeId:u.trialId,challengeTitle:A,odds:E,priceEth:T,purchaseTime:0,refrigerationEnds:B*1e3,cooldownRemaining:U,status:this.getBottleStatus(u),commitment:u.commitment,targetTimestamp:u.targetTimestamp,numChances:u.numChances,claimed:u.claimed,difficulty:g.difficulty.toString(),result:q}}));console.log("[AppShell] Updating bottles, count:",h.length),this.updateBottles(h)}catch(o){console.error("[AppShell] Failed to load user data:",o)}}async evaluateChanceOutcome(e,t,r){const i=Hi(e.id);if(!i)return console.log("[AppShell] No passphrase stored for chance",e.id),null;if(!await this.props.contractService.isRandomnessAvailable(e.targetTimestamp))return console.log("[AppShell] Randomness not yet available for chance",e.id),null;const{root:o,timestamp:a}=await this.props.contractService.findCanonicalBeaconRoot(e.targetTimestamp);if(!o||o==="0x"+"0".repeat(64))return console.log("[AppShell] No beacon root for chance",e.id),null;console.log("[AppShell] Found beacon root at timestamp",a,"for chance",e.id);const{isWinner:l,randomnessHash:h,threshold:u}=await ai.evaluateWinCondition(i,o,t.difficulty,e.numChances);return console.log("[AppShell] Evaluated chance",e.id,{isWinner:l,randomnessHash:h,threshold:u}),l}calculateAppraisalFromDifficulty(e){const t=BigInt("21888242871839275222246405745257275088548364400416034343698204186575808495617"),r=BigInt("1000000000");try{const i=BigInt(e);if(i===0n)return"0";const s=t*r/i;return(Number(s)/1e18).toFixed(4)}catch{return"0"}}calculateOddsFromChancesAndDifficulty(e,t){const r=BigInt("21888242871839275222246405745257275088548364400416034343698204186575808495617");try{const i=BigInt(e),s=BigInt(t),a=i*s*100n/r,l=Number(a);return Math.min(l,99)}catch{return 1}}getBottleStatus(e){const t=Math.floor(Date.now()/1e3),r=768;return e.claimed?"claimed":e.refunded?"refunded":t<e.targetTimestamp+r?"cooling":"ready"}updateChallenges(e){this.setState({challenges:e}),this.challengeGridRef&&this.challengeGridRef.setChallenges(e)}updateBottles(e){this.setState({bottles:e}),this.dashboardRef&&this.dashboardRef.setBottles(e)}render(){const e=this.state.connectedAddress;return e&&`${e.slice(0,6)}${e.slice(-4)}`,b("div",{className:"app-shell"},b("div",{className:"vending-machine"},b("div",{className:"machine-brand-panel"},b("h1",{"data-text":"MILADYCOLA"},"MILADYCOLA"),b("p",{className:"tagline"},"Insert coin  Select prize  Test your luck"),b(bp,{colasseumIndexer:this.props.colasseumIndexer,contractService:this.props.contractService,asStickers:!0})),b("div",{className:"machine-display"},b(rw,{ref:t=>{this.challengeGridRef=t},challenges:this.state.challenges,contractService:this.props.contractService,asProductGrid:!0})),b("div",{className:"machine-controls"},b("div",{className:"numpad"},b("div",{className:"numpad__display"},b("span",{className:`numpad__display-text ${this.state.numpadInput?"numpad__display-text--input":""}`},this.state.numpadInput?`SELECT: ${this.state.numpadInput.toUpperCase()}_`:e?`WALLET: ${e}`:">>> CONNECT WALLET TO PLAY <<<")),b("div",{className:"numpad__letters"},["A","B","C","D","E","F","G","H","I","J"].map(t=>b("button",{className:"numpad__btn numpad__btn--letter",onClick:()=>this.handleNumpadPress(t)},t))),b("div",{className:"numpad__numbers"},["1","2","3","4","5","6","7","8","9","","0",""].map(t=>b("button",{className:`numpad__btn ${t===""?"numpad__btn--action":""} ${t===""?"numpad__btn--clear":""}`,onClick:()=>this.handleNumpadPress(t)},t)))),b("div",{className:"machine-info"},b(j6,{walletService:this.props.walletService,compact:!0}),b("div",{className:"machine-info__actions"},b("button",{className:"btn primary small",type:"button",disabled:!e,onClick:()=>ie.emit("modal:open",{modal:"challengeWizard"})},"+ Stock Prize"),b("button",{className:"btn ghost small",type:"button",onClick:()=>window.open("/docs.html","_blank","noopener")},"? Docs")),b("div",{className:"machine-info__stats"},b("div",{className:"machine-info__stat"},b("span",{className:"machine-info__stat-label"},"Your Total"),b("span",{className:"machine-info__stat-value"},this.state.bottles.length)),b("div",{className:"machine-info__stat"},b("span",{className:"machine-info__stat-label"},"Your Live"),b("span",{className:"machine-info__stat-value"},this.state.bottles.filter(t=>t.status==="active").length)),b("div",{className:"machine-info__stat"},b("span",{className:"machine-info__stat-label"},"Your Wins"),b("span",{className:"machine-info__stat-value"},this.state.bottles.filter(t=>t.status==="won").length)),b("div",{className:"machine-info__stat"},b("span",{className:"machine-info__stat-label"},"Total Prizes"),b("span",{className:"machine-info__stat-value"},this.state.challenges.length))))),b("div",{className:"dispense-slot"},b("div",{className:"dispense-slot__header"},b("div",{className:"dispense-slot__label"}," Dispense Tray "),b("button",{className:"btn ghost small dispense-slot__refresh",type:"button",onClick:()=>ie.emit("dashboard:refresh")},"Refresh")),b(vp,{ref:t=>{this.dashboardRef=t},bottles:this.state.bottles,contractService:this.props.contractService,compact:!0})),b("footer",{className:"machine-footer"},b("a",{className:"social-pill",href:"https://x.com/miladycola",target:"_blank",rel:"noreferrer","aria-label":"MiladyCola on X"},b("span",null,"")))),b(Ep,{walletService:this.props.walletService,contractService:this.props.contractService,challenges:this.state.challenges}))}slotCodeToIndex(e){if(!e||e.length<2)return-1;const t=e[0].toUpperCase(),r=parseInt(e.slice(1),10);if(t<"A"||t>"J"||isNaN(r)||r<1||r>3)return-1;const i=t.charCodeAt(0)-65,s=r-1;return i*3+s}getSortedChallenges(){return[...this.state.challenges].sort((e,t)=>{const r=parseFloat(e.appraisalEth)||0;return(parseFloat(t.appraisalEth)||0)-r})}handleNumpadPress(e){const{numpadInput:t,challenges:r}=this.state;if(e===""){if(t.length>=2){const i=this.getSortedChallenges(),s=this.slotCodeToIndex(t);if(s>=0&&s<i.length){const o=i[s];o.status==="active"&&ie.emit("modal:open",{modal:"entry",challenge:o,slotIndex:t.toUpperCase()})}}this.setState({numpadInput:""})}else e===""?this.setState({numpadInput:""}):t.length<3&&this.setState({numpadInput:t+e})}}class xw extends qt{constructor(e){super(e)}render(){return b(Ew,{walletService:this.props.walletService,contractService:this.props.contractService,colasseumIndexer:this.props.colasseumIndexer,devService:this.props.devService,useFixtures:this.props.useFixtures})}}class uc extends qt{constructor(t){super(t);oe(this,"handleConnect",()=>{ie.emit("wallet:select")});oe(this,"handleDisconnect",async()=>{try{await this.props.walletService.disconnect()}catch(t){console.error("Wallet disconnect failed:",t)}});oe(this,"handleHomeClick",()=>{this.props.onHomeClick&&this.props.onHomeClick()});this.state={connected:!1,address:null}}didMount(){var t,r,i,s;if((r=(t=this.props.walletService).isConnected)!=null&&r.call(t)){const o=((s=(i=this.props.walletService).getAddress)==null?void 0:s.call(i))||this.props.walletService.address;queueMicrotask(()=>{this.setState({connected:!0,address:o})})}this.subscribe("wallet:connected",o=>{this.setState({connected:!0,address:o.address})}),this.subscribe("wallet:disconnected",()=>{this.setState({connected:!1,address:null})})}formatAddress(t){return t?`${t.slice(0,6)}${t.slice(-4)}`:""}render(){const{connected:t,address:r}=this.state;return b("header",{className:`wallet-bar challenge-header ${t?"connected":""}`},b("div",{className:"challenge-header__left"},b("button",{className:"btn ghost challenge-header__home",type:"button",onClick:this.handleHomeClick}," Home")),b("div",{className:"wallet-tray"},!t&&b("button",{className:"btn secondary",type:"button",onClick:this.handleConnect},"Connect wallet"),t&&b("span",null,this.formatAddress(r)),t&&b("button",{className:"btn ghost small disconnect-btn",type:"button",onClick:this.handleDisconnect},b("span",{"aria-hidden":"true"},""),b("span",{className:"disconnect-text"},"Disconnect"))))}}class _w extends qt{constructor(e){super(e),this.state={challenge:null,bottles:[],loading:!0,error:null,connectedAddress:null},this.dashboardRef=null}didMount(){var e,t,r,i,s;if((e=this.props.contractService)!=null&&e.provider&&In.setProvider(this.props.contractService.provider),(r=(t=this.props.walletService)==null?void 0:t.isConnected)!=null&&r.call(t)){const o=(s=(i=this.props.walletService).getAddress)==null?void 0:s.call(i);o&&queueMicrotask(()=>{this.setState({connectedAddress:o}),this.loadUserBottles(o)})}this.subscribe("wallet:connected",async({address:o})=>{this.setState({connectedAddress:o}),await this.loadUserBottles(o)}),this.subscribe("wallet:disconnected",()=>{this.setState({connectedAddress:null,bottles:[]})}),this.subscribe("claim:submit",async({bottle:o,passphrase:a})=>{await this.handleClaim(o,a)}),this.subscribe("indexer:newEvents",async({eventType:o})=>{(o==="ChallengeAccepted"||o==="Victor"||o==="Surrender")&&(await this.loadChallenge(),this.state.connectedAddress&&await this.loadUserBottles(this.state.connectedAddress))}),this.subscribe("colasseum:indexerReady",()=>{this.loadChallenge(),this.state.connectedAddress&&this.loadUserBottles(this.state.connectedAddress)}),this.loadChallenge()}async loadChallenge(){const{challengeId:e,contractService:t,colasseumIndexer:r}=this.props;if(!(t!=null&&t.initialized)){this.setState({loading:!1,error:"Contract service not available"});return}try{this.setState({loading:!0,error:null});const i=await t.getTrial(parseInt(e,10));if(!i){this.setState({loading:!1,error:"Challenge not found"});return}let s=0;if(r!=null&&r.initialized)try{s=(await r.indexer.events.query("ChallengeAccepted",{where:{trialId:e},limit:1e4})).events.length}catch(h){console.warn("[ChallengePageView] Could not count entries:",h.message)}let o="",a=`Challenge #${i.id}`;try{const h=await In.getMetadata(i.nftContract,i.nftId);h!=null&&h.image&&(o=h.image),h!=null&&h.name&&(a=h.name)}catch(h){console.warn("[ChallengePageView] Could not fetch NFT metadata:",h.message)}const l={id:i.id,title:a,lore:i.lore||"",nftContract:i.nftContract,tokenId:i.nftId,appraisalEth:this.calculateAppraisalFromDifficulty(i.difficulty),difficulty:i.difficulty,potEth:i.ethPool,bottlesSold:s,image:o,creator:i.creator,creationTime:i.creationTime,status:i.active?"active":i.cancelled?"cancelled":"ended"};this.setState({challenge:l,loading:!1})}catch(i){console.error("[ChallengePageView] Failed to load challenge:",i),this.setState({loading:!1,error:i.message})}}async loadUserBottles(e){const{challengeId:t,contractService:r,colasseumIndexer:i}=this.props;if(!(!(i!=null&&i.initialized)||!(r!=null&&r.initialized)))try{const o=(await i.getUserChances(e,{includeClaimed:!0})).filter(u=>String(u.trialId)===String(t)).map(u=>typeof u.chanceId=="object"?u.chanceId.toNumber():Number(u.chanceId));if(o.length===0){this.setState({bottles:[]});return}const a=await r.getChances(o),l=await r.getTrial(parseInt(t,10)),h=await Promise.all(a.filter(u=>!u.refunded).map(async u=>{var U;const g=this.calculateOddsFromChancesAndDifficulty(u.numChances,l.difficulty),x=1e-9,A=(u.numChances*x).toFixed(4),E=Math.floor(Date.now()/1e3),I=768,T=u.targetTimestamp+I,R=Math.max(0,T-E);let O=null;const B=Nh(u.id);if(u.claimed)O="win";else if(B!==null)O=B?"win":"loss";else if(R<=0)try{const q=await this.evaluateChanceOutcome(u,l,e);q!==null&&(O=q?"win":"loss",Sh(u.id,q),kh(u.id))}catch(q){console.warn("[ChallengePageView] Could not evaluate chance:",q.message)}return{id:u.id,challengeId:u.trialId,challengeTitle:((U=this.state.challenge)==null?void 0:U.title)||`Challenge #${u.trialId}`,odds:g,priceEth:A,purchaseTime:0,refrigerationEnds:T*1e3,cooldownRemaining:R,status:this.getBottleStatus(u),commitment:u.commitment,targetTimestamp:u.targetTimestamp,numChances:u.numChances,claimed:u.claimed,difficulty:l.difficulty.toString(),result:O}}));this.setState({bottles:h}),this.dashboardRef&&this.dashboardRef.setBottles(h)}catch(s){console.error("[ChallengePageView] Failed to load user bottles:",s)}}async evaluateChanceOutcome(e,t,r){const i=Hi(e.id);if(!i||!await this.props.contractService.isRandomnessAvailable(e.targetTimestamp))return null;const{root:o}=await this.props.contractService.findCanonicalBeaconRoot(e.targetTimestamp);if(!o||o==="0x"+"0".repeat(64))return null;const{isWinner:a}=await ai.evaluateWinCondition(i,o,t.difficulty,e.numChances);return a}async handleClaim(e,t){const{contractService:r,devService:i}=this.props,s=this.state.connectedAddress;if(!(r!=null&&r.initialized)){ie.emit("claim:status",{status:"",error:"Contract service not available"});return}if(!s){ie.emit("claim:status",{status:"",error:"Please connect your wallet"});return}if(!t){ie.emit("claim:status",{status:"",error:"Passphrase is required"});return}try{if(ie.emit("claim:status",{status:"verifying"}),await ai.generateCommitment(t,s)!==e.commitment){ie.emit("claim:status",{status:"",error:"Passphrase does not match this bottle."});return}ie.emit("claim:status",{status:"generating"});let a,l;if(i!=null&&i.isEnabled()&&i.oracleSeed)console.log("[ChallengePageView] Using DevService for beacon root (dev mode with seed)"),l=e.targetTimestamp,a=await i.prepareForClaim(e.targetTimestamp,768,async()=>{const u=await r.findCanonicalBeaconRoot(e.targetTimestamp);return l=u.timestamp,u.root});else{console.log("[ChallengePageView] Finding canonical beacon root from real blocks");const u=await r.findCanonicalBeaconRoot(e.targetTimestamp);a=u.root,l=u.timestamp,console.log("[ChallengePageView] Found canonical beacon root at timestamp:",l)}if(!a||a==="0x"+"0".repeat(64)){ie.emit("claim:status",{status:"",error:"Randomness not available yet."});return}const{solidityProof:h}=await ai.generateProof(t,s,a,e.commitment,e.difficulty,e.numChances);ie.emit("claim:status",{status:"claiming"}),await r.victory(e.id,l,h),ie.emit("claim:status",{status:"success"}),await this.loadUserBottles(s)}catch(o){console.error("[ChallengePageView] Claim failed:",o),ie.emit("claim:status",{status:"",error:o.message})}}calculateAppraisalFromDifficulty(e){const t=BigInt("21888242871839275222246405745257275088548364400416034343698204186575808495617"),r=BigInt("1000000000");try{const i=BigInt(e);if(i===0n)return"0";const s=t*r/i;return(Number(s)/1e18).toFixed(4)}catch{return"0"}}calculateOddsFromChancesAndDifficulty(e,t){const r=BigInt("21888242871839275222246405745257275088548364400416034343698204186575808495617");try{const i=BigInt(e),s=BigInt(t),a=i*s*100n/r,l=Number(a);return Math.min(l,99)}catch{return 1}}getBottleStatus(e){const t=Math.floor(Date.now()/1e3),r=768;return e.claimed?"claimed":e.refunded?"refunded":t<e.targetTimestamp+r?"cooling":"ready"}render(){const{challenge:e,bottles:t,loading:r,error:i,connectedAddress:s}=this.state,{walletService:o,contractService:a,router:l}=this.props,h=()=>{const g=window.location.pathname.startsWith("/miladycolav4")?"/miladycolav4/":"/";l.navigate(g)};if(r)return b("div",{className:"app-shell challenge-page"},b(uc,{walletService:o,onHomeClick:h}),b("main",{className:"app-main challenge-page__main"},b("div",{className:"challenge-page__loading"},b("p",{className:"muted"},"Loading challenge..."))));if(i||!e)return b("div",{className:"app-shell challenge-page"},b(uc,{walletService:o,onHomeClick:h}),b("main",{className:"app-main challenge-page__main"},b("div",{className:"challenge-page__error"},b("h2",null,"Challenge Not Found"),b("p",{className:"muted"},i||"This challenge does not exist."),b("button",{className:"btn primary",type:"button",onClick:h},"Back to Home"))));const u=t.filter(g=>String(g.challengeId)===String(e.id));return b("div",{className:"app-shell challenge-page"},b(uc,{walletService:o,onHomeClick:h}),b("main",{className:"app-main challenge-page__main"},b("section",{className:"challenge-page__hero"},b(wp,{challenge:e,connectedAddress:s})),b(bp,{colasseumIndexer:this.props.colasseumIndexer,contractService:a,challengeId:e.id}),b(vp,{ref:g=>{this.dashboardRef=g},bottles:u,contractService:a}),b("footer",{className:"footer-note"},b("p",null,"Thanks for playing!"),b("div",{className:"social-links"},b("a",{className:"social-pill",href:"https://x.com/miladycola",target:"_blank",rel:"noreferrer","aria-label":"MiladyCola on X"},b("span",{className:"social-pill__icon"},""))))),b(Ep,{walletService:o,contractService:a,challenges:[e]}))}}const ta=(n,e,t="#ffffff")=>{const r=`
    <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 64 64">
      <rect width="64" height="64" rx="12" fill="${e}" />
      <text x="50%" y="55%" font-size="20" font-family="Inter, system-ui" text-anchor="middle" fill="${t}">
        ${n}
      </text>
    </svg>
  `;return`data:image/svg+xml,${encodeURIComponent(r)}`},kw={rabby:ta("RB","#7c5dff"),rainbow:ta("RB","#ff8f70"),phantom:ta("PH","#6a5acd"),metamask:ta("MM","#f6851b")};async function Sw(){const n="mainnet",e=`contracts-${n}.json`,t=`/src/generated/${e}`;try{const r=await fetch(t);if(!r.ok)throw new Error(`HTTP ${r.status}`);const i=await r.json();return console.log(`[main] Loaded contract config from ${e} (network: ${n})`),i}catch(r){return console.warn(`[main] No contract config found at ${t}, using fixture mode:`,r.message),null}}async function Nw(){var h,u;const n=new Jg(ie),e=new q6(ie),t=new G6(ie),r=await Sw(),i=r?new H6({oracleAddress:(u=(h=r.contracts)==null?void 0:h.oracle)==null?void 0:u.address,timeWarpUrl:r.timeWarpUrl||null,oracleSeed:r.oracleSeed||null}):null;if(ie.on("wallet:connected",async({address:g,provider:x,signer:A,ethersProvider:E})=>{if(console.log("[main] Wallet connected:",g),e.initialized)try{const I=r==null?void 0:r.chainId;if(I&&x){const R=x,O=await R.request({method:"eth_chainId"}),B=parseInt(O,16);if(console.log("[main] Wallet chain:",B,"Expected:",I),B!==I){const U="0x"+I.toString(16);try{await R.request({method:"wallet_switchEthereumChain",params:[{chainId:U}]}),console.log("[main] Switched wallet to chain",I)}catch(q){q.code===4902?(await R.request({method:"wallet_addEthereumChain",params:[{chainId:U,chainName:`Local Anvil (${I})`,rpcUrls:[r.rpcUrl||"http://127.0.0.1:8545"],nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18}}]}),console.log("[main] Added and switched to chain",I)):console.error("[main] Failed to switch chain:",q)}}}if(x){const O=new E6(x).getSigner();e.setSigner(O),console.log("[main] ContractService signer set after chain validation")}else A&&(e.setSigner(A),console.log("[main] ContractService signer set from WalletService"));const T=await e.provider.getNetwork();console.log("[main] Contract network chainId:",T.chainId)}catch(I){console.error("[main] Failed to set signer:",I)}}),ie.on("wallet:disconnected",()=>{console.log("[main] Wallet disconnected"),e.clearSigner()}),ie.on("wallet:chainChanged",async({chainId:g})=>{console.log("[main] Chain changed:",g)}),r){try{await e.initialize(r)}catch(g){console.error("Failed to initialize ContractService:",g)}t.initialize(r).then(()=>console.log("[main] ColasseumIndexer initialized")).catch(g=>console.error("Failed to initialize ColasseumIndexer:",g))}try{await n.initialize(),n.walletIcons=kw}catch(g){console.error("Failed to initialize WalletService:",g)}const s=new Ip,o=document.getElementById("app");if(!o){console.error("Root element #app not found");return}const a=()=>(Ih(b(xw,{walletService:n,contractService:e,colasseumIndexer:t,devService:i,useFixtures:!r}),o),{cleanup:()=>{}}),l=({challengeId:g})=>(Ih(b(_w,{challengeId:g,walletService:n,contractService:e,colasseumIndexer:t,devService:i,router:s,useFixtures:!r}),o),{cleanup:()=>{}});s.on("/",a),s.on("/:challengeId",l),s.on("/miladycolav4",a),s.on("/miladycolav4/",a),s.on("/miladycolav4/:challengeId",l),s.notFound(g=>{console.warn("[main] No route matched for:",g),a()}),await s.start(),ie.on("wallet:error",g=>{console.error("A wallet error occurred:",g)}),window.__services={walletService:n,contractService:e,colasseumIndexer:t,devService:i,eventBus:ie,router:s},console.log("[main] Services exposed on window.__services")}Nw().catch(console.error);
